(function(){"use strict";var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ab(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Ca,bf;function En(){return bf||(bf=1,Ca=function(e){try{return!!e()}catch{return!0}}),Ca}var Ia,vf;function Qo(){if(vf)return Ia;vf=1;var e=En();return Ia=!e(function(){var t=(function(){}).bind();return typeof t!="function"||t.hasOwnProperty("prototype")}),Ia}var wa,Af;function Bn(){if(Af)return wa;Af=1;var e=Qo(),t=Function.prototype,n=t.call,r=e&&t.bind.bind(n,n);return wa=e?r:function(i){return function(){return n.apply(i,arguments)}},wa}var Pa,xf;function Jo(){if(xf)return Pa;xf=1;var e=Bn(),t=e({}.toString),n=e("".slice);return Pa=function(r){return n(t(r),8,-1)},Pa}var Ea,Sf;function cb(){if(Sf)return Ea;Sf=1;var e=Bn(),t=En(),n=Jo(),r=Object,i=e("".split);return Ea=t(function(){return!r("z").propertyIsEnumerable(0)})?function(o){return n(o)==="String"?i(o,""):r(o)}:r,Ea}var Ba,Cf;function es(){return Cf||(Cf=1,Ba=function(e){return e==null}),Ba}var Ra,If;function ts(){if(If)return Ra;If=1;var e=es(),t=TypeError;return Ra=function(n){if(e(n))throw new t("Can't call method on "+n);return n},Ra}var Da,wf;function ao(){if(wf)return Da;wf=1;var e=cb(),t=ts();return Da=function(n){return e(t(n))},Da}var co,Pf;function Zt(){if(Pf)return co;Pf=1;var e=function(t){return t&&t.Math===Math&&t};return co=e(typeof globalThis=="object"&&globalThis)||e(typeof window=="object"&&window)||e(typeof self=="object"&&self)||e(typeof gf=="object"&&gf)||e(typeof co=="object"&&co)||function(){return this}()||Function("return this")(),co}var ka={exports:{}},Ta,Ef;function yn(){return Ef||(Ef=1,Ta=!1),Ta}var Na,Bf;function Oa(){if(Bf)return Na;Bf=1;var e=Zt(),t=Object.defineProperty;return Na=function(n,r){try{t(e,n,{value:r,configurable:!0,writable:!0})}catch{e[n]=r}return r},Na}var Rf;function ns(){if(Rf)return ka.exports;Rf=1;var e=yn(),t=Zt(),n=Oa(),r="__core-js_shared__",i=ka.exports=t[r]||n(r,{});return(i.versions||(i.versions=[])).push({version:"3.44.0",mode:e?"pure":"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.44.0/LICENSE",source:"https://github.com/zloirock/core-js"}),ka.exports}var Ma,Df;function kf(){if(Df)return Ma;Df=1;var e=ns();return Ma=function(t,n){return e[t]||(e[t]=n||{})},Ma}var qa,Tf;function Ua(){if(Tf)return qa;Tf=1;var e=ts(),t=Object;return qa=function(n){return t(e(n))},qa}var Fa,Nf;function Hn(){if(Nf)return Fa;Nf=1;var e=Bn(),t=Ua(),n=e({}.hasOwnProperty);return Fa=Object.hasOwn||function(i,o){return n(t(i),o)},Fa}var La,Of;function Mf(){if(Of)return La;Of=1;var e=Bn(),t=0,n=Math.random(),r=e(1.1.toString);return La=function(i){return"Symbol("+(i===void 0?"":i)+")_"+r(++t+n,36)},La}var Ga,qf;function uo(){if(qf)return Ga;qf=1;var e=Zt(),t=e.navigator,n=t&&t.userAgent;return Ga=n?String(n):"",Ga}var Ha,Uf;function Ff(){if(Uf)return Ha;Uf=1;var e=Zt(),t=uo(),n=e.process,r=e.Deno,i=n&&n.versions||r&&r.version,o=i&&i.v8,s,c;return o&&(s=o.split("."),c=s[0]>0&&s[0]<4?1:+(s[0]+s[1])),!c&&t&&(s=t.match(/Edge\/(\d+)/),(!s||s[1]>=74)&&(s=t.match(/Chrome\/(\d+)/),s&&(c=+s[1]))),Ha=c,Ha}var ja,Lf;function Gf(){if(Lf)return ja;Lf=1;var e=Ff(),t=En(),n=Zt(),r=n.String;return ja=!!Object.getOwnPropertySymbols&&!t(function(){var i=Symbol("symbol detection");return!r(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&e&&e<41}),ja}var Va,Hf;function jf(){if(Hf)return Va;Hf=1;var e=Gf();return Va=e&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Va}var za,Vf;function dn(){if(Vf)return za;Vf=1;var e=Zt(),t=kf(),n=Hn(),r=Mf(),i=Gf(),o=jf(),s=e.Symbol,c=t("wks"),a=o?s.for||s:s&&s.withoutSetter||r;return za=function(u){return n(c,u)||(c[u]=i&&n(s,u)?s[u]:a("Symbol."+u)),c[u]},za}var Ka,zf;function tn(){if(zf)return Ka;zf=1;var e=typeof document=="object"&&document.all;return Ka=typeof e>"u"&&e!==void 0?function(t){return typeof t=="function"||t===e}:function(t){return typeof t=="function"},Ka}var $a,Kf;function ar(){if(Kf)return $a;Kf=1;var e=tn();return $a=function(t){return typeof t=="object"?t!==null:e(t)},$a}var Wa,$f;function Gt(){if($f)return Wa;$f=1;var e=ar(),t=String,n=TypeError;return Wa=function(r){if(e(r))return r;throw new n(t(r)+" is not an object")},Wa}var Ya={},Za,Wf;function Mn(){if(Wf)return Za;Wf=1;var e=En();return Za=!e(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),Za}var Xa,Yf;function Zf(){if(Yf)return Xa;Yf=1;var e=Mn(),t=En();return Xa=e&&t(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Xa}var Qa={},Ja,Xf;function rs(){if(Xf)return Ja;Xf=1;var e=Zt(),t=ar(),n=e.document,r=t(n)&&t(n.createElement);return Ja=function(i){return r?n.createElement(i):{}},Ja}var ec,Qf;function Jf(){if(Qf)return ec;Qf=1;var e=Mn(),t=En(),n=rs();return ec=!e&&!t(function(){return Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a!==7}),ec}var tc,em;function Ht(){if(em)return tc;em=1;var e=Qo(),t=Function.prototype.call;return tc=e?t.bind(t):function(){return t.apply(t,arguments)},tc}var nc,tm;function xr(){if(tm)return nc;tm=1;var e=Zt(),t=tn(),n=function(r){return t(r)?r:void 0};return nc=function(r,i){return arguments.length<2?n(e[r]):e[r]&&e[r][i]},nc}var rc,nm;function is(){if(nm)return rc;nm=1;var e=Bn();return rc=e({}.isPrototypeOf),rc}var ic,rm;function im(){if(rm)return ic;rm=1;var e=xr(),t=tn(),n=is(),r=jf(),i=Object;return ic=r?function(o){return typeof o=="symbol"}:function(o){var s=e("Symbol");return t(s)&&n(s.prototype,i(o))},ic}var oc,om;function os(){if(om)return oc;om=1;var e=String;return oc=function(t){try{return e(t)}catch{return"Object"}},oc}var sc,sm;function gn(){if(sm)return sc;sm=1;var e=tn(),t=os(),n=TypeError;return sc=function(r){if(e(r))return r;throw new n(t(r)+" is not a function")},sc}var ac,am;function ii(){if(am)return ac;am=1;var e=gn(),t=es();return ac=function(n,r){var i=n[r];return t(i)?void 0:e(i)},ac}var cc,cm;function ub(){if(cm)return cc;cm=1;var e=Ht(),t=tn(),n=ar(),r=TypeError;return cc=function(i,o){var s,c;if(o==="string"&&t(s=i.toString)&&!n(c=e(s,i))||t(s=i.valueOf)&&!n(c=e(s,i))||o!=="string"&&t(s=i.toString)&&!n(c=e(s,i)))return c;throw new r("Can't convert object to primitive value")},cc}var uc,um;function lb(){if(um)return uc;um=1;var e=Ht(),t=ar(),n=im(),r=ii(),i=ub(),o=dn(),s=TypeError,c=o("toPrimitive");return uc=function(a,u){if(!t(a)||n(a))return a;var l=r(a,c),f;if(l){if(u===void 0&&(u="default"),f=e(l,a,u),!t(f)||n(f))return f;throw new s("Can't convert object to primitive value")}return u===void 0&&(u="number"),i(a,u)},uc}var lc,lm;function dm(){if(lm)return lc;lm=1;var e=lb(),t=im();return lc=function(n){var r=e(n,"string");return t(r)?r:r+""},lc}var fm;function Sr(){if(fm)return Qa;fm=1;var e=Mn(),t=Jf(),n=Zf(),r=Gt(),i=dm(),o=TypeError,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,a="enumerable",u="configurable",l="writable";return Qa.f=e?n?function(d,m,h){if(r(d),m=i(m),r(h),typeof d=="function"&&m==="prototype"&&"value"in h&&l in h&&!h[l]){var p=c(d,m);p&&p[l]&&(d[m]=h.value,h={configurable:u in h?h[u]:p[u],enumerable:a in h?h[a]:p[a],writable:!1})}return s(d,m,h)}:s:function(d,m,h){if(r(d),m=i(m),r(h),t)try{return s(d,m,h)}catch{}if("get"in h||"set"in h)throw new o("Accessors not supported");return"value"in h&&(d[m]=h.value),d},Qa}var dc,mm;function db(){if(mm)return dc;mm=1;var e=Math.ceil,t=Math.floor;return dc=Math.trunc||function(r){var i=+r;return(i>0?t:e)(i)},dc}var fc,hm;function ss(){if(hm)return fc;hm=1;var e=db();return fc=function(t){var n=+t;return n!==n||n===0?0:e(n)},fc}var mc,pm;function fb(){if(pm)return mc;pm=1;var e=ss(),t=Math.max,n=Math.min;return mc=function(r,i){var o=e(r);return o<0?t(o+i,0):n(o,i)},mc}var hc,_m;function mb(){if(_m)return hc;_m=1;var e=ss(),t=Math.min;return hc=function(n){var r=e(n);return r>0?t(r,9007199254740991):0},hc}var pc,ym;function gm(){if(ym)return pc;ym=1;var e=mb();return pc=function(t){return e(t.length)},pc}var _c,bm;function hb(){if(bm)return _c;bm=1;var e=ao(),t=fb(),n=gm(),r=function(i){return function(o,s,c){var a=e(o),u=n(a);if(u===0)return!i&&-1;var l=t(c,u),f;if(i&&s!==s){for(;u>l;)if(f=a[l++],f!==f)return!0}else for(;u>l;l++)if((i||l in a)&&a[l]===s)return i||l||0;return!i&&-1}};return _c={includes:r(!0),indexOf:r(!1)},_c}var yc,vm;function gc(){return vm||(vm=1,yc={}),yc}var bc,Am;function xm(){if(Am)return bc;Am=1;var e=Bn(),t=Hn(),n=ao(),r=hb().indexOf,i=gc(),o=e([].push);return bc=function(s,c){var a=n(s),u=0,l=[],f;for(f in a)!t(i,f)&&t(a,f)&&o(l,f);for(;c.length>u;)t(a,f=c[u++])&&(~r(l,f)||o(l,f));return l},bc}var vc,Sm;function Ac(){return Sm||(Sm=1,vc=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),vc}var xc,Cm;function pb(){if(Cm)return xc;Cm=1;var e=xm(),t=Ac();return xc=Object.keys||function(r){return e(r,t)},xc}var Im;function _b(){if(Im)return Ya;Im=1;var e=Mn(),t=Zf(),n=Sr(),r=Gt(),i=ao(),o=pb();return Ya.f=e&&!t?Object.defineProperties:function(c,a){r(c);for(var u=i(a),l=o(a),f=l.length,d=0,m;f>d;)n.f(c,m=l[d++],u[m]);return c},Ya}var Sc,wm;function Pm(){if(wm)return Sc;wm=1;var e=xr();return Sc=e("document","documentElement"),Sc}var Cc,Em;function Ic(){if(Em)return Cc;Em=1;var e=kf(),t=Mf(),n=e("keys");return Cc=function(r){return n[r]||(n[r]=t(r))},Cc}var wc,Bm;function oi(){if(Bm)return wc;Bm=1;var e=Gt(),t=_b(),n=Ac(),r=gc(),i=Pm(),o=rs(),s=Ic(),c=">",a="<",u="prototype",l="script",f=s("IE_PROTO"),d=function(){},m=function(v){return a+l+c+v+a+"/"+l+c},h=function(v){v.write(m("")),v.close();var A=v.parentWindow.Object;return v=null,A},p=function(){var v=o("iframe"),A="java"+l+":",g;return v.style.display="none",i.appendChild(v),v.src=String(A),g=v.contentWindow.document,g.open(),g.write(m("document.F=Object")),g.close(),g.F},_,y=function(){try{_=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&_?h(_):p():h(_);for(var v=n.length;v--;)delete y[u][n[v]];return y()};return r[f]=!0,wc=Object.create||function(A,g){var b;return A!==null?(d[u]=e(A),b=new d,d[u]=null,b[f]=A):b=y(),g===void 0?b:t.f(b,g)},wc}var Pc,Rm;function yb(){if(Rm)return Pc;Rm=1;var e=dn(),t=oi(),n=Sr().f,r=e("unscopables"),i=Array.prototype;return i[r]===void 0&&n(i,r,{configurable:!0,value:t(null)}),Pc=function(o){i[r][o]=!0},Pc}var Ec,Dm;function lo(){return Dm||(Dm=1,Ec={}),Ec}var Bc,km;function gb(){if(km)return Bc;km=1;var e=Zt(),t=tn(),n=e.WeakMap;return Bc=t(n)&&/native code/.test(String(n)),Bc}var Rc,Tm;function as(){return Tm||(Tm=1,Rc=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}),Rc}var Dc,Nm;function Di(){if(Nm)return Dc;Nm=1;var e=Mn(),t=Sr(),n=as();return Dc=e?function(r,i,o){return t.f(r,i,n(1,o))}:function(r,i,o){return r[i]=o,r},Dc}var kc,Om;function si(){if(Om)return kc;Om=1;var e=gb(),t=Zt(),n=ar(),r=Di(),i=Hn(),o=ns(),s=Ic(),c=gc(),a="Object already initialized",u=t.TypeError,l=t.WeakMap,f,d,m,h=function(v){return m(v)?d(v):f(v,{})},p=function(v){return function(A){var g;if(!n(A)||(g=d(A)).type!==v)throw new u("Incompatible receiver, "+v+" required");return g}};if(e||o.state){var _=o.state||(o.state=new l);_.get=_.get,_.has=_.has,_.set=_.set,f=function(v,A){if(_.has(v))throw new u(a);return A.facade=v,_.set(v,A),A},d=function(v){return _.get(v)||{}},m=function(v){return _.has(v)}}else{var y=s("state");c[y]=!0,f=function(v,A){if(i(v,y))throw new u(a);return A.facade=v,r(v,y,A),A},d=function(v){return i(v,y)?v[y]:{}},m=function(v){return i(v,y)}}return kc={set:f,get:d,has:m,enforce:h,getterFor:p},kc}var Tc={},Nc={},Mm;function bb(){if(Mm)return Nc;Mm=1;var e={}.propertyIsEnumerable,t=Object.getOwnPropertyDescriptor,n=t&&!e.call({1:2},1);return Nc.f=n?function(i){var o=t(this,i);return!!o&&o.enumerable}:e,Nc}var qm;function Um(){if(qm)return Tc;qm=1;var e=Mn(),t=Ht(),n=bb(),r=as(),i=ao(),o=dm(),s=Hn(),c=Jf(),a=Object.getOwnPropertyDescriptor;return Tc.f=e?a:function(l,f){if(l=i(l),f=o(f),c)try{return a(l,f)}catch{}if(s(l,f))return r(!t(n.f,l,f),l[f])},Tc}var Oc={exports:{}},Mc,Fm;function Lm(){if(Fm)return Mc;Fm=1;var e=Mn(),t=Hn(),n=Function.prototype,r=e&&Object.getOwnPropertyDescriptor,i=t(n,"name"),o=i&&(function(){}).name==="something",s=i&&(!e||e&&r(n,"name").configurable);return Mc={EXISTS:i,PROPER:o,CONFIGURABLE:s},Mc}var qc,Gm;function Uc(){if(Gm)return qc;Gm=1;var e=Bn(),t=tn(),n=ns(),r=e(Function.toString);return t(n.inspectSource)||(n.inspectSource=function(i){return r(i)}),qc=n.inspectSource,qc}var Hm;function jm(){if(Hm)return Oc.exports;Hm=1;var e=Bn(),t=En(),n=tn(),r=Hn(),i=Mn(),o=Lm().CONFIGURABLE,s=Uc(),c=si(),a=c.enforce,u=c.get,l=String,f=Object.defineProperty,d=e("".slice),m=e("".replace),h=e([].join),p=i&&!t(function(){return f(function(){},"length",{value:8}).length!==8}),_=String(String).split("String"),y=Oc.exports=function(v,A,g){d(l(A),0,7)==="Symbol("&&(A="["+m(l(A),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),g&&g.getter&&(A="get "+A),g&&g.setter&&(A="set "+A),(!r(v,"name")||o&&v.name!==A)&&(i?f(v,"name",{value:A,configurable:!0}):v.name=A),p&&g&&r(g,"arity")&&v.length!==g.arity&&f(v,"length",{value:g.arity});try{g&&r(g,"constructor")&&g.constructor?i&&f(v,"prototype",{writable:!1}):v.prototype&&(v.prototype=void 0)}catch{}var b=a(v);return r(b,"source")||(b.source=h(_,typeof A=="string"?A:"")),v};return Function.prototype.toString=y(function(){return n(this)&&u(this).source||s(this)},"toString"),Oc.exports}var Fc,Vm;function Cr(){if(Vm)return Fc;Vm=1;var e=tn(),t=Sr(),n=jm(),r=Oa();return Fc=function(i,o,s,c){c||(c={});var a=c.enumerable,u=c.name!==void 0?c.name:o;if(e(s)&&n(s,u,c),c.global)a?i[o]=s:r(o,s);else{try{c.unsafe?i[o]&&(a=!0):delete i[o]}catch{}a?i[o]=s:t.f(i,o,{value:s,enumerable:!1,configurable:!c.nonConfigurable,writable:!c.nonWritable})}return i},Fc}var Lc={},zm;function vb(){if(zm)return Lc;zm=1;var e=xm(),t=Ac(),n=t.concat("length","prototype");return Lc.f=Object.getOwnPropertyNames||function(i){return e(i,n)},Lc}var Gc={},Km;function Ab(){return Km||(Km=1,Gc.f=Object.getOwnPropertySymbols),Gc}var Hc,$m;function xb(){if($m)return Hc;$m=1;var e=xr(),t=Bn(),n=vb(),r=Ab(),i=Gt(),o=t([].concat);return Hc=e("Reflect","ownKeys")||function(c){var a=n.f(i(c)),u=r.f;return u?o(a,u(c)):a},Hc}var jc,Wm;function Sb(){if(Wm)return jc;Wm=1;var e=Hn(),t=xb(),n=Um(),r=Sr();return jc=function(i,o,s){for(var c=t(o),a=r.f,u=n.f,l=0;l<c.length;l++){var f=c[l];!e(i,f)&&!(s&&e(s,f))&&a(i,f,u(o,f))}},jc}var Vc,Ym;function Zm(){if(Ym)return Vc;Ym=1;var e=En(),t=tn(),n=/#|\.prototype\./,r=function(a,u){var l=o[i(a)];return l===c?!0:l===s?!1:t(u)?e(u):!!u},i=r.normalize=function(a){return String(a).replace(n,".").toLowerCase()},o=r.data={},s=r.NATIVE="N",c=r.POLYFILL="P";return Vc=r,Vc}var zc,Xm;function nn(){if(Xm)return zc;Xm=1;var e=Zt(),t=Um().f,n=Di(),r=Cr(),i=Oa(),o=Sb(),s=Zm();return zc=function(c,a){var u=c.target,l=c.global,f=c.stat,d,m,h,p,_,y;if(l?m=e:f?m=e[u]||i(u,{}):m=e[u]&&e[u].prototype,m)for(h in a){if(_=a[h],c.dontCallGetSet?(y=t(m,h),p=y&&y.value):p=m[h],d=s(l?h:u+(f?".":"#")+h,c.forced),!d&&p!==void 0){if(typeof _==typeof p)continue;o(_,p)}(c.sham||p&&p.sham)&&n(_,"sham",!0),r(m,h,_,c)}},zc}var Kc,Qm;function Cb(){if(Qm)return Kc;Qm=1;var e=En();return Kc=!e(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Kc}var $c,Jm;function cs(){if(Jm)return $c;Jm=1;var e=Hn(),t=tn(),n=Ua(),r=Ic(),i=Cb(),o=r("IE_PROTO"),s=Object,c=s.prototype;return $c=i?s.getPrototypeOf:function(a){var u=n(a);if(e(u,o))return u[o];var l=u.constructor;return t(l)&&u instanceof l?l.prototype:u instanceof s?c:null},$c}var Wc,eh;function ki(){if(eh)return Wc;eh=1;var e=En(),t=tn(),n=ar(),r=oi(),i=cs(),o=Cr(),s=dn(),c=yn(),a=s("iterator"),u=!1,l,f,d;[].keys&&(d=[].keys(),"next"in d?(f=i(i(d)),f!==Object.prototype&&(l=f)):u=!0);var m=!n(l)||e(function(){var h={};return l[a].call(h)!==h});return m?l={}:c&&(l=r(l)),t(l[a])||o(l,a,function(){return this}),Wc={IteratorPrototype:l,BUGGY_SAFARI_ITERATORS:u},Wc}var Yc,th;function us(){if(th)return Yc;th=1;var e=Sr().f,t=Hn(),n=dn(),r=n("toStringTag");return Yc=function(i,o,s){i&&!s&&(i=i.prototype),i&&!t(i,r)&&e(i,r,{configurable:!0,value:o})},Yc}var Zc,nh;function Ib(){if(nh)return Zc;nh=1;var e=ki().IteratorPrototype,t=oi(),n=as(),r=us(),i=lo(),o=function(){return this};return Zc=function(s,c,a,u){var l=c+" Iterator";return s.prototype=t(e,{next:n(+!u,a)}),r(s,l,!1,!0),i[l]=o,s},Zc}var Xc,rh;function wb(){if(rh)return Xc;rh=1;var e=Bn(),t=gn();return Xc=function(n,r,i){try{return e(t(Object.getOwnPropertyDescriptor(n,r)[i]))}catch{}},Xc}var Qc,ih;function Pb(){if(ih)return Qc;ih=1;var e=ar();return Qc=function(t){return e(t)||t===null},Qc}var Jc,oh;function Eb(){if(oh)return Jc;oh=1;var e=Pb(),t=String,n=TypeError;return Jc=function(r){if(e(r))return r;throw new n("Can't set "+t(r)+" as a prototype")},Jc}var eu,sh;function ah(){if(sh)return eu;sh=1;var e=wb(),t=ar(),n=ts(),r=Eb();return eu=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,o={},s;try{s=e(Object.prototype,"__proto__","set"),s(o,[]),i=o instanceof Array}catch{}return function(a,u){return n(a),r(u),t(a)&&(i?s(a,u):a.__proto__=u),a}}():void 0),eu}var tu,ch;function uh(){if(ch)return tu;ch=1;var e=nn(),t=Ht(),n=yn(),r=Lm(),i=tn(),o=Ib(),s=cs(),c=ah(),a=us(),u=Di(),l=Cr(),f=dn(),d=lo(),m=ki(),h=r.PROPER,p=r.CONFIGURABLE,_=m.IteratorPrototype,y=m.BUGGY_SAFARI_ITERATORS,v=f("iterator"),A="keys",g="values",b="entries",C=function(){return this};return tu=function(I,S,P,T,D,w,E){o(P,S,T);var k=function(De){if(De===D&&J)return J;if(!y&&De&&De in de)return de[De];switch(De){case A:return function(){return new P(this,De)};case g:return function(){return new P(this,De)};case b:return function(){return new P(this,De)}}return function(){return new P(this)}},F=S+" Iterator",V=!1,de=I.prototype,W=de[v]||de["@@iterator"]||D&&de[D],J=!y&&W||k(D),le=S==="Array"&&de.entries||W,K,ae,me;if(le&&(K=s(le.call(new I)),K!==Object.prototype&&K.next&&(!n&&s(K)!==_&&(c?c(K,_):i(K[v])||l(K,v,C)),a(K,F,!0,!0),n&&(d[F]=C))),h&&D===g&&W&&W.name!==g&&(!n&&p?u(de,"name",g):(V=!0,J=function(){return t(W,this)})),D)if(ae={values:k(g),keys:w?J:k(A),entries:k(b)},E)for(me in ae)(y||V||!(me in de))&&l(de,me,ae[me]);else e({target:S,proto:!0,forced:y||V},ae);return(!n||E)&&de[v]!==J&&l(de,v,J,{name:D}),d[S]=J,ae},tu}var nu,lh;function fo(){return lh||(lh=1,nu=function(e,t){return{value:e,done:t}}),nu}var ru,dh;function fh(){if(dh)return ru;dh=1;var e=ao(),t=yb(),n=lo(),r=si(),i=Sr().f,o=uh(),s=fo(),c=yn(),a=Mn(),u="Array Iterator",l=r.set,f=r.getterFor(u);ru=o(Array,"Array",function(m,h){l(this,{type:u,target:e(m),index:0,kind:h})},function(){var m=f(this),h=m.target,p=m.index++;if(!h||p>=h.length)return m.target=null,s(void 0,!0);switch(m.kind){case"keys":return s(p,!1);case"values":return s(h[p],!1)}return s([p,h[p]],!1)},"values");var d=n.Arguments=n.Array;if(t("keys"),t("values"),t("entries"),!c&&a&&d.name!=="values")try{i(d,"name",{value:"values"})}catch{}return ru}var mh={},iu,hh;function ou(){if(hh)return iu;hh=1;var e=dn(),t=e("toStringTag"),n={};return n[t]="z",iu=String(n)==="[object z]",iu}var su,ph;function ls(){if(ph)return su;ph=1;var e=ou(),t=tn(),n=Jo(),r=dn(),i=r("toStringTag"),o=Object,s=n(function(){return arguments}())==="Arguments",c=function(a,u){try{return a[u]}catch{}};return su=e?n:function(a){var u,l,f;return a===void 0?"Undefined":a===null?"Null":typeof(l=c(u=o(a),i))=="string"?l:s?n(u):(f=n(u))==="Object"&&t(u.callee)?"Arguments":f},su}var au,_h;function Bb(){if(_h)return au;_h=1;var e=ou(),t=ls();return au=e?{}.toString:function(){return"[object "+t(this)+"]"},au}var yh;function Rb(){if(yh)return mh;yh=1;var e=ou(),t=Cr(),n=Bb();return e||t(Object.prototype,"toString",n,{unsafe:!0}),mh}var gh={},cu,bh;function vh(){if(bh)return cu;bh=1;var e=ls(),t=String;return cu=function(n){if(e(n)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return t(n)},cu}var uu,Ah;function Db(){if(Ah)return uu;Ah=1;var e=Bn(),t=ss(),n=vh(),r=ts(),i=e("".charAt),o=e("".charCodeAt),s=e("".slice),c=function(a){return function(u,l){var f=n(r(u)),d=t(l),m=f.length,h,p;return d<0||d>=m?a?"":void 0:(h=o(f,d),h<55296||h>56319||d+1===m||(p=o(f,d+1))<56320||p>57343?a?i(f,d):h:a?s(f,d,d+2):(h-55296<<10)+(p-56320)+65536)}};return uu={codeAt:c(!1),charAt:c(!0)},uu}var xh;function kb(){if(xh)return gh;xh=1;var e=Db().charAt,t=vh(),n=si(),r=uh(),i=fo(),o="String Iterator",s=n.set,c=n.getterFor(o);return r(String,"String",function(a){s(this,{type:o,string:t(a),index:0})},function(){var u=c(this),l=u.string,f=u.index,d;return f>=l.length?i(void 0,!0):(d=e(l,f),u.index+=d.length,i(d,!1))}),gh}var Sh={},lu,Ch;function Ih(){if(Ch)return lu;Ch=1;var e=is(),t=TypeError;return lu=function(n,r){if(e(r,n))return n;throw new t("Incorrect invocation")},lu}var du,wh;function Ph(){if(wh)return du;wh=1;var e=jm(),t=Sr();return du=function(n,r,i){return i.get&&e(i.get,r,{getter:!0}),i.set&&e(i.set,r,{setter:!0}),t.f(n,r,i)},du}var fu,Eh;function Tb(){if(Eh)return fu;Eh=1;var e=Mn(),t=Sr(),n=as();return fu=function(r,i,o){e?t.f(r,i,n(0,o)):r[i]=o},fu}var Bh;function Rh(){if(Bh)return Sh;Bh=1;var e=nn(),t=Zt(),n=Ih(),r=Gt(),i=tn(),o=cs(),s=Ph(),c=Tb(),a=En(),u=Hn(),l=dn(),f=ki().IteratorPrototype,d=Mn(),m=yn(),h="constructor",p="Iterator",_=l("toStringTag"),y=TypeError,v=t[p],A=m||!i(v)||v.prototype!==f||!a(function(){v({})}),g=function(){if(n(this,f),o(this)===f)throw new y("Abstract class Iterator not directly constructable")},b=function(C,I){d?s(f,C,{configurable:!0,get:function(){return I},set:function(S){if(r(this),this===f)throw new y("You can't redefine this property");u(this,C)?this[C]=S:c(this,C,S)}}):f[C]=I};return u(f,_)||b(_,p),(A||!u(f,h)||f[h]===Object)&&b(h,g),g.prototype=f,e({global:!0,constructor:!0,forced:A},{Iterator:g}),Sh}var Dh={},kh;function Th(){if(kh)return Dh;kh=1;var e=Ht(),t=Cr(),n=ii(),r=Hn(),i=dn(),o=ki().IteratorPrototype,s=i("dispose");return r(o,s)||t(o,s,function(){var c=n(this,"return");c&&e(c,this)}),Dh}var Nh={},mu,Oh;function qn(){return Oh||(Oh=1,mu=function(e){return{iterator:e,next:e.next,done:!1}}),mu}var hu,Mh;function qh(){if(Mh)return hu;Mh=1;var e=RangeError;return hu=function(t){if(t===t)return t;throw new e("NaN is not allowed")},hu}var pu,Uh;function Fh(){if(Uh)return pu;Uh=1;var e=ss(),t=RangeError;return pu=function(n){var r=e(n);if(r<0)throw new t("The argument can't be less than 0");return r},pu}var _u,Lh;function bn(){if(Lh)return _u;Lh=1;var e=Ht(),t=Gt(),n=ii();return _u=function(r,i,o){var s,c;t(r);try{if(s=n(r,"return"),!s){if(i==="throw")throw o;return o}s=e(s,r)}catch(a){c=!0,s=a}if(i==="throw")throw o;if(c)throw s;return t(s),o},_u}var yu,Gh;function gu(){if(Gh)return yu;Gh=1;var e=Cr();return yu=function(t,n,r){for(var i in n)e(t,i,n[i],r);return t},yu}var bu,Hh;function Nb(){if(Hh)return bu;Hh=1;var e=bn();return bu=function(t,n,r){for(var i=t.length-1;i>=0;i--)if(t[i]!==void 0)try{r=e(t[i].iterator,n,r)}catch(o){n="throw",r=o}if(n==="throw")throw r;return r},bu}var vu,jh;function Ti(){if(jh)return vu;jh=1;var e=Ht(),t=oi(),n=Di(),r=gu(),i=dn(),o=si(),s=ii(),c=ki().IteratorPrototype,a=fo(),u=bn(),l=Nb(),f=i("toStringTag"),d="IteratorHelper",m="WrapForValidIterator",h="normal",p="throw",_=o.set,y=function(g){var b=o.getterFor(g?m:d);return r(t(c),{next:function(){var I=b(this);if(g)return I.nextHandler();if(I.done)return a(void 0,!0);try{var S=I.nextHandler();return I.returnHandlerResult?S:a(S,I.done)}catch(P){throw I.done=!0,P}},return:function(){var C=b(this),I=C.iterator;if(C.done=!0,g){var S=s(I,"return");return S?e(S,I):a(void 0,!0)}if(C.inner)try{u(C.inner.iterator,h)}catch(P){return u(I,p,P)}if(C.openIters)try{l(C.openIters,h)}catch(P){return u(I,p,P)}return I&&u(I,h),a(void 0,!0)}})},v=y(!0),A=y(!1);return n(A,f,"Iterator Helper"),vu=function(g,b,C){var I=function(P,T){T?(T.iterator=P.iterator,T.next=P.next):T=P,T.type=b?m:d,T.returnHandlerResult=!!C,T.nextHandler=g,T.counter=0,T.done=!1,_(this,T)};return I.prototype=b?v:A,I},vu}var Au,Vh;function ds(){return Vh||(Vh=1,Au=function(e,t){var n=typeof Iterator=="function"&&Iterator.prototype[e];if(n)try{n.call({next:null},t).next()}catch{return!0}}),Au}var xu,zh;function cr(){if(zh)return xu;zh=1;var e=Zt();return xu=function(t,n){var r=e.Iterator,i=r&&r.prototype,o=i&&i[t],s=!1;if(o)try{o.call({next:function(){return{done:!0}},return:function(){s=!0}},-1)}catch(c){c instanceof n||(s=!1)}if(!s)return o},xu}var Kh;function $h(){if(Kh)return Nh;Kh=1;var e=nn(),t=Ht(),n=Gt(),r=qn(),i=qh(),o=Fh(),s=bn(),c=Ti(),a=ds(),u=cr(),l=yn(),f=!l&&!a("drop",0),d=!l&&!f&&u("drop",RangeError),m=l||f||d,h=c(function(){for(var p=this.iterator,_=this.next,y,v;this.remaining;)if(this.remaining--,y=n(t(_,p)),v=this.done=!!y.done,v)return;if(y=n(t(_,p)),v=this.done=!!y.done,!v)return y.value});return e({target:"Iterator",proto:!0,real:!0,forced:m},{drop:function(_){n(this);var y;try{y=o(i(+_))}catch(v){s(this,"throw",v)}return d?t(d,this,y):new h(r(this),{remaining:y})}}),Nh}var Wh={},Su,Yh;function Ob(){if(Yh)return Su;Yh=1;var e=Jo(),t=Bn();return Su=function(n){if(e(n)==="Function")return t(n)},Su}var Cu,Zh;function Iu(){if(Zh)return Cu;Zh=1;var e=Ob(),t=gn(),n=Qo(),r=e(e.bind);return Cu=function(i,o){return t(i),o===void 0?i:n?r(i,o):function(){return i.apply(o,arguments)}},Cu}var wu,Xh;function Mb(){if(Xh)return wu;Xh=1;var e=dn(),t=lo(),n=e("iterator"),r=Array.prototype;return wu=function(i){return i!==void 0&&(t.Array===i||r[n]===i)},wu}var Pu,Qh;function Eu(){if(Qh)return Pu;Qh=1;var e=ls(),t=ii(),n=es(),r=lo(),i=dn(),o=i("iterator");return Pu=function(s){if(!n(s))return t(s,o)||t(s,"@@iterator")||r[e(s)]},Pu}var Bu,Jh;function qb(){if(Jh)return Bu;Jh=1;var e=Ht(),t=gn(),n=Gt(),r=os(),i=Eu(),o=TypeError;return Bu=function(s,c){var a=arguments.length<2?i(s):c;if(t(a))return n(e(a,s));throw new o(r(s)+" is not iterable")},Bu}var Ru,e1;function Mr(){if(e1)return Ru;e1=1;var e=Iu(),t=Ht(),n=Gt(),r=os(),i=Mb(),o=gm(),s=is(),c=qb(),a=Eu(),u=bn(),l=TypeError,f=function(m,h){this.stopped=m,this.result=h},d=f.prototype;return Ru=function(m,h,p){var _=p&&p.that,y=!!(p&&p.AS_ENTRIES),v=!!(p&&p.IS_RECORD),A=!!(p&&p.IS_ITERATOR),g=!!(p&&p.INTERRUPTED),b=e(h,_),C,I,S,P,T,D,w,E=function(F){return C&&u(C,"normal"),new f(!0,F)},k=function(F){return y?(n(F),g?b(F[0],F[1],E):b(F[0],F[1])):g?b(F,E):b(F)};if(v)C=m.iterator;else if(A)C=m;else{if(I=a(m),!I)throw new l(r(m)+" is not iterable");if(i(I)){for(S=0,P=o(m);P>S;S++)if(T=k(m[S]),T&&s(d,T))return T;return new f(!1)}C=c(m,I)}for(D=v?m.next:C.next;!(w=t(D,C)).done;){try{T=k(w.value)}catch(F){u(C,"throw",F)}if(typeof T=="object"&&T&&s(d,T))return T}return new f(!1)},Ru}var t1;function n1(){if(t1)return Wh;t1=1;var e=nn(),t=Ht(),n=Mr(),r=gn(),i=Gt(),o=qn(),s=bn(),c=cr(),a=c("every",TypeError);return e({target:"Iterator",proto:!0,real:!0,forced:a},{every:function(l){i(this);try{r(l)}catch(m){s(this,"throw",m)}if(a)return t(a,this,l);var f=o(this),d=0;return!n(f,function(m,h){if(!l(m,d++))return h()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}}),Wh}var r1={},Du,i1;function o1(){if(i1)return Du;i1=1;var e=Gt(),t=bn();return Du=function(n,r,i,o){try{return o?r(e(i)[0],i[1]):r(i)}catch(s){t(n,"throw",s)}},Du}var s1;function a1(){if(s1)return r1;s1=1;var e=nn(),t=Ht(),n=gn(),r=Gt(),i=qn(),o=Ti(),s=o1(),c=yn(),a=bn(),u=ds(),l=cr(),f=!c&&!u("filter",function(){}),d=!c&&!f&&l("filter",TypeError),m=c||f||d,h=o(function(){for(var p=this.iterator,_=this.predicate,y=this.next,v,A,g;;){if(v=r(t(y,p)),A=this.done=!!v.done,A)return;if(g=v.value,s(p,_,[g,this.counter++],!0))return g}});return e({target:"Iterator",proto:!0,real:!0,forced:m},{filter:function(_){r(this);try{n(_)}catch(y){a(this,"throw",y)}return d?t(d,this,_):new h(i(this),{predicate:_})}}),r1}var c1={},u1;function l1(){if(u1)return c1;u1=1;var e=nn(),t=Ht(),n=Mr(),r=gn(),i=Gt(),o=qn(),s=bn(),c=cr(),a=c("find",TypeError);return e({target:"Iterator",proto:!0,real:!0,forced:a},{find:function(l){i(this);try{r(l)}catch(m){s(this,"throw",m)}if(a)return t(a,this,l);var f=o(this),d=0;return n(f,function(m,h){if(l(m,d++))return h(m)},{IS_RECORD:!0,INTERRUPTED:!0}).result}}),c1}var d1={},ku,f1;function m1(){if(f1)return ku;f1=1;var e=Ht(),t=Gt(),n=qn(),r=Eu();return ku=function(i,o){(!o||typeof i!="string")&&t(i);var s=r(i);return n(t(s!==void 0?e(s,i):i))},ku}var h1;function p1(){if(h1)return d1;h1=1;var e=nn(),t=Ht(),n=gn(),r=Gt(),i=qn(),o=m1(),s=Ti(),c=bn(),a=yn(),u=ds(),l=cr(),f=!a&&!u("flatMap",function(){}),d=!a&&!f&&l("flatMap",TypeError),m=a||f||d,h=s(function(){for(var p=this.iterator,_=this.mapper,y,v;;){if(v=this.inner)try{if(y=r(t(v.next,v.iterator)),!y.done)return y.value;this.inner=null}catch(A){c(p,"throw",A)}if(y=r(t(this.next,p)),this.done=!!y.done)return;try{this.inner=o(_(y.value,this.counter++),!1)}catch(A){c(p,"throw",A)}}});return e({target:"Iterator",proto:!0,real:!0,forced:m},{flatMap:function(_){r(this);try{n(_)}catch(y){c(this,"throw",y)}return d?t(d,this,_):new h(i(this),{mapper:_,inner:null})}}),d1}var _1={},y1;function g1(){if(y1)return _1;y1=1;var e=nn(),t=Ht(),n=Mr(),r=gn(),i=Gt(),o=qn(),s=bn(),c=cr(),a=c("forEach",TypeError);return e({target:"Iterator",proto:!0,real:!0,forced:a},{forEach:function(l){i(this);try{r(l)}catch(m){s(this,"throw",m)}if(a)return t(a,this,l);var f=o(this),d=0;n(f,function(m){l(m,d++)},{IS_RECORD:!0})}}),_1}var b1={},v1;function A1(){if(v1)return b1;v1=1;var e=nn(),t=Ht(),n=Ua(),r=is(),i=ki().IteratorPrototype,o=Ti(),s=m1(),c=yn(),a=c||function(){try{Iterator.from({return:null}).return()}catch{return!0}}(),u=o(function(){return t(this.next,this.iterator)},!0);return e({target:"Iterator",stat:!0,forced:a},{from:function(f){var d=s(typeof f=="string"?n(f):f,!0);return r(i,d.iterator)?d.iterator:new u(d)}}),b1}var x1={},S1;function C1(){if(S1)return x1;S1=1;var e=nn(),t=Ht(),n=gn(),r=Gt(),i=qn(),o=Ti(),s=o1(),c=bn(),a=ds(),u=cr(),l=yn(),f=!l&&!a("map",function(){}),d=!l&&!f&&u("map",TypeError),m=l||f||d,h=o(function(){var p=this.iterator,_=r(t(this.next,p)),y=this.done=!!_.done;if(!y)return s(p,this.mapper,[_.value,this.counter++],!0)});return e({target:"Iterator",proto:!0,real:!0,forced:m},{map:function(_){r(this);try{n(_)}catch(y){c(this,"throw",y)}return d?t(d,this,_):new h(i(this),{mapper:_})}}),x1}var I1={},Tu,w1;function P1(){if(w1)return Tu;w1=1;var e=Qo(),t=Function.prototype,n=t.apply,r=t.call;return Tu=typeof Reflect=="object"&&Reflect.apply||(e?r.bind(n):function(){return r.apply(n,arguments)}),Tu}var E1;function B1(){if(E1)return I1;E1=1;var e=nn(),t=Mr(),n=gn(),r=Gt(),i=qn(),o=bn(),s=cr(),c=P1(),a=En(),u=TypeError,l=a(function(){[].keys().reduce(function(){},void 0)}),f=!l&&s("reduce",u);return e({target:"Iterator",proto:!0,real:!0,forced:l||f},{reduce:function(m){r(this);try{n(m)}catch(v){o(this,"throw",v)}var h=arguments.length<2,p=h?void 0:arguments[1];if(f)return c(f,this,h?[m]:[m,p]);var _=i(this),y=0;if(t(_,function(v){h?(h=!1,p=v):p=m(p,v,y),y++},{IS_RECORD:!0}),h)throw new u("Reduce of empty iterator with no initial value");return p}}),I1}var R1={},D1;function k1(){if(D1)return R1;D1=1;var e=nn(),t=Ht(),n=Mr(),r=gn(),i=Gt(),o=qn(),s=bn(),c=cr(),a=c("some",TypeError);return e({target:"Iterator",proto:!0,real:!0,forced:a},{some:function(l){i(this);try{r(l)}catch(m){s(this,"throw",m)}if(a)return t(a,this,l);var f=o(this),d=0;return n(f,function(m,h){if(l(m,d++))return h()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}}),R1}var T1={},N1;function O1(){if(N1)return T1;N1=1;var e=nn(),t=Ht(),n=Gt(),r=qn(),i=qh(),o=Fh(),s=Ti(),c=bn(),a=cr(),u=yn(),l=!u&&a("take",RangeError),f=s(function(){var d=this.iterator;if(!this.remaining--)return this.done=!0,c(d,"normal",void 0);var m=n(t(this.next,d)),h=this.done=!!m.done;if(!h)return m.value});return e({target:"Iterator",proto:!0,real:!0,forced:u||l},{take:function(m){n(this);var h;try{h=o(i(+m))}catch(p){c(this,"throw",p)}return l?t(l,this,h):new f(r(this),{remaining:h})}}),T1}var M1={},q1;function U1(){if(q1)return M1;q1=1;var e=nn(),t=Gt(),n=Mr(),r=qn(),i=[].push;return e({target:"Iterator",proto:!0,real:!0},{toArray:function(){var s=[];return n(r(t(this)),i,{that:s,IS_RECORD:!0}),s}}),M1}var Nu,F1;function L1(){if(F1)return Nu;F1=1;var e=Zt();return Nu=e,Nu}var Ou,G1;function Ub(){if(G1)return Ou;G1=1,fh(),Rb(),kb(),Rh(),Th(),$h(),n1(),a1(),l1(),p1(),g1(),A1(),C1(),B1(),k1(),O1(),U1();var e=L1();return Ou=e.Iterator,Ou}var H1={},Mu,j1;function Fb(){return j1||(j1=1,Mu={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}),Mu}var qu,V1;function Lb(){if(V1)return qu;V1=1;var e=rs(),t=e("span").classList,n=t&&t.constructor&&t.constructor.prototype;return qu=n===Object.prototype?void 0:n,qu}var z1;function Gb(){if(z1)return H1;z1=1;var e=Zt(),t=Fb(),n=Lb(),r=fh(),i=Di(),o=us(),s=dn(),c=s("iterator"),a=r.values,u=function(f,d){if(f){if(f[c]!==a)try{i(f,c,a)}catch{f[c]=a}if(o(f,d,!0),t[d]){for(var m in r)if(f[m]!==r[m])try{i(f,m,r[m])}catch{f[m]=r[m]}}}};for(var l in t)u(e[l]&&e[l].prototype,l);return u(n,"DOMTokenList"),H1}var Uu,K1;function Hb(){if(K1)return Uu;K1=1;var e=Ub();return Gb(),Uu=e,Uu}var $1={},W1={},Fu,Y1;function Z1(){if(Y1)return Fu;Y1=1;var e=Zt(),t=uo(),n=Jo(),r=function(i){return t.slice(0,i.length)===i};return Fu=function(){return r("Bun/")?"BUN":r("Cloudflare-Workers")?"CLOUDFLARE":r("Deno/")?"DENO":r("Node.js/")?"NODE":e.Bun&&typeof Bun.version=="string"?"BUN":e.Deno&&typeof Deno.version=="object"?"DENO":n(e.process)==="process"?"NODE":e.window&&e.document?"BROWSER":"REST"}(),Fu}var Lu,X1;function Gu(){if(X1)return Lu;X1=1;var e=Z1();return Lu=e==="NODE",Lu}var Hu,Q1;function jb(){if(Q1)return Hu;Q1=1;var e=xr(),t=Ph(),n=dn(),r=Mn(),i=n("species");return Hu=function(o){var s=e(o);r&&s&&!s[i]&&t(s,i,{configurable:!0,get:function(){return this}})},Hu}var ju,J1;function Vb(){if(J1)return ju;J1=1;var e=Bn(),t=En(),n=tn(),r=ls(),i=xr(),o=Uc(),s=function(){},c=i("Reflect","construct"),a=/^\s*(?:class|function)\b/,u=e(a.exec),l=!a.test(s),f=function(h){if(!n(h))return!1;try{return c(s,[],h),!0}catch{return!1}},d=function(h){if(!n(h))return!1;switch(r(h)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return l||!!u(a,o(h))}catch{return!0}};return d.sham=!0,ju=!c||t(function(){var m;return f(f.call)||!f(Object)||!f(function(){m=!0})||m})?d:f,ju}var Vu,e0;function zb(){if(e0)return Vu;e0=1;var e=Vb(),t=os(),n=TypeError;return Vu=function(r){if(e(r))return r;throw new n(t(r)+" is not a constructor")},Vu}var zu,t0;function Kb(){if(t0)return zu;t0=1;var e=Gt(),t=zb(),n=es(),r=dn(),i=r("species");return zu=function(o,s){var c=e(o).constructor,a;return c===void 0||n(a=e(c)[i])?s:t(a)},zu}var Ku,n0;function $b(){if(n0)return Ku;n0=1;var e=Bn();return Ku=e([].slice),Ku}var $u,r0;function Wb(){if(r0)return $u;r0=1;var e=TypeError;return $u=function(t,n){if(t<n)throw new e("Not enough arguments");return t},$u}var Wu,i0;function o0(){if(i0)return Wu;i0=1;var e=uo();return Wu=/(?:ipad|iphone|ipod).*applewebkit/i.test(e),Wu}var Yu,s0;function a0(){if(s0)return Yu;s0=1;var e=Zt(),t=P1(),n=Iu(),r=tn(),i=Hn(),o=En(),s=Pm(),c=$b(),a=rs(),u=Wb(),l=o0(),f=Gu(),d=e.setImmediate,m=e.clearImmediate,h=e.process,p=e.Dispatch,_=e.Function,y=e.MessageChannel,v=e.String,A=0,g={},b="onreadystatechange",C,I,S,P;o(function(){C=e.location});var T=function(k){if(i(g,k)){var F=g[k];delete g[k],F()}},D=function(k){return function(){T(k)}},w=function(k){T(k.data)},E=function(k){e.postMessage(v(k),C.protocol+"//"+C.host)};return(!d||!m)&&(d=function(F){u(arguments.length,1);var V=r(F)?F:_(F),de=c(arguments,1);return g[++A]=function(){t(V,void 0,de)},I(A),A},m=function(F){delete g[F]},f?I=function(k){h.nextTick(D(k))}:p&&p.now?I=function(k){p.now(D(k))}:y&&!l?(S=new y,P=S.port2,S.port1.onmessage=w,I=n(P.postMessage,P)):e.addEventListener&&r(e.postMessage)&&!e.importScripts&&C&&C.protocol!=="file:"&&!o(E)?(I=E,e.addEventListener("message",w,!1)):b in a("script")?I=function(k){s.appendChild(a("script"))[b]=function(){s.removeChild(this),T(k)}}:I=function(k){setTimeout(D(k),0)}),Yu={set:d,clear:m},Yu}var Zu,c0;function Yb(){if(c0)return Zu;c0=1;var e=Zt(),t=Mn(),n=Object.getOwnPropertyDescriptor;return Zu=function(r){if(!t)return e[r];var i=n(e,r);return i&&i.value},Zu}var Xu,u0;function l0(){if(u0)return Xu;u0=1;var e=function(){this.head=null,this.tail=null};return e.prototype={add:function(t){var n={item:t,next:null},r=this.tail;r?r.next=n:this.head=n,this.tail=n},get:function(){var t=this.head;if(t){var n=this.head=t.next;return n===null&&(this.tail=null),t.item}}},Xu=e,Xu}var Qu,d0;function Zb(){if(d0)return Qu;d0=1;var e=uo();return Qu=/ipad|iphone|ipod/i.test(e)&&typeof Pebble<"u",Qu}var Ju,f0;function Xb(){if(f0)return Ju;f0=1;var e=uo();return Ju=/web0s(?!.*chrome)/i.test(e),Ju}var el,m0;function Qb(){if(m0)return el;m0=1;var e=Zt(),t=Yb(),n=Iu(),r=a0().set,i=l0(),o=o0(),s=Zb(),c=Xb(),a=Gu(),u=e.MutationObserver||e.WebKitMutationObserver,l=e.document,f=e.process,d=e.Promise,m=t("queueMicrotask"),h,p,_,y,v;if(!m){var A=new i,g=function(){var b,C;for(a&&(b=f.domain)&&b.exit();C=A.get();)try{C()}catch(I){throw A.head&&h(),I}b&&b.enter()};!o&&!a&&!c&&u&&l?(p=!0,_=l.createTextNode(""),new u(g).observe(_,{characterData:!0}),h=function(){_.data=p=!p}):!s&&d&&d.resolve?(y=d.resolve(void 0),y.constructor=d,v=n(y.then,y),h=function(){v(g)}):a?h=function(){f.nextTick(g)}:(r=n(r,e),h=function(){r(g)}),m=function(b){A.head||h(),A.add(b)}}return el=m,el}var tl,h0;function Jb(){return h0||(h0=1,tl=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch{}}),tl}var nl,p0;function fs(){return p0||(p0=1,nl=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}),nl}var rl,_0;function mo(){if(_0)return rl;_0=1;var e=Zt();return rl=e.Promise,rl}var il,y0;function ho(){if(y0)return il;y0=1;var e=Zt(),t=mo(),n=tn(),r=Zm(),i=Uc(),o=dn(),s=Z1(),c=yn(),a=Ff(),u=t&&t.prototype,l=o("species"),f=!1,d=n(e.PromiseRejectionEvent),m=r("Promise",function(){var h=i(t),p=h!==String(t);if(!p&&a===66||c&&!(u.catch&&u.finally))return!0;if(!a||a<51||!/native code/.test(h)){var _=new t(function(A){A(1)}),y=function(A){A(function(){},function(){})},v=_.constructor={};if(v[l]=y,f=_.then(function(){})instanceof y,!f)return!0}return!p&&(s==="BROWSER"||s==="DENO")&&!d});return il={CONSTRUCTOR:m,REJECTION_EVENT:d,SUBCLASSING:f},il}var ol={},g0;function po(){if(g0)return ol;g0=1;var e=gn(),t=TypeError,n=function(r){var i,o;this.promise=new r(function(s,c){if(i!==void 0||o!==void 0)throw new t("Bad Promise constructor");i=s,o=c}),this.resolve=e(i),this.reject=e(o)};return ol.f=function(r){return new n(r)},ol}var b0;function ev(){if(b0)return W1;b0=1;var e=nn(),t=yn(),n=Gu(),r=Zt(),i=L1(),o=Ht(),s=Cr(),c=ah(),a=us(),u=jb(),l=gn(),f=tn(),d=ar(),m=Ih(),h=Kb(),p=a0().set,_=Qb(),y=Jb(),v=fs(),A=l0(),g=si(),b=mo(),C=ho(),I=po(),S="Promise",P=C.CONSTRUCTOR,T=C.REJECTION_EVENT,D=C.SUBCLASSING,w=g.getterFor(S),E=g.set,k=b&&b.prototype,F=b,V=k,de=r.TypeError,W=r.document,J=r.process,le=I.f,K=le,ae=!!(W&&W.createEvent&&r.dispatchEvent),me="unhandledrejection",De="rejectionhandled",te=0,ce=1,M=2,B=1,j=2,ne,G,$,Y,ie=function(xe){var be;return d(xe)&&f(be=xe.then)?be:!1},oe=function(xe,be){var x=be.value,R=be.state===ce,Q=R?xe.ok:xe.fail,_e=xe.resolve,ue=xe.reject,he=xe.domain,fe,ve,Ie;try{Q?(R||(be.rejection===j&&Z(be),be.rejection=B),Q===!0?fe=x:(he&&he.enter(),fe=Q(x),he&&(he.exit(),Ie=!0)),fe===xe.promise?ue(new de("Promise-chain cycle")):(ve=ie(fe))?o(ve,fe,_e,ue):_e(fe)):ue(x)}catch(Pe){he&&!Ie&&he.exit(),ue(Pe)}},pe=function(xe,be){xe.notified||(xe.notified=!0,_(function(){for(var x=xe.reactions,R;R=x.get();)oe(R,xe);xe.notified=!1,be&&!xe.rejection&&q(xe)}))},L=function(xe,be,x){var R,Q;ae?(R=W.createEvent("Event"),R.promise=be,R.reason=x,R.initEvent(xe,!1,!0),r.dispatchEvent(R)):R={promise:be,reason:x},!T&&(Q=r["on"+xe])?Q(R):xe===me&&y("Unhandled promise rejection",x)},q=function(xe){o(p,r,function(){var be=xe.facade,x=xe.value,R=H(xe),Q;if(R&&(Q=v(function(){n?J.emit("unhandledRejection",x,be):L(me,be,x)}),xe.rejection=n||H(xe)?j:B,Q.error))throw Q.value})},H=function(xe){return xe.rejection!==B&&!xe.parent},Z=function(xe){o(p,r,function(){var be=xe.facade;n?J.emit("rejectionHandled",be):L(De,be,xe.value)})},re=function(xe,be,x){return function(R){xe(be,R,x)}},Re=function(xe,be,x){xe.done||(xe.done=!0,x&&(xe=x),xe.value=be,xe.state=M,pe(xe,!0))},qe=function(xe,be,x){if(!xe.done){xe.done=!0,x&&(xe=x);try{if(xe.facade===be)throw new de("Promise can't be resolved itself");var R=ie(be);R?_(function(){var Q={done:!1};try{o(R,be,re(qe,Q,xe),re(Re,Q,xe))}catch(_e){Re(Q,_e,xe)}}):(xe.value=be,xe.state=ce,pe(xe,!1))}catch(Q){Re({done:!1},Q,xe)}}};if(P&&(F=function(be){m(this,V),l(be),o(ne,this);var x=w(this);try{be(re(qe,x),re(Re,x))}catch(R){Re(x,R)}},V=F.prototype,ne=function(be){E(this,{type:S,done:!1,notified:!1,parent:!1,reactions:new A,rejection:!1,state:te,value:null})},ne.prototype=s(V,"then",function(be,x){var R=w(this),Q=le(h(this,F));return R.parent=!0,Q.ok=f(be)?be:!0,Q.fail=f(x)&&x,Q.domain=n?J.domain:void 0,R.state===te?R.reactions.add(Q):_(function(){oe(Q,R)}),Q.promise}),G=function(){var xe=new ne,be=w(xe);this.promise=xe,this.resolve=re(qe,be),this.reject=re(Re,be)},I.f=le=function(xe){return xe===F||xe===$?new G(xe):K(xe)},!t&&f(b)&&k!==Object.prototype)){Y=k.then,D||s(k,"then",function(be,x){var R=this;return new F(function(Q,_e){o(Y,R,Q,_e)}).then(be,x)},{unsafe:!0});try{delete k.constructor}catch{}c&&c(k,V)}return e({global:!0,constructor:!0,wrap:!0,forced:P},{Promise:F}),$=i.Promise,a(F,S,!1,!0),u(S),W1}var v0={},sl,A0;function tv(){if(A0)return sl;A0=1;var e=dn(),t=e("iterator"),n=!1;try{var r=0,i={next:function(){return{done:!!r++}},return:function(){n=!0}};i[t]=function(){return this},Array.from(i,function(){throw 2})}catch{}return sl=function(o,s){try{if(!s&&!n)return!1}catch{return!1}var c=!1;try{var a={};a[t]=function(){return{next:function(){return{done:c=!0}}}},o(a)}catch{}return c},sl}var al,x0;function S0(){if(x0)return al;x0=1;var e=mo(),t=tv(),n=ho().CONSTRUCTOR;return al=n||!t(function(r){e.all(r).then(void 0,function(){})}),al}var C0;function nv(){if(C0)return v0;C0=1;var e=nn(),t=Ht(),n=gn(),r=po(),i=fs(),o=Mr(),s=S0();return e({target:"Promise",stat:!0,forced:s},{all:function(a){var u=this,l=r.f(u),f=l.resolve,d=l.reject,m=i(function(){var h=n(u.resolve),p=[],_=0,y=1;o(a,function(v){var A=_++,g=!1;y++,t(h,u,v).then(function(b){g||(g=!0,p[A]=b,--y||f(p))},d)}),--y||f(p)});return m.error&&d(m.value),l.promise}}),v0}var I0={},w0;function rv(){if(w0)return I0;w0=1;var e=nn(),t=yn(),n=ho().CONSTRUCTOR,r=mo(),i=xr(),o=tn(),s=Cr(),c=r&&r.prototype;if(e({target:"Promise",proto:!0,forced:n,real:!0},{catch:function(u){return this.then(void 0,u)}}),!t&&o(r)){var a=i("Promise").prototype.catch;c.catch!==a&&s(c,"catch",a,{unsafe:!0})}return I0}var P0={},E0;function iv(){if(E0)return P0;E0=1;var e=nn(),t=Ht(),n=gn(),r=po(),i=fs(),o=Mr(),s=S0();return e({target:"Promise",stat:!0,forced:s},{race:function(a){var u=this,l=r.f(u),f=l.reject,d=i(function(){var m=n(u.resolve);o(a,function(h){t(m,u,h).then(l.resolve,f)})});return d.error&&f(d.value),l.promise}}),P0}var B0={},R0;function ov(){if(R0)return B0;R0=1;var e=nn(),t=po(),n=ho().CONSTRUCTOR;return e({target:"Promise",stat:!0,forced:n},{reject:function(i){var o=t.f(this),s=o.reject;return s(i),o.promise}}),B0}var D0={},cl,k0;function sv(){if(k0)return cl;k0=1;var e=Gt(),t=ar(),n=po();return cl=function(r,i){if(e(r),t(i)&&i.constructor===r)return i;var o=n.f(r),s=o.resolve;return s(i),o.promise},cl}var T0;function av(){if(T0)return D0;T0=1;var e=nn(),t=xr(),n=yn(),r=mo(),i=ho().CONSTRUCTOR,o=sv(),s=t("Promise"),c=n&&!i;return e({target:"Promise",stat:!0,forced:n||i},{resolve:function(u){return o(c&&this===s?r:this,u)}}),D0}var N0;function cv(){return N0||(N0=1,ev(),nv(),rv(),iv(),ov(),av()),$1}var O0={},M0;function uv(){return M0||(M0=1,Rh()),O0}var q0={},U0;function lv(){return U0||(U0=1,Th()),q0}var F0={},L0;function dv(){return L0||(L0=1,$h()),F0}var G0={},H0;function fv(){return H0||(H0=1,n1()),G0}var j0={},V0;function mv(){return V0||(V0=1,a1()),j0}var z0={},K0;function hv(){return K0||(K0=1,l1()),z0}var $0={},W0;function pv(){return W0||(W0=1,p1()),$0}var Y0={},Z0;function _v(){return Z0||(Z0=1,g1()),Y0}var X0={},Q0;function yv(){return Q0||(Q0=1,A1()),X0}var J0={},ep;function gv(){return ep||(ep=1,C1()),J0}var tp={},np;function bv(){return np||(np=1,B1()),tp}var rp={},ip;function vv(){return ip||(ip=1,k1()),rp}var op={},sp;function Av(){return sp||(sp=1,O1()),op}var ap={},cp;function xv(){return cp||(cp=1,U1()),ap}var up={},ul,lp;function dp(){if(lp)return ul;lp=1;var e=Zt(),t=ns(),n=tn(),r=oi(),i=cs(),o=Cr(),s=dn(),c=yn(),a="USE_FUNCTION_CONSTRUCTOR",u=s("asyncIterator"),l=e.AsyncIterator,f=t.AsyncIteratorPrototype,d,m;if(f)d=f;else if(n(l))d=l.prototype;else if(t[a]||e[a])try{m=i(i(i(Function("return async function*(){}()")()))),i(m)===Object.prototype&&(d=m)}catch{}return d?c&&(d=r(d)):d={},n(d[u])||o(d,u,function(){return this}),ul=d,ul}var ll,fp;function Sv(){if(fp)return ll;fp=1;var e=Ht(),t=Gt(),n=oi(),r=ii(),i=gu(),o=si(),s=bn(),c=xr(),a=dp(),u=fo(),l=c("Promise"),f="AsyncFromSyncIterator",d=o.set,m=o.getterFor(f),h=function(_,y,v,A,g){var b=_.done;l.resolve(_.value).then(function(C){y(u(C,b))},function(C){if(!b&&g)try{s(A,"throw",C)}catch(I){C=I}v(C)})},p=function(y){y.type=f,d(this,y)};return p.prototype=i(n(a),{next:function(){var y=m(this);return new l(function(v,A){var g=t(e(y.next,y.iterator));h(g,v,A,y.iterator,!0)})},return:function(){var _=m(this).iterator;return new l(function(y,v){var A=r(_,"return");if(A===void 0)return y(u(void 0,!0));var g=t(e(A,_));h(g,y,v,_)})}}),ll=p,ll}var dl,mp;function Cv(){if(mp)return dl;mp=1;var e=Ht(),t=fs(),n=Gt(),r=oi(),i=Di(),o=gu(),s=dn(),c=si(),a=xr(),u=ii(),l=dp(),f=fo(),d=bn(),m=a("Promise"),h=s("toStringTag"),p="AsyncIteratorHelper",_="WrapForValidAsyncIterator",y=c.set,v=function(b){var C=!b,I=c.getterFor(b?_:p),S=function(P){var T=t(function(){return I(P)}),D=T.error,w=T.value;return D||C&&w.done?{exit:!0,value:D?m.reject(w):m.resolve(f(void 0,!0))}:{exit:!1,value:w}};return o(r(l),{next:function(){var T=S(this),D=T.value;if(T.exit)return D;var w=t(function(){return n(D.nextHandler(m))}),E=w.error,k=w.value;return E&&(D.done=!0),E?m.reject(k):m.resolve(k)},return:function(){var P=S(this),T=P.value;if(P.exit)return T;T.done=!0;var D=T.iterator,w,E,k=t(function(){if(T.inner)try{d(T.inner.iterator,"normal")}catch(F){return d(D,"throw",F)}return u(D,"return")});return w=E=k.value,k.error?m.reject(E):w===void 0?m.resolve(f(void 0,!0)):(k=t(function(){return e(w,D)}),E=k.value,k.error?m.reject(E):b?m.resolve(E):m.resolve(E).then(function(F){return n(F),f(void 0,!0)}))}})},A=v(!0),g=v(!1);return i(g,h,"Async Iterator Helper"),dl=function(b,C){var I=function(P,T){T?(T.iterator=P.iterator,T.next=P.next):T=P,T.type=C?_:p,T.nextHandler=b,T.counter=0,T.done=!1,y(this,T)};return I.prototype=C?A:g,I},dl}var fl,hp;function Iv(){if(hp)return fl;hp=1;var e=Ht(),t=Cv();return fl=t(function(){return e(this.next,this.iterator)},!0),fl}var pp;function wv(){if(pp)return up;pp=1;var e=nn(),t=Gt(),n=Sv(),r=Iv(),i=qn();return e({target:"Iterator",proto:!0,real:!0,forced:!0},{toAsync:function(){return new r(i(new n(i(t(this)))))}}),up}var ml,_p;function Pv(){if(_p)return ml;_p=1;var e=Hb();return cv(),uv(),lv(),dv(),fv(),mv(),hv(),pv(),_v(),yv(),gv(),bv(),vv(),Av(),xv(),wv(),ml=e,ml}Pv();const Ev=e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=i=>{if(i.target?.error?.message)return n(i.target?.error);const o=i.target?.result;return o instanceof ArrayBuffer?t(new Uint8Array(o)):n(new Error("Invalid file format"))},r.onerror=i=>n(i),r.readAsArrayBuffer(e)});function yp(e,t){return function(){return e.apply(t,arguments)}}const{toString:Bv}=Object.prototype,{getPrototypeOf:hl}=Object,{iterator:ms,toStringTag:gp}=Symbol,hs=(e=>t=>{const n=Bv.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Qn=e=>(e=e.toLowerCase(),t=>hs(t)===e),ps=e=>t=>typeof t===e,{isArray:Ni}=Array,_o=ps("undefined");function yo(e){return e!==null&&!_o(e)&&e.constructor!==null&&!_o(e.constructor)&&Rn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const bp=Qn("ArrayBuffer");function Rv(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&bp(e.buffer),t}const Dv=ps("string"),Rn=ps("function"),vp=ps("number"),go=e=>e!==null&&typeof e=="object",kv=e=>e===!0||e===!1,_s=e=>{if(hs(e)!=="object")return!1;const t=hl(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(gp in e)&&!(ms in e)},Tv=e=>{if(!go(e)||yo(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Nv=Qn("Date"),Ov=Qn("File"),Mv=Qn("Blob"),qv=Qn("FileList"),Uv=e=>go(e)&&Rn(e.pipe),Fv=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Rn(e.append)&&((t=hs(e))==="formdata"||t==="object"&&Rn(e.toString)&&e.toString()==="[object FormData]"))},Lv=Qn("URLSearchParams"),[Gv,Hv,jv,Vv]=["ReadableStream","Request","Response","Headers"].map(Qn),zv=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bo(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Ni(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{if(yo(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),s=o.length;let c;for(r=0;r<s;r++)c=o[r],t.call(null,e[c],c,e)}}function Ap(e,t){if(yo(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const ai=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xp=e=>!_o(e)&&e!==ai;function pl(){const{caseless:e}=xp(this)&&this||{},t={},n=(r,i)=>{const o=e&&Ap(t,i)||i;_s(t[o])&&_s(r)?t[o]=pl(t[o],r):_s(r)?t[o]=pl({},r):Ni(r)?t[o]=r.slice():t[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&bo(arguments[r],n);return t}const Kv=(e,t,n,{allOwnKeys:r}={})=>(bo(t,(i,o)=>{n&&Rn(i)?e[o]=yp(i,n):e[o]=i},{allOwnKeys:r}),e),$v=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Wv=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Yv=(e,t,n,r)=>{let i,o,s;const c={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],(!r||r(s,e,t))&&!c[s]&&(t[s]=e[s],c[s]=!0);e=n!==!1&&hl(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Zv=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Xv=e=>{if(!e)return null;if(Ni(e))return e;let t=e.length;if(!vp(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Qv=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&hl(Uint8Array)),Jv=(e,t)=>{const r=(e&&e[ms]).call(e);let i;for(;(i=r.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},eA=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},tA=Qn("HTMLFormElement"),nA=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Sp=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),rA=Qn("RegExp"),Cp=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};bo(n,(i,o)=>{let s;(s=t(i,o,e))!==!1&&(r[o]=s||i)}),Object.defineProperties(e,r)},iA=e=>{Cp(e,(t,n)=>{if(Rn(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Rn(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},oA=(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return Ni(e)?r(e):r(String(e).split(t)),n},sA=()=>{},aA=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function cA(e){return!!(e&&Rn(e.append)&&e[gp]==="FormData"&&e[ms])}const uA=e=>{const t=new Array(10),n=(r,i)=>{if(go(r)){if(t.indexOf(r)>=0)return;if(yo(r))return r;if(!("toJSON"in r)){t[i]=r;const o=Ni(r)?[]:{};return bo(r,(s,c)=>{const a=n(s,i+1);!_o(a)&&(o[c]=a)}),t[i]=void 0,o}}return r};return n(e,0)},lA=Qn("AsyncFunction"),dA=e=>e&&(go(e)||Rn(e))&&Rn(e.then)&&Rn(e.catch),Ip=((e,t)=>e?setImmediate:t?((n,r)=>(ai.addEventListener("message",({source:i,data:o})=>{i===ai&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),ai.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Rn(ai.postMessage)),fA=typeof queueMicrotask<"u"?queueMicrotask.bind(ai):typeof process<"u"&&process.nextTick||Ip;var we={isArray:Ni,isArrayBuffer:bp,isBuffer:yo,isFormData:Fv,isArrayBufferView:Rv,isString:Dv,isNumber:vp,isBoolean:kv,isObject:go,isPlainObject:_s,isEmptyObject:Tv,isReadableStream:Gv,isRequest:Hv,isResponse:jv,isHeaders:Vv,isUndefined:_o,isDate:Nv,isFile:Ov,isBlob:Mv,isRegExp:rA,isFunction:Rn,isStream:Uv,isURLSearchParams:Lv,isTypedArray:Qv,isFileList:qv,forEach:bo,merge:pl,extend:Kv,trim:zv,stripBOM:$v,inherits:Wv,toFlatObject:Yv,kindOf:hs,kindOfTest:Qn,endsWith:Zv,toArray:Xv,forEachEntry:Jv,matchAll:eA,isHTMLForm:tA,hasOwnProperty:Sp,hasOwnProp:Sp,reduceDescriptors:Cp,freezeMethods:iA,toObjectSet:oA,toCamelCase:nA,noop:sA,toFiniteNumber:aA,findKey:Ap,global:ai,isContextDefined:xp,isSpecCompliantForm:cA,toJSONObject:uA,isAsyncFn:lA,isThenable:dA,setImmediate:Ip,asap:fA,isIterable:e=>e!=null&&Rn(e[ms])};function vt(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}we.inherits(vt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:we.toJSONObject(this.config),code:this.code,status:this.status}}});const wp=vt.prototype,Pp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Pp[e]={value:e}}),Object.defineProperties(vt,Pp),Object.defineProperty(wp,"isAxiosError",{value:!0}),vt.from=(e,t,n,r,i,o)=>{const s=Object.create(wp);return we.toFlatObject(e,s,function(a){return a!==Error.prototype},c=>c!=="isAxiosError"),vt.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};var mA=null;function _l(e){return we.isPlainObject(e)||we.isArray(e)}function Ep(e){return we.endsWith(e,"[]")?e.slice(0,-2):e}function Bp(e,t,n){return e?e.concat(t).map(function(i,o){return i=Ep(i),!n&&o?"["+i+"]":i}).join(n?".":""):t}function hA(e){return we.isArray(e)&&!e.some(_l)}const pA=we.toFlatObject(we,{},null,function(t){return/^is[A-Z]/.test(t)});function ys(e,t,n){if(!we.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=we.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,_){return!we.isUndefined(_[p])});const r=n.metaTokens,i=n.visitor||l,o=n.dots,s=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&we.isSpecCompliantForm(t);if(!we.isFunction(i))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(we.isDate(h))return h.toISOString();if(we.isBoolean(h))return h.toString();if(!a&&we.isBlob(h))throw new vt("Blob is not supported. Use a Buffer instead.");return we.isArrayBuffer(h)||we.isTypedArray(h)?a&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function l(h,p,_){let y=h;if(h&&!_&&typeof h=="object"){if(we.endsWith(p,"{}"))p=r?p:p.slice(0,-2),h=JSON.stringify(h);else if(we.isArray(h)&&hA(h)||(we.isFileList(h)||we.endsWith(p,"[]"))&&(y=we.toArray(h)))return p=Ep(p),y.forEach(function(A,g){!(we.isUndefined(A)||A===null)&&t.append(s===!0?Bp([p],g,o):s===null?p:p+"[]",u(A))}),!1}return _l(h)?!0:(t.append(Bp(_,p,o),u(h)),!1)}const f=[],d=Object.assign(pA,{defaultVisitor:l,convertValue:u,isVisitable:_l});function m(h,p){if(!we.isUndefined(h)){if(f.indexOf(h)!==-1)throw Error("Circular reference detected in "+p.join("."));f.push(h),we.forEach(h,function(y,v){(!(we.isUndefined(y)||y===null)&&i.call(t,y,we.isString(v)?v.trim():v,p,d))===!0&&m(y,p?p.concat(v):[v])}),f.pop()}}if(!we.isObject(e))throw new TypeError("data must be an object");return m(e),t}function Rp(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function yl(e,t){this._pairs=[],e&&ys(e,this,t)}const Dp=yl.prototype;Dp.append=function(t,n){this._pairs.push([t,n])},Dp.toString=function(t){const n=t?function(r){return t.call(this,r,Rp)}:Rp;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function _A(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function kp(e,t,n){if(!t)return e;const r=n&&n.encode||_A;we.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(t,n):o=we.isURLSearchParams(t)?t.toString():new yl(t,n).toString(r),o){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Tp{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){we.forEach(this.handlers,function(r){r!==null&&t(r)})}}var Np={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},yA=typeof URLSearchParams<"u"?URLSearchParams:yl,gA=typeof FormData<"u"?FormData:null,bA=typeof Blob<"u"?Blob:null,vA={isBrowser:!0,classes:{URLSearchParams:yA,FormData:gA,Blob:bA},protocols:["http","https","file","blob","url","data"]};const gl=typeof window<"u"&&typeof document<"u",bl=typeof navigator=="object"&&navigator||void 0,AA=gl&&(!bl||["ReactNative","NativeScript","NS"].indexOf(bl.product)<0),xA=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",SA=gl&&window.location.href||"http://localhost";var CA=Object.freeze({__proto__:null,hasBrowserEnv:gl,hasStandardBrowserEnv:AA,hasStandardBrowserWebWorkerEnv:xA,navigator:bl,origin:SA}),vn={...CA,...vA};function IA(e,t){return ys(e,new vn.classes.URLSearchParams,{visitor:function(n,r,i,o){return vn.isNode&&we.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function wA(e){return we.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function PA(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}function Op(e){function t(n,r,i,o){let s=n[o++];if(s==="__proto__")return!0;const c=Number.isFinite(+s),a=o>=n.length;return s=!s&&we.isArray(i)?i.length:s,a?(we.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!c):((!i[s]||!we.isObject(i[s]))&&(i[s]=[]),t(n,r,i[s],o)&&we.isArray(i[s])&&(i[s]=PA(i[s])),!c)}if(we.isFormData(e)&&we.isFunction(e.entries)){const n={};return we.forEachEntry(e,(r,i)=>{t(wA(r),i,n,0)}),n}return null}function EA(e,t,n){if(we.isString(e))try{return(t||JSON.parse)(e),we.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const vo={transitional:Np,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=we.isObject(t);if(o&&we.isHTMLForm(t)&&(t=new FormData(t)),we.isFormData(t))return i?JSON.stringify(Op(t)):t;if(we.isArrayBuffer(t)||we.isBuffer(t)||we.isStream(t)||we.isFile(t)||we.isBlob(t)||we.isReadableStream(t))return t;if(we.isArrayBufferView(t))return t.buffer;if(we.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return IA(t,this.formSerializer).toString();if((c=we.isFileList(t))||r.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return ys(c?{"files[]":t}:t,a&&new a,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),EA(t)):t}],transformResponse:[function(t){const n=this.transitional||vo.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(we.isResponse(t)||we.isReadableStream(t))return t;if(t&&we.isString(t)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(c){if(s)throw c.name==="SyntaxError"?vt.from(c,vt.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vn.classes.FormData,Blob:vn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};we.forEach(["delete","get","head","post","put","patch"],e=>{vo.headers[e]={}});const BA=we.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var RA=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||t[n]&&BA[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t};const Mp=Symbol("internals");function Ao(e){return e&&String(e).trim().toLowerCase()}function gs(e){return e===!1||e==null?e:we.isArray(e)?e.map(gs):String(e)}function DA(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const kA=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function vl(e,t,n,r,i){if(we.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!we.isString(t)){if(we.isString(r))return t.indexOf(r)!==-1;if(we.isRegExp(r))return r.test(t)}}function TA(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function NA(e,t){const n=we.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,o,s){return this[r].call(this,t,i,o,s)},configurable:!0})})}let Dn=class{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(c,a,u){const l=Ao(a);if(!l)throw new Error("header name must be a non-empty string");const f=we.findKey(i,l);(!f||i[f]===void 0||u===!0||u===void 0&&i[f]!==!1)&&(i[f||a]=gs(c))}const s=(c,a)=>we.forEach(c,(u,l)=>o(u,l,a));if(we.isPlainObject(t)||t instanceof this.constructor)s(t,n);else if(we.isString(t)&&(t=t.trim())&&!kA(t))s(RA(t),n);else if(we.isObject(t)&&we.isIterable(t)){let c={},a,u;for(const l of t){if(!we.isArray(l))throw TypeError("Object iterator must return a key-value pair");c[u=l[0]]=(a=c[u])?we.isArray(a)?[...a,l[1]]:[a,l[1]]:l[1]}s(c,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=Ao(t),t){const r=we.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return DA(i);if(we.isFunction(n))return n.call(this,i,r);if(we.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ao(t),t){const r=we.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||vl(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function o(s){if(s=Ao(s),s){const c=we.findKey(r,s);c&&(!n||vl(r,r[c],c,n))&&(delete r[c],i=!0)}}return we.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!t||vl(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return we.forEach(this,(i,o)=>{const s=we.findKey(r,o);if(s){n[s]=gs(i),delete n[o];return}const c=t?TA(o):String(o).trim();c!==o&&delete n[o],n[c]=gs(i),r[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return we.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&we.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[Mp]=this[Mp]={accessors:{}}).accessors,i=this.prototype;function o(s){const c=Ao(s);r[c]||(NA(i,s),r[c]=!0)}return we.isArray(t)?t.forEach(o):o(t),this}};Dn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),we.reduceDescriptors(Dn.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}}),we.freezeMethods(Dn);function Al(e,t){const n=this||vo,r=t||n,i=Dn.from(r.headers);let o=r.data;return we.forEach(e,function(c){o=c.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function qp(e){return!!(e&&e.__CANCEL__)}function Oi(e,t,n){vt.call(this,e??"canceled",vt.ERR_CANCELED,t,n),this.name="CanceledError"}we.inherits(Oi,vt,{__CANCEL__:!0});function Up(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new vt("Request failed with status code "+n.status,[vt.ERR_BAD_REQUEST,vt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function OA(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function MA(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,o=0,s;return t=t!==void 0?t:1e3,function(a){const u=Date.now(),l=r[o];s||(s=u),n[i]=a,r[i]=u;let f=o,d=0;for(;f!==i;)d+=n[f++],f=f%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),u-s<t)return;const m=l&&u-l;return m?Math.round(d*1e3/m):void 0}}function qA(e,t){let n=0,r=1e3/t,i,o;const s=(u,l=Date.now())=>{n=l,i=null,o&&(clearTimeout(o),o=null),e(...u)};return[(...u)=>{const l=Date.now(),f=l-n;f>=r?s(u,l):(i=u,o||(o=setTimeout(()=>{o=null,s(i)},r-f)))},()=>i&&s(i)]}const bs=(e,t,n=3)=>{let r=0;const i=MA(50,250);return qA(o=>{const s=o.loaded,c=o.lengthComputable?o.total:void 0,a=s-r,u=i(a),l=s<=c;r=s;const f={loaded:s,total:c,progress:c?s/c:void 0,bytes:a,rate:u||void 0,estimated:u&&c&&l?(c-s)/u:void 0,event:o,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(f)},n)},Fp=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Lp=e=>(...t)=>we.asap(()=>e(...t));var UA=vn.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,vn.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(vn.origin),vn.navigator&&/(msie|trident)/i.test(vn.navigator.userAgent)):()=>!0,FA=vn.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];we.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),we.isString(r)&&s.push("path="+r),we.isString(i)&&s.push("domain="+i),o===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function LA(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function GA(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Gp(e,t,n){let r=!LA(t);return e&&(r||n==!1)?GA(e,t):t}const Hp=e=>e instanceof Dn?{...e}:e;function ci(e,t){t=t||{};const n={};function r(u,l,f,d){return we.isPlainObject(u)&&we.isPlainObject(l)?we.merge.call({caseless:d},u,l):we.isPlainObject(l)?we.merge({},l):we.isArray(l)?l.slice():l}function i(u,l,f,d){if(we.isUndefined(l)){if(!we.isUndefined(u))return r(void 0,u,f,d)}else return r(u,l,f,d)}function o(u,l){if(!we.isUndefined(l))return r(void 0,l)}function s(u,l){if(we.isUndefined(l)){if(!we.isUndefined(u))return r(void 0,u)}else return r(void 0,l)}function c(u,l,f){if(f in t)return r(u,l);if(f in e)return r(void 0,u)}const a={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c,headers:(u,l,f)=>i(Hp(u),Hp(l),f,!0)};return we.forEach(Object.keys({...e,...t}),function(l){const f=a[l]||i,d=f(e[l],t[l],l);we.isUndefined(d)&&f!==c||(n[l]=d)}),n}var jp=e=>{const t=ci({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:s,auth:c}=t;t.headers=s=Dn.from(s),t.url=kp(Gp(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&s.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let a;if(we.isFormData(n)){if(vn.hasStandardBrowserEnv||vn.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((a=s.getContentType())!==!1){const[u,...l]=a?a.split(";").map(f=>f.trim()).filter(Boolean):[];s.setContentType([u||"multipart/form-data",...l].join("; "))}}if(vn.hasStandardBrowserEnv&&(r&&we.isFunction(r)&&(r=r(t)),r||r!==!1&&UA(t.url))){const u=i&&o&&FA.read(o);u&&s.set(i,u)}return t},HA=typeof XMLHttpRequest<"u"&&function(e){return new Promise(function(n,r){const i=jp(e);let o=i.data;const s=Dn.from(i.headers).normalize();let{responseType:c,onUploadProgress:a,onDownloadProgress:u}=i,l,f,d,m,h;function p(){m&&m(),h&&h(),i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let _=new XMLHttpRequest;_.open(i.method.toUpperCase(),i.url,!0),_.timeout=i.timeout;function y(){if(!_)return;const A=Dn.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),b={data:!c||c==="text"||c==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:A,config:e,request:_};Up(function(I){n(I),p()},function(I){r(I),p()},b),_=null}"onloadend"in _?_.onloadend=y:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(y)},_.onabort=function(){_&&(r(new vt("Request aborted",vt.ECONNABORTED,e,_)),_=null)},_.onerror=function(){r(new vt("Network Error",vt.ERR_NETWORK,e,_)),_=null},_.ontimeout=function(){let g=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const b=i.transitional||Np;i.timeoutErrorMessage&&(g=i.timeoutErrorMessage),r(new vt(g,b.clarifyTimeoutError?vt.ETIMEDOUT:vt.ECONNABORTED,e,_)),_=null},o===void 0&&s.setContentType(null),"setRequestHeader"in _&&we.forEach(s.toJSON(),function(g,b){_.setRequestHeader(b,g)}),we.isUndefined(i.withCredentials)||(_.withCredentials=!!i.withCredentials),c&&c!=="json"&&(_.responseType=i.responseType),u&&([d,h]=bs(u,!0),_.addEventListener("progress",d)),a&&_.upload&&([f,m]=bs(a),_.upload.addEventListener("progress",f),_.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(l=A=>{_&&(r(!A||A.type?new Oi(null,e,_):A),_.abort(),_=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));const v=OA(i.url);if(v&&vn.protocols.indexOf(v)===-1){r(new vt("Unsupported protocol "+v+":",vt.ERR_BAD_REQUEST,e));return}_.send(o||null)})};const jA=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const o=function(u){if(!i){i=!0,c();const l=u instanceof Error?u:this.reason;r.abort(l instanceof vt?l:new Oi(l instanceof Error?l.message:l))}};let s=t&&setTimeout(()=>{s=null,o(new vt(`timeout ${t} of ms exceeded`,vt.ETIMEDOUT))},t);const c=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:a}=r;return a.unsubscribe=()=>we.asap(c),a}},VA=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},zA=async function*(e,t){for await(const n of KA(e))yield*VA(n,t)},KA=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},Vp=(e,t,n,r)=>{const i=zA(e,t);let o=0,s,c=a=>{s||(s=!0,r&&r(a))};return new ReadableStream({async pull(a){try{const{done:u,value:l}=await i.next();if(u){c(),a.close();return}let f=l.byteLength;if(n){let d=o+=f;n(d)}a.enqueue(new Uint8Array(l))}catch(u){throw c(u),u}},cancel(a){return c(a),i.return()}},{highWaterMark:2})},vs=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",zp=vs&&typeof ReadableStream=="function",$A=vs&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Kp=(e,...t)=>{try{return!!e(...t)}catch{return!1}},WA=zp&&Kp(()=>{let e=!1;const t=new Request(vn.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),$p=64*1024,xl=zp&&Kp(()=>we.isReadableStream(new Response("").body)),As={stream:xl&&(e=>e.body)};vs&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!As[t]&&(As[t]=we.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new vt(`Response type '${t}' is not supported`,vt.ERR_NOT_SUPPORT,r)})})})(new Response);const YA=async e=>{if(e==null)return 0;if(we.isBlob(e))return e.size;if(we.isSpecCompliantForm(e))return(await new Request(vn.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(we.isArrayBufferView(e)||we.isArrayBuffer(e))return e.byteLength;if(we.isURLSearchParams(e)&&(e=e+""),we.isString(e))return(await $A(e)).byteLength},ZA=async(e,t)=>{const n=we.toFiniteNumber(e.getContentLength());return n??YA(t)};var XA=vs&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:s,onDownloadProgress:c,onUploadProgress:a,responseType:u,headers:l,withCredentials:f="same-origin",fetchOptions:d}=jp(e);u=u?(u+"").toLowerCase():"text";let m=jA([i,o&&o.toAbortSignal()],s),h;const p=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let _;try{if(a&&WA&&n!=="get"&&n!=="head"&&(_=await ZA(l,r))!==0){let b=new Request(t,{method:"POST",body:r,duplex:"half"}),C;if(we.isFormData(r)&&(C=b.headers.get("content-type"))&&l.setContentType(C),b.body){const[I,S]=Fp(_,bs(Lp(a)));r=Vp(b.body,$p,I,S)}}we.isString(f)||(f=f?"include":"omit");const y="credentials"in Request.prototype;h=new Request(t,{...d,signal:m,method:n.toUpperCase(),headers:l.normalize().toJSON(),body:r,duplex:"half",credentials:y?f:void 0});let v=await fetch(h,d);const A=xl&&(u==="stream"||u==="response");if(xl&&(c||A&&p)){const b={};["status","statusText","headers"].forEach(P=>{b[P]=v[P]});const C=we.toFiniteNumber(v.headers.get("content-length")),[I,S]=c&&Fp(C,bs(Lp(c),!0))||[];v=new Response(Vp(v.body,$p,I,()=>{S&&S(),p&&p()}),b)}u=u||"text";let g=await As[we.findKey(As,u)||"text"](v,e);return!A&&p&&p(),await new Promise((b,C)=>{Up(b,C,{data:g,headers:Dn.from(v.headers),status:v.status,statusText:v.statusText,config:e,request:h})})}catch(y){throw p&&p(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new vt("Network Error",vt.ERR_NETWORK,e,h),{cause:y.cause||y}):vt.from(y,y&&y.code,e,h)}});const Sl={http:mA,xhr:HA,fetch:XA};we.forEach(Sl,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Wp=e=>`- ${e}`,QA=e=>we.isFunction(e)||e===null||e===!1;var Yp={getAdapter:e=>{e=we.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){n=e[o];let s;if(r=n,!QA(n)&&(r=Sl[(s=String(n)).toLowerCase()],r===void 0))throw new vt(`Unknown adapter '${s}'`);if(r)break;i[s||"#"+o]=r}if(!r){const o=Object.entries(i).map(([c,a])=>`adapter ${c} `+(a===!1?"is not supported by the environment":"is not available in the build"));let s=t?o.length>1?`since :
`+o.map(Wp).join(`
`):" "+Wp(o[0]):"as no adapter specified";throw new vt("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:Sl};function Cl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Oi(null,e)}function Zp(e){return Cl(e),e.headers=Dn.from(e.headers),e.data=Al.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Yp.getAdapter(e.adapter||vo.adapter)(e).then(function(r){return Cl(e),r.data=Al.call(e,e.transformResponse,r),r.headers=Dn.from(r.headers),r},function(r){return qp(r)||(Cl(e),r&&r.response&&(r.response.data=Al.call(e,e.transformResponse,r.response),r.response.headers=Dn.from(r.response.headers))),Promise.reject(r)})}const Xp="1.11.0",xs={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{xs[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Qp={};xs.transitional=function(t,n,r){function i(o,s){return"[Axios v"+Xp+"] Transitional option '"+o+"'"+s+(r?". "+r:"")}return(o,s,c)=>{if(t===!1)throw new vt(i(s," has been removed"+(n?" in "+n:"")),vt.ERR_DEPRECATED);return n&&!Qp[s]&&(Qp[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,s,c):!0}},xs.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function JA(e,t,n){if(typeof e!="object")throw new vt("options must be an object",vt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const c=e[o],a=c===void 0||s(c,o,e);if(a!==!0)throw new vt("option "+o+" must be "+a,vt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new vt("Unknown option "+o,vt.ERR_BAD_OPTION)}}var Ss={assertOptions:JA,validators:xs};const ur=Ss.validators;let ui=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Tp,response:new Tp}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ci(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&Ss.assertOptions(r,{silentJSONParsing:ur.transitional(ur.boolean),forcedJSONParsing:ur.transitional(ur.boolean),clarifyTimeoutError:ur.transitional(ur.boolean)},!1),i!=null&&(we.isFunction(i)?n.paramsSerializer={serialize:i}:Ss.assertOptions(i,{encode:ur.function,serialize:ur.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ss.assertOptions(n,{baseUrl:ur.spelling("baseURL"),withXsrfToken:ur.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=o&&we.merge(o.common,o[n.method]);o&&we.forEach(["delete","get","head","post","put","patch","common"],h=>{delete o[h]}),n.headers=Dn.concat(s,o);const c=[];let a=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(n)===!1||(a=a&&p.synchronous,c.unshift(p.fulfilled,p.rejected))});const u=[];this.interceptors.response.forEach(function(p){u.push(p.fulfilled,p.rejected)});let l,f=0,d;if(!a){const h=[Zp.bind(this),void 0];for(h.unshift(...c),h.push(...u),d=h.length,l=Promise.resolve(n);f<d;)l=l.then(h[f++],h[f++]);return l}d=c.length;let m=n;for(f=0;f<d;){const h=c[f++],p=c[f++];try{m=h(m)}catch(_){p.call(this,_);break}}try{l=Zp.call(this,m)}catch(h){return Promise.reject(h)}for(f=0,d=u.length;f<d;)l=l.then(u[f++],u[f++]);return l}getUri(t){t=ci(this.defaults,t);const n=Gp(t.baseURL,t.url,t.allowAbsoluteUrls);return kp(n,t.params,t.paramsSerializer)}};we.forEach(["delete","get","head","options"],function(t){ui.prototype[t]=function(n,r){return this.request(ci(r||{},{method:t,url:n,data:(r||{}).data}))}}),we.forEach(["post","put","patch"],function(t){function n(r){return function(o,s,c){return this.request(ci(c||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}ui.prototype[t]=n(),ui.prototype[t+"Form"]=n(!0)});let e3=class ob{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const s=new Promise(c=>{r.subscribe(c),o=c}).then(i);return s.cancel=function(){r.unsubscribe(o)},s},t(function(o,s,c){r.reason||(r.reason=new Oi(o,s,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new ob(function(i){t=i}),cancel:t}}};function t3(e){return function(n){return e.apply(null,n)}}function n3(e){return we.isObject(e)&&e.isAxiosError===!0}const Il={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Il).forEach(([e,t])=>{Il[t]=e});function Jp(e){const t=new ui(e),n=yp(ui.prototype.request,t);return we.extend(n,ui.prototype,t,{allOwnKeys:!0}),we.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return Jp(ci(e,i))},n}const Xt=Jp(vo);Xt.Axios=ui,Xt.CanceledError=Oi,Xt.CancelToken=e3,Xt.isCancel=qp,Xt.VERSION=Xp,Xt.toFormData=ys,Xt.AxiosError=vt,Xt.Cancel=Xt.CanceledError,Xt.all=function(t){return Promise.all(t)},Xt.spread=t3,Xt.isAxiosError=n3,Xt.mergeConfig=ci,Xt.AxiosHeaders=Dn,Xt.formToJSON=e=>Op(we.isHTMLForm(e)?new FormData(e):e),Xt.getAdapter=Yp.getAdapter,Xt.HttpStatusCode=Il,Xt.default=Xt;const{Axios:t7,AxiosError:n7,CanceledError:r7,isCancel:i7,CancelToken:o7,VERSION:s7,all:a7,Cancel:c7,isAxiosError:u7,spread:l7,toFormData:d7,AxiosHeaders:f7,HttpStatusCode:m7,formToJSON:h7,getAdapter:p7,mergeConfig:_7}=Xt;function Mi(e,t){const n=t&&typeof t.start<"u"?Math.max(Math.min(t.start,e-1),0):0,r=t&&typeof t.end<"u"?Math.min(t.end,e):e;return{start:n,end:r}}function xo(e,t){const n=t&&typeof t.array<"u"?t.array:Array,{start:r,end:i}=Mi(e,t);return{array:new n(i-r),start:r,end:i}}function r3(e,t,n){for(let r=0,i=t.length;r<i;r++)t[r]=e(n+r);return t}function An(e,t,n){const{array:r,start:i}=xo(e,n);return r3(t,r,i)}function wl(e){return!!e.buffer&&typeof e.byteLength=="number"&&typeof e.BYTES_PER_ELEMENT=="number"}function Cs(e,t){const{constructor:n,buffer:r,length:i,byteOffset:o,BYTES_PER_ELEMENT:s}=e,{start:c,end:a}=Mi(i,t);return c===0&&a===i?e:new n(r,o+s*c,Math.min(i,a-c))}const jt=1e-6;function fn(e,t,n){return Math.abs(e-t)<=n}function qr(e,t,n){return Math.max(t,Math.min(n,e))}function Pl(e,t,n){return e+(t-e)*n}function El(e,t,n,r,i,o){const s=(n-e)*o,c=(r-t)*o,a=i*i,u=i*a;return(2*t-2*n+s+c)*u+(-3*t+3*n-2*s-c)*a+s*i+t}function Bl(e,t,n,r){const i=1-r;return i*i*e+2*i*r*t+r*r*n}const Rl=isFinite;function O(){return O.zero()}(function(e){function t(){const U=[.1,0,0];return U[0]=0,U}e.zero=t;function n(U){const z=t();return z[0]=U[0],z[1]=U[1],z[2]=U[2],z}e.clone=n;function r(U){return Rl(U[0])&&Rl(U[1])&&Rl(U[2])}e.isFinite=r;function i(U){return isNaN(U[0])||isNaN(U[1])||isNaN(U[2])}e.hasNaN=i;function o(U){return U[0]=NaN,U[1]=NaN,U[2]=NaN,U}e.setNaN=o;function s(U){return l(U.x,U.y,U.z)}e.fromObj=s;function c(U){return{x:U[0],y:U[1],z:U[2]}}e.toObj=c;function a(U,z,X){return U[0]=z[X+0],U[1]=z[X+1],U[2]=z[X+2],U}e.fromArray=a;function u(U,z,X){return z[X+0]=U[0],z[X+1]=U[1],z[X+2]=U[2],z}e.toArray=u;function l(U,z,X){const ge=t();return ge[0]=U,ge[1]=z,ge[2]=X,ge}e.create=l;function f(U){const z=t();return z[0]=U[0],z[1]=U[1],z[2]=U[2],z}e.ofArray=f;function d(U,z,X,ge){return U[0]=z,U[1]=X,U[2]=ge,U}e.set=d;function m(U,z){return U[0]=z[0],U[1]=z[1],U[2]=z[2],U}e.copy=m;function h(U,z,X){return U[0]=z[0]+X[0],U[1]=z[1]+X[1],U[2]=z[2]+X[2],U}e.add=h;function p(U,z,X){return U[0]=z[0]-X[0],U[1]=z[1]-X[1],U[2]=z[2]-X[2],U}e.sub=p;function _(U,z,X){return U[0]=z[0]*X[0],U[1]=z[1]*X[1],U[2]=z[2]*X[2],U}e.mul=_;function y(U,z,X){return U[0]=z[0]/X[0],U[1]=z[1]/X[1],U[2]=z[2]/X[2],U}e.div=y;function v(U,z,X){return U[0]=z[0]*X,U[1]=z[1]*X,U[2]=z[2]*X,U}e.scale=v;function A(U,z,X,ge){return U[0]=z[0]+X[0]*ge,U[1]=z[1]+X[1]*ge,U[2]=z[2]+X[2]*ge,U}e.scaleAndAdd=A;function g(U,z,X,ge){return U[0]=z[0]-X[0]*ge,U[1]=z[1]-X[1]*ge,U[2]=z[2]-X[2]*ge,U}e.scaleAndSub=g;function b(U,z,X){return U[0]=z[0]+X,U[1]=z[1]+X,U[2]=z[2]+X,U}e.addScalar=b;function C(U,z,X){return U[0]=z[0]-X,U[1]=z[1]-X,U[2]=z[2]-X,U}e.subScalar=C;function I(U,z){return U[0]=Math.round(z[0]),U[1]=Math.round(z[1]),U[2]=Math.round(z[2]),U}e.round=I;function S(U,z){return U[0]=Math.ceil(z[0]),U[1]=Math.ceil(z[1]),U[2]=Math.ceil(z[2]),U}e.ceil=S;function P(U,z){return U[0]=Math.floor(z[0]),U[1]=Math.floor(z[1]),U[2]=Math.floor(z[2]),U}e.floor=P;function T(U,z){return U[0]=Math.trunc(z[0]),U[1]=Math.trunc(z[1]),U[2]=Math.trunc(z[2]),U}e.trunc=T;function D(U,z){return U[0]=Math.abs(z[0]),U[1]=Math.abs(z[1]),U[2]=Math.abs(z[2]),U}e.abs=D;function w(U,z,X){return U[0]=Math.min(z[0],X[0]),U[1]=Math.min(z[1],X[1]),U[2]=Math.min(z[2],X[2]),U}e.min=w;function E(U,z,X){return U[0]=Math.max(z[0],X[0]),U[1]=Math.max(z[1],X[1]),U[2]=Math.max(z[2],X[2]),U}e.max=E;function k(U,z,X,ge){return U[0]=Math.max(X[0],Math.min(ge[0],z[0])),U[1]=Math.max(X[1],Math.min(ge[1],z[1])),U[2]=Math.max(X[2],Math.min(ge[2],z[2])),U}e.clamp=k;function F(U,z){const X=z[0]-U[0],ge=z[1]-U[1],He=z[2]-U[2];return Math.sqrt(X*X+ge*ge+He*He)}e.distance=F;function V(U,z){const X=z[0]-U[0],ge=z[1]-U[1],He=z[2]-U[2];return X*X+ge*ge+He*He}e.squaredDistance=V;function de(U){const z=U[0],X=U[1],ge=U[2];return Math.sqrt(z*z+X*X+ge*ge)}e.magnitude=de;function W(U){const z=U[0],X=U[1],ge=U[2];return z*z+X*X+ge*ge}e.squaredMagnitude=W;function J(U,z,X){return v(U,ae(U,z),X)}e.setMagnitude=J;function le(U,z){return U[0]=-z[0],U[1]=-z[1],U[2]=-z[2],U}e.negate=le;function K(U,z){return U[0]=1/z[0],U[1]=1/z[1],U[2]=1/z[2],U}e.inverse=K;function ae(U,z){const X=z[0],ge=z[1],He=z[2];let $e=X*X+ge*ge+He*He;return $e>0&&($e=1/Math.sqrt($e),U[0]=z[0]*$e,U[1]=z[1]*$e,U[2]=z[2]*$e),U}e.normalize=ae;function me(U,z){return U[0]*z[0]+U[1]*z[1]+U[2]*z[2]}e.dot=me;function De(U,z,X){const ge=z[0],He=z[1],$e=z[2],dt=X[0],It=X[1],ft=X[2];return U[0]=He*ft-$e*It,U[1]=$e*dt-ge*ft,U[2]=ge*It-He*dt,U}e.cross=De;function te(U,z,X,ge){const He=z[0],$e=z[1],dt=z[2];return U[0]=He+ge*(X[0]-He),U[1]=$e+ge*(X[1]-$e),U[2]=dt+ge*(X[2]-dt),U}e.lerp=te;const ce=t();function M(U,z,X,ge){const He=qr(me(z,X),-1,1),$e=Math.acos(He)*ge;return A(ce,X,z,-He),ae(ce,ce),h(U,v(U,z,Math.cos($e)),v(ce,ce,Math.sin($e)))}e.slerp=M;function B(U,z,X,ge,He,$e){const dt=$e*$e,It=dt*(2*$e-3)+1,ft=dt*($e-2)+$e,Ut=dt*($e-1),sr=dt*(3-2*$e);return U[0]=z[0]*It+X[0]*ft+ge[0]*Ut+He[0]*sr,U[1]=z[1]*It+X[1]*ft+ge[1]*Ut+He[1]*sr,U[2]=z[2]*It+X[2]*ft+ge[2]*Ut+He[2]*sr,U}e.hermite=B;function j(U,z,X,ge,He,$e){const dt=1-$e,It=dt*dt,ft=$e*$e,Ut=It*dt,sr=3*$e*It,Bi=3*ft*dt,Ri=ft*$e;return U[0]=z[0]*Ut+X[0]*sr+ge[0]*Bi+He[0]*Ri,U[1]=z[1]*Ut+X[1]*sr+ge[1]*Bi+He[1]*Ri,U[2]=z[2]*Ut+X[2]*sr+ge[2]*Bi+He[2]*Ri,U}e.bezier=j;function ne(U,z,X,ge,He){return U[0]=Bl(z[0],X[0],ge[0],He),U[1]=Bl(z[1],X[1],ge[1],He),U[2]=Bl(z[2],X[2],ge[2],He),U}e.quadraticBezier=ne;function G(U,z,X,ge,He,$e,dt){return U[0]=El(z[0],X[0],ge[0],He[0],$e,dt),U[1]=El(z[1],X[1],ge[1],He[1],$e,dt),U[2]=El(z[2],X[2],ge[2],He[2],$e,dt),U}e.spline=G;function $(U,z){const X=Math.random()*2*Math.PI,ge=Math.random()*2-1,He=Math.sqrt(1-ge*ge)*z;return U[0]=Math.cos(X)*He,U[1]=Math.sin(X)*He,U[2]=ge*z,U}e.random=$;function Y(U,z,X){const ge=z[0],He=z[1],$e=z[2],dt=1/(X[3]*ge+X[7]*He+X[11]*$e+X[15]||1);return U[0]=(X[0]*ge+X[4]*He+X[8]*$e+X[12])*dt,U[1]=(X[1]*ge+X[5]*He+X[9]*$e+X[13])*dt,U[2]=(X[2]*ge+X[6]*He+X[10]*$e+X[14])*dt,U}e.transformMat4=Y;function ie(U,z,X){const ge=z[0],He=z[1],$e=z[2];return U[0]=X[0]*ge+X[4]*He+X[8]*$e,U[1]=X[1]*ge+X[5]*He+X[9]*$e,U[2]=X[2]*ge+X[6]*He+X[10]*$e,ae(U,U)}e.transformDirection=ie;function oe(U,z,X,ge,He,$e){const dt=z[0+He],It=z[1+He],ft=z[2+He],Ut=1/(X[3+$e]*dt+X[7+$e]*It+X[11+$e]*ft+X[15+$e]||1);return U[0+ge]=(X[0+$e]*dt+X[4+$e]*It+X[8+$e]*ft+X[12+$e])*Ut,U[1+ge]=(X[1+$e]*dt+X[5+$e]*It+X[9+$e]*ft+X[13+$e])*Ut,U[2+ge]=(X[2+$e]*dt+X[6+$e]*It+X[10+$e]*ft+X[14+$e])*Ut,U}e.transformMat4Offset=oe;function pe(U,z,X,ge,He,$e){const dt=z[0+He],It=z[1+He],ft=z[2+He];U[0+ge]=X[0+$e]*dt+X[4+$e]*It+X[8+$e]*ft,U[1+ge]=X[1+$e]*dt+X[5+$e]*It+X[9+$e]*ft,U[2+ge]=X[2+$e]*dt+X[6+$e]*It+X[10+$e]*ft;const Ut=Math.hypot(U[0+ge],U[1+ge],U[2+ge]);return Ut>0&&(U[0+ge]/=Ut,U[1+ge]/=Ut,U[2+ge]/=Ut),U}e.transformDirectionOffset=pe;function L(U,z,X){const ge=z[0],He=z[1],$e=z[2];return U[0]=ge*X[0]+He*X[3]+$e*X[6],U[1]=ge*X[1]+He*X[4]+$e*X[7],U[2]=ge*X[2]+He*X[5]+$e*X[8],U}e.transformMat3=L;function q(U,z,X){const ge=z[0],He=z[1],$e=z[2],dt=X[0],It=X[1],ft=X[2],Ut=X[3],sr=Ut*ge+It*$e-ft*He,Bi=Ut*He+ft*ge-dt*$e,Ri=Ut*$e+dt*He-It*ge,yf=-dt*ge-It*He-ft*$e;return U[0]=sr*Ut+yf*-dt+Bi*-ft-Ri*-It,U[1]=Bi*Ut+yf*-It+Ri*-dt-sr*-ft,U[2]=Ri*Ut+yf*-ft+sr*-It-Bi*-dt,U}e.transformQuat=q;function H(U,z){const X=Math.sqrt(W(U)*W(z));if(X===0)return Math.PI/2;const ge=me(U,z)/X;return Math.acos(qr(ge,-1,1))}e.angle=H;const Z=t(),re=t(),Re=t(),qe=t(),xe=t(),be=t(),x=t();function R(U,z,X,ge){p(Z,U,z),p(re,X,z),p(Re,z,X),p(qe,ge,X),De(xe,Z,re),De(be,Re,qe);const He=H(xe,be);return De(x,xe,be),me(re,x)>0?He:-He}e.dihedralAngle=R;function Q(U,z,X,ge){return e.set(U,ge*Math.cos(X)*Math.sin(z),ge*Math.sin(X)*Math.sin(z),ge*Math.cos(z))}e.directionFromSpherical=Q;function _e(U,z){return U[0]===z[0]&&U[1]===z[1]&&U[2]===z[2]}e.exactEquals=_e;function ue(U,z){const X=U[0],ge=U[1],He=U[2],$e=z[0],dt=z[1],It=z[2];return Math.abs(X-$e)<=jt*Math.max(1,Math.abs(X),Math.abs($e))&&Math.abs(ge-dt)<=jt*Math.max(1,Math.abs(ge),Math.abs(dt))&&Math.abs(He-It)<=jt*Math.max(1,Math.abs(He),Math.abs(It))}e.equals=ue;const he=t();function fe(U,z,X){const ge=H(z,X);if(Math.abs(ge)<1e-4)return Ke.setIdentity(U);if(Math.abs(ge-Math.PI)<jt)return Ke.fromRotation(U,Math.PI,Math.abs(z[0])<.9?e.unitX:e.unitZ);const He=De(he,z,X);return Ke.fromRotation(U,ge,He)}e.makeRotation=fe;function ve(U){return U[0]===0&&U[1]===0&&U[2]===0}e.isZero=ve;function Ie(U,z,X,ge){p(U,z,ge);const He=me(X,U)/W(X);return h(U,v(U,X,He),ge)}e.projectPointOnVector=Ie;const Pe=t();function Te(U,z,X,ge){return ae(Pe,X),p(U,z,ge),p(U,z,v(Pe,Pe,me(U,Pe)))}e.projectPointOnPlane=Te;function Me(U,z,X){const ge=me(X,z)/W(X);return v(U,X,ge)}e.projectOnVector=Me;const Ve=t();function Ue(U,z,X){return Me(Ve,z,X),p(U,z,Ve)}e.projectOnPlane=Ue;function Je(U,z,X){return ae(U,De(U,De(U,z,X),z))}e.orthogonalize=Je;function ot(U,z,X){return me(z,X)>0?m(U,z):le(U,m(U,z)),U}e.matchDirection=ot;const Ge=t(),et=t();function Ne(U,z,X,ge){return p(Ge,X,z),p(et,ge,z),ae(U,De(U,Ge,et))}e.triangleNormal=Ne;const ze=t();function Qe(U,z,X){return e.scaleAndAdd(U,z,e.sub(ze,X,z),.5)}e.center=Qe;function tt(U,z){return`[${U[0].toPrecision(z)} ${U[1].toPrecision(z)} ${U[2].toPrecision(z)}]`}e.toString=tt,e.origin=l(0,0,0),e.unit=l(1,1,1),e.negUnit=l(-1,-1,-1),e.unitX=l(1,0,0),e.unitY=l(0,1,0),e.unitZ=l(0,0,1),e.negUnitX=l(-1,0,0),e.negUnitY=l(0,-1,0),e.negUnitZ=l(0,0,-1)})(O||(O={}));const e_=Math.PI/180;function Ur(e){return e*e_}function li(e){return e/e_}function Ke(){return Ke.zero()}(function(e){function t(){const x=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return x[0]=0,x}e.zero=t;function n(){const x=t();return x[0]=1,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=1,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=1,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x}e.identity=n;function r(x){return x[0]=1,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=1,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=1,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x}e.setIdentity=r;function i(x){for(let R=0;R<16;R++)x[R]=0;return x}e.setZero=i;function o(x){const R=t();for(let Q=0;Q<4;Q++){const _e=x[Q];for(let ue=0;ue<4;ue++)R[4*ue+Q]=_e[ue]}return R}e.ofRows=o;const s=n();function c(x,R){return u(x,s,typeof R>"u"?jt:R)}e.isIdentity=c;function a(x){for(let R=0;R<16;R++)if(isNaN(x[R]))return!0;return!1}e.hasNaN=a;function u(x,R,Q){for(let _e=0;_e<16;_e++)if(Math.abs(x[_e]-R[_e])>Q)return!1;return!0}e.areEqual=u;function l(x,R,Q,_e){x[4*Q+R]=_e}e.setValue=l;function f(x,R,Q){return x[4*Q+R]}e.getValue=f;function d(x,R,Q){return R[Q+0]=x[0],R[Q+1]=x[1],R[Q+2]=x[2],R[Q+3]=x[3],R[Q+4]=x[4],R[Q+5]=x[5],R[Q+6]=x[6],R[Q+7]=x[7],R[Q+8]=x[8],R[Q+9]=x[9],R[Q+10]=x[10],R[Q+11]=x[11],R[Q+12]=x[12],R[Q+13]=x[13],R[Q+14]=x[14],R[Q+15]=x[15],R}e.toArray=d;function m(x,R,Q){return x[0]=R[Q+0],x[1]=R[Q+1],x[2]=R[Q+2],x[3]=R[Q+3],x[4]=R[Q+4],x[5]=R[Q+5],x[6]=R[Q+6],x[7]=R[Q+7],x[8]=R[Q+8],x[9]=R[Q+9],x[10]=R[Q+10],x[11]=R[Q+11],x[12]=R[Q+12],x[13]=R[Q+13],x[14]=R[Q+14],x[15]=R[Q+15],x}e.fromArray=m;function h(x,R,Q,_e){return i(x),l(x,0,0,R[0]),l(x,1,0,R[1]),l(x,2,0,R[2]),l(x,0,1,Q[0]),l(x,1,1,Q[1]),l(x,2,1,Q[2]),l(x,0,2,_e[0]),l(x,1,2,_e[1]),l(x,2,2,_e[2]),l(x,3,3,1),x}e.fromBasis=h;function p(x,R){return x[0]=R[0],x[1]=R[1],x[2]=R[2],x[3]=R[3],x[4]=R[4],x[5]=R[5],x[6]=R[6],x[7]=R[7],x[8]=R[8],x[9]=R[9],x[10]=R[10],x[11]=R[11],x[12]=R[12],x[13]=R[13],x[14]=R[14],x[15]=R[15],x}e.copy=p;function _(x){return p(t(),x)}e.clone=_;function y(x,R){return x[0]=R[12],x[1]=R[13],x[2]=R[14],x}e.getTranslation=y;function v(x,R){const Q=R[0],_e=R[1],ue=R[2],he=R[4],fe=R[5],ve=R[6],Ie=R[8],Pe=R[9],Te=R[10];return x[0]=Math.sqrt(Q*Q+_e*_e+ue*ue),x[1]=Math.sqrt(he*he+fe*fe+ve*ve),x[2]=Math.sqrt(Ie*Ie+Pe*Pe+Te*Te),x}e.getScaling=v;function A(x,R){const Q=R[0]+R[5]+R[10];let _e=0;return Q>0?(_e=Math.sqrt(Q+1)*2,x[3]=.25*_e,x[0]=(R[6]-R[9])/_e,x[1]=(R[8]-R[2])/_e,x[2]=(R[1]-R[4])/_e):R[0]>R[5]&&R[0]>R[10]?(_e=Math.sqrt(1+R[0]-R[5]-R[10])*2,x[3]=(R[6]-R[9])/_e,x[0]=.25*_e,x[1]=(R[1]+R[4])/_e,x[2]=(R[8]+R[2])/_e):R[5]>R[10]?(_e=Math.sqrt(1+R[5]-R[0]-R[10])*2,x[3]=(R[8]-R[2])/_e,x[0]=(R[1]+R[4])/_e,x[1]=.25*_e,x[2]=(R[6]+R[9])/_e):(_e=Math.sqrt(1+R[10]-R[0]-R[5])*2,x[3]=(R[1]-R[4])/_e,x[0]=(R[8]+R[2])/_e,x[1]=(R[6]+R[9])/_e,x[2]=.25*_e),x}e.getRotation=A;function g(x,R){const Q=1/Math.sqrt(R[0]*R[0]+R[1]*R[1]+R[2]*R[2]),_e=1/Math.sqrt(R[4]*R[4]+R[5]*R[5]+R[6]*R[6]),ue=1/Math.sqrt(R[8]*R[8]+R[9]*R[9]+R[10]*R[10]);return x[0]=R[0]*Q,x[1]=R[1]*Q,x[2]=R[2]*Q,x[3]=0,x[4]=R[4]*_e,x[5]=R[5]*_e,x[6]=R[6]*_e,x[7]=0,x[8]=R[8]*ue,x[9]=R[9]*ue,x[10]=R[10]*ue,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x}e.extractRotation=g;function b(x,R){if(x===R){const Q=R[1],_e=R[2],ue=R[3],he=R[6],fe=R[7],ve=R[11];x[1]=R[4],x[2]=R[8],x[3]=R[12],x[4]=Q,x[6]=R[9],x[7]=R[13],x[8]=_e,x[9]=he,x[11]=R[14],x[12]=ue,x[13]=fe,x[14]=ve}else x[0]=R[0],x[1]=R[4],x[2]=R[8],x[3]=R[12],x[4]=R[1],x[5]=R[5],x[6]=R[9],x[7]=R[13],x[8]=R[2],x[9]=R[6],x[10]=R[10],x[11]=R[14],x[12]=R[3],x[13]=R[7],x[14]=R[11],x[15]=R[15];return x}e.transpose=b;function C(x,R){const Q=R[0],_e=R[1],ue=R[2],he=R[3],fe=R[4],ve=R[5],Ie=R[6],Pe=R[7],Te=R[8],Me=R[9],Ve=R[10],Ue=R[11],Je=R[12],ot=R[13],Ge=R[14],et=R[15],Ne=Q*ve-_e*fe,ze=Q*Ie-ue*fe,Qe=Q*Pe-he*fe,tt=_e*Ie-ue*ve,U=_e*Pe-he*ve,z=ue*Pe-he*Ie,X=Te*ot-Me*Je,ge=Te*Ge-Ve*Je,He=Te*et-Ue*Je,$e=Me*Ge-Ve*ot,dt=Me*et-Ue*ot,It=Ve*et-Ue*Ge;let ft=Ne*It-ze*dt+Qe*$e+tt*He-U*ge+z*X;return ft?(ft=1/ft,x[0]=(ve*It-Ie*dt+Pe*$e)*ft,x[1]=(ue*dt-_e*It-he*$e)*ft,x[2]=(ot*z-Ge*U+et*tt)*ft,x[3]=(Ve*U-Me*z-Ue*tt)*ft,x[4]=(Ie*He-fe*It-Pe*ge)*ft,x[5]=(Q*It-ue*He+he*ge)*ft,x[6]=(Ge*Qe-Je*z-et*ze)*ft,x[7]=(Te*z-Ve*Qe+Ue*ze)*ft,x[8]=(fe*dt-ve*He+Pe*X)*ft,x[9]=(_e*He-Q*dt-he*X)*ft,x[10]=(Je*U-ot*Qe+et*Ne)*ft,x[11]=(Me*Qe-Te*U-Ue*Ne)*ft,x[12]=(ve*ge-fe*$e-Ie*X)*ft,x[13]=(Q*$e-_e*ge+ue*X)*ft,x[14]=(ot*ze-Je*tt-Ge*Ne)*ft,x[15]=(Te*tt-Me*ze+Ve*Ne)*ft,!0):!1}e.tryInvert=C;function I(x,R){return C(x,R)||console.warn("non-invertible matrix.",R),x}e.invert=I;function S(x,R,Q){const _e=R[0],ue=R[1],he=R[2],fe=R[3],ve=R[4],Ie=R[5],Pe=R[6],Te=R[7],Me=R[8],Ve=R[9],Ue=R[10],Je=R[11],ot=R[12],Ge=R[13],et=R[14],Ne=R[15];let ze=Q[0],Qe=Q[1],tt=Q[2],U=Q[3];return x[0]=ze*_e+Qe*ve+tt*Me+U*ot,x[1]=ze*ue+Qe*Ie+tt*Ve+U*Ge,x[2]=ze*he+Qe*Pe+tt*Ue+U*et,x[3]=ze*fe+Qe*Te+tt*Je+U*Ne,ze=Q[4],Qe=Q[5],tt=Q[6],U=Q[7],x[4]=ze*_e+Qe*ve+tt*Me+U*ot,x[5]=ze*ue+Qe*Ie+tt*Ve+U*Ge,x[6]=ze*he+Qe*Pe+tt*Ue+U*et,x[7]=ze*fe+Qe*Te+tt*Je+U*Ne,ze=Q[8],Qe=Q[9],tt=Q[10],U=Q[11],x[8]=ze*_e+Qe*ve+tt*Me+U*ot,x[9]=ze*ue+Qe*Ie+tt*Ve+U*Ge,x[10]=ze*he+Qe*Pe+tt*Ue+U*et,x[11]=ze*fe+Qe*Te+tt*Je+U*Ne,ze=Q[12],Qe=Q[13],tt=Q[14],U=Q[15],x[12]=ze*_e+Qe*ve+tt*Me+U*ot,x[13]=ze*ue+Qe*Ie+tt*Ve+U*Ge,x[14]=ze*he+Qe*Pe+tt*Ue+U*et,x[15]=ze*fe+Qe*Te+tt*Je+U*Ne,x}e.mul=S;function P(x,R,Q,_e,ue,he){const fe=R[0+ue],ve=R[1+ue],Ie=R[2+ue],Pe=R[3+ue],Te=R[4+ue],Me=R[5+ue],Ve=R[6+ue],Ue=R[7+ue],Je=R[8+ue],ot=R[9+ue],Ge=R[10+ue],et=R[11+ue],Ne=R[12+ue],ze=R[13+ue],Qe=R[14+ue],tt=R[15+ue];let U=Q[0+he],z=Q[1+he],X=Q[2+he],ge=Q[3+he];return x[0+_e]=U*fe+z*Te+X*Je+ge*Ne,x[1+_e]=U*ve+z*Me+X*ot+ge*ze,x[2+_e]=U*Ie+z*Ve+X*Ge+ge*Qe,x[3+_e]=U*Pe+z*Ue+X*et+ge*tt,U=Q[4+he],z=Q[5+he],X=Q[6+he],ge=Q[7+he],x[4+_e]=U*fe+z*Te+X*Je+ge*Ne,x[5+_e]=U*ve+z*Me+X*ot+ge*ze,x[6+_e]=U*Ie+z*Ve+X*Ge+ge*Qe,x[7+_e]=U*Pe+z*Ue+X*et+ge*tt,U=Q[8+he],z=Q[9+he],X=Q[10+he],ge=Q[11+he],x[8+_e]=U*fe+z*Te+X*Je+ge*Ne,x[9+_e]=U*ve+z*Me+X*ot+ge*ze,x[10+_e]=U*Ie+z*Ve+X*Ge+ge*Qe,x[11+_e]=U*Pe+z*Ue+X*et+ge*tt,U=Q[12+he],z=Q[13+he],X=Q[14+he],ge=Q[15+he],x[12+_e]=U*fe+z*Te+X*Je+ge*Ne,x[13+_e]=U*ve+z*Me+X*ot+ge*ze,x[14+_e]=U*Ie+z*Ve+X*Ge+ge*Qe,x[15+_e]=U*Pe+z*Ue+X*et+ge*tt,x}e.mulOffset=P;function T(x,R,Q,_e){return S(x,S(x,R,Q),_e)}e.mul3=T;function D(x,R,Q){const _e=Q[0],ue=Q[1],he=Q[2];let fe,ve,Ie,Pe,Te,Me,Ve,Ue,Je,ot,Ge,et;return R===x?(x[12]=R[0]*_e+R[4]*ue+R[8]*he+R[12],x[13]=R[1]*_e+R[5]*ue+R[9]*he+R[13],x[14]=R[2]*_e+R[6]*ue+R[10]*he+R[14],x[15]=R[3]*_e+R[7]*ue+R[11]*he+R[15]):(fe=R[0],ve=R[1],Ie=R[2],Pe=R[3],Te=R[4],Me=R[5],Ve=R[6],Ue=R[7],Je=R[8],ot=R[9],Ge=R[10],et=R[11],x[0]=fe,x[1]=ve,x[2]=Ie,x[3]=Pe,x[4]=Te,x[5]=Me,x[6]=Ve,x[7]=Ue,x[8]=Je,x[9]=ot,x[10]=Ge,x[11]=et,x[12]=fe*_e+Te*ue+Je*he+R[12],x[13]=ve*_e+Me*ue+ot*he+R[13],x[14]=Ie*_e+Ve*ue+Ge*he+R[14],x[15]=Pe*_e+Ue*ue+et*he+R[15]),x}e.translate=D;function w(x,R){return x[0]=1,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=1,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=1,x[11]=0,x[12]=R[0],x[13]=R[1],x[14]=R[2],x[15]=1,x}e.fromTranslation=w;function E(x,R){return x[12]=R[0],x[13]=R[1],x[14]=R[2],x}e.setTranslation=E;function k(x,R,Q,_e){return x[0]=Q[0],x[4]=Q[1],x[8]=Q[2],x[1]=_e[0],x[5]=_e[1],x[9]=_e[2],x[2]=R[0],x[6]=R[1],x[10]=R[2],x}e.setAxes=k;function F(x,R,Q,_e){let ue=_e[0],he=_e[1],fe=_e[2],ve=Math.sqrt(ue*ue+he*he+fe*fe);if(Math.abs(ve)<jt)return n();ve=1/ve,ue*=ve,he*=ve,fe*=ve;const Ie=Math.sin(Q),Pe=Math.cos(Q),Te=1-Pe,Me=R[0],Ve=R[1],Ue=R[2],Je=R[3],ot=R[4],Ge=R[5],et=R[6],Ne=R[7],ze=R[8],Qe=R[9],tt=R[10],U=R[11],z=ue*ue*Te+Pe,X=he*ue*Te+fe*Ie,ge=fe*ue*Te-he*Ie,He=ue*he*Te-fe*Ie,$e=he*he*Te+Pe,dt=fe*he*Te+ue*Ie,It=ue*fe*Te+he*Ie,ft=he*fe*Te-ue*Ie,Ut=fe*fe*Te+Pe;return x[0]=Me*z+ot*X+ze*ge,x[1]=Ve*z+Ge*X+Qe*ge,x[2]=Ue*z+et*X+tt*ge,x[3]=Je*z+Ne*X+U*ge,x[4]=Me*He+ot*$e+ze*dt,x[5]=Ve*He+Ge*$e+Qe*dt,x[6]=Ue*He+et*$e+tt*dt,x[7]=Je*He+Ne*$e+U*dt,x[8]=Me*It+ot*ft+ze*Ut,x[9]=Ve*It+Ge*ft+Qe*Ut,x[10]=Ue*It+et*ft+tt*Ut,x[11]=Je*It+Ne*ft+U*Ut,R!==x&&(x[12]=R[12],x[13]=R[13],x[14]=R[14],x[15]=R[15]),x}e.rotate=F;function V(x,R,Q){let _e=Q[0],ue=Q[1],he=Q[2],fe=Math.sqrt(_e*_e+ue*ue+he*he);if(Math.abs(fe)<jt)return r(x);fe=1/fe,_e*=fe,ue*=fe,he*=fe;const ve=Math.sin(R),Ie=Math.cos(R),Pe=1-Ie;return x[0]=_e*_e*Pe+Ie,x[1]=ue*_e*Pe+he*ve,x[2]=he*_e*Pe-ue*ve,x[3]=0,x[4]=_e*ue*Pe-he*ve,x[5]=ue*ue*Pe+Ie,x[6]=he*ue*Pe+_e*ve,x[7]=0,x[8]=_e*he*Pe+ue*ve,x[9]=ue*he*Pe-_e*ve,x[10]=he*he*Pe+Ie,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x}e.fromRotation=V;function de(x,R,Q){const _e=Q[0],ue=Q[1],he=Q[2];return x[0]=R[0]*_e,x[1]=R[1]*_e,x[2]=R[2]*_e,x[3]=R[3]*_e,x[4]=R[4]*ue,x[5]=R[5]*ue,x[6]=R[6]*ue,x[7]=R[7]*ue,x[8]=R[8]*he,x[9]=R[9]*he,x[10]=R[10]*he,x[11]=R[11]*he,x[12]=R[12],x[13]=R[13],x[14]=R[14],x[15]=R[15],x}e.scale=de;function W(x,R,Q){return x[0]=R[0]*Q,x[1]=R[1]*Q,x[2]=R[2]*Q,x[3]=R[3]*Q,x[4]=R[4]*Q,x[5]=R[5]*Q,x[6]=R[6]*Q,x[7]=R[7]*Q,x[8]=R[8]*Q,x[9]=R[9]*Q,x[10]=R[10]*Q,x[11]=R[11]*Q,x[12]=R[12],x[13]=R[13],x[14]=R[14],x[15]=R[15],x}e.scaleUniformly=W;function J(x,R){return x[0]=R[0],x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=R[1],x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=R[2],x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x}e.fromScaling=J;function le(x,R){return x[0]=R,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=R,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=R,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x}e.fromUniformScaling=le;const K=[0,0,0],ae=[0,0,0];function me(x,R,Q){const _e=O.cross(K,R,O.unitX);O.dot(_e,_e)<jt&&O.cross(_e,R,O.unitY),O.normalize(_e,_e);const ue=O.cross(ae,R,_e);return O.normalize(ue,ue),k(x,R,_e,ue),x[12]=Q[0],x[13]=Q[1],x[14]=Q[2],x[15]=1,x}e.fromPlane=me;function De(x,R){return x[0]=R[0],x[1]=R[1],x[2]=R[2],x[4]=R[3],x[5]=R[4],x[6]=R[5],x[8]=R[6],x[9]=R[7],x[10]=R[8],x}e.fromMat3=De;function te(x,R,Q,_e){const[ue,he,fe,ve]=Q,Ie=ue+ue,Pe=he+he,Te=fe+fe,Me=ue*Ie,Ve=ue*Pe,Ue=ue*Te,Je=he*Pe,ot=he*Te,Ge=fe*Te,et=ve*Ie,Ne=ve*Pe,ze=ve*Te,[Qe,tt,U]=_e;return x[0]=(1-(Je+Ge))*Qe,x[1]=(Ve+ze)*Qe,x[2]=(Ue-Ne)*Qe,x[3]=0,x[4]=(Ve-ze)*tt,x[5]=(1-(Me+Ge))*tt,x[6]=(ot+et)*tt,x[7]=0,x[8]=(Ue+Ne)*U,x[9]=(ot-et)*U,x[10]=(1-(Me+Je))*U,x[11]=0,x[12]=R[0],x[13]=R[1],x[14]=R[2],x[15]=1,x}e.compose=te;const ce=[0,0,0],M=t();function B(x,R,Q,_e){let ue=O.magnitude(O.set(ce,x[0],x[1],x[2]));const he=O.magnitude(O.set(ce,x[4],x[5],x[6])),fe=O.magnitude(O.set(ce,x[8],x[9],x[10]));ne(x)<0&&(ue=-ue),R[0]=x[12],R[1]=x[13],R[2]=x[14],p(M,x);const Ie=1/ue,Pe=1/he,Te=1/fe;return M[0]*=Ie,M[1]*=Ie,M[2]*=Ie,M[4]*=Pe,M[5]*=Pe,M[6]*=Pe,M[8]*=Te,M[9]*=Te,M[10]*=Te,A(Q,M),_e[0]=ue,_e[1]=he,_e[2]=fe,x}e.decompose=B;function j(x){let R="";for(let Q=0;Q<4;Q++){for(let _e=0;_e<4;_e++)R+=x[4*_e+Q].toString(),_e<3&&(R+=" ");Q<3&&(R+=`
`)}return R}e.makeTable=j;function ne(x){const R=x[0],Q=x[1],_e=x[2],ue=x[3],he=x[4],fe=x[5],ve=x[6],Ie=x[7],Pe=x[8],Te=x[9],Me=x[10],Ve=x[11],Ue=x[12],Je=x[13],ot=x[14],Ge=x[15],et=R*fe-Q*he,Ne=R*ve-_e*he,ze=R*Ie-ue*he,Qe=Q*ve-_e*fe,tt=Q*Ie-ue*fe,U=_e*Ie-ue*ve,z=Pe*Je-Te*Ue,X=Pe*ot-Me*Ue,ge=Pe*Ge-Ve*Ue,He=Te*ot-Me*Je,$e=Te*Ge-Ve*Je,dt=Me*Ge-Ve*ot;return et*dt-Ne*$e+ze*He+Qe*ge-tt*X+U*z}e.determinant=ne;function G(x,R){return $(x,typeof R<"u"?R:jt)}e.isRotationAndTranslation=G;function $(x,R){const Q=x[0],_e=x[1],ue=x[2],he=x[3],fe=x[4],ve=x[5],Ie=x[6],Pe=x[7],Te=x[8],Me=x[9],Ve=x[10],Ue=x[11],Je=x[15];if(!fn(Je,1,R)||!fn(he,0,R)||!fn(Pe,0,R)||!fn(Ue,0,R))return!1;const ot=Math.abs(Q*(ve*Ve-Ie*Me)-_e*(fe*Ve-Ie*Te)+ue*(fe*Me-ve*Te));return!!fn(ot,1,R)}function Y(x,R){return ie(x,typeof R<"u"?R:jt)}e.isTranslationAndUniformScaling=Y;function ie(x,R){const Q=x[0];return fn(x[1],0,R)&&fn(x[2],0,R)&&fn(x[3],0,R)&&fn(x[4],0,R)&&fn(x[5],Q,R)&&fn(x[6],0,R)&&fn(x[7],0,R)&&fn(x[8],0,R)&&fn(x[9],0,R)&&fn(x[10],Q,R)&&fn(x[11],0,R)&&fn(x[15],1,R)}function oe(x,R){const Q=R[0],_e=R[1],ue=R[2],he=R[3],fe=Q+Q,ve=_e+_e,Ie=ue+ue,Pe=Q*fe,Te=_e*fe,Me=_e*ve,Ve=ue*fe,Ue=ue*ve,Je=ue*Ie,ot=he*fe,Ge=he*ve,et=he*Ie;return x[0]=1-Me-Je,x[1]=Te+et,x[2]=Ve-Ge,x[3]=0,x[4]=Te-et,x[5]=1-Pe-Je,x[6]=Ue+ot,x[7]=0,x[8]=Ve+Ge,x[9]=Ue-ot,x[10]=1-Pe-Me,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x}e.fromQuat=oe;function pe(x,R,Q){const _e=R[0],ue=R[1],he=R[2],fe=Math.cos(_e),ve=Math.sin(_e),Ie=Math.cos(ue),Pe=Math.sin(ue),Te=Math.cos(he),Me=Math.sin(he);if(Q==="XYZ"){const Ve=fe*Te,Ue=fe*Me,Je=ve*Te,ot=ve*Me;x[0]=Ie*Te,x[4]=-Ie*Me,x[8]=Pe,x[1]=Ue+Je*Pe,x[5]=Ve-ot*Pe,x[9]=-ve*Ie,x[2]=ot-Ve*Pe,x[6]=Je+Ue*Pe,x[10]=fe*Ie}else if(Q==="YXZ"){const Ve=Ie*Te,Ue=Ie*Me,Je=Pe*Te,ot=Pe*Me;x[0]=Ve+ot*ve,x[4]=Je*ve-Ue,x[8]=fe*Pe,x[1]=fe*Me,x[5]=fe*Te,x[9]=-ve,x[2]=Ue*ve-Je,x[6]=ot+Ve*ve,x[10]=fe*Ie}else if(Q==="ZXY"){const Ve=Ie*Te,Ue=Ie*Me,Je=Pe*Te,ot=Pe*Me;x[0]=Ve-ot*ve,x[4]=-fe*Me,x[8]=Je+Ue*ve,x[1]=Ue+Je*ve,x[5]=fe*Te,x[9]=ot-Ve*ve,x[2]=-fe*Pe,x[6]=ve,x[10]=fe*Ie}else if(Q==="ZYX"){const Ve=fe*Te,Ue=fe*Me,Je=ve*Te,ot=ve*Me;x[0]=Ie*Te,x[4]=Je*Pe-Ue,x[8]=Ve*Pe+ot,x[1]=Ie*Me,x[5]=ot*Pe+Ve,x[9]=Ue*Pe-Je,x[2]=-Pe,x[6]=ve*Ie,x[10]=fe*Ie}else if(Q==="YZX"){const Ve=fe*Ie,Ue=fe*Pe,Je=ve*Ie,ot=ve*Pe;x[0]=Ie*Te,x[4]=ot-Ve*Me,x[8]=Je*Me+Ue,x[1]=Me,x[5]=fe*Te,x[9]=-ve*Te,x[2]=-Pe*Te,x[6]=Ue*Me+Je,x[10]=Ve-ot*Me}else if(Q==="XZY"){const Ve=fe*Ie,Ue=fe*Pe,Je=ve*Ie,ot=ve*Pe;x[0]=Ie*Te,x[4]=-Me,x[8]=Pe*Te,x[1]=Ve*Me+ot,x[5]=fe*Te,x[9]=Ue*Me-Je,x[2]=Je*Me-Ue,x[6]=ve*Te,x[10]=ot*Me+Ve}return x[3]=0,x[7]=0,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x}e.fromEuler=pe;function L(x,R,Q,_e,ue,he,fe){const ve=2*he/(Q-R),Ie=2*he/(_e-ue),Pe=(Q+R)/(Q-R),Te=(_e+ue)/(_e-ue),Me=-(fe+he)/(fe-he),Ve=-2*fe*he/(fe-he);return x[0]=ve,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=Ie,x[6]=0,x[7]=0,x[8]=Pe,x[9]=Te,x[10]=Me,x[11]=-1,x[12]=0,x[13]=0,x[14]=Ve,x[15]=0,x}e.perspective=L;function q(x,R,Q,_e,ue,he,fe){const ve=1/(Q-R),Ie=1/(_e-ue),Pe=1/(fe-he),Te=(Q+R)*ve,Me=(_e+ue)*Ie,Ve=(fe+he)*Pe;return x[0]=2*ve,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=2*Ie,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=-2*Pe,x[11]=0,x[12]=-Te,x[13]=-Me,x[14]=-Ve,x[15]=1,x}e.ortho=q;function H(x,R,Q,_e){let ue,he,fe,ve,Ie,Pe,Te,Me,Ve,Ue;const Je=R[0],ot=R[1],Ge=R[2],et=_e[0],Ne=_e[1],ze=_e[2],Qe=Q[0],tt=Q[1],U=Q[2];return Math.abs(Je-Qe)<jt&&Math.abs(ot-tt)<jt&&Math.abs(Ge-U)<jt?r(x):(Te=Je-Qe,Me=ot-tt,Ve=Ge-U,Ue=1/Math.sqrt(Te*Te+Me*Me+Ve*Ve),Te*=Ue,Me*=Ue,Ve*=Ue,ue=Ne*Ve-ze*Me,he=ze*Te-et*Ve,fe=et*Me-Ne*Te,Ue=Math.sqrt(ue*ue+he*he+fe*fe),Ue?(Ue=1/Ue,ue*=Ue,he*=Ue,fe*=Ue):(ue=0,he=0,fe=0),ve=Me*fe-Ve*he,Ie=Ve*ue-Te*fe,Pe=Te*he-Me*ue,Ue=Math.sqrt(ve*ve+Ie*Ie+Pe*Pe),Ue?(Ue=1/Ue,ve*=Ue,Ie*=Ue,Pe*=Ue):(ve=0,Ie=0,Pe=0),x[0]=ue,x[1]=ve,x[2]=Te,x[3]=0,x[4]=he,x[5]=Ie,x[6]=Me,x[7]=0,x[8]=fe,x[9]=Pe,x[10]=Ve,x[11]=0,x[12]=-(ue*Je+he*ot+fe*Ge),x[13]=-(ve*Je+Ie*ot+Pe*Ge),x[14]=-(Te*Je+Me*ot+Ve*Ge),x[15]=1,x)}e.lookAt=H;function Z(x,R,Q,_e){const ue=R[0],he=R[1],fe=R[2],ve=_e[0],Ie=_e[1],Pe=_e[2];let Te=ue-Q[0],Me=he-Q[1],Ve=fe-Q[2],Ue=Te*Te+Me*Me+Ve*Ve;Ue>0&&(Ue=1/Math.sqrt(Ue),Te*=Ue,Me*=Ue,Ve*=Ue);let Je=Ie*Ve-Pe*Me,ot=Pe*Te-ve*Ve,Ge=ve*Me-Ie*Te;return Ue=Je*Je+ot*ot+Ge*Ge,Ue>0&&(Ue=1/Math.sqrt(Ue),Je*=Ue,ot*=Ue,Ge*=Ue),x[0]=Je,x[1]=ot,x[2]=Ge,x[3]=0,x[4]=Me*Ge-Ve*ot,x[5]=Ve*Je-Te*Ge,x[6]=Te*ot-Me*Je,x[7]=0,x[8]=Te,x[9]=Me,x[10]=Ve,x[11]=0,x[12]=ue,x[13]=he,x[14]=fe,x[15]=1,x}e.targetTo=Z;function re(x,R){i(x);for(let Q=0;Q<4;Q++){const _e=R[Q];l(x,Q,_e,1)}return x}e.fromPermutation=re;function Re(x){const R=x[0]*x[0]+x[1]*x[1]+x[2]*x[2],Q=x[4]*x[4]+x[5]*x[5]+x[6]*x[6],_e=x[8]*x[8]+x[9]*x[9]+x[10]*x[10];return Math.sqrt(Math.max(R,Q,_e))}e.getMaxScaleOnAxis=Re;const qe=[1,0,0],xe=[0,1,0],be=[0,0,1];e.rotX90=V(t(),Ur(90),qe),e.rotX180=V(t(),Ur(180),qe),e.rotY90=V(t(),Ur(90),xe),e.rotY180=V(t(),Ur(180),xe),e.rotY270=V(t(),Ur(270),xe),e.rotZ90=V(t(),Ur(90),be),e.rotZ180=V(t(),Ur(180),be),e.rotXY90=S(t(),e.rotX90,e.rotY90),e.rotZY90=S(t(),e.rotZ90,e.rotY90),e.rotZYZ90=S(t(),e.rotZY90,e.rotZ90),e.rotZ90X180=S(t(),e.rotZ90,e.rotX180),e.rotY90Z180=S(t(),e.rotY90,e.rotZ180),e.id=n()})(Ke||(Ke={}));function jn(){return jn.zero()}(function(e){function t(){const M=[.1,0,0,0,0,0,0,0,0];return M[0]=0,M}e.zero=t;function n(){const M=t();return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=1,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M}e.identity=n;function r(M){return M[0]=1,M[1]=0,M[2]=0,M[3]=0,M[4]=1,M[5]=0,M[6]=0,M[7]=0,M[8]=1,M}e.setIdentity=r;function i(M,B,j){return B[j+0]=M[0],B[j+1]=M[1],B[j+2]=M[2],B[j+3]=M[3],B[j+4]=M[4],B[j+5]=M[5],B[j+6]=M[6],B[j+7]=M[7],B[j+8]=M[8],B}e.toArray=i;function o(M,B,j){return M[0]=B[j+0],M[1]=B[j+1],M[2]=B[j+2],M[3]=B[j+3],M[4]=B[j+4],M[5]=B[j+5],M[6]=B[j+6],M[7]=B[j+7],M[8]=B[j+8],M}e.fromArray=o;function s(M,B,j,ne){return M[0]=B[0],M[1]=B[1],M[2]=B[2],M[3]=j[0],M[4]=j[1],M[5]=j[2],M[6]=ne[0],M[7]=ne[1],M[8]=ne[2],M}e.fromColumns=s;function c(M,B){return M[0]=B[0],M[1]=B[1],M[2]=B[2],M[3]=B[4],M[4]=B[5],M[5]=B[6],M[6]=B[8],M[7]=B[9],M[8]=B[10],M}e.fromMat4=c;const a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function u(M,B,j){return Ke.fromEuler(a,B,j),c(M,a)}e.fromEuler=u;function l(M,B,j,ne,G,$,Y,ie,oe){const pe=t();return pe[0]=M,pe[1]=B,pe[2]=j,pe[3]=ne,pe[4]=G,pe[5]=$,pe[6]=Y,pe[7]=ie,pe[8]=oe,pe}e.create=l;const f=n();function d(M,B){return p(M,f,typeof B>"u"?jt:B)}e.isIdentity=d;function m(M){for(let B=0;B<9;B++)if(isNaN(M[B]))return!0;return!1}e.hasNaN=m;function h(M){return v(t(),M)}e.clone=h;function p(M,B,j){for(let ne=0;ne<9;ne++)if(Math.abs(M[ne]-B[ne])>j)return!1;return!0}e.areEqual=p;function _(M,B,j,ne){M[3*j+B]=ne}e.setValue=_;function y(M,B,j){return M[3*j+B]}e.getValue=y;function v(M,B){return M[0]=B[0],M[1]=B[1],M[2]=B[2],M[3]=B[3],M[4]=B[4],M[5]=B[5],M[6]=B[6],M[7]=B[7],M[8]=B[8],M}e.copy=v;function A(M,B){if(M===B){const j=B[1],ne=B[2],G=B[5];M[1]=B[3],M[2]=B[6],M[3]=j,M[5]=B[7],M[6]=ne,M[7]=G}else M[0]=B[0],M[1]=B[3],M[2]=B[6],M[3]=B[1],M[4]=B[4],M[5]=B[7],M[6]=B[2],M[7]=B[5],M[8]=B[8];return M}e.transpose=A;function g(M,B){const j=B[0],ne=B[1],G=B[2],$=B[3],Y=B[4],ie=B[5],oe=B[6],pe=B[7],L=B[8],q=L*Y-ie*pe,H=-L*$+ie*oe,Z=pe*$-Y*oe;let re=j*q+ne*H+G*Z;return re?(re=1/re,M[0]=q*re,M[1]=(-L*ne+G*pe)*re,M[2]=(ie*ne-G*Y)*re,M[3]=H*re,M[4]=(L*j-G*oe)*re,M[5]=(-ie*j+G*$)*re,M[6]=Z*re,M[7]=(-pe*j+ne*oe)*re,M[8]=(Y*j-ne*$)*re,M):(console.warn("non-invertible matrix.",B),M)}e.invert=g;function b(M,B){return M===B?(M[3]=B[1],M[6]=B[2],M[7]=B[5]):(M[0]=B[0],M[1]=B[1],M[2]=B[2],M[3]=B[1],M[4]=B[4],M[5]=B[5],M[6]=B[2],M[7]=B[5],M[8]=B[8]),M}e.symmtricFromUpper=b;function C(M,B){return M===B?(M[1]=B[3],M[2]=B[6],M[5]=B[7]):(M[0]=B[0],M[1]=B[3],M[2]=B[6],M[3]=B[3],M[4]=B[4],M[5]=B[7],M[6]=B[6],M[7]=B[7],M[8]=B[8]),M}e.symmtricFromLower=C;function I(M){const B=M[0],j=M[1],ne=M[2],G=M[3],$=M[4],Y=M[5],ie=M[6],oe=M[7],pe=M[8],L=pe*$-Y*oe,q=-pe*G+Y*ie,H=oe*G-$*ie;return B*L+j*q+ne*H}e.determinant=I;function S(M){return M[0]+M[4]+M[8]}e.trace=S;function P(M,B,j){return M[0]=B[0]-j[0],M[1]=B[1]-j[1],M[2]=B[2]-j[2],M[3]=B[3]-j[3],M[4]=B[4]-j[4],M[5]=B[5]-j[5],M[6]=B[6]-j[6],M[7]=B[7]-j[7],M[8]=B[8]-j[8],M}e.sub=P;function T(M,B,j){return M[0]=B[0]+j[0],M[1]=B[1]+j[1],M[2]=B[2]+j[2],M[3]=B[3]+j[3],M[4]=B[4]+j[4],M[5]=B[5]+j[5],M[6]=B[6]+j[6],M[7]=B[7]+j[7],M[8]=B[8]+j[8],M}e.add=T;function D(M,B,j){const ne=B[0],G=B[1],$=B[2],Y=B[3],ie=B[4],oe=B[5],pe=B[6],L=B[7],q=B[8],H=j[0],Z=j[1],re=j[2],Re=j[3],qe=j[4],xe=j[5],be=j[6],x=j[7],R=j[8];return M[0]=H*ne+Z*Y+re*pe,M[1]=H*G+Z*ie+re*L,M[2]=H*$+Z*oe+re*q,M[3]=Re*ne+qe*Y+xe*pe,M[4]=Re*G+qe*ie+xe*L,M[5]=Re*$+qe*oe+xe*q,M[6]=be*ne+x*Y+R*pe,M[7]=be*G+x*ie+R*L,M[8]=be*$+x*oe+R*q,M}e.mul=D;function w(M,B,j){return M[0]=B[0]-j,M[1]=B[1]-j,M[2]=B[2]-j,M[3]=B[3]-j,M[4]=B[4]-j,M[5]=B[5]-j,M[6]=B[6]-j,M[7]=B[7]-j,M[8]=B[8]-j,M}e.subScalar=w;function E(M,B,j){return M[0]=B[0]+j,M[1]=B[1]+j,M[2]=B[2]+j,M[3]=B[3]+j,M[4]=B[4]+j,M[5]=B[5]+j,M[6]=B[6]+j,M[7]=B[7]+j,M[8]=B[8]+j,M}e.addScalar=E;function k(M,B,j){return M[0]=B[0]*j,M[1]=B[1]*j,M[2]=B[2]*j,M[3]=B[3]*j,M[4]=B[4]*j,M[5]=B[5]*j,M[6]=B[6]*j,M[7]=B[7]*j,M[8]=B[8]*j,M}e.mulScalar=k;const F=Math.PI/3,V=t();function de(M,B){const j=B[1]*B[1]+B[2]*B[2]+B[5]*B[5];if(j===0)M[0]=B[0],M[1]=B[4],M[2]=B[8];else{const ne=S(B)/3,G=B[0]-ne,$=B[4]-ne,Y=B[8]-ne,ie=G*G+$*$+Y*Y+2*j,oe=Math.sqrt(ie/6);k(V,e.Identity,ne),P(V,B,V),k(V,V,1/oe);const pe=I(V)/2,L=pe<=-1?F:pe>=1?0:Math.acos(pe)/3;M[0]=ne+2*oe*Math.cos(L),M[2]=ne+2*oe*Math.cos(L+2*F),M[1]=3*ne-M[0]-M[2]}return M}e.symmetricEigenvalues=de;const W=[.1,0,0],J=[.1,0,0],le=[.1,0,0],K=[.1,0,0],ae=[.1,0,0],me=[.1,0,0];function De(M,B,j){O.set(W,B[0]-j,B[1],B[2]),O.set(J,B[1],B[4]-j,B[5]),O.set(le,B[2],B[5],B[8]-j),O.cross(K,W,J),O.cross(ae,W,le),O.cross(me,J,le);const ne=O.dot(K,K),G=O.dot(ae,ae),$=O.dot(me,me);let Y=ne,ie=0;return G>Y&&(Y=G,ie=1),$>Y&&(ie=2),ie===0?O.scale(M,K,1/Math.sqrt(ne)):ie===1?O.scale(M,ae,1/Math.sqrt(G)):O.scale(M,me,1/Math.sqrt($)),M}e.eigenvector=De;function te(M,B){return c(M,B),g(M,M),A(M,M),M}e.directionTransform=te,e.Identity=n();function ce(M,B){return M[0]*B[0]+M[1]*B[1]+M[2]*B[2]+M[3]*B[3]+M[4]*B[4]+M[5]*B[5]+M[6]*B[6]+M[7]*B[7]+M[8]*B[8]}e.innerProduct=ce})(jn||(jn={}));function Is(){return Is.zero()}(function(e){function t(){const S=[.1,0];return S[0]=0,S}e.zero=t;function n(S){const P=t();return P[0]=S[0],P[1]=S[1],P}e.clone=n;function r(S,P){const T=t();return T[0]=S,T[1]=P,T}e.create=r;function i(S){return isNaN(S[0])||isNaN(S[1])}e.hasNaN=i;function o(S,P,T){return P[T+0]=S[0],P[T+1]=S[1],P}e.toArray=o;function s(S,P,T){return S[0]=P[T+0],S[1]=P[T+1],S}e.fromArray=s;function c(S,P){return S[0]=P[0],S[1]=P[1],S}e.copy=c;function a(S,P,T){return S[0]=P,S[1]=T,S}e.set=a;function u(S,P,T){return S[0]=P[0]+T[0],S[1]=P[1]+T[1],S}e.add=u;function l(S,P,T){return S[0]=P[0]-T[0],S[1]=P[1]-T[1],S}e.sub=l;function f(S,P,T){return S[0]=P[0]*T[0],S[1]=P[1]*T[1],S}e.mul=f;function d(S,P,T){return S[0]=P[0]/T[0],S[1]=P[1]/T[1],S}e.div=d;function m(S,P,T){return S[0]=P[0]*T,S[1]=P[1]*T,S}e.scale=m;function h(S,P){return S[0]=Math.round(P[0]),S[1]=Math.round(P[1]),S}e.round=h;function p(S,P){return S[0]=Math.ceil(P[0]),S[1]=Math.ceil(P[1]),S}e.ceil=p;function _(S,P){return S[0]=Math.floor(P[0]),S[1]=Math.floor(P[1]),S}e.floor=_;function y(S,P){const T=P[0]-S[0],D=P[1]-S[1];return Math.sqrt(T*T+D*D)}e.distance=y;function v(S,P){const T=P[0]-S[0],D=P[1]-S[1];return T*T+D*D}e.squaredDistance=v;function A(S){const P=S[0],T=S[1];return Math.sqrt(P*P+T*T)}e.magnitude=A;function g(S){const P=S[0],T=S[1];return P*P+T*T}e.squaredMagnitude=g;function b(S,P){return S[0]=1/P[0],S[1]=1/P[1],S}e.inverse=b;function C(S,P){return S[0]===P[0]&&S[1]===P[1]}e.areEqual=C;function I(S,P){return`[${S[0].toPrecision(P)} ${S[1].toPrecision(P)}}]`}e.toString=I})(Is||(Is={}));function Dl(){return Dl.zero()}(function(e){function t(){const w=[.1,0,0,0];return w[0]=0,w}e.zero=t;function n(w){const E=t();return E[0]=w[0],E[1]=w[1],E[2]=w[2],E[3]=w[3],E}e.clone=n;function r(w,E,k,F){const V=t();return V[0]=w,V[1]=E,V[2]=k,V[3]=F,V}e.create=r;function i(w,E){return w[0]=E.center[0],w[1]=E.center[1],w[2]=E.center[2],w[3]=E.radius,w}e.fromSphere=i;function o(w){return i(t(),w)}e.ofSphere=o;function s(w){return isNaN(w[0])||isNaN(w[1])||isNaN(w[2])||isNaN(w[3])}e.hasNaN=s;function c(w,E,k){return E[k+0]=w[0],E[k+1]=w[1],E[k+2]=w[2],E[k+3]=w[3],E}e.toArray=c;function a(w,E,k){return w[0]=E[k+0],w[1]=E[k+1],w[2]=E[k+2],w[3]=E[k+3],w}e.fromArray=a;function u(w,E,k){E[k+0]=w[0],E[k+1]=w[1],E[k+2]=w[2]}e.toVec3Array=u;function l(w,E,k){return w[0]=E[k+0],w[1]=E[k+1],w[2]=E[k+2],w[3]=0,w}e.fromVec3Array=l;function f(w,E){return w[0]=E[0],w[1]=E[1],w[2]=E[2],w[3]=E[3],w}e.copy=f;function d(w,E,k,F,V){return w[0]=E,w[1]=k,w[2]=F,w[3]=V,w}e.set=d;function m(w,E,k){return w[0]=E[0]+k[0],w[1]=E[1]+k[1],w[2]=E[2]+k[2],w[3]=E[3]+k[3],w}e.add=m;function h(w,E){const k=E[0]-w[0],F=E[1]-w[1],V=E[2]-w[2],de=E[3]-w[3];return Math.sqrt(k*k+F*F+V*V+de*de)}e.distance=h;function p(w,E,k){return w[0]=E[0]*k,w[1]=E[1]*k,w[2]=E[2]*k,w[4]=E[4]*k,w}e.scale=p;function _(w,E){return w[0]=Math.round(E[0]),w[1]=Math.round(E[1]),w[2]=Math.round(E[2]),w[3]=Math.round(E[3]),w}e.round=_;function y(w,E){return w[0]=Math.ceil(E[0]),w[1]=Math.ceil(E[1]),w[2]=Math.ceil(E[2]),w[3]=Math.ceil(E[3]),w}e.ceil=y;function v(w,E){return w[0]=Math.floor(E[0]),w[1]=Math.floor(E[1]),w[2]=Math.floor(E[2]),w[3]=Math.floor(E[3]),w}e.floor=v;function A(w,E){const k=E[0]-w[0],F=E[1]-w[1],V=E[2]-w[2],de=E[3]-w[3];return k*k+F*F+V*V+de*de}e.squaredDistance=A;function g(w){const E=w[0],k=w[1],F=w[2],V=w[3];return Math.sqrt(E*E+k*k+F*F+V*V)}e.norm=g;function b(w){const E=w[0],k=w[1],F=w[2],V=w[3];return E*E+k*k+F*F+V*V}e.squaredNorm=b;function C(w,E,k){const F=E[0],V=E[1],de=E[2],W=E[3];return w[0]=k[0]*F+k[4]*V+k[8]*de+k[12]*W,w[1]=k[1]*F+k[5]*V+k[9]*de+k[13]*W,w[2]=k[2]*F+k[6]*V+k[10]*de+k[14]*W,w[3]=k[3]*F+k[7]*V+k[11]*de+k[15]*W,w}e.transformMat4=C;function I(w,E){return w[0]*E[0]+w[1]*E[1]+w[2]*E[2]+w[3]*E[3]}e.dot=I;function S(w,E){return w[0]=1/E[0],w[1]=1/E[1],w[2]=1/E[2],w[3]=1/E[3],w}e.inverse=S;function P(w,E){return w[0]===E[0]&&w[1]===E[1]&&w[2]===E[2]&&w[3]===E[3]}e.exactEquals=P;function T(w,E){const k=w[0],F=w[1],V=w[2],de=w[3],W=E[0],J=E[1],le=E[2],K=E[3];return Math.abs(k-W)<=jt*Math.max(1,Math.abs(k),Math.abs(W))&&Math.abs(F-J)<=jt*Math.max(1,Math.abs(F),Math.abs(J))&&Math.abs(V-le)<=jt*Math.max(1,Math.abs(V),Math.abs(le))&&Math.abs(de-K)<=jt*Math.max(1,Math.abs(de),Math.abs(K))}e.equals=T;function D(w,E){return`[${w[0].toPrecision(E)} ${w[1].toPrecision(E)} ${w[2].toPrecision(E)}  ${w[3].toPrecision(E)}]`}e.toString=D})(Dl||(Dl={}));function qi(e){throw new Error("unreachable")}function lr(){return lr.zero()}(function(e){function t(){const B=[.1,0,0,0];return B[0]=0,B}e.zero=t;function n(){const B=t();return B[3]=1,B}e.identity=n;function r(B){B[0]=0,B[1]=0,B[2]=0,B[3]=1}e.setIdentity=r;function i(B){return isNaN(B[0])||isNaN(B[1])||isNaN(B[2])||isNaN(B[3])}e.hasNaN=i;function o(B,j,ne,G){const $=n();return $[0]=B,$[1]=j,$[2]=ne,$[3]=G,$}e.create=o;function s(B,j,ne){ne=ne*.5;const G=Math.sin(ne);return B[0]=G*j[0],B[1]=G*j[1],B[2]=G*j[2],B[3]=Math.cos(ne),B}e.setAxisAngle=s;function c(B,j){const ne=Math.acos(j[3])*2,G=Math.sin(ne/2);return G!==0?(B[0]=j[0]/G,B[1]=j[1]/G,B[2]=j[2]/G):(B[0]=1,B[1]=0,B[2]=0),ne}e.getAxisAngle=c;function a(B,j,ne){const G=j[0],$=j[1],Y=j[2],ie=j[3],oe=ne[0],pe=ne[1],L=ne[2],q=ne[3];return B[0]=G*q+ie*oe+$*L-Y*pe,B[1]=$*q+ie*pe+Y*oe-G*L,B[2]=Y*q+ie*L+G*pe-$*oe,B[3]=ie*q-G*oe-$*pe-Y*L,B}e.multiply=a;function u(B,j,ne){ne*=.5;const G=j[0],$=j[1],Y=j[2],ie=j[3],oe=Math.sin(ne),pe=Math.cos(ne);return B[0]=G*pe+ie*oe,B[1]=$*pe+Y*oe,B[2]=Y*pe-$*oe,B[3]=ie*pe-G*oe,B}e.rotateX=u;function l(B,j,ne){ne*=.5;const G=j[0],$=j[1],Y=j[2],ie=j[3],oe=Math.sin(ne),pe=Math.cos(ne);return B[0]=G*pe-Y*oe,B[1]=$*pe+ie*oe,B[2]=Y*pe+G*oe,B[3]=ie*pe-$*oe,B}e.rotateY=l;function f(B,j,ne){ne*=.5;const G=j[0],$=j[1],Y=j[2],ie=j[3],oe=Math.sin(ne),pe=Math.cos(ne);return B[0]=G*pe+$*oe,B[1]=$*pe-G*oe,B[2]=Y*pe+ie*oe,B[3]=ie*pe-Y*oe,B}e.rotateZ=f;function d(B,j){const ne=j[0],G=j[1],$=j[2];return B[0]=ne,B[1]=G,B[2]=$,B[3]=Math.sqrt(Math.abs(1-ne*ne-G*G-$*$)),B}e.calculateW=d;function m(B,j,ne,G){const $=j[0],Y=j[1],ie=j[2],oe=j[3];let pe=ne[0],L=ne[1],q=ne[2],H=ne[3],Z,re,Re,qe,xe;return re=$*pe+Y*L+ie*q+oe*H,re<0&&(re=-re,pe=-pe,L=-L,q=-q,H=-H),1-re>1e-6?(Z=Math.acos(re),Re=Math.sin(Z),qe=Math.sin((1-G)*Z)/Re,xe=Math.sin(G*Z)/Re):(qe=1-G,xe=G),B[0]=qe*$+xe*pe,B[1]=qe*Y+xe*L,B[2]=qe*ie+xe*q,B[3]=qe*oe+xe*H,B}e.slerp=m;function h(B,j){const ne=j[0],G=j[1],$=j[2],Y=j[3],ie=ne*ne+G*G+$*$+Y*Y,oe=ie?1/ie:0;return B[0]=-ne*oe,B[1]=-G*oe,B[2]=-$*oe,B[3]=Y*oe,B}e.invert=h;function p(B,j){return B[0]=-j[0],B[1]=-j[1],B[2]=-j[2],B[3]=j[3],B}e.conjugate=p;function _(B,j){return B[0]*j[0]+B[1]*j[1]+B[2]*j[2]+B[3]*j[3]}e.dot=_;function y(B,j){const ne=j[0]+j[4]+j[8];let G;if(ne>0)G=Math.sqrt(ne+1),B[3]=.5*G,G=.5/G,B[0]=(j[5]-j[7])*G,B[1]=(j[6]-j[2])*G,B[2]=(j[1]-j[3])*G;else{let $=0;j[4]>j[0]&&($=1),j[8]>j[$*3+$]&&($=2);const Y=($+1)%3,ie=($+2)%3;G=Math.sqrt(j[$*3+$]-j[Y*3+Y]-j[ie*3+ie]+1),B[$]=.5*G,G=.5/G,B[3]=(j[Y*3+ie]-j[ie*3+Y])*G,B[Y]=(j[Y*3+$]+j[$*3+Y])*G,B[ie]=(j[ie*3+$]+j[$*3+ie])*G}return B}e.fromMat3=y;const v=[0,0,0,0,0,0,0,0,0,0,0,0];function A(B,j){return jn.fromMat4(v,j),y(B,v)}e.fromMat4=A;function g(B,j,ne){const[G,$,Y]=j,ie=Math.cos(G/2),oe=Math.cos($/2),pe=Math.cos(Y/2),L=Math.sin(G/2),q=Math.sin($/2),H=Math.sin(Y/2);switch(ne){case"XYZ":B[0]=L*oe*pe+ie*q*H,B[1]=ie*q*pe-L*oe*H,B[2]=ie*oe*H+L*q*pe,B[3]=ie*oe*pe-L*q*H;break;case"YXZ":B[0]=L*oe*pe+ie*q*H,B[1]=ie*q*pe-L*oe*H,B[2]=ie*oe*H-L*q*pe,B[3]=ie*oe*pe+L*q*H;break;case"ZXY":B[0]=L*oe*pe-ie*q*H,B[1]=ie*q*pe+L*oe*H,B[2]=ie*oe*H+L*q*pe,B[3]=ie*oe*pe-L*q*H;break;case"ZYX":B[0]=L*oe*pe-ie*q*H,B[1]=ie*q*pe+L*oe*H,B[2]=ie*oe*H-L*q*pe,B[3]=ie*oe*pe+L*q*H;break;case"YZX":B[0]=L*oe*pe+ie*q*H,B[1]=ie*q*pe+L*oe*H,B[2]=ie*oe*H-L*q*pe,B[3]=ie*oe*pe-L*q*H;break;case"XZY":B[0]=L*oe*pe-ie*q*H,B[1]=ie*q*pe-L*oe*H,B[2]=ie*oe*H+L*q*pe,B[3]=ie*oe*pe+L*q*H;break;default:qi()}return B}e.fromEuler=g;const b=[0,0,0];function C(B,j,ne){let G=O.dot(j,ne)+1;return G<jt?(G=0,Math.abs(j[0])>Math.abs(j[2])?O.set(b,-j[1],j[0],0):O.set(b,0,-j[2],j[1])):O.cross(b,j,ne),B[0]=b[0],B[1]=b[1],B[2]=b[2],B[3]=G,de(B,B),B}e.fromUnitVec3=C;const I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function S(B,j,ne,G){return Ke.fromBasis(I,j,ne,G),A(B,I)}e.fromBasis=S;function P(B){const j=t();return j[0]=B[0],j[1]=B[1],j[2]=B[2],j[3]=B[3],j}e.clone=P;function T(B,j,ne){return j[ne+0]=B[0],j[ne+1]=B[1],j[ne+2]=B[2],j[ne+3]=B[3],j}e.toArray=T;function D(B,j,ne){return B[0]=j[ne+0],B[1]=j[ne+1],B[2]=j[ne+2],B[3]=j[ne+3],B}e.fromArray=D;function w(B,j){return B[0]=j[0],B[1]=j[1],B[2]=j[2],B[3]=j[3],B}e.copy=w;function E(B,j,ne,G,$){return B[0]=j,B[1]=ne,B[2]=G,B[3]=$,B}e.set=E;function k(B,j){return B[0]===j[0]&&B[1]===j[1]&&B[2]===j[2]&&B[3]===j[3]}e.exactEquals=k;function F(B,j){const ne=B[0],G=B[1],$=B[2],Y=B[3],ie=j[0],oe=j[1],pe=j[2],L=j[3];return Math.abs(ne-ie)<=jt*Math.max(1,Math.abs(ne),Math.abs(ie))&&Math.abs(G-oe)<=jt*Math.max(1,Math.abs(G),Math.abs(oe))&&Math.abs($-pe)<=jt*Math.max(1,Math.abs($),Math.abs(pe))&&Math.abs(Y-L)<=jt*Math.max(1,Math.abs(Y),Math.abs(L))}e.equals=F;function V(B,j,ne){return B[0]=j[0]+ne[0],B[1]=j[1]+ne[1],B[2]=j[2]+ne[2],B[3]=j[3]+ne[3],B}e.add=V;function de(B,j){const ne=j[0],G=j[1],$=j[2],Y=j[3];let ie=ne*ne+G*G+$*$+Y*Y;return ie>0&&(ie=1/Math.sqrt(ie),B[0]=ne*ie,B[1]=G*ie,B[2]=$*ie,B[3]=Y*ie),B}e.normalize=de;const W=[0,0,0],J=[1,0,0],le=[0,1,0];function K(B,j,ne){const G=O.dot(j,ne);return G<-.999999?(O.cross(W,J,j),O.magnitude(W)<1e-6&&O.cross(W,le,j),O.normalize(W,W),s(B,W,Math.PI),B):G>.999999?(B[0]=0,B[1]=0,B[2]=0,B[3]=1,B):(O.cross(W,j,ne),B[0]=W[0],B[1]=W[1],B[2]=W[2],B[3]=1+G,de(B,B))}e.rotationTo=K;const ae=t(),me=t();function De(B,j,ne,G,$,Y){return m(ae,j,$,Y),m(me,ne,G,Y),m(B,ae,me,2*Y*(1-Y)),B}e.sqlerp=De;const te=[0,0,0,0,0,0,0,0,0];function ce(B,j,ne,G){return te[0]=ne[0],te[3]=ne[1],te[6]=ne[2],te[1]=G[0],te[4]=G[1],te[7]=G[2],te[2]=-j[0],te[5]=-j[1],te[8]=-j[2],de(B,y(B,te))}e.setAxes=ce;function M(B,j){return`[${B[0].toPrecision(j)} ${B[1].toPrecision(j)} ${B[2].toPrecision(j)}  ${B[3].toPrecision(j)}]`}e.toString=M,e.Identity=n()})(lr||(lr={}));var dr;(function(e){function t(b,C,I){const S=[];for(let T=0;T<C.length;T++)S[T]=C[C.length-T-1];const P=[1];for(let T=1;T<b.length;T++)P[T]=b[S[T-1]];return{dimensions:b,axisOrderFastToSlow:S,axisOrderSlowToFast:C,accessDimensions:P,defaultCtor:I||Float64Array}}function n(b,C){return{space:b,data:C}}e.create=n;function r(b,C,I){const S=t(b,C,I),{get:P,set:T,add:D,dataOffset:w,getCoords:E}=m(S);return{rank:b.length,dimensions:b,axisOrderSlowToFast:C,create:h(S),get:P,set:T,add:D,dataOffset:w,getCoords:E}}e.Space=r;function i(b){return b}e.Data1=i;function o(b,C){return r([b],[0],C)}e.Vector=o;function s(b,C,I){return r([b,C],[1,0],I)}e.ColumnMajorMatrix=s;function c(b,C,I){return r([b,C],[0,1],I)}e.RowMajorMatrix=c;function a(b,C,I){if(C.rank!==2)throw new Error("Invalid tensor rank");const S=Math.min(4,C.dimensions[0]),P=Math.min(4,C.dimensions[1]);for(let T=0;T<S;T++)for(let D=0;D<P;D++)Ke.setValue(b,T,D,C.get(I,T,D));return b}e.toMat4=a;function u(b,C,I){if(C.rank!==2)throw new Error("Invalid tensor rank");const S=Math.min(3,C.dimensions[0]),P=Math.min(3,C.dimensions[1]);for(let T=0;T<S;T++)for(let D=0;D<P;D++)jn.setValue(b,T,D,C.get(I,T,D));return b}e.toMat3=u;function l(b,C,I){if(C.rank!==1)throw new Error("Invalid tensor rank");const S=Math.min(3,C.dimensions[0]);for(let P=0;P<S;P++)b[P]=I[P];return b}e.toVec3=l;function f(b,C,I){if(C.rank!==1)throw new Error("Invalid tensor rank");const S=Math.min(4,C.dimensions[0]);for(let P=0;P<S;P++)b[P]=I[P];return b}e.toVec4=f;function d(b,C){const I=b.length;if(I!==C.length)return!1;for(let S=0;S<I;S++)if(b[S]!==C[S])return!1;return!0}e.areEqualExact=d;function m(b){const{dimensions:C,axisOrderFastToSlow:I}=b;switch(C.length){case 1:return{get:(S,P)=>S[P],set:(S,P,T)=>S[P]=T,add:(S,P,T)=>S[P]+=T,dataOffset:S=>S,getCoords:(S,P)=>(P[0]=S,P)};case 2:{if(I[0]===0&&I[1]===1){const S=C[0];return{get:(P,T,D)=>P[D*S+T],set:(P,T,D,w)=>P[D*S+T]=w,add:(P,T,D,w)=>P[D*S+T]+=w,dataOffset:(P,T)=>T*S+P,getCoords:(P,T)=>(T[0]=P%S,T[1]=Math.floor(P/S),T)}}if(I[0]===1&&I[1]===0){const S=C[1];return{get:(P,T,D)=>P[T*S+D],set:(P,T,D,w)=>P[T*S+D]=w,add:(P,T,D,w)=>P[T*S+D]+=w,dataOffset:(P,T)=>P*S+T,getCoords:(P,T)=>(T[0]=Math.floor(P/S),T[1]=P%S,T)}}throw new Error("bad axis order")}case 3:{if(I[0]===0&&I[1]===1&&I[2]===2){const S=C[0],P=C[1],T=S*P;return{get:(D,w,E,k)=>D[w+E*S+k*T],set:(D,w,E,k,F)=>D[w+E*S+k*T]=F,add:(D,w,E,k,F)=>D[w+E*S+k*T]+=F,dataOffset:(D,w,E)=>D+w*S+E*T,getCoords:(D,w)=>{const E=Math.floor(D/S);return w[0]=D%S,w[1]=E%P,w[2]=Math.floor(E/P),w}}}if(I[0]===0&&I[1]===2&&I[2]===1){const S=C[0],P=C[2],T=S*P;return{get:(D,w,E,k)=>D[w+k*S+E*T],set:(D,w,E,k,F)=>D[w+k*S+E*T]=F,add:(D,w,E,k,F)=>D[w+k*S+E*T]+=F,dataOffset:(D,w,E)=>D+E*S+w*T,getCoords:(D,w)=>{const E=Math.floor(D/S);return w[0]=D%S,w[1]=Math.floor(E/P),w[2]=E%P,w}}}if(I[0]===1&&I[1]===0&&I[2]===2){const S=C[1],P=C[0],T=S*P;return{get:(D,w,E,k)=>D[E+w*S+k*T],set:(D,w,E,k,F)=>D[E+w*S+k*T]=F,add:(D,w,E,k,F)=>D[E+w*S+k*T]+=F,dataOffset:(D,w,E)=>w+D*S+E*T,getCoords:(D,w)=>{const E=Math.floor(D/S);return w[0]=E%P,w[1]=D%S,w[2]=Math.floor(E/P),w}}}if(I[0]===1&&I[1]===2&&I[2]===0){const S=C[1],P=C[2],T=S*P;return{get:(D,w,E,k)=>D[E+k*S+w*T],set:(D,w,E,k,F)=>D[E+k*S+w*T]=F,add:(D,w,E,k,F)=>D[E+k*S+w*T]+=F,dataOffset:(D,w,E)=>w+E*S+D*T,getCoords:(D,w)=>{const E=Math.floor(D/S);return w[0]=Math.floor(E/P),w[1]=D%S,w[2]=E%P,w}}}if(I[0]===2&&I[1]===0&&I[2]===1){const S=C[2],P=C[0],T=S*P;return{get:(D,w,E,k)=>D[k+w*S+E*T],set:(D,w,E,k,F)=>D[k+w*S+E*T]=F,add:(D,w,E,k,F)=>D[k+w*S+E*T]+=F,dataOffset:(D,w,E)=>E+D*S+w*T,getCoords:(D,w)=>{const E=Math.floor(D/S);return w[0]=E%P,w[1]=Math.floor(E/P),w[2]=D%S,w}}}if(I[0]===2&&I[1]===1&&I[2]===0){const S=C[2],P=C[1],T=S*P;return{get:(D,w,E,k)=>D[k+E*S+w*T],set:(D,w,E,k,F)=>D[k+E*S+w*T]=F,add:(D,w,E,k,F)=>D[k+E*S+w*T]+=F,dataOffset:(D,w,E)=>E+w*S+D*T,getCoords:(D,w)=>{const E=Math.floor(D/S);return w[0]=Math.floor(E/P),w[1]=E%P,w[2]=D%S,w}}}throw new Error("bad axis order")}default:return{get:(S,...P)=>S[p(b,P)],set:(S,...P)=>S[p(b,P)]=P[P.length-1],add:(S,...P)=>S[p(b,P)]+=P[P.length-1],dataOffset:(...S)=>p(b,S),getCoords:(S,P)=>_(b,S,P)}}}function h(b){const{dimensions:C}=b;let I=1;for(let S=0,P=C.length;S<P;S++)I*=C[S];return S=>new(S||b.defaultCtor)(I)}function p(b,C){const{accessDimensions:I,axisOrderFastToSlow:S}=b,P=I.length-1;let T=I[P]*C[S[P]];for(let D=P-1;D>=0;D--)T=(T+C[S[D]])*I[D];return T}function _(b,C,I){const{dimensions:S,axisOrderFastToSlow:P}=b,T=S.length;let D=C;for(let w=0;w<T;w++){const E=S[P[w]];I[P[w]]=D%E,D=Math.floor(D/E)}return I[P[T+1]]=D,I}function y(b){const C=[];for(let I=0;I<b.length;I++)C[I]=b[b.length-I-1];return C}e.invertAxisOrder=y;function v(b,C){const I=[];for(let S=0;S<b.length;S++)I[S]=b[C[S]];return I}function A(b){const C=new Int32Array(b.length);for(let I=0;I<b.length;I++)C[b[I]]=I;return I=>v(I,C)}e.convertToCanonicalAxisIndicesFastToSlow=A;function g(b){const C=new Int32Array(b.length);for(let I=0;I<b.length;I++)C[b[b.length-I-1]]=I;return I=>v(I,C)}e.convertToCanonicalAxisIndicesSlowToFast=g})(dr||(dr={}));function Ui(e,t,n){for(;t<n&&e.charCodeAt(t)===32;)t++;return di(e,t,n)}function di(e,t,n){let r=t,i=0,o=1;for(e.charCodeAt(r)===45?(o=-1,++r):e.charCodeAt(r)===43&&++r;r<n;r++){const s=e.charCodeAt(r)-48;if(s>9||s<0)return o*i|0;i=10*i+s|0}return o*i}function t_(e,t,n,r){return t.charCodeAt(n)===43&&n++,e*Math.pow(10,di(t,n,r))}function So(e,t,n){let r=t,i=1,o=0,s=0,c=1;for(e.charCodeAt(r)===45?(i=-1,++r):e.charCodeAt(r)===43&&++r;r<n;){let a=e.charCodeAt(r)-48;if(a>=0&&a<10)o=o*10+a,++r;else if(a===-2){for(++r;r<n;)if(a=e.charCodeAt(r)-48,a>=0&&a<10)s=10*s+a,c=10*c,++r;else return a===53||a===21?t_(i*(o+s/c),e,r+1,n):i*(o+s/c);return i*(o+s/c)}else{if(a===53||a===21)return t_(i*o,e,r+1,n);break}}return i*o}var Fi;(function(e){e[e.Int=0]="Int",e[e.Float=1]="Float",e[e.Scientific=2]="Scientific",e[e.NaN=3]="NaN"})(Fi||(Fi={})),Fi.Int,Fi.Float,Fi.Scientific,Fi.NaN;var ye;(function(e){let t;(function(D){D.str={"@type":"str",T:"",valueType:"str"},D.ustr={"@type":"str",T:"",valueType:"str",transform:"uppercase"},D.lstr={"@type":"str",T:"",valueType:"str",transform:"lowercase"},D.int={"@type":"int",T:0,valueType:"int"},D.coord={"@type":"coord",T:0,valueType:"float"},D.float={"@type":"float",T:0,valueType:"float"};function w(le){var K;return{"@type":"str",T:(K=le?.defaultValue)!==null&&K!==void 0?K:"",transform:le?.transform,valueType:"str"}}D.Str=w;function E(le=0){return{"@type":"int",T:le,valueType:"int"}}D.Int=E;function k(le=0){return{"@type":"float",T:le,valueType:"float"}}D.Float=k;function F(le,K=D.float){return{"@type":"tensor",T:le.create(),space:le,valueType:"tensor",baseType:K}}D.Tensor=F;function V(le,K=D.float){return F(dr.Vector(le,K["@type"]==="int"?Int32Array:Float64Array),K)}D.Vector=V;function de(le,K,ae=D.float){return F(dr.ColumnMajorMatrix(le,K,ae["@type"]==="int"?Int32Array:Float64Array),ae)}D.Matrix=de;function W(le){return le}D.Aliased=W;function J(le,K,ae=[]){return{"@type":"list",T:ae,separator:le,itemParse:K,valueType:"list"}}D.List=J})(t=e.Schema||(e.Schema={}));function n(D){return!!D&&!!D.schema&&!!D.value}e.is=n;let r;(function(D){D[D.Present=0]="Present",D[D.NotPresent=1]="NotPresent",D[D.Unknown=2]="Unknown"})(r=e.ValueKinds||(e.ValueKinds={})),e.ValueKind={Present:r.Present,NotPresent:r.NotPresent,Unknown:r.Unknown};function i(D,w){return n_(w.T,D,w,r.NotPresent)}e.Undefined=i;function o(D,w,E){return n_(D,w,E,r.Present)}e.ofConst=o;function s(D){return ws(D)}e.ofLambda=s;function c(D,w){return s({value:E=>E+D,rowCount:Math.max(w-D+1,0),schema:t.int})}e.range=c;function a(D){return Ir(D)}e.ofArray=a;function u(D){return Ir({array:D,schema:t.int})}e.ofIntArray=u;function l(D){return Ir({array:D,schema:t.float})}e.ofFloatArray=l;function f(D){return Ir({array:D,schema:t.str})}e.ofStringArray=f;function d(D){return Ir({array:D,schema:t.Aliased(t.str)})}e.ofStringAliasArray=d;function m(D,w=","){return Ir({array:D,schema:t.List(w,E=>E)})}e.ofStringListArray=m;function h(D){const{count:w,data:E,indices:k}=D;return ws({value:F=>di(E,k[2*F],k[2*F+1])||0,rowCount:w,schema:t.int})}e.ofIntTokens=h;function p(D){const{count:w,data:E,indices:k}=D;return ws({value:F=>So(E,k[2*F],k[2*F+1])||0,rowCount:w,schema:t.float})}e.ofFloatTokens=p;function _(D){const{count:w,data:E,indices:k}=D;return ws({value:F=>{const V=E.substring(k[2*F],k[2*F+1]);return V==="."||V==="?"?"":V},rowCount:w,schema:t.str})}e.ofStringTokens=_;function y(D,w,E){return s3(D,w,E)}e.window=y;function v(D,w,E=!0){return l3(D,w,E)}e.view=v;function A(D){return i3(D)}e.createFirstIndexMap=A;function g(D){return o3(D)}e.createIndexer=g;function b(D,w,E){return m3(D,w,E||Array)}e.mapToArray=b;function C(D,w){return h3(D,w)}e.areEqual=C;function I(D,w){return y3(D,w)}e.indicesOf=I;function S(D,w){return D.__array?D:D.isDefined?Ir({array:D.toArray({array:w}),schema:D.schema,valueKind:D.valueKind}):i(D.rowCount,D.schema)}e.asArrayColumn=S;function P(D,w,E=0){if(!D.isDefined)return;const k=D.__array;if(k)for(let F=0,V=k.length;F<V;F++)w[E+F]=k[F];else for(let F=0,V=D.rowCount;F<V;F++)w[E+F]=D.value(F)}e.copyToArray=P;function T(D){for(let w=0,E=D.rowCount;w<E;w++)if(w!==D.value(w))return!1;return!0}e.isIdentity=T})(ye||(ye={}));function i3(e){const t=new Map;for(let n=0,r=e.rowCount;n<r;n++){const i=e.value(n);t.has(i)||t.set(e.value(n),n)}return t}function o3(e){const t=new Map;for(let n=0,r=e.rowCount;n<r;n++){const i=e.value(n);t.has(i)||t.set(e.value(n),n)}return n=>t.has(n)?t.get(n):-1}function n_(e,t,n,r){const i=o=>e;return{schema:n,__array:void 0,isDefined:r===ye.ValueKinds.Present,rowCount:t,value:i,valueKind:o=>r,toArray:o=>{const{array:s}=xo(t,o);for(let c=0,a=s.length;c<a;c++)s[c]=e;return s},areValuesEqual:(o,s)=>!0}}function ws({value:e,valueKind:t,areValuesEqual:n,rowCount:r,schema:i}){return{schema:i,__array:void 0,isDefined:!0,rowCount:r,value:e,valueKind:t||(o=>ye.ValueKinds.Present),toArray:o=>{const{array:s,start:c}=xo(r,o);for(let a=0,u=s.length;a<u;a++)s[a]=e(a+c);return s},areValuesEqual:n||((o,s)=>e(o)===e(s))}}function Ir({array:e,schema:t,valueKind:n}){const r=e.length,i=t.T,o=t.valueType==="str"?t.transform==="lowercase"?c=>{const a=e[c];return typeof a=="string"?a.toLowerCase():`${a??i}`.toLowerCase()}:t.transform==="uppercase"?c=>{const a=e[c];return typeof a=="string"?a.toUpperCase():`${a??i}`.toUpperCase()}:c=>{const a=e[c];return typeof a=="string"?a:`${a??i}`}:c=>e[c],s=wl(e);return{schema:t,__array:e,isDefined:!0,rowCount:r,value:o,valueKind:n||(c=>ye.ValueKinds.Present),toArray:t.valueType==="str"?t.transform==="lowercase"?c=>{const{start:a,end:u}=Mi(r,c),l=new(c&&typeof c.array<"u"?c.array:e.constructor)(u-a);for(let f=0,d=u-a;f<d;f++){const m=e[a+f];l[f]=typeof m=="string"?m.toLowerCase():`${m??i}`.toLowerCase()}return l}:t.transform==="uppercase"?c=>{const{start:a,end:u}=Mi(r,c),l=new(c&&typeof c.array<"u"?c.array:e.constructor)(u-a);for(let f=0,d=u-a;f<d;f++){const m=e[a+f];l[f]=typeof m=="string"?m.toUpperCase():`${m??i}`.toUpperCase()}return l}:c=>{const{start:a,end:u}=Mi(r,c),l=new(c&&typeof c.array<"u"?c.array:e.constructor)(u-a);for(let f=0,d=u-a;f<d;f++){const m=e[a+f];l[f]=typeof m=="string"?m:`${m??i}`}return l}:s?c=>Cs(e,c):c=>{const{start:a,end:u}=Mi(r,c);if(a===0&&u===e.length)return e;const l=new(c&&typeof c.array<"u"?c.array:e.constructor)(u-a);for(let f=0,d=u-a;f<d;f++)l[f]=e[a+f];return l},areValuesEqual:(c,a)=>e[c]===e[a]}}function s3(e,t,n){return e.isDefined?t===0&&n===e.rowCount?e:e.__array&&wl(e.__array)?a3(e,t,n):c3(e,t,n):ye.Undefined(n-t,e.schema)}function a3(e,t,n){const r=Cs(e.__array,{start:t,end:n}),i=e.valueKind;return Ir({array:r,schema:e.schema,valueKind:o=>i(t+o)})}function c3(e,t,n){const r=e.value,i=e.valueKind,o=e.areValuesEqual,s=t===0?r:a=>r(a+t),c=n-t;return{schema:e.schema,__array:void 0,isDefined:e.isDefined,rowCount:c,value:s,valueKind:t===0?i:a=>i(a+t),toArray:a=>{const{array:u}=xo(c,a);for(let l=0,f=u.length;l<f;l++)u[l]=r(l+t);return u},areValuesEqual:t===0?o:(a,u)=>o(a+t,u+t)}}function u3(e,t){if(e.length!==t)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==n)return!1;return!0}function l3(e,t,n){return e.rowCount===0||n&&u3(t,e.rowCount)?e:e.__array&&typeof e.value(0)==typeof e.__array[0]?d3(e,t):f3(e,t)}function d3(e,t){const n=e.__array,r=new n.constructor(t.length);for(let o=0,s=t.length;o<s;o++)r[o]=n[t[o]];const i=e.valueKind;return Ir({array:r,schema:e.schema,valueKind:o=>i(t[o])})}function f3(e,t){const n=e.value,r=e.valueKind,i=e.areValuesEqual,o=c=>n(t[c]),s=t.length;return{schema:e.schema,__array:void 0,isDefined:e.isDefined,rowCount:s,value:o,valueKind:c=>r(t[c]),toArray:c=>{const{array:a}=xo(s,c);for(let u=0,l=a.length;u<l;u++)a[u]=n(t[u]);return a},areValuesEqual:(c,a)=>i(t[c],t[a])}}function m3(e,t,n){const r=new n(e.rowCount);for(let i=0,o=e.rowCount;i<o;i++)r[i]=t(e.value(i));return r}function h3(e,t){return e===t?!0:e.rowCount!==t.rowCount||e.isDefined!==t.isDefined||e.schema.valueType!==t.schema.valueType?!1:e.__array&&t.__array?p3(e,t):_3(e,t)}function p3(e,t){const n=e.__array,r=t.__array;for(let i=0,o=e.rowCount;i<o;i++)if(n[i]!==r[i])return!1;return!0}function _3(e,t){const n=e.value,r=t.value;for(let i=0,o=e.rowCount;i<o;i++)if(n(i)!==r(i))return!1;return!0}function y3(e,t){const n=[],r=e.value;for(let i=0,o=e.rowCount;i<o;i++)t(r(i))&&(n[n.length]=i);return n}function Ps(e,t,n){return e[t]-e[n]}function fi(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function r_(e,t,n,r){const i=n+r>>1;return t(e,n,r)>0?t(e,n,i)>0?t(e,i,r)>0?i:r:n:t(e,r,i)>0?t(e,i,n)>0?i:n:r}function g3(e,t,n){const{cmp:r,swap:i,data:o,parts:s}=e;let c=t+1,a=n;for(i(o,t,r_(o,r,t,n));r(o,a,t)>0;)--a;for(let u=t+1;u<=a;u++){const l=r(o,u,t);if(l>0){for(i(o,u,a),--a;r(o,a,t)>0;)--a;u--}else l===0&&(i(o,u,c),c++)}for(let u=t;u<c;u++)i(o,u,t+a-u);s[0]=a-c+t+1,s[1]=a}function b3({data:e,cmp:t,swap:n},r,i){for(let o=r+1;o<=i;o++){let s=o-1;for(;s>=r&&t(e,s,s+1)>0;)n(e,s,s+1),s=s-1}}function Es(e,t,n){const{parts:r}=e;for(;t<n;){if(n-t<16){b3(e,t,n);return}g3(e,t,n);const i=r[0],o=r[1];i-t<n-o?(Es(e,t,i-1),t=o+1):(Es(e,o+1,n),n=i-1)}}function v3(e,t,n,r){let i=n+1,o=r;fi(e,n,r_(e,Ps,n,r));const s=e[n];for(;e[o]>s;)--o;for(let c=n+1;c<=o;c++){const a=e[c];if(a>s){for(fi(e,c,o),--o;e[o]>s;)--o;c--}else a===s&&(fi(e,c,i),++i)}for(let c=n;c<i;c++)fi(e,c,n+o-c);t[0]=o-i+n+1,t[1]=o}function A3(e,t,n){for(let r=t+1;r<=n;r++){const i=e[r];let o=r-1;for(;o>=t&&e[o]>i;)e[o+1]=e[o],o=o-1;e[o+1]=i}}function kl(e,t,n,r){for(;n<r;){if(r-n<16){A3(e,n,r);return}v3(e,t,n,r);const i=t[0],o=t[1];i-n<r-o?(kl(e,t,n,i-1),n=o+1):(kl(e,t,o+1,r),r=i-1)}}function Jn(e,t=Ps){return x3(e,0,e.length,t)}function x3(e,t,n,r=Ps){return r===Ps?kl(e,[0,0],t,n-1):Es({data:e,cmp:r,swap:fi,parts:[0,0]},t,n-1),e}function i_(e,t,n,r,i){return Es({data:e,cmp:r,swap:i,parts:[0,0]},t,n-1),e}var fr;(function(e){function t(i){return i}e.create=t;function n(i,o){return(i&o)!==0}e.has=n;function r(i,o){return!!o&&(i&o)===o}e.hasAll=r})(fr||(fr={}));var St;(function(e){function t(b=512){return{current:[],offset:0,capacity:b,chunks:[]}}e.create=t;function n(b){return b.chunks.length?(b.offset>0&&(b.chunks[b.chunks.length]=b.current.length===b.offset?b.current.join(""):b.current.slice(0,b.offset).join("")),b.chunks.join("")):b.current.length===b.offset?b.current.join(""):b.current.splice(0,b.offset).join("")}e.getString=n;function r(b){let C=0;for(const I of b.chunks)C+=I.length;for(let I=0;I<b.offset;I++)C+=b.current[I].length;return C}e.getSize=r;function i(b){return b.offset>0&&(b.current.length===b.offset?b.chunks[b.chunks.length]=b.current.join(""):b.chunks[b.chunks.length]=b.current.slice(0,b.offset).join(""),b.offset=0),b.chunks}e.getChunks=i;let o;(function(b){b[b.Count=512]="Count"})(o||(o={}));const s=[];(function(){let b="";for(let C=0;C<o.Count;C++)s[C]=b,b=b+" "})();function c(b){f(b,`
`)}e.newline=c;function a(b,C){C>0&&f(b,s[C])}e.whitespace=a;function u(b){f(b," ")}e.whitespace1=u;function l(b,C){C&&(b.offset===b.capacity&&(b.chunks[b.chunks.length]=b.current.join(""),b.offset=0),b.current[b.offset++]=C)}e.write=l;function f(b,C){b.offset===b.capacity&&(b.chunks[b.chunks.length]=b.current.join(""),b.offset=0),b.current[b.offset++]=C}e.writeSafe=f;function d(b,C,I){if(!C){a(b,I);return}const S=I-C.length;a(b,S),f(b,C)}e.writePadLeft=d;function m(b,C,I){if(!C){a(b,I);return}const S=I-C.length;f(b,C),a(b,S)}e.writePadRight=m;function h(b,C){f(b,""+C)}e.writeInteger=h;function p(b,C){f(b,""+C+" ")}e.writeIntegerAndSpace=p;function _(b,C,I){const S=""+C,P=I-S.length;a(b,P),f(b,S)}e.writeIntegerPadLeft=_;function y(b,C,I){const S=""+C,P=I-S.length;f(b,S),a(b,P)}e.writeIntegerPadRight=y;function v(b,C,I){f(b,""+Math.round(I*C)/I)}e.writeFloat=v;function A(b,C,I,S){const P=""+Math.round(I*C)/I,T=S-P.length;a(b,T),f(b,P)}e.writeFloatPadLeft=A;function g(b,C,I,S){const P=""+Math.round(I*C)/I,T=S-P.length;f(b,P),a(b,T)}e.writeFloatPadRight=g})(St||(St={}));const Vn=function(){if(typeof window<"u"&&window.performance){const e=window.performance;return()=>e.now()}else return typeof process<"u"&&process.hrtime!=="undefined"&&typeof process.hrtime=="function"?()=>{const e=process.hrtime();return e[0]*1e3+e[1]/1e6}:Date.now?()=>Date.now():()=>+new Date}();var _n;(function(e){const t=typeof btoa<"u"?btoa:s=>Buffer.from(s).toString("base64"),n=[];function r(){let s=+new Date+Vn();for(let c=0;c<16;c++)n[c]=String.fromCharCode((s+Math.random()*255)%255|0),s=Math.floor(s/255);return t(n.join("")).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22)}e.create22=r;function i(){let s=+new Date+Vn();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){const u=(s+Math.random()*16)%16|0;return s=Math.floor(s/16),(a==="x"?u:u&3|8).toString(16)})}e.createv4=i;function o(s){return typeof s=="string"}e.is=o})(_n||(_n={}));function S3(e,t){return e-t}function C3(e){return Array.prototype.sort.call(e,S3),e}var o_;(function(e){class t{has(h){return!1}forEach(h,p){return p}constructor(){this.size=0}}class n{has(h){return h===this.idx}forEach(h,p){return h(this.idx,p),p}constructor(h){this.idx=h,this.size=1}}class r{has(h){return h<this.length&&!!this.mask[h]}_forEach(h,p){for(let _=0;_<this.length;_++)this.mask[_]&&h(_,p)}forEach(h,p){return this._forEach(h,p),p}constructor(h,p){this.mask=h,this.size=p,this.length=h.length}}class i{has(h){return!0}_forEach(h,p){for(let _=0;_<this.size;_++)h(_,p)}forEach(h,p){return this._forEach(h,p),p}constructor(h){this.size=h}}class o{has(h){return this.set.has(h)}_forEach(h,p){for(const _ of this.flatten())h(_,p)}flatten(){if(this._flat)return this._flat;const h=new Int32Array(this.size);let p=0;return this.set.forEach(_=>h[p++]=_),C3(h),this._flat=h,this._flat}forEach(h,p){return this._forEach(h,p),p}constructor(h){this.set=h,this._flat=void 0,this.size=h.size}}function s(m){return new i(m)}e.always=s,e.never=new t;function c(m){return new o(m)}e.ofSet=c;function a(m){return new n(m)}e.singleton=a;function u(m){const h=m.length;if(h===0)return new t;if(h===1)return new n(m[0]);let p=0;for(const v of m)v>p&&(p=v);if(h===p)return new i(h);if(h/p<1/12){const v=new Set;for(const A of m)v.add(A);return new o(v)}const y=new Int8Array(p+1);for(const v of m)y[v]=1;return new r(y,m.length)}e.ofUniqueIndices=u;function l(m,h){return new r(m,h)}e.ofMask=l;function f(m,h){for(const p of h)if(m.has(p))return!0;return!1}e.hasAny=f;function d(m,h){let p=0,_=0;if(h.forEach(y=>{m.has(y)||(p++,y>_&&(_=y))}),p/_<1/12){const y=new Set;return h.forEach(v=>{m.has(v)||y.add(v)}),c(y)}else{const y=new Uint8Array(_+1);return h.forEach(v=>{m.has(v)||(y[v]=1)}),l(y,p)}}e.complement=d})(o_||(o_={}));function Tl(e=0,t=Number.MAX_SAFE_INTEGER){let n=e;return()=>{const r=n;return n=(n+1)%t,r}}var Co;(function(e){function t(r){return{ref:r}}e.create=t;function n(r,i){return r.ref=i,r}e.set=n})(Co||(Co={}));const I3=Tl(0,2147483647);var Fr;(function(e){function t(r,i){return{id:I3(),version:0,value:r,metadata:i}}e.create=t;function n(r,i){return{id:r.id,version:r.version+1,value:i,metadata:r.metadata}}e.withValue=n})(Fr||(Fr={}));var s_;(function(e){function t(o,s){return Co.create(Fr.create(o,s))}e.create=t;function n(o,s){return Co.set(o,Fr.withValue(o.ref,s))}e.update=n;function r(o,s){return Co.set(o,s)}e.set=r;function i(o,s){return o.ref.value!==s?n(o,s):o}e.updateIfChanged=i})(s_||(s_={}));function Nl(e,t){const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const w3=Object.prototype.hasOwnProperty;function P3(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e);if(Object.keys(t).length!==n.length)return!1;for(const r of n)if(!w3.call(e,r)||e[r]!==t[r])return!1;return!0}function a_(e,t){return e!==void 0?e:t}var Ot;(function(e){function t(g){return g&&typeof g._rowCount=="number"&&!!g._columns&&!!g._schema}e.is=t;function n(g,b,C={}){const I=Object.create(null),S=Object.keys(g);I._rowCount=b._rowCount,I._columns=S,I._schema=g;for(const P of S)if(b[P])I[P]=b[P];else if(C[P])I[P]=C[P];else throw Error(`Cannot find column '${P}'.`);return I}e.pickColumns=n;function r(g,b){const C=Object.keys(b);return{_rowCount:b[C[0]].rowCount,_columns:C,_schema:g,...b}}e.ofColumns=r;function i(g,b,C){const I=Object.create(null),S=Object.keys(g);I._rowCount=C,I._columns=S,I._schema=g;for(const P of S)P in b?I[P]=b[P]:I[P]=ye.Undefined(C,g[P]);return I}e.ofPartialColumns=i;function o(g,b){const C=Object.create(null),I=Object.keys(g);C._rowCount=b,C._columns=I,C._schema=g;for(const S of I)C[S]=ye.Undefined(b,g[S]);return C}e.ofUndefinedColumns=o;function s(g,b){const C=Object.create(null),I=b.length,S=Object.keys(g);C._rowCount=I,C._columns=S,C._schema=g;for(const P of S)C[P]=ye.ofLambda({rowCount:I,schema:g[P],value:T=>b[T][P],valueKind:T=>typeof b[T][P]>"u"?ye.ValueKinds.NotPresent:ye.ValueKinds.Present});return C}e.ofRows=s;function c(g,b){var C;const I=Object.create(null),S=Object.keys(g);I._rowCount=0,I._columns=S,I._schema=g;for(const P of S)typeof b[P]<"u"?(I[P]=ye.ofArray({array:b[P],schema:g[P]}),I._rowCount=(C=b[P])===null||C===void 0?void 0:C.length):I[P]=ye.Undefined(I._rowCount,g[P]);return I}e.ofArrays=c;function a(g,b,C){const I=Object.create(null),S=Object.keys(b);I._rowCount=C.length,I._columns=S,I._schema=b;for(const P of S)I[P]=ye.view(g[P],C);return I}e.view=a;function u(g,b,C){const I=[];for(let S=0,P=g._rowCount;S<P;++S)C(S)&&I.push(S);return a(g,b,I)}e.pick=u;function l(g,b,C,I){if(C===0&&I===g._rowCount)return g;const S=Object.create(null),P=Object.keys(b);S._rowCount=I-C,S._columns=P,S._schema=b;for(const T of P)S[T]=ye.window(g[T],C,I);return S}e.window=l;function f(g,b){const C=Object.create(null),I=Object.keys(b);C._rowCount=0;for(const T of g)C._rowCount+=T._rowCount;const S={};for(const T of I)S[T]=new Array(C._rowCount);C._columns=I,C._schema=b;let P=0;for(const T of g){for(const D of I)ye.copyToArray(T[D],S[D],P);P+=T._rowCount}for(const T of I)C[T]=ye.ofArray({array:S[T],schema:b[T]});return C}e.concat=f;function d(g,b,C){g[b]=ye.asArrayColumn(g[b],C)}e.columnToArray=d;function m(g,b){const C=new Int32Array(g._rowCount);for(let P=0,T=C.length;P<T;P++)C[P]=P;Jn(C,(P,T,D)=>b(T,D));let I=!0;for(let P=0,T=C.length;P<T;P++)if(C[P]!==P){I=!1;break}if(I)return g;const S=Object.create(null);S._rowCount=g._rowCount,S._columns=g._columns,S._schema=g._schema;for(const P of g._columns)S[P]=ye.view(g[P],C,!1);return S}e.sort=m;function h(g,b){if(g._rowCount!==b._rowCount||g._columns.length!==b._columns.length)return!1;for(const C of g._columns)if(!b[C])return!1;for(const C of g._columns)if(!ye.areEqual(g[C],b[C]))return!1;return!0}e.areEqual=h;function p(g,b){const C=Object.create(null),{_columns:I}=g;for(let S=0;S<I.length;S++){const P=I[S];C[P]=g[P].value(b)}return C}e.getRow=p;function _(g,b){for(let C=0,I=g._rowCount;C<I;++C)if(b(C))return p(g,C)}e.pickRow=_;function y(g){const b=[],{_rowCount:C}=g;for(let I=0;I<C;I++)b[I]=p(g,I);return b}e.getRows=y;function v(g){const b={},{_columns:C}=g;for(let I=0;I<C.length;I++){const S=C[I];b[S]=g[S].toArray()}return b}e.toArrays=v;function A(g){const b=St.create(),{_columns:C,_rowCount:I}=g;let S=1;St.write(b,"|");for(let P=0;P<C.length;P++)St.write(b,C[P]),St.write(b,"|"),S+=C[P].length+1;St.newline(b),St.write(b,new Array(S+1).join("-")),St.newline(b);for(let P=0;P<I;P++){St.write(b,"|");for(let T=0;T<C.length;T++){const D=g[C[T]];D.valueKind(P)===ye.ValueKinds.Present?(St.write(b,D.value(P)),St.write(b,"|")):St.write(b,".|")}St.newline(b)}return St.getString(b)}e.formatToString=A})(Ot||(Ot={}));var Ol;(function(e){function t(r,i,o){const s=Object.keys(o),c=Object.create(null),a=[];c._name=r,c._tableNames=a,c._schema=i;for(const u of s)Ot.is(o[u])&&(c[u]=o[u],a[a.length]=u);return c}e.ofTables=t;function n(r){const i={};for(const o of r._tableNames)i[o]=Ot.getRows(r[o]);return i}e.getTablesAsRows=n})(Ol||(Ol={}));function E3(e){const{data:t,indices:n}=e;return function(r,i){const o=n[2*r],s=n[2*i],c=n[2*r+1]-o;if(c!==n[2*i+1]-s)return!1;for(let a=0;a<c;a++)if(t.charCodeAt(a+o)!==t.charCodeAt(a+s))return!1;return!0}}function B3(e){const{count:t,indices:n}=e;for(let r=0;r<t;++r)if(n[2*r]!==n[2*r+1])return!1;return!0}function c_(e,t){return{name:t,blocks:e}}function Ml(e,t,n,r=[]){return{categoryNames:e,header:n,categories:t,saveFrames:r,getField(i){const[o,s]=i.split(".");return t[o].getField(s||"")}}}function R3(e,t,n){return{categoryNames:e,header:n,categories:t}}function cn(e,t,n,r){return{rowCount:t,name:e,fieldNames:[...n],getField(i){return r[i]}}}(function(e){function t(i){return{rowCount:0,name:i,fieldNames:[],getField(o){}}}e.empty=t;function n(i,o){const s=Object.keys(o);return{rowCount:s.length>0?o[s[0]].rowCount:0,name:i,fieldNames:s,getField(c){return o[c]}}}e.ofFields=n;function r(i,o){const s={};for(const c of o._columns)s[c]=Oe.ofColumn(o[c]);return n(i,s)}e.ofTable=r})(cn||(cn={}));var Oe;(function(e){function t(c){return n([c])}e.ofString=t;function n(c){const a=c.length,u=m=>{const h=c[m];return!h||h==="."||h==="?"?"":h},l=m=>{const h=c[m];return di(h,0,h.length)||0},f=m=>{const h=c[m];return So(h,0,h.length)||0};return{__array:void 0,binaryEncoding:void 0,isDefined:!0,rowCount:a,str:u,int:l,float:f,valueKind:m=>{const h=c[m],p=h.length;if(p>1)return ye.ValueKinds.Present;if(p===0)return ye.ValueKinds.NotPresent;const _=h.charCodeAt(0);return _===46?ye.ValueKinds.NotPresent:_===63?ye.ValueKinds.Unknown:ye.ValueKinds.Present},areValuesEqual:(m,h)=>c[m]===c[h],toStringArray:m=>m?An(a,u,m):c,toIntArray:m=>An(a,l,m),toFloatArray:m=>An(a,f,m)}}e.ofStrings=n;function r(c){const a=c.length,u=m=>""+c[m],l=m=>c[m],f=m=>ye.ValueKinds.Present,d=m=>!m||m.array&&c instanceof m.array?c:An(a,l,m);return{__array:void 0,binaryEncoding:void 0,isDefined:!0,rowCount:a,str:u,int:l,float:l,valueKind:f,areValuesEqual:(m,h)=>c[m]===c[h],toStringArray:m=>An(a,u,m),toIntArray:d,toFloatArray:d}}e.ofNumbers=r;function i(c){const{data:a,indices:u,count:l}=c,f=p=>{const _=a.substring(u[2*p],u[2*p+1]);return _==="."||_==="?"?"":_},d=p=>di(a,u[2*p],u[2*p+1])||0,m=p=>So(a,u[2*p],u[2*p+1])||0;return{__array:void 0,binaryEncoding:void 0,isDefined:!0,rowCount:l,str:f,int:d,float:m,valueKind:p=>{const _=u[2*p],y=u[2*p+1]-_;if(y>1)return ye.ValueKinds.Present;if(y===0)return ye.ValueKinds.NotPresent;const v=a.charCodeAt(_);return v===46?ye.ValueKinds.NotPresent:v===63?ye.ValueKinds.Unknown:ye.ValueKinds.Present},areValuesEqual:E3(c),toStringArray:p=>An(l,f,p),toIntArray:p=>An(l,d,p),toFloatArray:p=>An(l,m,p)}}e.ofTokens=i;function o(c){const{rowCount:a,valueKind:u,areValuesEqual:l,isDefined:f}=c;let d,m,h;switch(c.schema.valueType){case"float":case"int":d=_=>""+c.value(_),m=c.value,h=c.value;break;case"str":d=c.value,m=_=>{const y=c.value(_);return di(y,0,y.length)||0},h=_=>{const y=c.value(_);return So(y,0,y.length)||0};break;case"list":const{separator:p}=c.schema;d=_=>c.value(_).join(p),m=_=>NaN,h=_=>NaN;break;default:throw new Error(`unsupported valueType '${c.schema.valueType}'`)}return{__array:void 0,binaryEncoding:void 0,isDefined:f,rowCount:a,str:d,int:m,float:h,valueKind:u,areValuesEqual:l,toStringArray:p=>An(a,d,p),toIntArray:p=>An(a,m,p),toFloatArray:p=>An(a,h,p)}}e.ofColumn=o;function s(c,a){return o(ye.Undefined(c,a))}e.ofUndefined=s})(Oe||(Oe={}));function D3(e,t,n,r){const i=n?0:1;switch(t){case 1:return r==="brackets"?o=>`${e}[${o+i}]`:o=>`${e}_${o+i}`;case 2:return r==="brackets"?(o,s)=>`${e}[${o+i}][${s+i}]`:(o,s)=>`${e}_${o+i}${s+i}`;case 3:return r==="brackets"?(o,s,c)=>`${e}[${o+i}][${s+i}][${c+i}]`:(o,s,c)=>`${e}_${o+i}${s+i}${c+i}`;default:throw new Error("Tensors with rank > 3 or rank 0 are currently not supported.")}}function k3(e,t,n,r){const i=t.create();if(t.rank===1){const o=t.dimensions[0];for(let s=0;s<o;s++){const c=e.getField(r(s));t.set(i,s,c?c.float(n):0)}}else if(t.rank===2){const o=t.dimensions[0],s=t.dimensions[1];for(let c=0;c<o;c++)for(let a=0;a<s;a++){const u=e.getField(r(c,a));t.set(i,c,a,u?u.float(n):0)}}else if(t.rank===3){const o=t.dimensions[0],s=t.dimensions[1],c=t.dimensions[2];for(let a=0;a<o;a++)for(let u=0;u<s;u++)for(let l=0;l<c;l++){const f=e.getField(r(a,u,l));t.set(i,a,u,l,f?f.float(n):0)}}else throw new Error("Tensors with rank > 3 or rank 0 are currently not supported.");return i}function T3(){const e=function(){const p=typeof window<"u"&&window,_=typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self;return p||typeof global<"u"&&global||_}(),t={},n=typeof document<"u"?document:void 0;let r=1,i;function o(p,..._){typeof p!="function"&&(p=new Function(""+p));const y={callback:p,args:_};return t[r]=y,i(r),r++}function s(p){delete t[p]}function c(p){const _=p.callback,y=p.args;switch(y.length){case 0:_();break;case 1:_(y[0]);break;case 2:_(y[0],y[1]);break;case 3:_(y[0],y[1],y[2]);break;default:_.apply(void 0,y);break}}function a(p){const _=t[p];s(p),c(_)}function u(){i=function(p){process.nextTick(function(){a(p)})}}function l(){if(e&&e.postMessage&&!e.importScripts){let p=!0;const _=e.onmessage;return e.onmessage=function(){p=!1},e.postMessage("","*"),e.onmessage=_,p}}function f(){const p="setImmediate$"+Math.random()+"$",_=function(y){y.source===e&&typeof y.data=="string"&&y.data.indexOf(p)===0&&a(+y.data.slice(p.length))};window.addEventListener?window.addEventListener("message",_,!1):window.attachEvent("onmessage",_),i=function(y){window.postMessage(p+y,"*")}}function d(){const p=new MessageChannel;p.port1.onmessage=function(_){const y=_.data;a(y)},i=function(_){p.port2.postMessage(_)}}function m(){const p=n.documentElement;i=function(_){let y=n.createElement("script");y.onreadystatechange=function(){a(_),y.onreadystatechange=null,p.removeChild(y),y=null},p.appendChild(y)}}function h(){i=function(p){setTimeout(a,0,p)}}return typeof process<"u"&&{}.toString.call(process)==="[object process]"?u():l()?f():typeof MessageChannel<"u"?d():n&&"onreadystatechange"in n.createElement("script")?m():h(),{setImmediate:o,clearImmediate:s}}const ql=function(){return typeof setImmediate<"u"?typeof window<"u"?{setImmediate:(e,...t)=>window.setImmediate(e,...t),clearImmediate:e=>window.clearImmediate(e)}:{setImmediate,clearImmediate}:T3()}();function N3(e){ql.setImmediate(e)}const O3={setImmediate:ql.setImmediate,clearImmediate:ql.clearImmediate,immediatePromise(){return new Promise(N3)},delay(e,t=void 0){return new Promise(n=>setTimeout(n,e,t))}};var M3={};let q3=function(){try{return!0}catch{return!1}}(),U3=function(){try{const t=M3.DEBUG;return t==="*"||t==="molstar"}catch{return!1}}();var Io;(function(e){function t(i){}e.markStart=t;function n(i){}e.markEnd=n;function r(i){}e.measure=r})(Io||(Io={}));function F3(e,t,n=250){const r=H3(e,t,n),i=new Fl(r,r.root);return Ul(e,i)}function L3(e,t){return Ul(t,e)}function G3(e,t,n){return e.runChild(t,n)}function u_(e){return{taskId:e.id,taskName:e.name,message:"",startedTime:0,canAbort:!0,isIndeterminate:!0,current:0,max:0}}function H3(e,t,n){const r={abortRequested:!1,treeAborted:!1,reason:""};return{updateRateMs:n,lastNotified:Vn(),observer:t,abortToken:r,taskId:e.id,root:{progress:u_(e),children:[]},tryAbort:j3(r)}}function j3(e){return t=>{e.abortRequested=!0,e.reason=t||e.reason}}function l_(e){return{progress:{...e.progress},children:e.children.map(l_)}}function d_(e){return e.progress.canAbort&&e.children.every(d_)}function V3(e){return{root:l_(e.root),canAbort:d_(e.root),requestAbort:e.tryAbort}}async function Ul(e,t){Io.markStart(e),t.node.progress.startedTime=Vn();try{const n=await e.f(t);return Io.markEnd(e),Io.measure(e),t.info.abortToken.abortRequested&&f_(t.info),n}catch(n){throw rn.isAbort(n)&&(t.isAborted=!0,t.node.children.length>0&&await new Promise(r=>{t.onChildrenFinished=r}),e.onAbort&&e.onAbort()),n}}function f_(e){throw e.abortToken.treeAborted||(e.abortToken.treeAborted=!0,m_(e.root),h_(e,Vn())),rn.Aborted(e.abortToken.reason)}function m_(e){const t=e.progress;t.isIndeterminate=!0,t.canAbort=!1,t.message="Aborting...";for(const n of e.children)m_(n)}function h_(e,t){e.lastNotified=t;const n=V3(e);e.observer(n)}class Fl{checkAborted(){this.info.abortToken.abortRequested&&(this.isAborted=!0,f_(this.info))}get shouldUpdate(){return this.checkAborted(),Vn()-this.lastUpdatedTime>this.info.updateRateMs}updateProgress(t){if(this.checkAborted(),!t)return;const n=this.node.progress;typeof t=="string"?(n.message=t,n.isIndeterminate=!0):(typeof t.canAbort<"u"&&(n.canAbort=t.canAbort),typeof t.message<"u"&&(n.message=t.message),typeof t.current<"u"&&(n.current=t.current),typeof t.max<"u"&&(n.max=t.max),n.isIndeterminate=typeof n.current>"u"||typeof n.max>"u",typeof t.isIndeterminate<"u"&&(n.isIndeterminate=t.isIndeterminate))}update(t,n){if(this.lastUpdatedTime=Vn(),this.updateProgress(t),!n)return h_(this.info,this.lastUpdatedTime),this.checkAborted(),O3.immediatePromise()}async runChild(t,n){this.updateProgress(n);const r={progress:u_(t),children:[]},i=this.node.children;i.push(r);const o=new Fl(this.info,r);try{return await Ul(t,o)}catch(s){if(rn.isAbort(s)&&this.isAborted)return;throw s}finally{const s=i.indexOf(r);if(s>=0){for(let c=s,a=i.length-1;c<a;c++)i[c]=i[c+1];i.pop()}i.length===0&&this.onChildrenFinished&&this.onChildrenFinished()}}constructor(t,n){this.isSynchronous=!1,this.isExecuting=!0,this.lastUpdatedTime=0,this.onChildrenFinished=void 0,this.node=n,this.info=t}}class z3{constructor(){this.shouldUpdate=!1,this.isSynchronous=!0}update(t,n){}}const Bs=new z3;var rn;(function(e){class t{run(d,m=250){return d?F3(this,d,m):this.f(Bs)}runAsChild(d,m){return d.isSynchronous?this.f(Bs):G3(d,this,m)}runInContext(d){return d.isSynchronous?this.f(Bs):L3(d,this)}constructor(d,m,h){this.name=d,this.f=m,this.onAbort=h,this.id=l()}}function n(f){const d=f;return!!f&&typeof d.id=="number"&&typeof d.name=="string"&&!!d.run}e.is=n;function r(f){return!!f&&!!f.isAborted}e.isAbort=r;function i(f){return{isAborted:!0,reason:f,toString(){return`Aborted${f?": "+f:""}`}}}e.Aborted=i;function o(f,d,m){return new t(f,d,m)}e.create=o;function s(f,d){return o(f,async m=>d)}e.constant=s;function c(){return o("",async f=>{})}e.empty=c;function a(f,d){return o(f,async m=>{throw new Error(d)})}e.fail=a;function u(f,d){return n(f)?d?f.runInContext(d):f.run():f}e.resolveInContext=u;const l=Tl(0,1073741823)})(rn||(rn={}));var p_;(function(e){e.Synchronous=Bs})(p_||(p_={}));var __;(function(e){function t(r,i=""){const o=r.progress;if(!r.children.length)return o.isIndeterminate?`${i}${o.taskName}: ${o.message}`:`${i}${o.taskName}: [${o.current}/${o.max}] ${o.message}`;const s=i+"  |_ ",c=r.children.map(a=>t(a,s));return o.isIndeterminate?`${i}${o.taskName}: ${o.message}
${c.join(`
`)}`:`${i}${o.taskName}: [${o.current}/${o.max}] ${o.message}
${c.join(`
`)}`}function n(r){return t(r.root)}e.format=n})(__||(__={}));async function Ll(e,t,n,r,i){let o=Math.max(t,0),s=0,c=0;if(e.isSynchronous)return r(Number.MAX_SAFE_INTEGER,n),n;let a=Vn(),u=0,l=0;for(;(u=r(o,n))>0;){s+=u;const f=Vn()-a;l+=f,c+=f,e.shouldUpdate&&(await i(e,n,s),o=Math.round(l*s/c)+1,a=Vn(),l=0)}return e.shouldUpdate&&await i(e,n,s),n}function Qt(e){return{data:e,position:0,length:e.length,lineNumber:1,tokenStart:0,tokenEnd:0}}(function(e){function t(A){return A.data.substring(A.tokenStart,A.tokenEnd)}e.getTokenString=t;function n(A){A.position=0,A.lineNumber=1,A.tokenStart=0,A.tokenEnd=0}e.reset=n;function r(A){const{data:g}=A;for(;A.position<A.length;)switch(g.charCodeAt(A.position)){case 10:return A.tokenEnd=A.position,++A.position,++A.lineNumber,!0;case 13:return A.tokenEnd=A.position,++A.position,++A.lineNumber,g.charCodeAt(A.position)===10&&++A.position,!0;default:++A.position;break}return A.tokenEnd=A.position,A.tokenStart!==A.tokenEnd}e.eatLine=r;function i(A){A.tokenStart=A.position}e.markStart=i;function o(A){return A.tokenStart=A.position,r(A)}e.markLine=o;function s(A){return o(A),t(A)}e.readLine=s;function c(A){o(A);const g=A.position;return v(A,A.tokenStart,A.tokenEnd),A.position=g,t(A)}e.readLineTrim=c;function a(A,g,b){let C=0;for(let I=0;I<g;I++){if(!o(A))return C;bt.addUnchecked(b,A.tokenStart,A.tokenEnd),C++}return C}function u(A,g){const b=bt.create(A.data,g*2);return a(A,g,b),b}e.markLines=u;function l(A,g){const b=[];for(let C=0;C<g;C++)b.push(e.readLine(A));return b}e.readLines=l;async function f(A,g,b,C=1e5){const I=bt.create(A.data,g*2);let S=0;return await Ll(b,C,A,(P,T)=>{const D=Math.min(g-S,P);return a(T,D,I),S+=D,D},(P,T)=>P.update({message:"Parsing...",current:T.position,max:T.length})),I}e.readLinesAsync=f;function d(A){const g=e(A),b=bt.create(g.data,Math.max(A.length/80,2));for(;o(g);)bt.add(b,g.tokenStart,g.tokenEnd);return b}e.readAllLines=d;function m(A,g,b){let C=0;for(let I=0;I<g;I++){if(!o(A))return C;bt.add(b,A.tokenStart,A.tokenEnd),C++}return C}async function h(A,g,b=1e5){const C=e(A),I=bt.create(C.data,Math.max(A.length/80,2));return await Ll(g,b,C,(S,P)=>(m(P,S,I),P.position<P.length?S:0),(S,P)=>S.update({message:"Parsing...",current:P.position,max:P.length})),I}e.readAllLinesAsync=h;function p(A){for(;A.position<A.length;)switch(A.data.charCodeAt(A.position)){case 9:case 10:case 13:case 32:A.tokenEnd=A.position;return;default:++A.position;break}A.tokenEnd=A.position}e.eatValue=p;function _(A){let g=-1;for(;A.position<A.length;){const b=A.data.charCodeAt(A.position);switch(b){case 9:case 32:g=b,++A.position;break;case 10:g!==13&&++A.lineNumber,g=b,++A.position;break;case 13:g=b,++A.position,++A.lineNumber;break;default:return g}}return g}e.skipWhitespace=_;function y(A){let g=-1;for(;A.position<A.length;){const b=A.data.charCodeAt(A.position);switch(b){case 9:case 32:g=b,++A.position;break;default:return g}}return g}e.skipStrictWhitespace=y;function v(A,g,b){const{data:C}=A;let I=g,S=b-1,P=C.charCodeAt(I);for(;(P===9||P===32)&&I<=S;)P=C.charCodeAt(++I);for(P=C.charCodeAt(S);(P===9||P===32)&&S>=I;)P=C.charCodeAt(--S);return A.tokenStart=I,A.tokenEnd=S+1,A.position=b,A}e.trim=v})(Qt||(Qt={}));var bt;(function(e){function t(s){const c=new Uint32Array(1.61*s.indices.length|0);c.set(s.indices),s.indices=c,s.indicesLenMinus2=c.length-2|0}function n(s,c,a){const u=s;u.offset>u.indicesLenMinus2&&t(u),u.indices[u.offset++]=c,u.indices[u.offset++]=a,s.count++}e.add=n;function r(s,c){n(s,c.tokenStart,c.tokenEnd)}e.addToken=r;function i(s,c,a){s.indices[s.offset++]=c,s.indices[s.offset++]=a,s.count++}e.addUnchecked=i;function o(s,c){return c=Math.max(10,c),{data:s,indicesLenMinus2:c-2|0,count:0,offset:0,indices:new Uint32Array(c)}}e.create=o})(bt||(bt={}));var Lr;(function(e){function t(o,s=-1){return new r(o,s)}e.error=t;function n(o,s=[]){return new i(o,s)}e.success=n;class r{toString(){return this.line>=0?`[Line ${this.line}] ${this.message}`:this.message}constructor(s,c){this.message=s,this.line=c,this.isError=!0}}e.Error=r;class i{constructor(s,c){this.result=s,this.warnings=c,this.isError=!1}}e.Success=i})(Lr||(Lr={}));var Vt;(function(e){e[e.Data=0]="Data",e[e.Save=1]="Save",e[e.Loop=2]="Loop",e[e.Value=3]="Value",e[e.ColumnName=4]="ColumnName",e[e.Comment=5]="Comment",e[e.End=6]="End"})(Vt||(Vt={}));function y_(e){for(;e.position<e.length;)switch(e.data.charCodeAt(e.position)){case 9:case 10:case 13:case 32:e.tokenEnd=e.position;return;default:++e.position;break}e.tokenEnd=e.position}function K3(e,t){let n,r;for(++e.position;e.position<e.length;)if(r=e.data.charCodeAt(e.position),r===t)switch(n=e.data.charCodeAt(e.position+1),n){case 9:case 10:case 13:case 32:e.tokenStart++,e.tokenEnd=e.position,e.isEscaped=!0,++e.position;return;default:if(n===void 0){e.tokenStart++,e.tokenEnd=e.position,e.isEscaped=!0,++e.position;return}++e.position;break}else{if(r===10||r===13){e.tokenEnd=e.position;return}++e.position}e.tokenEnd=e.position}function $3(e){for(e.position+=3;e.position<e.length;){if(e.data.charCodeAt(e.position)===39&&g_(e)){e.tokenStart+=3,e.tokenEnd=e.position,e.isEscaped=!0,e.position+=3;return}++e.position}e.tokenEnd=e.position}function W3(e){let t=59,n=e.position+1,r;for(;n<e.length;)if(r=e.data.charCodeAt(n),r===59&&(t===10||t===13)){for(e.position=n+1,e.tokenStart++,n--,r=e.data.charCodeAt(n);r===10||r===13;)n--,r=e.data.charCodeAt(n);e.tokenEnd=n+1,e.isEscaped=!0;return}else(r===13||r===10&&t!==13)&&e.lineNumber++,t=r,++n;return e.position=n,t}function Y3(e){for(;e.position<e.length;)switch(e.data.charCodeAt(e.position)){case 93:++e.position,e.tokenEnd=e.position,e.isImportGet=!1;return;default:++e.position;break}}function Z3(e){for(;e.position<e.length;){const t=e.data.charCodeAt(e.position);if(t===10||t===13)return;++e.position}}function X3(e){let t=10;for(;e.position<e.length;){const n=e.data.charCodeAt(e.position);switch(n){case 9:case 32:t=n,++e.position;break;case 10:t!==13&&++e.lineNumber,t=n,++e.position;break;case 13:t=n,++e.position,++e.lineNumber;break;default:return t}}return t}function g_(e){return!(e.length-e.position<2||e.data.charCodeAt(e.position+1)!==39||e.data.charCodeAt(e.position+2)!==39)}function Q3(e){let t=e.data.charCodeAt(e.tokenStart);return!(t!==68&&t!==100||(t=e.data.charCodeAt(e.tokenStart+1),t!==65&&t!==97)||(t=e.data.charCodeAt(e.tokenStart+2),t!==84&&t!==116)||(t=e.data.charCodeAt(e.tokenStart+3),t!==65&&t!==97))}function J3(e){let t=e.data.charCodeAt(e.tokenStart);return!(t!==83&&t!==115||(t=e.data.charCodeAt(e.tokenStart+1),t!==65&&t!==97)||(t=e.data.charCodeAt(e.tokenStart+2),t!==86&&t!==118)||(t=e.data.charCodeAt(e.tokenStart+3),t!==69&&t!==101))}function ex(e){if(e.tokenEnd-e.tokenStart!==5)return!1;let t=e.data.charCodeAt(e.tokenStart);return!(t!==76&&t!==108||(t=e.data.charCodeAt(e.tokenStart+1),t!==79&&t!==111)||(t=e.data.charCodeAt(e.tokenStart+2),t!==79&&t!==111)||(t=e.data.charCodeAt(e.tokenStart+3),t!==80&&t!==112))}function tx(e){return!(e.tokenEnd-e.tokenStart!==11||e.data.charCodeAt(e.tokenStart+1)!==105||e.data.charCodeAt(e.tokenStart+2)!==109||e.data.charCodeAt(e.tokenStart+3)!==112||e.data.charCodeAt(e.tokenStart+4)!==111||e.data.charCodeAt(e.tokenStart+5)!==114||e.data.charCodeAt(e.tokenStart+6)!==116||e.data.charCodeAt(e.tokenStart+7)!==46||e.data.charCodeAt(e.tokenStart+8)!==103||e.data.charCodeAt(e.tokenStart+9)!==101||e.data.charCodeAt(e.tokenStart+10)!==116)}function nx(e,t,n){let r;const i=n-t,o=e.tokenStart-t,s=e.tokenEnd-e.tokenStart;if(s<i)return!1;for(r=t;r<n;++r)if(e.data.charCodeAt(r)!==e.data.charCodeAt(r+o))return!1;return i===s||e.data.charCodeAt(r+o)===46}function b_(e){let t;for(t=e.tokenStart;t<e.tokenEnd;++t)if(e.data.charCodeAt(t)===46)return t;return t}function v_(e,t){return e.data.substring(e.tokenStart,t)}function rx(e){let t;for(t=e.tokenStart;t<e.tokenEnd;++t)if(e.data.charCodeAt(t)===46)return!1;return!0}function Gl(e){return e.data.substring(e.tokenStart,e.tokenEnd)}function A_(e){const t=X3(e);if(e.position>=e.length){e.tokenType=Vt.End;return}e.tokenStart=e.position,e.tokenEnd=e.position,e.isEscaped=!1;const n=e.data.charCodeAt(e.position);switch(n){case 35:Z3(e),e.tokenType=Vt.Comment;break;case 39:if(g_(e)){$3(e),e.tokenType=Vt.Value;break}case 34:K3(e,n),e.tokenType=Vt.Value;break;case 59:t===10||t===13?W3(e):y_(e),e.tokenType=Vt.Value;break;default:e.isImportGet?Y3(e):y_(e),e.isEscaped?e.tokenType=Vt.Value:e.data.charCodeAt(e.tokenStart)===95?(e.inSaveFrame&&tx(e)&&(e.isImportGet=!0),e.tokenType=Vt.ColumnName):e.tokenEnd-e.tokenStart>=5&&e.data.charCodeAt(e.tokenStart+4)===95?Q3(e)?e.tokenType=Vt.Data:J3(e)?e.tokenType=Vt.Save:ex(e)?e.tokenType=Vt.Loop:e.tokenType=Vt.Value:e.tokenType=Vt.Value;break}}function Gr(e){for(A_(e);e.tokenType===Vt.Comment;)A_(e)}function ix(e,t){return{data:e,length:e.length,position:0,tokenStart:0,tokenEnd:0,tokenType:Vt.End,lineNumber:1,isEscaped:!1,isImportGet:!1,inSaveFrame:!1,runtimeCtx:t}}function Rs(){return{categoryNames:[],categoryData:Object.create(null)}}function Hl(e,t){const n=Object.create(null);for(const r of e){const i=t[r];n[r]=cn(i.name,i.rowCount,i.fieldNames,i.fields)}return n}function x_(e,t,n){return Ml(e.categoryNames,Hl(e.categoryNames,e.categoryData),t,n)}function ox(e,t){return Ml(e.categoryNames,Hl(e.categoryNames,e.categoryData),t)}function jl(e,t,n,r,i){if(t in e.categoryData){const o=e.categoryData[t];o.fieldNames.push(...r),Object.assign(o.fields,i)}else e.categoryData[t]={name:t,rowCount:n,fieldNames:r,fields:i},e.categoryNames.push(t)}function sx(e,t){const n=e.tokenStart,r=b_(e),i=v_(e,r),o=Object.create(null),s=[];let c=!0;for(;c;){if(e.tokenType!==Vt.ColumnName||!nx(e,n,r)){c=!1;break}const a=Gl(e).substring(i.length+1);if(Gr(e),e.tokenType!==Vt.Value)return{hasError:!0,errorLine:e.lineNumber,errorMessage:"Expected value."};o[a]=Oe.ofTokens({data:e.data,indices:[e.tokenStart,e.tokenEnd],count:1}),s[s.length]=a,Gr(e)}return jl(t,i.substr(1),1,s,o),{hasError:!1,errorLine:0,errorMessage:""}}function ax(e,t){const{tokenizer:n,tokens:r,fieldCount:i}=t;let o=t.tokenCount,s=0;for(;n.tokenType===Vt.Value&&s<e;)bt.add(r[o++%i],n.tokenStart,n.tokenEnd),Gr(n),s++;return t.tokenCount=o,s}function cx(e,t){return e.update({message:"Parsing...",current:t.tokenizer.position,max:t.tokenizer.data.length})}async function ux(e,t){const n=e.lineNumber;Gr(e);const r=v_(e,b_(e)),i=rx(e),o=[];for(;e.tokenType===Vt.ColumnName;)o[o.length]=i?Gl(e):Gl(e).substring(r.length+1),Gr(e);const s=r==="_atom_site"?e.data.length/100|0:32,c=[],a=o.length;for(let f=0;f<a;f++)c[f]=bt.create(e.data,s);const u={fieldCount:a,tokenCount:0,tokenizer:e,tokens:c};if(await Ll(e.runtimeCtx,1e6,u,ax,cx),u.tokenCount%a!==0)return{hasError:!0,errorLine:e.lineNumber,errorMessage:`The number of values for loop starting at line ${n} is not a multiple of the number of columns.`};const l=u.tokenCount/a|0;if(i)for(let f=0;f<a;f++){const d={"":Oe.ofTokens(c[f])};jl(t,o[f].substr(1),l,[""],d)}else{const f=Object.create(null);for(let d=0;d<a;d++)f[o[d]]=Oe.ofTokens(c[d]);jl(t,r.substr(1),l,o,f)}return{hasError:!1,errorLine:0,errorMessage:""}}function Li(e,t){return Lr.error(t,e)}function lx(e){return Lr.success(e)}async function dx(e,t){const n=[],r=ix(e,t);let i="",o=Rs(),s=[],c=Rs();const a=R3(c.categoryNames,Hl(c.categoryNames,c.categoryData),"");let u="";for(t.update({message:"Parsing...",current:0,max:e.length}),Gr(r);r.tokenType!==Vt.End;){const l=r.tokenType;if(l===Vt.Data){if(r.inSaveFrame)return Li(r.lineNumber,"Unexpected data block inside a save frame.");o.categoryNames.length>0&&n.push(x_(o,i,s)),i=e.substring(r.tokenStart+5,r.tokenEnd),o=Rs(),s=[],Gr(r)}else if(l===Vt.Save){if(r.tokenEnd-r.tokenStart===5)c.categoryNames.length>0&&(s[s.length]=ox(c,u)),r.inSaveFrame=!1;else{if(r.inSaveFrame)return Li(r.lineNumber,"Save frames cannot be nested.");r.inSaveFrame=!0,u=e.substring(r.tokenStart+5,r.tokenEnd),c=Rs()}Gr(r)}else if(l===Vt.Loop){const f=await ux(r,r.inSaveFrame?c:o);if(f.hasError)return Li(f.errorLine,f.errorMessage)}else if(l===Vt.ColumnName){const f=sx(r,r.inSaveFrame?c:o);if(f.hasError)return Li(f.errorLine,f.errorMessage)}else return console.log(r.tokenType,Qt.getTokenString(r)),Li(r.lineNumber,"Unexpected token. Expected data_, loop_, or data name.")}return r.inSaveFrame?Li(r.lineNumber,`Unfinished save frame (${a.header}).`):((o.categoryNames.length>0||s.length>0)&&n.push(x_(o,i,s)),lx(c_(n)))}function S_(e){return rn.create("Parse CIF",async t=>await dx(e,t))}const fx="0.3.0";var At;(function(e){(function(r){r[r.Int8=1]="Int8",r[r.Int16=2]="Int16",r[r.Int32=3]="Int32",r[r.Uint8=4]="Uint8",r[r.Uint16=5]="Uint16",r[r.Uint32=6]="Uint32"})(e.IntDataType||(e.IntDataType={})),function(r){r[r.Float32=32]="Float32",r[r.Float64=33]="Float64"}(e.FloatDataType||(e.FloatDataType={}));function t(r){let i;return r instanceof Int8Array?i=e.IntDataType.Int8:r instanceof Int16Array?i=e.IntDataType.Int16:r instanceof Int32Array?i=e.IntDataType.Int32:r instanceof Uint8Array?i=e.IntDataType.Uint8:r instanceof Uint16Array?i=e.IntDataType.Uint16:r instanceof Uint32Array?i=e.IntDataType.Uint32:r instanceof Float32Array?i=e.FloatDataType.Float32:r instanceof Float64Array?i=e.FloatDataType.Float64:i=e.IntDataType.Int32,i}e.getDataType=t;function n(r){if(r instanceof Int8Array||r instanceof Int16Array||r instanceof Int32Array)return!0;for(let i=0,o=r.length;i<o;i++)if(i<0)return!1;return!0}e.isSignedIntegerDataType=n})(At||(At={}));const mx=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function hx(e,t){const n=new ArrayBuffer(e.length),r=new Uint8Array(n);for(let i=0,o=e.length;i<o;i+=t)for(let s=0;s<t;s++)r[i+t-s-1]=e[i+s];return n}function Ds(e){let t=e.data;for(let n=e.encoding.length-1;n>=0;n--)t=px(t,e.encoding[n]);return t}function px(e,t){switch(t.kind){case"ByteArray":switch(t.type){case At.IntDataType.Uint8:return e;case At.IntDataType.Int8:return _x(e);case At.IntDataType.Int16:return yx(e);case At.IntDataType.Uint16:return gx(e);case At.IntDataType.Int32:return bx(e);case At.IntDataType.Uint32:return vx(e);case At.FloatDataType.Float32:return Ax(e);case At.FloatDataType.Float64:return xx(e);default:qi(t.type)}case"FixedPoint":return Sx(e,t);case"IntervalQuantization":return Cx(e,t);case"RunLength":return Ix(e,t);case"Delta":return wx(e,t);case"IntegerPacking":return Bx(e,t);case"StringArray":return Rx(e,t)}}function C_(e,t){switch(e){case At.IntDataType.Int8:return new Int8Array(t);case At.IntDataType.Int16:return new Int16Array(t);case At.IntDataType.Int32:return new Int32Array(t);case At.IntDataType.Uint8:return new Uint8Array(t);case At.IntDataType.Uint16:return new Uint16Array(t);case At.IntDataType.Uint32:return new Uint32Array(t);default:return new Int32Array(t)}}function I_(e,t){switch(e){case At.FloatDataType.Float32:return new Float32Array(t);case At.FloatDataType.Float64:return new Float64Array(t);default:return new Float64Array(t)}}function _x(e){return new Int8Array(e.buffer,e.byteOffset)}function Gi(e,t,n){return mx?new n(e.buffer):new n(hx(e,t))}function yx(e){return Gi(e,2,Int16Array)}function gx(e){return Gi(e,2,Uint16Array)}function bx(e){return Gi(e,4,Int32Array)}function vx(e){return Gi(e,4,Uint32Array)}function Ax(e){return Gi(e,4,Float32Array)}function xx(e){return Gi(e,8,Float64Array)}function Sx(e,t){const n=e.length,r=I_(t.srcType,n),i=1/t.factor;for(let o=0;o<n;o++)r[o]=i*e[o];return r}function Cx(e,t){const n=e.length,r=I_(t.srcType,n),i=(t.max-t.min)/(t.numSteps-1),o=t.min;for(let s=0;s<n;s++)r[s]=o+i*e[s];return r}function Ix(e,t){const n=C_(t.srcType,t.srcSize);let r=0;for(let i=0,o=e.length;i<o;i+=2){const s=e[i],c=e[i+1];for(let a=0;a<c;++a)n[r++]=s}return n}function wx(e,t){const n=e.length,r=C_(t.srcType,n);if(!n)return e;r[0]=e[0]+(t.origin|0);for(let i=1;i<n;++i)r[i]=e[i]+r[i-1];return r}function Px(e,t){const n=t.byteCount===1?127:32767,r=-n-1,i=e.length,o=new Int32Array(t.srcSize);let s=0,c=0;for(;s<i;){let a=0,u=e[s];for(;u===n||u===r;)a+=u,s++,u=e[s];a+=u,o[c]=a,s++,c++}return o}function Ex(e,t){const n=t.byteCount===1?255:65535,r=e.length,i=new Int32Array(t.srcSize);let o=0,s=0;for(;o<r;){let c=0,a=e[o];for(;a===n;)c+=a,o++,a=e[o];c+=a,i[s]=c,o++,s++}return i}function Bx(e,t){return e.length===t.srcSize?e:t.isUnsigned?Ex(e,t):Px(e,t)}function Rx(e,t){const n=Ds({encoding:t.offsetEncoding,data:t.offsets}),r=Ds({encoding:t.dataEncoding,data:e}),i=t.stringData,o=new Array(n.length);o[0]="";for(let a=1,u=n.length;a<u;a++)o[a]=i.substring(n[a-1],n[a]);let s=0;const c=new Array(r.length);for(let a=0,u=r.length;a<u;a++)c[s++]=o[r[a]+1];return c}var Hi;(function(e){function t(d){return d.creator&&d.chunkSize}e.is=t;function n(d){const m=d.growBy*d.elementSize;d.currentSize=m,d.currentIndex=0,d.currentChunk=new d.ctor(m),d.allocatedSize+=m,d.chunks[d.chunks.length]=d.currentChunk}function r(d,m,h,p,_){d.currentIndex>=d.currentSize&&n(d);const y=d.currentChunk,v=d.currentIndex;return y[v]=m,y[v+1]=h,y[v+2]=p,y[v+3]=_,d.currentIndex+=4,d.elementCount++}e.add4=r;function i(d,m,h,p){d.currentIndex>=d.currentSize&&n(d);const _=d.currentChunk,y=d.currentIndex;return _[y]=m,_[y+1]=h,_[y+2]=p,d.currentIndex+=3,d.elementCount++}e.add3=i;function o(d,m,h){d.currentIndex>=d.currentSize&&n(d);const p=d.currentChunk,_=d.currentIndex;return p[_]=m,p[_+1]=h,d.currentIndex+=2,d.elementCount++}e.add2=o;function s(d,m){return d.currentIndex>=d.currentSize&&n(d),d.currentChunk[d.currentIndex]=m,d.currentIndex+=1,d.elementCount++}e.add=s;function c(d,m,h){for(let p=0;p<m;p++)d.currentIndex>=d.currentSize&&n(d),d.currentChunk[d.currentIndex++]=h,d.elementCount++;return d.elementCount}e.addRepeat=c;function a(d,m){const{elementSize:h}=d;for(let p=0,_=m.length;p<_;p+=h){d.currentIndex>=d.currentSize&&n(d);const{currentChunk:y}=d;for(let v=0;v<h;v++)y[d.currentIndex++]=m[p+v];d.elementCount++}return d.elementCount}e.addMany=a;function u(d,m=!1){return l(d,m)}e.compact=u;function l(d,m){const{ctor:h,chunks:p,currentIndex:_}=d;if(!p.length)return new h(0);if(p.length===1&&(m||_===d.allocatedSize))return p[0];let y=0;for(let b=0,C=p.length-1;b<C;b++)y+=p[b].length;y+=d.currentIndex;const v=new h(y);let A=0;if(v.buffer)for(let b=0,C=p.length-1;b<C;b++)v.set(p[b],A),A+=p[b].length;else for(let b=0,C=p.length-1;b<C;b++){const I=p[b];for(let S=0,P=I.length;S<P;S++)v[A+S]=I[S];A+=I.length}const g=p[p.length-1];if(v.buffer&&_>=d.currentSize)v.set(g,A);else for(let b=0,C=g.length;b<C;b++)v[A+b]=g[b];return v}e._compact=l;function f(d,m,h,p){const _={ctor:d,elementSize:m,growBy:Math.max(1,Math.ceil(h)),allocatedSize:0,elementCount:0,currentSize:0,currentChunk:void 0,currentIndex:0,chunks:[]};if(typeof p>"u")return _;if(typeof p=="number")return _.currentChunk=new d(p*m),_.allocatedSize=p*m,_.currentSize=_.currentChunk.length,_.chunks[0]=_.currentChunk,_;const y=p;if(y.length%m!==0)throw new Error("initialChunk length must be a multiple of the element size.");return _.currentChunk=y,_.allocatedSize=y.length,_.currentSize=y.length,_.chunks[0]=y,_}e.create=f})(Hi||(Hi={}));function Dx(e,t,n){return e[t].key<e[n].key?-1:1}function kx(e,t,n,r,i){const o=new Map,s=[];let c=t(e[0]),a=!0;for(let m=r;m<i;m++){const h=t(e[m]);if(o.has(h))o.get(h).count++,c!==h&&(a=!1);else{const p={key:h,count:1,offset:m};o.set(h,p),s[s.length]=p}c=h}const u=new Int32Array(s.length+1);u[s.length]=i;let l=!0;if(n){for(let m=1,h=s.length;m<h;m++)if(s[m-1].key>s[m].key){l=!1;break}}if(a&&l){for(let m=0;m<s.length;m++)u[m]=s[m].offset;return u}n&&!l&&i_(s,0,s.length,Dx,fi);let f=0;for(let m=0;m<s.length;m++){const h=s[m];h.offset=f,f+=h.count}const d=new Int32Array(i-r);for(let m=r;m<i;m++){const h=t(e[m]),p=o.get(h);d[p.offset++]=e[m]}for(let m=0,h=d.length;m<h;m++)e[m+r]=d[m];u[0]=r;for(let m=1;m<s.length;m++)u[m]=s[m-1].offset+r;return u}function Vl(e,t,n){const r=n&&n.start||0,i=n&&n.end||e.length;if(i-r<=0)throw new Error("Can only bucket non-empty collections.");return kx(e,t,!!(n&&n.sort),r,i)}class Tx{createGroup(t,n){const r=this.id++,i=[t];return this.groups[r]=i,{id:r,keys:i,value:n}}add(t,n){const r=this.getHash(n);if(this.byHash.has(r)){const i=this.byHash.get(r);for(let s=0,c=i.length;s<c;s++){const a=i[s];if(this.areEqual(n,a.value))return a.keys[a.keys.length]=t,a.value}const o=this.createGroup(t,n);return i[i.length]=o,o.value}else{const i=this.createGroup(t,n);return this.byHash.set(r,[i]),i.value}}constructor(t,n){this.getHash=t,this.areEqual=n,this.id=0,this.byHash=new Map,this.groups=[]}}function Nx(e,t){return new Tx(e,t)}function Ox(e){let t=e^e>>4;return t=(t^3735928559)+(t<<5),t=t^t>>11,t}function ks(e,t){let n=23;return n=31*n+e|0,n=31*n+t|0,n=n^n>>4,n=(n^3735928559)+(n<<5),n=n^n>>11,n}function Mx(e,t,n){let r=23;return r=31*r+e|0,r=31*r+t|0,r=31*r+n|0,r=r^r>>4,r=(r^3735928559)+(r<<5),r=r^r>>11,r}function qx(e,t,n,r){let i=23;return i=31*i+e|0,i=31*i+t|0,i=31*i+n|0,i=31*i+r|0,i=i^i>>4,i=(i^3735928559)+(i<<5),i=i^i>>11,i}function Ux(e){let t=0;for(let n=0,r=e.length;n<r;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return t}function Un(e,t){return(e+t)*(e+t+1)/2+t}function ji(e,t){return e<t?Un(e,t):Un(t,e)}function w_(e,t){const n=Math.floor((Math.sqrt(8*t+1)-1)/2),r=(n*n+n)/2,i=t-r;return e[0]=n-i,e[1]=i,e}function Vi(e){let t=2166136261;for(let n=0,r=e.length;n<r;++n)t^=e[n],t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}function Fx(e,t){for(let n=0,r=e.length;n<r;n++)if(t(e[n]))return e[n]}function Lx(e){if(Array.from)return Array.from(e);const t=[];for(;;){const{done:n,value:r}=e.next();if(n)break;t[t.length]=r}return t}function zl(e,t,n){const r=t-e+1,i=n?new n(r):new Int32Array(r);for(let o=0;o<r;o++)i[o]=o+e;return i}function Gx(e,t){const n=new(Hx(e))(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=e[t[r]];return n}function Hx(e){const t=e.constructor;if(!t)throw new Error("data does not define a constructor and it should");return t}function jx(e,t,n){let r=1,i;for(i=0;i<t;i++){const o=r*e;if(Math.abs(Math.round(o)-o)<=n)return i;r*=10}return-1}function Vx(e,t,n){let r=1,i=0;for(let o=0,s=e.length;o<s;o++){if(r>=0){const a=jx(e[o],t,n);a<0?r=-1:a>r&&(r=a)}const c=Math.abs(e[o]);if(c>n){const a=Math.floor(Math.log10(Math.abs(c)))+1;a>i&&(i=a)}}return{mantissaDigits:r,integerDigits:i}}function Kl(e){return wo.classify(e)}function zx(e){return $l.classify(e)}var wo;(function(e){function t(m,h){return m>=0?Math.ceil((m+1)/h):Math.ceil((m+1)/(-h-1))}function n(m){let h=!1;for(let p=0,_=m.length;p<_;p++)if(m[p]<0){h=!0;break}return h?{signed:h,limit8:127,limit16:32767}:{signed:h,limit8:255,limit16:65535}}function r(){return{pack8:0,pack16:0,count:0}}function i({limit8:m,limit16:h},p,_){p.pack8+=t(_,m),p.pack16+=t(_,h),p.count+=1}function o(m,h){m.pack8+=t(h,127),m.pack16+=t(h,32767),m.count+=1}function s(m){return m.count*4<m.pack16*2?{length:m.count*4,elem:4}:m.pack16*2<m.pack8?{length:m.pack16*2,elem:2}:{length:m.pack8,elem:1}}function c(m,h){const p=r();for(let _=0,y=m.length;_<y;_++)i(h,p,m[_]);return{...s(p),kind:"pack"}}function a(m,h){const p=r();let _=m[0];for(let y=1,v=m.length;y<v;y++)o(p,m[y]-_),_=m[y];return{...s(p),kind:"delta"}}function u(m,h){const p=r();let _=1;for(let y=1,v=m.length;y<v;y++)m[y-1]!==m[y]?(i(h,p,m[y-1]),i(h,p,_),_=1):_++;return i(h,p,m[m.length-1]),i(h,p,_),{...s(p),kind:"rle"}}function l(m,h){const p=r();let _=1,y=0,v=0;for(let A=1,g=m.length;A<g;A++){const b=m[A]-y;v!==b?(o(p,v),o(p,_),_=1):_++,v=b,y=m[A]}return o(p,v),o(p,_),{...s(p),kind:"delta-rle"}}function f(m){const h=n(m),p=[c(m,h),u(m,h),a(m),l(m)];return p.sort((_,y)=>_.length-y.length),p}e.getSize=f;function d(m){if(m.length<2)return ht.by(ht.byteArray);switch(f(m)[0].kind){case"pack":return ht.by(ht.integerPacking);case"rle":return ht.by(ht.runLength).and(ht.integerPacking);case"delta":return ht.by(ht.delta).and(ht.integerPacking);case"delta-rle":return ht.by(ht.delta).and(ht.runLength).and(ht.integerPacking);default:qi()}}e.classify=d})(wo||(wo={}));var $l;(function(e){function n(i){const{mantissaDigits:s,integerDigits:c}=Vx(i,4,1e-6);if(s<0||s+c>10)return ht.by(ht.byteArray);if(s===0)return wo.classify(i);const a=r(s),u=new Int32Array(i.length);for(let m=0,h=i.length;m<h;m++)u[m]=Math.round(a*i[m]);const f=wo.getSize(u)[0],d=ht.by(ht.fixedPoint(a));switch(f.kind){case"pack":return d.and(ht.integerPacking);case"rle":return d.and(ht.runLength).and(ht.integerPacking);case"delta":return d.and(ht.delta).and(ht.integerPacking);case"delta-rle":return d.and(ht.delta).and(ht.runLength).and(ht.integerPacking);default:qi()}}e.classify=n;function r(i){let o=1;for(let s=0;s<i;s++)o*=10;return o}})($l||($l={}));class Ts{and(t){return new Ts(this.providers.concat([t]))}encode(t){const n=[];for(const r of this.providers){const i=r(t);if(!i.encodings.length)throw new Error("Encodings must be non-empty.");t=i.data;for(const o of i.encodings)n.push(o)}if(!(t instanceof Uint8Array))throw new Error("The encoding must result in a Uint8Array. Fix your encoding chain.");return{encoding:n,data:t}}constructor(t){this.providers=t}}var wr;(function(e){function t(i){return new Ts([i])}e.by=t;function n(i){let o=t(r(i[0]));for(let s=1;s<i.length&&i[s-1].kind!=="IntegerPacking";s++)o=o.and(r(i[s]));return o}e.fromEncoding=n;function r(i){switch(i.kind){case"ByteArray":return ht.byteArray;case"FixedPoint":return ht.fixedPoint(i.factor);case"IntervalQuantization":return ht.intervalQuantizaiton(i.min,i.max,i.numSteps);case"RunLength":return ht.runLength;case"Delta":return ht.delta;case"IntegerPacking":return ht.integerPacking;case"StringArray":return ht.stringArray}}})(wr||(wr={}));var ht;(function(e){function t(g){return new Ts([g])}e.by=t;function n(g){return{encodings:[{kind:"ByteArray",type:At.IntDataType.Uint8}],data:g}}function r(g){return{encodings:[{kind:"ByteArray",type:At.IntDataType.Int8}],data:new Uint8Array(g.buffer,g.byteOffset)}}const i={[At.IntDataType.Int16]:function(g,b,C){g.setInt16(2*b,C,!0)},[At.IntDataType.Uint16]:function(g,b,C){g.setUint16(2*b,C,!0)},[At.IntDataType.Int32]:function(g,b,C){g.setInt32(4*b,C,!0)},[At.IntDataType.Uint32]:function(g,b,C){g.setUint32(4*b,C,!0)},[At.FloatDataType.Float32]:function(g,b,C){g.setFloat32(4*b,C,!0)},[At.FloatDataType.Float64]:function(g,b,C){g.setFloat64(8*b,C,!0)}},o={[At.IntDataType.Int16]:2,[At.IntDataType.Uint16]:2,[At.IntDataType.Int32]:4,[At.IntDataType.Uint32]:4,[At.FloatDataType.Float32]:4,[At.FloatDataType.Float64]:8};function s(g){const b=At.getDataType(g);if(b===At.IntDataType.Int8)return r(g);if(b===At.IntDataType.Uint8)return n(g);const C=new Uint8Array(g.length*o[b]),I=i[b],S=new DataView(C.buffer);for(let P=0,T=g.length;P<T;P++)I(S,P,g[P]);return{encodings:[{kind:"ByteArray",type:b}],data:C}}e.byteArray=s;function c(g,b){const C=At.getDataType(g),I=new Int32Array(g.length);for(let S=0,P=g.length;S<P;S++)I[S]=Math.round(g[S]*b);return{encodings:[{kind:"FixedPoint",factor:b,srcType:C}],data:I}}function a(g){return b=>c(b,g)}e.fixedPoint=a;function u(g,b,C,I,S){const P=At.getDataType(g);if(!g.length)return{encodings:[{kind:"IntervalQuantization",min:b,max:C,numSteps:I,srcType:P}],data:new Int32Array(0)};if(C<b){const w=b;b=C,C=w}const T=(C-b)/(I-1),D=new S(g.length);for(let w=0,E=g.length;w<E;w++){const k=g[w];k<=b?D[w]=0:k>=C?D[w]=I-1:D[w]=Math.round((k-b)/T)|0}return{encodings:[{kind:"IntervalQuantization",min:b,max:C,numSteps:I,srcType:P}],data:D}}function l(g,b,C,I=Int32Array){return S=>u(S,g,b,C,I)}e.intervalQuantizaiton=l;function f(g){let b=At.getDataType(g);if(b===void 0&&(g=new Int32Array(g),b=At.IntDataType.Int32),!g.length)return{encodings:[{kind:"RunLength",srcType:b,srcSize:0}],data:new Int32Array(0)};let C=2;for(let T=1,D=g.length;T<D;T++)g[T-1]!==g[T]&&(C+=2);const I=new Int32Array(C);let S=0,P=1;for(let T=1,D=g.length;T<D;T++)g[T-1]!==g[T]?(I[S]=g[T-1],I[S+1]=P,P=1,S+=2):++P;return I[S]=g[g.length-1],I[S+1]=P,{encodings:[{kind:"RunLength",srcType:b,srcSize:g.length}],data:I}}e.runLength=f;function d(g){if(!At.isSignedIntegerDataType(g))throw new Error("Only signed integer types can be encoded using delta encoding.");let b=At.getDataType(g);if(b===void 0&&(g=new Int32Array(g),b=At.IntDataType.Int32),!g.length)return{encodings:[{kind:"Delta",origin:0,srcType:b}],data:new g.constructor(0)};const C=new g.constructor(g.length),I=g[0];C[0]=g[0];for(let S=1,P=g.length;S<P;S++)C[S]=g[S]-g[S-1];return C[0]=0,{encodings:[{kind:"Delta",origin:I,srcType:b}],data:C}}e.delta=d;function m(g){for(let b=0,C=g.length;b<C;b++)if(g[b]<0)return!0;return!1}function h(g,b){let C=0;for(let I=0,S=g.length;I<S;I++)C+=g[I]/b|0;return C+=g.length,C}function p(g,b){const C=-b-1;let I=0;for(let S=0,P=g.length;S<P;S++){const T=g[S];T>=0?I+=T/b|0:I+=T/C|0}return I+=g.length,I}function _(g){const b=m(g),C=b?p(g,127):h(g,255),I=b?p(g,32767):h(g,65535);return g.length*4<I*2?{isSigned:b,size:g.length,bytesPerElement:4}:I*2<C?{isSigned:b,size:I,bytesPerElement:2}:{isSigned:b,size:C,bytesPerElement:1}}function y(g,b){const C=b.isSigned?b.bytesPerElement===1?127:32767:b.bytesPerElement===1?255:65535,I=-C-1,S=g.length,P=b.isSigned?b.bytesPerElement===1?new Int8Array(b.size):new Int16Array(b.size):b.bytesPerElement===1?new Uint8Array(b.size):new Uint16Array(b.size);let T=0;for(let w=0;w<S;w++){let E=g[w];if(E>=0)for(;E>=C;)P[T]=C,++T,E-=C;else for(;E<=I;)P[T]=I,++T,E-=I;P[T]=E,++T}const D=s(P);return{encodings:[{kind:"IntegerPacking",byteCount:b.bytesPerElement,isUnsigned:!b.isSigned,srcSize:S},D.encodings[0]],data:D.data}}function v(g){const b=_(g);return b.bytesPerElement===4?s(g):y(g,b)}e.integerPacking=v;function A(g){const b=Object.create(null),C=[],I=new Int32Array(g.length),S=Hi.create(Int32Array,1,Math.min(1024,g.length<32?g.length+1:Math.round(g.length/8)+1));Hi.add(S,0);let P=0,T=0;for(const V of g){if(V==null){I[T++]=-1;continue}let de=b[V];de===void 0&&(P+=V.length,de=C.length,C[de]=V,b[V]=de,Hi.add(S,P)),I[T++]=de}const D=Hi.compact(S),E=Kl(D).encode(D),F=Kl(I).encode(I);return{encodings:[{kind:"StringArray",dataEncoding:F.encoding,stringData:C.join(""),offsetEncoding:E.encoding,offsets:E.data}],data:F.data}}e.stringArray=A})(ht||(ht={}));function Kx(e){const t=e.mask?Ds(e.mask):void 0,n=Ds(e.data),r=wl(n),i=r?t?u=>t[u]===ye.ValueKinds.Present?""+n[u]:"":u=>""+n[u]:t?u=>t[u]===ye.ValueKinds.Present?n[u]:"":u=>n[u],o=r?u=>n[u]:u=>{const l=n[u];return di(l,0,l.length)},s=r?u=>n[u]:u=>{const l=n[u];return So(l,0,l.length)},c=t?u=>t[u]:u=>ye.ValueKinds.Present,a=n.length;return{__array:n,binaryEncoding:e.data.encoding,isDefined:!0,rowCount:a,str:i,int:o,float:s,valueKind:c,areValuesEqual:(u,l)=>n[u]===n[l],toStringArray:u=>An(a,i,u),toIntArray:r?u=>Cs(n,u):u=>An(a,o,u),toFloatArray:r?u=>Cs(n,u):u=>An(a,s,u)}}const $x={is(e){return typeof e.charCodeAt=="function"},toString(e){try{return e.toString()}catch(t){throw new Error(`Failed to convert StringLike object into string. This might be because the length ${e.length} exceeds maximum allowed string length ${Wx}. (${t})`)}}},Wx=536870888;function Ns(e,t,n){for(let r=0,i=n.length;r<i;r++){const o=n.charCodeAt(r);if(o<128){e[t++]=o>>>0&127|0;continue}if(o<2048){e[t++]=o>>>6&31|192,e[t++]=o>>>0&63|128;continue}if(o<65536){e[t++]=o>>>12&15|224,e[t++]=o>>>6&63|128,e[t++]=o>>>0&63|128;continue}if(o<1114112){e[t++]=o>>>18&7|240,e[t++]=o>>>12&63|128,e[t++]=o>>>6&63|128,e[t++]=o>>>0&63|128;continue}throw new Error("bad codepoint "+o)}}const Yx=function(){const e=[];for(let t=0;t<1024;t++)e[t]=String.fromCharCode(t);return e}();function P_(e){throw new Error(e)}function Zx(e,t,n){const r=Yx;let i,o=0;const s=[],c=512;for(let a=t,u=t+n;a<u;a++){const l=e[a];(l&128)===0?s[o++]=r[l]:(l&224)===192?s[o++]=r[(l&15)<<6|e[++a]&63]:(l&240)===224?s[o++]=String.fromCharCode((l&15)<<12|(e[++a]&63)<<6|(e[++a]&63)<<0):(l&248)===240?s[o++]=String.fromCharCode((l&7)<<18|(e[++a]&63)<<12|(e[++a]&63)<<6|(e[++a]&63)<<0):P_("Invalid byte "+l.toString(16)),o===c&&(i=i||[],i[i.length]=s.join(""),o=0)}return i?(o>0&&(i[i.length]=s.slice(0,o).join("")),i.join("")):s.slice(0,o).join("")}const E_=typeof TextDecoder<"u"?new TextDecoder:void 0;function Xx(e,t=0,n=e.length){if(E_){const r=t||n!==e.length?e.subarray(t,t+n):e;return E_.decode(r)}else return Zx(e,t,n)}function B_(e){let t=0;for(let n=0,r=e.length;n<r;n++){const i=e.charCodeAt(n);if(i<128){t+=1;continue}if(i<2048){t+=2;continue}if(i<65536){t+=3;continue}if(i<1114112){t+=4;continue}P_("bad codepoint "+i)}return t}function Qx(e){return Ms({buffer:e,offset:0,dataView:new DataView(e.buffer)})}function Wl(e,t){const n={};for(let r=0;r<t;r++){const i=Ms(e);n[i]=Ms(e)}return n}function Yl(e,t){const n=new Uint8Array(t),r=e.offset;for(let i=0;i<t;i++)n[i]=e.buffer[i+r];return e.offset+=t,n}function Os(e,t){const n=Xx(e.buffer,e.offset,t);return e.offset+=t,n}function Zl(e,t){const n=new Array(t);for(let r=0;r<t;r++)n[r]=Ms(e);return n}function Ms(e){const t=e.buffer[e.offset];let n,r;if((t&128)===0)return e.offset++,t;if((t&240)===128)return r=t&15,e.offset++,Wl(e,r);if((t&240)===144)return r=t&15,e.offset++,Zl(e,r);if((t&224)===160)return r=t&31,e.offset++,Os(e,r);if((t&224)===224)return n=e.dataView.getInt8(e.offset),e.offset++,n;switch(t){case 192:return e.offset++,null;case 194:return e.offset++,!1;case 195:return e.offset++,!0;case 196:return r=e.dataView.getUint8(e.offset+1),e.offset+=2,Yl(e,r);case 197:return r=e.dataView.getUint16(e.offset+1),e.offset+=3,Yl(e,r);case 198:return r=e.dataView.getUint32(e.offset+1),e.offset+=5,Yl(e,r);case 202:return n=e.dataView.getFloat32(e.offset+1),e.offset+=5,n;case 203:return n=e.dataView.getFloat64(e.offset+1),e.offset+=9,n;case 204:return n=e.buffer[e.offset+1],e.offset+=2,n;case 205:return n=e.dataView.getUint16(e.offset+1),e.offset+=3,n;case 206:return n=e.dataView.getUint32(e.offset+1),e.offset+=5,n;case 208:return n=e.dataView.getInt8(e.offset+1),e.offset+=2,n;case 209:return n=e.dataView.getInt16(e.offset+1),e.offset+=3,n;case 210:return n=e.dataView.getInt32(e.offset+1),e.offset+=5,n;case 217:return r=e.dataView.getUint8(e.offset+1),e.offset+=2,Os(e,r);case 218:return r=e.dataView.getUint16(e.offset+1),e.offset+=3,Os(e,r);case 219:return r=e.dataView.getUint32(e.offset+1),e.offset+=5,Os(e,r);case 220:return r=e.dataView.getUint16(e.offset+1),e.offset+=3,Zl(e,r);case 221:return r=e.dataView.getUint32(e.offset+1),e.offset+=5,Zl(e,r);case 222:return r=e.dataView.getUint16(e.offset+1),e.offset+=3,Wl(e,r);case 223:return r=e.dataView.getUint32(e.offset+1),e.offset+=5,Wl(e,r)}throw new Error("Unknown type 0x"+t.toString(16))}function Jx(e,t){for(let n=0;n<2;n++)if(e[n]>t[n])return!1;return!0}function eS(e){const t=Object.create(null),n=Object.create(null);for(const r of e.columns)t[r.name]=r;return{rowCount:e.rowCount,name:e.name.substring(1),fieldNames:e.columns.map(r=>r.name),getField(r){const i=t[r];if(i)return n[r]||(n[r]=Kx(i)),n[r]}}}function R_(e){return rn.create("Parse BinaryCIF",async t=>{const n=[0,3];try{const r=Qx(e);if(!Jx(n,r.version.match(/(\d)\.(\d)\.\d/).slice(1).map(o=>+o)))return Lr.error(`Unsupported format version. Current ${r.version}, required ${n.join(".")}.`);const i=c_(r.dataBlocks.map(o=>{const s=Object.create(null);for(const c of o.categories)s[c.name.substring(1)]=eS(c);return Ml(o.categories.map(c=>c.name.substring(1)),s,o.header)}));return Lr.success(i)}catch(r){return Lr.error(""+r)}})}var zi;(function(e){function t(i){return i.replace(".","_").replace(/\[/,"_").replace(/(\[|\])/g,"")}e.canonical=t;function n(i,o){return t(i)===t(o)}e.equal=n;function r(i,o,s=!1){const c=`${i}${o?`.${o}`:""}`;return s?t(c):c}e.create=r})(zi||(zi={}));function tS(e,t,n){const r={};for(const i of t.blocks)r[i.header]=Fn(e,i,n);return r}function Fn(e,t,n){return aS(e,t,n)}function nS(e,t){return new k_(t,e,!0)}function rS(e){switch(e.valueType){case"str":return(t,n,r)=>iS(e,t,t.str,t.toStringArray);case"int":return(t,n,r)=>D_(e,t,t.int,t.toIntArray);case"float":return(t,n,r)=>D_(e,t,t.float,t.toFloatArray);case"list":throw new Error("Use createListColumn instead.");case"tensor":throw new Error("Use createTensorColumn instead.")}}function iS(e,t,n,r){return{schema:e,__array:t.__array,isDefined:t.isDefined,rowCount:t.rowCount,value:e.transform==="lowercase"?i=>n(i).toLowerCase():e.transform==="uppercase"?i=>n(i).toUpperCase():n,valueKind:t.valueKind,areValuesEqual:t.areValuesEqual,toArray:e.transform==="lowercase"?i=>Array.from(r(i)).map(o=>o.toLowerCase()):e.transform==="uppercase"?i=>Array.from(r(i)).map(o=>o.toUpperCase()):r}}function D_(e,t,n,r){return{schema:e,__array:t.__array,isDefined:t.isDefined,rowCount:t.rowCount,value:n,valueKind:t.valueKind,areValuesEqual:t.areValuesEqual,toArray:r}}function oS(e,t,n){const r=e.separator,i=e.itemParse,o=t.getField(n),s=o?a=>o.str(a).split(r).map(u=>i(u.trim())).filter(u=>!!u):a=>[],c=a=>An(t.rowCount,s,a);return{schema:e,__array:void 0,isDefined:!!o,rowCount:t.rowCount,value:s,valueKind:o?o.valueKind:()=>ye.ValueKinds.NotPresent,areValuesEqual:(a,u)=>Nl(s(a),s(u)),toArray:c}}function sS(e,t,n){const r=e.space,i=t.fieldNames.includes(`${n}[0]`)||t.fieldNames.includes(`${n}[0][0]`)||t.fieldNames.includes(`${n}[0][0][0]`),o=i?0:1,s=t.fieldNames.includes(`${n}_1`)||t.fieldNames.includes(`${n}_11`)||t.fieldNames.includes(`${n}_111`)?"underscore":"brackets",c=D3(n,r.rank,i,s),a=t.getField(c(o,o,o))||ye.Undefined(t.rowCount,e),u=f=>k3(t,r,f,c),l=f=>An(t.rowCount,u,f);return{schema:e,__array:void 0,isDefined:a.isDefined,rowCount:t.rowCount,value:u,valueKind:a.valueKind,areValuesEqual:(f,d)=>dr.areEqualExact(u(f),u(d)),toArray:l}}class k_{constructor(t,n,r){this._isDefined=r;const i=Object.keys(n);this._rowCount=t.rowCount,this._columns=i,this._schema=n;const o=Object.create(null);for(const s of i)Object.defineProperty(this,s,{get:function(){if(o[s])return o[s];const c=n[s];if(c.valueType==="list")o[s]=oS(c,t,s);else if(c.valueType==="tensor")o[s]=sS(c,t,s);else{const a=rS(c),u=t.getField(s);o[s]=u?a(u,t,s):ye.Undefined(t.rowCount,c)}return o[s]},enumerable:!0,configurable:!1})}}function aS(e,t,n){const r=Object.create(null);for(const i of Object.keys(e))r[i]=lS(i,e[i],t,n);return Ol.ofTables(t.header,e,r)}function cS(e){const t=Object.create(null);for(const n of Object.keys(e.categories))for(const r of e.categories[n].fieldNames){const i=zi.create(n,r,!0);t[i]=e.categories[n].getField(r)}return t}function uS(e,t,n,r){const i=zi.create(t,e),o=zi.canonical(i);if(o in n)return n[o];if(r&&i in r)for(const s of r[i]){const c=zi.canonical(s);if(c in n)return n[c]}}function lS(e,t,n,r){let i=n.categories[e];if(r){const o=cS(n),s=Object.create(null),c=[];let a=0;for(const u of Object.keys(t)){const l=uS(u,e,o,r);l&&(s[u]=l,c.push(u),a=l.rowCount)}i={rowCount:a,name:e,fieldNames:[...c],getField(u){return s[u]}}}return new k_(i||cn.empty(e),t,!!i)}var Pr=ye.Schema;const N=Pr.str,ee=Pr.int,ct=Pr.float,Xl=Pr.coord,je=Pr.Aliased,Hr=Pr.Matrix,qs=Pr.Vector,Pt=Pr.lstr,mi=Pr.List,mt={atom_site:{auth_asym_id:N,auth_atom_id:N,auth_comp_id:N,auth_seq_id:ee,B_iso_or_equiv:ct,Cartn_x:Xl,Cartn_y:Xl,Cartn_z:Xl,group_PDB:je(N),id:ee,label_alt_id:N,label_asym_id:N,label_atom_id:N,label_comp_id:N,label_entity_id:N,label_seq_id:ee,occupancy:ct,type_symbol:N,pdbx_PDB_ins_code:N,pdbx_PDB_model_num:ee,pdbx_formal_charge:ee,pdbx_label_index:ee,pdbx_sifts_xref_db_name:N,pdbx_sifts_xref_db_acc:N,pdbx_sifts_xref_db_num:N,pdbx_sifts_xref_db_res:N,ihm_model_id:ee},atom_site_anisotrop:{id:ee,type_symbol:N,U:Hr(3,3),U_esd:Hr(3,3),pdbx_auth_seq_id:ee,pdbx_auth_asym_id:N,pdbx_auth_atom_id:N,pdbx_auth_comp_id:N,pdbx_label_seq_id:ee,pdbx_label_alt_id:N,pdbx_label_asym_id:N,pdbx_label_atom_id:N,pdbx_label_comp_id:N,pdbx_PDB_ins_code:N},atom_sites:{entry_id:N,fract_transf_matrix:Hr(3,3),fract_transf_vector:qs(3)},audit_author:{name:N,pdbx_ordinal:ee,identifier_ORCID:N},audit_conform:{dict_location:N,dict_name:N,dict_version:N},cell:{angle_alpha:ct,angle_beta:ct,angle_gamma:ct,entry_id:N,length_a:ct,length_b:ct,length_c:ct,Z_PDB:ee,pdbx_unique_axis:N},chem_comp:{formula:N,formula_weight:ct,id:N,mon_nstd_flag:je(Pt),name:N,type:je(Pt),pdbx_synonyms:mi(";",e=>e)},chem_comp_bond:{atom_id_1:N,atom_id_2:N,comp_id:N,value_order:je(Pt),pdbx_ordinal:ee,pdbx_stereo_config:je(Pt),pdbx_aromatic_flag:je(Pt)},citation:{book_publisher:N,country:N,id:N,journal_abbrev:N,journal_id_ASTM:N,journal_id_CSD:N,journal_id_ISSN:N,journal_volume:N,page_first:N,page_last:N,title:N,year:ee,pdbx_database_id_DOI:N,pdbx_database_id_PubMed:ee},citation_author:{citation_id:N,name:N,ordinal:ee},database_2:{database_id:je(Pt),database_code:N},entity:{details:N,formula_weight:ct,id:N,src_method:je(Pt),type:je(Pt),pdbx_description:mi(",",e=>e),pdbx_number_of_molecules:ee,pdbx_parent_entity_id:N,pdbx_mutation:N,pdbx_fragment:N,pdbx_ec:mi(",",e=>e)},entity_poly:{entity_id:N,nstd_linkage:je(Pt),nstd_monomer:je(Pt),type:je(N),pdbx_strand_id:mi(",",e=>e),pdbx_seq_one_letter_code:N,pdbx_seq_one_letter_code_can:N,pdbx_target_identifier:N},entity_poly_seq:{entity_id:N,hetero:je(Pt),mon_id:N,num:ee},entry:{id:N},exptl:{entry_id:N,method:je(N)},software:{classification:N,date:N,description:N,name:N,type:je(Pt),version:N,pdbx_ordinal:ee},struct:{entry_id:N,title:N,pdbx_structure_determination_methodology:je(N),pdbx_descriptor:N},struct_asym:{details:N,entity_id:N,id:N,pdbx_modified:N,pdbx_blank_PDB_chainid_flag:je(N)},struct_conf:{beg_label_asym_id:N,beg_label_comp_id:N,beg_label_seq_id:ee,beg_auth_asym_id:N,beg_auth_comp_id:N,beg_auth_seq_id:ee,conf_type_id:je(Pt),details:N,end_label_asym_id:N,end_label_comp_id:N,end_label_seq_id:ee,end_auth_asym_id:N,end_auth_comp_id:N,end_auth_seq_id:ee,id:N,pdbx_beg_PDB_ins_code:N,pdbx_end_PDB_ins_code:N,pdbx_PDB_helix_class:N,pdbx_PDB_helix_length:ee,pdbx_PDB_helix_id:N},struct_conn:{conn_type_id:je(Pt),details:N,id:N,ptnr1_label_asym_id:N,ptnr1_label_atom_id:N,ptnr1_label_comp_id:N,ptnr1_label_seq_id:ee,ptnr1_auth_asym_id:N,ptnr1_auth_comp_id:N,ptnr1_auth_seq_id:ee,ptnr1_symmetry:N,ptnr2_label_asym_id:N,ptnr2_label_atom_id:N,ptnr2_label_comp_id:N,ptnr2_label_seq_id:ee,ptnr2_auth_asym_id:N,ptnr2_auth_comp_id:N,ptnr2_auth_seq_id:ee,ptnr2_symmetry:N,pdbx_ptnr1_PDB_ins_code:N,pdbx_ptnr1_label_alt_id:N,pdbx_ptnr1_standard_comp_id:N,pdbx_ptnr2_PDB_ins_code:N,pdbx_ptnr2_label_alt_id:N,pdbx_ptnr3_PDB_ins_code:N,pdbx_ptnr3_label_alt_id:N,pdbx_ptnr3_label_asym_id:N,pdbx_ptnr3_label_atom_id:N,pdbx_ptnr3_label_comp_id:N,pdbx_ptnr3_label_seq_id:ee,pdbx_PDB_id:N,pdbx_dist_value:ct,pdbx_value_order:je(Pt)},struct_conn_type:{criteria:N,id:je(Pt),reference:N},struct_keywords:{entry_id:N,text:mi(",",e=>e),pdbx_keywords:N},struct_mon_prot_cis:{label_alt_id:N,label_asym_id:N,label_comp_id:N,label_seq_id:ee,auth_asym_id:N,auth_comp_id:N,auth_seq_id:ee,pdbx_auth_asym_id_2:N,pdbx_auth_comp_id_2:N,pdbx_auth_seq_id_2:ee,pdbx_label_asym_id_2:N,pdbx_label_comp_id_2:N,pdbx_label_seq_id_2:ee,pdbx_PDB_ins_code:N,pdbx_PDB_ins_code_2:N,pdbx_PDB_model_num:ee,pdbx_omega_angle:N,pdbx_id:N,pdbx_auth_ins_code:N,pdbx_auth_ins_code_2:N},struct_ncs_oper:{code:je(N),details:N,id:ee,matrix:Hr(3,3),vector:qs(3)},struct_sheet_range:{beg_label_asym_id:N,beg_label_comp_id:N,beg_label_seq_id:ee,end_label_asym_id:N,end_label_comp_id:N,end_label_seq_id:ee,beg_auth_asym_id:N,beg_auth_comp_id:N,beg_auth_seq_id:ee,end_auth_asym_id:N,end_auth_comp_id:N,end_auth_seq_id:ee,id:N,sheet_id:N,pdbx_beg_PDB_ins_code:N,pdbx_end_PDB_ins_code:N},struct_site:{details:N,id:N,pdbx_num_residues:ee,pdbx_evidence_code:N,pdbx_auth_asym_id:N,pdbx_auth_comp_id:N,pdbx_auth_seq_id:ee,pdbx_auth_ins_code:N},struct_site_gen:{details:N,id:N,label_alt_id:N,label_asym_id:N,label_atom_id:N,label_comp_id:N,label_seq_id:ee,auth_asym_id:N,auth_atom_id:N,auth_comp_id:N,auth_seq_id:ee,site_id:N,symmetry:N,pdbx_auth_ins_code:N,pdbx_num_res:ee},struct_site_keywords:{site_id:N,text:N},symmetry:{entry_id:N,cell_setting:je(Pt),Int_Tables_number:ee,space_group_name_Hall:N,"space_group_name_H-M":N},pdbx_database_status:{status_code:je(N),status_code_sf:je(N),status_code_mr:je(N),entry_id:N,recvd_initial_deposition_date:N,SG_entry:je(Pt),deposit_site:je(N),process_site:je(N),status_code_cs:je(N),methods_development_category:je(N),pdb_format_compatible:je(Pt)},pdbx_nonpoly_scheme:{asym_id:N,entity_id:N,mon_id:N,pdb_strand_id:N,ndb_seq_num:N,pdb_seq_num:N,auth_seq_num:N,pdb_mon_id:N,auth_mon_id:N,pdb_ins_code:N},pdbx_database_related:{db_name:je(N),details:N,db_id:N,content_type:je(N)},pdbx_entity_nonpoly:{entity_id:N,comp_id:N,name:N},pdbx_chem_comp_synonyms:{name:N,comp_id:N,provenance:je(N)},pdbx_chem_comp_identifier:{comp_id:N,identifier:N,type:je(N),program:N,program_version:N},pdbx_unobs_or_zero_occ_residues:{id:ee,polymer_flag:je(Pt),occupancy_flag:je(ee),PDB_model_num:ee,auth_asym_id:N,auth_comp_id:N,auth_seq_id:ee,PDB_ins_code:N,label_asym_id:N,label_comp_id:N,label_seq_id:ee},pdbx_struct_mod_residue:{id:ee,auth_asym_id:N,auth_comp_id:N,auth_seq_id:ee,PDB_ins_code:N,label_asym_id:N,label_comp_id:N,label_seq_id:ee,parent_comp_id:N,details:N},pdbx_struct_oper_list:{id:N,type:je(N),name:N,symmetry_operation:N,matrix:Hr(3,3),vector:qs(3)},pdbx_struct_assembly:{method_details:N,oligomeric_details:N,oligomeric_count:ee,details:N,id:N},pdbx_struct_assembly_gen:{asym_id_list:mi(",",e=>e),assembly_id:N,oper_expression:N},pdbx_reference_entity_list:{prd_id:N,ref_entity_id:N,type:je(Pt),details:N,component_id:ee},pdbx_reference_entity_link:{link_id:ee,prd_id:N,details:N,ref_entity_id_1:N,ref_entity_id_2:N,entity_seq_num_1:ee,entity_seq_num_2:ee,comp_id_1:N,comp_id_2:N,atom_id_1:N,atom_id_2:N,value_order:je(Pt),component_1:ee,component_2:ee,link_class:je(N)},pdbx_reference_entity_poly_link:{link_id:ee,prd_id:N,ref_entity_id:N,component_id:ee,entity_seq_num_1:ee,entity_seq_num_2:ee,comp_id_1:N,comp_id_2:N,atom_id_1:N,atom_id_2:N,value_order:je(Pt)},pdbx_molecule:{prd_id:N,instance_id:ee,asym_id:N},pdbx_molecule_features:{prd_id:N,class:je(Pt),type:je(Pt),name:N,details:N},entity_src_nat:{entity_id:N,pdbx_organism_scientific:N,pdbx_plasmid_name:N,pdbx_src_id:ee,pdbx_beg_seq_num:ee,pdbx_end_seq_num:ee},entity_src_gen:{entity_id:N,pdbx_gene_src_gene:mi(",",e=>e),pdbx_gene_src_scientific_name:N,plasmid_name:N,pdbx_src_id:ee,pdbx_beg_seq_num:ee,pdbx_end_seq_num:ee},pdbx_entity_src_syn:{organism_scientific:N,entity_id:N,pdbx_src_id:ee,pdbx_beg_seq_num:ee,pdbx_end_seq_num:ee},pdbx_entity_branch_descriptor:{entity_id:N,descriptor:N,type:je(Pt),program:N,program_version:N,ordinal:ee},pdbx_entity_instance_feature:{details:N,feature_type:je(N),auth_asym_id:N,asym_id:N,auth_seq_num:N,seq_num:ee,comp_id:N,auth_comp_id:N,ordinal:ee},pdbx_entity_branch_list:{entity_id:N,hetero:je(Pt),comp_id:N,num:ee},pdbx_entity_branch_link:{link_id:ee,details:N,entity_id:N,entity_branch_list_num_1:ee,entity_branch_list_num_2:ee,comp_id_1:N,comp_id_2:N,atom_id_1:N,leaving_atom_id_1:N,atom_stereo_config_1:je(Pt),atom_id_2:N,leaving_atom_id_2:N,atom_stereo_config_2:je(Pt),value_order:je(Pt)},pdbx_entity_branch:{entity_id:N,type:je(N)},pdbx_branch_scheme:{entity_id:N,hetero:je(Pt),asym_id:N,mon_id:N,num:ee,pdb_asym_id:N,pdb_seq_num:N,pdb_mon_id:N,auth_asym_id:N,auth_seq_num:N,auth_mon_id:N},pdbx_chem_comp_related:{comp_id:N,related_comp_id:N,relationship_type:je(N),details:N},ihm_starting_model_details:{starting_model_id:N,entity_id:N,entity_description:N,asym_id:N,entity_poly_segment_id:ee,starting_model_source:je(N),starting_model_auth_asym_id:N,starting_model_sequence_offset:ee,dataset_list_id:ee},ihm_starting_comparative_models:{id:ee,starting_model_id:N,starting_model_auth_asym_id:N,starting_model_seq_id_begin:ee,starting_model_seq_id_end:ee,template_auth_asym_id:N,template_seq_id_begin:ee,template_seq_id_end:ee,template_sequence_identity:ct,template_sequence_identity_denominator:je(ee),template_dataset_list_id:ee,alignment_file_id:ee},ihm_starting_model_seq_dif:{id:ee,entity_id:N,asym_id:N,seq_id:ee,comp_id:N,starting_model_id:N,db_asym_id:N,db_seq_id:ee,db_comp_id:N,details:N},ihm_model_representation:{id:ee,name:N,details:N},ihm_model_representation_details:{id:ee,representation_id:ee,entity_poly_segment_id:ee,entity_id:N,entity_description:N,entity_asym_id:N,model_object_primitive:je(N),starting_model_id:N,model_mode:je(N),model_granularity:je(N),model_object_count:ee},ihm_struct_assembly_details:{id:ee,assembly_id:ee,parent_assembly_id:ee,entity_description:N,entity_id:N,asym_id:N,entity_poly_segment_id:ee},ihm_struct_assembly:{id:ee,name:N,description:N},ihm_modeling_protocol:{id:ee,num_steps:ee,protocol_name:N},ihm_modeling_protocol_details:{id:ee,protocol_id:ee,step_id:ee,struct_assembly_id:ee,dataset_group_id:ee,struct_assembly_description:N,step_name:N,step_method:N,num_models_begin:ee,num_models_end:ee,multi_scale_flag:je(Pt),multi_state_flag:je(Pt),ordered_flag:je(Pt),script_file_id:ee,software_id:ee},ihm_multi_state_modeling:{state_id:ee,state_group_id:ee,population_fraction:ct,population_fraction_sd:ct,state_type:N,state_name:N,experiment_type:je(N),details:N},ihm_modeling_post_process:{id:ee,protocol_id:ee,analysis_id:ee,step_id:ee,type:je(N),feature:je(N),num_models_begin:ee,num_models_end:ee},ihm_ensemble_info:{ensemble_id:ee,ensemble_name:N,post_process_id:ee,model_group_id:ee,ensemble_clustering_method:je(N),ensemble_clustering_feature:je(N),num_ensemble_models:ee,num_ensemble_models_deposited:ee,ensemble_precision_value:ct,ensemble_file_id:ee},ihm_model_list:{model_id:ee,model_name:N,assembly_id:ee,protocol_id:ee,representation_id:ee},ihm_model_group:{id:ee,name:N,details:N},ihm_model_group_link:{model_id:ee,group_id:ee},ihm_model_representative:{id:ee,model_group_id:ee,model_id:ee,selection_criteria:je(N)},ihm_dataset_list:{id:ee,data_type:je(N),database_hosted:je(Pt)},ihm_dataset_group:{id:ee,name:N,application:je(N),details:N},ihm_dataset_group_link:{dataset_list_id:ee,group_id:ee},ihm_related_datasets:{dataset_list_id_derived:ee,dataset_list_id_primary:ee},ihm_dataset_related_db_reference:{id:ee,dataset_list_id:ee,db_name:je(N),accession_code:N,version:N,details:N},ihm_external_reference_info:{reference_id:ee,reference_provider:N,reference_type:je(N),reference:N,refers_to:je(N),associated_url:N},ihm_external_files:{id:ee,reference_id:ee,file_path:N,content_type:je(N),file_size_bytes:ct,details:N},ihm_dataset_external_reference:{id:ee,dataset_list_id:ee,file_id:ee},ihm_localization_density_files:{id:ee,file_id:ee,ensemble_id:ee,entity_id:N,entity_poly_segment_id:ee,asym_id:N},ihm_predicted_contact_restraint:{id:ee,group_id:ee,entity_id_1:N,entity_id_2:N,asym_id_1:N,asym_id_2:N,comp_id_1:N,comp_id_2:N,seq_id_1:ee,seq_id_2:ee,rep_atom_1:je(N),rep_atom_2:je(N),distance_lower_limit:ct,distance_upper_limit:ct,probability:ct,restraint_type:je(N),model_granularity:je(N),dataset_list_id:ee,software_id:ee},ihm_cross_link_list:{id:ee,group_id:ee,entity_description_1:N,entity_description_2:N,entity_id_1:N,entity_id_2:N,comp_id_1:N,comp_id_2:N,seq_id_1:ee,seq_id_2:ee,linker_type:je(N),dataset_list_id:ee},ihm_cross_link_restraint:{id:ee,group_id:ee,entity_id_1:N,entity_id_2:N,asym_id_1:N,asym_id_2:N,comp_id_1:N,comp_id_2:N,seq_id_1:ee,seq_id_2:ee,atom_id_1:N,atom_id_2:N,restraint_type:je(N),conditional_crosslink_flag:je(N),model_granularity:je(N),distance_threshold:ct,psi:ct,sigma_1:ct,sigma_2:ct},ihm_cross_link_result_parameters:{id:ee,restraint_id:ee,model_id:ee,psi:ct,sigma_1:ct,sigma_2:ct},ihm_2dem_class_average_restraint:{id:ee,dataset_list_id:ee,number_raw_micrographs:ee,pixel_size_width:ct,pixel_size_height:ct,image_resolution:ct,image_segment_flag:je(Pt),number_of_projections:ee,struct_assembly_id:ee,details:N},ihm_2dem_class_average_fitting:{id:ee,restraint_id:ee,model_id:ee,cross_correlation_coefficient:ct,rot_matrix:Hr(3,3),tr_vector:qs(3)},ihm_3dem_restraint:{id:ee,dataset_list_id:ee,model_id:ee,struct_assembly_id:ee,fitting_method:N,number_of_gaussians:ee,cross_correlation_coefficient:ct},ihm_sas_restraint:{id:ee,dataset_list_id:ee,model_id:ee,struct_assembly_id:ee,profile_segment_flag:je(Pt),fitting_atom_type:N,fitting_method:N,fitting_state:je(N),radius_of_gyration:ct,chi_value:ct,details:N},ihm_starting_model_coord:{ordinal_id:ee,starting_model_id:N,group_PDB:je(N),id:ee,type_symbol:N,entity_id:N,atom_id:N,comp_id:N,seq_id:ee,asym_id:N,Cartn_x:ct,Cartn_y:ct,Cartn_z:ct,B_iso_or_equiv:ct},ihm_sphere_obj_site:{id:ee,entity_id:N,seq_id_begin:ee,seq_id_end:ee,asym_id:N,Cartn_x:ct,Cartn_y:ct,Cartn_z:ct,object_radius:ct,rmsf:ct,model_id:ee},ihm_gaussian_obj_site:{id:ee,entity_id:N,seq_id_begin:ee,seq_id_end:ee,asym_id:N,mean_Cartn_x:ct,mean_Cartn_y:ct,mean_Cartn_z:ct,weight:ct,covariance_matrix:Hr(3,3),model_id:ee},ihm_gaussian_obj_ensemble:{id:ee,entity_id:N,seq_id_begin:ee,seq_id_end:ee,asym_id:N,mean_Cartn_x:ct,mean_Cartn_y:ct,mean_Cartn_z:ct,weight:ct,covariance_matrix:Hr(3,3),ensemble_id:ee},ihm_feature_list:{feature_id:ee,feature_type:je(N),entity_type:je(N)},ihm_poly_residue_feature:{ordinal_id:ee,feature_id:ee,entity_id:N,asym_id:N,comp_id_begin:N,comp_id_end:N,seq_id_begin:ee,seq_id_end:ee},ihm_derived_distance_restraint:{id:ee,group_id:ee,feature_id_1:ee,feature_id_2:ee,group_conditionality:je(N),random_exclusion_fraction:ct,distance_upper_limit:ct,restraint_type:je(N),dataset_list_id:ee},ma_model_list:{ordinal_id:ee,model_id:ee,model_group_id:ee,model_name:N,model_group_name:N,model_type:je(N),data_id:ee},ma_target_entity:{entity_id:N,data_id:ee,origin:je(N)},ma_target_entity_instance:{asym_id:N,entity_id:N,details:N},ma_target_ref_db_details:{target_entity_id:N,db_name:je(N),db_code:N,db_accession:N,seq_db_isoform:N,seq_db_align_begin:N,seq_db_align_end:N,ncbi_taxonomy_id:N,organism_scientific:N},ma_data:{id:ee,content_type:je(N),content_type_other_details:N,name:N},ma_software_group:{ordinal_id:ee,group_id:ee,software_id:ee},ma_qa_metric:{id:ee,name:N,type:je(N),mode:je(N),software_group_id:ee},ma_qa_metric_global:{ordinal_id:ee,model_id:ee,metric_id:ee,metric_value:ct},ma_qa_metric_local:{ordinal_id:ee,model_id:ee,label_asym_id:N,label_seq_id:ee,label_comp_id:N,metric_id:ee,metric_value:ct},ma_qa_metric_local_pairwise:{ordinal_id:ee,model_id:ee,label_asym_id_1:N,label_seq_id_1:ee,label_comp_id_1:N,label_asym_id_2:N,label_seq_id_2:ee,label_comp_id_2:N,metric_id:ee,metric_value:ct}};var hi=ye.Schema;const Rt=hi.str,dS=hi.float,T_=hi.List,mr=hi.lstr,Ln=hi.Aliased,Po=hi.int,Ki=hi.coord,fS={chem_comp:{formula:Rt,formula_weight:dS,id:Rt,mon_nstd_parent_comp_id:T_(",",e=>e),name:Rt,one_letter_code:Rt,three_letter_code:Rt,type:Ln(mr),pdbx_synonyms:T_(";",e=>e),pdbx_type:Rt,pdbx_ambiguous_flag:Rt,pdbx_replaced_by:Rt,pdbx_replaces:Rt,pdbx_formal_charge:Po,pdbx_model_coordinates_details:Rt,pdbx_model_coordinates_db_code:Rt,pdbx_ideal_coordinates_details:Rt,pdbx_ideal_coordinates_missing_flag:Ln(mr),pdbx_model_coordinates_missing_flag:Ln(mr),pdbx_initial_date:Rt,pdbx_modified_date:Rt,pdbx_release_status:Ln(Rt),pdbx_processing_site:Ln(Rt)},chem_comp_atom:{alt_atom_id:Rt,atom_id:Rt,charge:Po,model_Cartn_x:Ki,model_Cartn_y:Ki,model_Cartn_z:Ki,comp_id:Rt,type_symbol:Rt,pdbx_align:Po,pdbx_ordinal:Po,pdbx_model_Cartn_x_ideal:Ki,pdbx_model_Cartn_y_ideal:Ki,pdbx_model_Cartn_z_ideal:Ki,pdbx_stereo_config:Ln(mr),pdbx_aromatic_flag:Ln(mr),pdbx_leaving_atom_flag:Ln(mr)},chem_comp_bond:{atom_id_1:Rt,atom_id_2:Rt,comp_id:Rt,value_order:Ln(mr),pdbx_ordinal:Po,pdbx_stereo_config:Ln(mr),pdbx_aromatic_flag:Ln(mr)},pdbx_chem_comp_descriptor:{comp_id:Rt,descriptor:Rt,type:Ln(mr),program:Rt,program_version:Rt},pdbx_chem_comp_identifier:{comp_id:Rt,identifier:Rt,type:Ln(Rt),program:Rt,program_version:Rt}};var Eo=ye.Schema;const at=Eo.str,mS=Eo.float,Er=Eo.lstr,wn=Eo.Aliased,zn=Eo.int,hS={pdbx_reference_molecule:{prd_id:at,formula_weight:mS,formula:at,type:wn(Er),type_evidence_code:at,class:wn(Er),class_evidence_code:at,name:at,represent_as:wn(Er),chem_comp_id:at,compound_details:at,description:at,representative_PDB_id_code:at,release_status:wn(Er),replaces:at,replaced_by:at},pdbx_reference_entity_list:{prd_id:at,ref_entity_id:at,type:wn(Er),details:at,component_id:zn},pdbx_reference_entity_nonpoly:{prd_id:at,ref_entity_id:at,name:at,chem_comp_id:at},pdbx_reference_entity_link:{link_id:zn,prd_id:at,details:at,ref_entity_id_1:at,ref_entity_id_2:at,entity_seq_num_1:zn,entity_seq_num_2:zn,comp_id_1:at,comp_id_2:at,atom_id_1:at,atom_id_2:at,value_order:wn(Er),component_1:zn,component_2:zn,link_class:wn(at)},pdbx_reference_entity_poly_link:{link_id:zn,prd_id:at,ref_entity_id:at,component_id:zn,entity_seq_num_1:zn,entity_seq_num_2:zn,comp_id_1:at,comp_id_2:at,atom_id_1:at,atom_id_2:at,value_order:wn(Er)},pdbx_reference_entity_poly:{prd_id:at,ref_entity_id:at,type:wn(at),db_code:at,db_name:at},pdbx_reference_entity_poly_seq:{prd_id:at,ref_entity_id:at,mon_id:at,parent_mon_id:at,num:zn,observed:wn(Er),hetero:wn(Er)},pdbx_reference_entity_sequence:{prd_id:at,ref_entity_id:at,type:wn(at),NRP_flag:wn(at),one_letter_codes:at},pdbx_reference_entity_src_nat:{prd_id:at,ref_entity_id:at,ordinal:zn,organism_scientific:at,taxid:at,db_code:at,db_name:at},pdbx_prd_audit:{prd_id:at,date:at,processing_site:wn(at),action_type:wn(at)}};var N_=ye.Schema;const Jt=N_.str,pS=N_.float,_S={datablock:{id:Jt,description:Jt},dictionary:{title:Jt,datablock_id:Jt,version:Jt},dictionary_history:{version:Jt,update:Jt,revision:Jt},sub_category:{id:Jt,description:Jt},category_group_list:{id:Jt,parent_id:Jt,description:Jt},item_type_list:{code:Jt,primitive_code:Jt,construct:Jt,detail:Jt},item_units_list:{code:Jt,detail:Jt},item_units_conversion:{from_code:Jt,to_code:Jt,operator:Jt,factor:pS}};var Bo=ye.Schema;const Ro=Bo.str,Us=Bo.int,Br=Bo.float,Fs=Bo.Aliased,jr=Bo.Vector;Fs(Ro),Fs(Ro),Fs(Ro),Fs(Ro),jr(3),jr(3);const O_={volume_data_3d_info:{name:Ro,axis_order:jr(3,Us),origin:jr(3),dimensions:jr(3),sample_rate:Us,sample_count:jr(3,Us),spacegroup_number:Us,spacegroup_cell_size:jr(3),spacegroup_cell_angles:jr(3),mean_source:Br,mean_sampled:Br,sigma_source:Br,sigma_sampled:Br,min_source:Br,min_sampled:Br,max_source:Br,max_sampled:Br},volume_data_3d:{values:Br}};var Ls=ye.Schema;const $t=Ls.float,Ql=Ls.int,Tt=Ls.str,yS=Ls.Matrix,gS={cell:{angle_alpha:$t,angle_beta:$t,angle_gamma:$t,formula_units_z:Ql,length_a:$t,length_b:$t,length_c:$t,volume:$t},chemical:{melting_point:$t,name_common:Tt,name_systematic:Tt},chemical_formula:{moiety:Tt,sum:Tt,weight:$t},space_group:{crystal_system:Tt,it_number:Ql,"name_h-m_full":Tt},space_group_symop:{operation_xyz:Tt},geom_bond:{atom_site_label_1:Tt,atom_site_label_2:Tt,distance:$t,publ_flag:Tt,site_symmetry_1:Tt,site_symmetry_2:Tt,valence:$t},audit:{block_doi:Tt},database_code:{cod:Tt,csd:Tt,depnum_ccdc_archive:Tt,depnum_ccdc_fiz:Tt,icsd:Tt,mdf:Tt,nbs:Tt},atom_site:{adp_type:Tt,calc_flag:Tt,disorder_assembly:Tt,disorder_group:Tt,fract_x:$t,fract_y:$t,fract_z:$t,label:Tt,occupancy:$t,refinement_flags:Tt,site_symmetry_multiplicity:Ql,type_symbol:Tt,u_iso_or_equiv:$t},atom_site_aniso:{label:Tt,u_11:$t,u:yS(3,3),u_12:$t,u_13:$t,u_22:$t,u_23:$t,u_33:$t},atom_type:{description:Tt,symbol:Tt},atom_type_scat:{dispersion_imag:$t,dispersion_real:$t,source:Tt}},bS={"cell.formula_units_z":["cell_formula_units_Z"],"space_group.it_number":["space_group_IT_number","symmetry_Int_Tables_number"],"space_group.name_h-m_full":["symmetry_space_group_name_H-M"],"space_group_symop.operation_xyz":["symmetry_equiv_pos_as_xyz"],"geom_bond.atom_site_label_1":["geom_bond_atom_site_id_1"],"geom_bond.atom_site_label_2":["geom_bond_atom_site_id_2"],"geom_bond.distance":["geom_bond_dist"],"audit.block_doi":["audit_block_DOI"],"database_code.cod":["database_code_COD"],"database_code.csd":["database_code_CSD"],"database_code.depnum_ccdc_archive":["database_code_depnum_CCDC_archive"],"database_code.depnum_ccdc_fiz":["database_code_depnum_CCDC_fiz"],"database_code.icsd":["database_code_ICSD"],"database_code.mdf":["database_code_MDF"],"database_code.nbs":["database_code_NBS"],"atom_site.adp_type":["atom_site_ADP_type","atom_site_thermal_displace_type"],"atom_site.label":["atom_site_id"],"atom_site.site_symmetry_multiplicity":["atom_site_symmetry_multiplicity"],"atom_site.u_iso_or_equiv":["atom_site_U_iso_or_equiv"],"atom_site_aniso.label":["atom_site_anisotrop_id"],"atom_site_aniso.u_11":["atom_site_aniso_U_11","atom_site_anisotrop_U_11"],"atom_site_aniso.u_12":["atom_site_aniso_U_12","atom_site_anisotrop_U_12"],"atom_site_aniso.u_13":["atom_site_aniso_U_13","atom_site_anisotrop_U_13"],"atom_site_aniso.u_22":["atom_site_aniso_U_22","atom_site_anisotrop_U_22"],"atom_site_aniso.u_23":["atom_site_aniso_U_23","atom_site_anisotrop_U_23"],"atom_site_aniso.u_33":["atom_site_aniso_U_33","atom_site_anisotrop_U_33"]};var vS=ye.Schema;const Jl=vS.int,AS={volume_data_3d_info:O_.volume_data_3d_info,segmentation_data_table:{set_id:Jl,segment_id:Jl},segmentation_data_3d:{values:Jl}},ed={parse:e=>$x.is(e)?S_(e):R_(e),parseText:S_,parseBinary:R_,toDatabaseCollection:tS,toDatabase:Fn,schema:{mmCIF:e=>Fn(mt,e),CCD:e=>Fn(fS,e),BIRD:e=>Fn(hS,e),dic:e=>Fn(_S,e),cifCore:e=>Fn(gS,e,bS),densityServer:e=>Fn(O_,e),segmentation:e=>Fn(AS,e)}};function xS(e,t,n=!1){return rn.create("Parse PDB",async r=>Lr.success({lines:await Qt.readAllLinesAsync(e,r),id:t,isPdbqt:n}))}function Vr(e){return e}(function(e){function t(n){return n.__key||(n.__key=_n.create22()),n.__key}e.getUUID=t})(Vr||(Vr={}));class Gs{constructor(){this._list=[],this._set=new Set,this._refs=new Map,this._assets=new Map}get all(){return this._list}add(t){this._set.has(t)||(this._list.push(t),this._set.add(t))}reference(t,n){let r=this._refs.get(t)||0;r+=n?1:-1,this._refs.set(t,Math.max(r,0))}hasReference(t){return(this._refs.get(t)||0)>0}has(t){return this._set.has(t)}assets(t,n){const r=this._assets.get(t);if(r)for(const i of r)i.dispose();n?this._assets.set(t,n):this._assets.delete(t)}dispose(){this._assets.forEach(t=>{for(const n of t)n.dispose()})}}const SS=Object.prototype.hasOwnProperty;function td(e){if(e===null||typeof e!="object")return e;if(e instanceof Array){const t=[];for(let n=0,r=e.length;n<r;n++)t[n]=td(e[n]);return t}if(typeof e=="object"&&!("prototype"in e)){const t={};for(const n in e)SS.call(e,n)&&(t[n]=td(e[n]));return t}throw new Error(`Can't clone, type "${typeof e}" unsupported`)}function Kn(e){let t=1/0,n=-1/0;for(let r=0,i=e.length;r<i;++r)e[r]<t&&(t=e[r]),e[r]>n&&(n=e[r]);return[t,n]}function M_(e,t){for(let n=0,r=e.length;n<r;++n)e[n]=n;return e}function Do(e,t){return e.indexOf(t)>=0?!1:(e.push(t),!0)}function CS(e,t){const n=e.indexOf(t);if(n<0)return!1;for(let r=n,i=e.length-1;r<i;r++)e[r]=e[r+1];return e.pop(),!0}function IS(e,t){if(!e||e.length===0)return!t||t.length===0;if(!t)return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function wS(e){for(let t=0,n=e.length;t<n;t++)if(e[t]!==t)return!1;return!0}function PS(e,t){const n=[],r=[],i=[];e.x.length&&(n.push(...Kn(e.x)),r.push(...Kn(e.y)),i.push(...Kn(e.z))),t&&(t.spheres.x.length&&(n.push(...Kn(t.spheres.x)),r.push(...Kn(t.spheres.y)),i.push(...Kn(t.spheres.z))),t.gaussians.x.length&&(n.push(...Kn(t.gaussians.x)),r.push(...Kn(t.gaussians.y)),i.push(...Kn(t.gaussians.z))));const[o,s]=Kn(n),[c,a]=Kn(r),[u,l]=Kn(i),f=o+(s-o)/2,d=c+(a-c)/2,m=u+(l-u)/2;return O.create(f,d,m)}function ES(e){const t=new Set,n=new Set;return e.properties.structAsymMap.forEach(({auth_id:r},i)=>{t.add(r),n.add(i)}),{auth:t.size,label:n.size}}var nd;(function(e){function t(a,u,l){const f=!!a[0].cell,d=!!a[0].velocities,m=!!a[0].forces;return{id:_n.create22(),frames:a,hasCell:f,hasVelocities:d,hasForces:m,deltaTime:u,timeOffset:l}}e.create=t;function n(a,u,l){var f,d;let{x:m,y:h,z:p}=a;return a.xyzOrdering.frozen?l?a.xyzOrdering.isIdentity?(m=s(m,l),h=s(h,l),p=s(p,l)):Nl(a.xyzOrdering.index,l)||(m=o(m,a.xyzOrdering.index,l),h=o(h,a.xyzOrdering.index,l),p=o(p,a.xyzOrdering.index,l)):a.xyzOrdering.isIdentity||(m=c(m,a.xyzOrdering.index),h=c(h,a.xyzOrdering.index),p=c(p,a.xyzOrdering.index)):l&&(a.xyzOrdering.isIdentity?(a.xyzOrdering.isIdentity=!1,a.xyzOrdering.index=l,i(m,l),i(h,l),i(p,l)):Nl(a.xyzOrdering.index,l)||(m=o(m,a.xyzOrdering.index,l),h=o(h,a.xyzOrdering.index,l),p=o(p,a.xyzOrdering.index,l))),a.xyzOrdering.frozen=!0,{id:_n.create22(),atomId:u.atomId,occupancy:(f=u.occupancy)!==null&&f!==void 0?f:ye.ofConst(1,a.elementCount,ye.Schema.int),B_iso_or_equiv:(d=u.B_iso_or_equiv)!==null&&d!==void 0?d:ye.ofConst(0,a.elementCount,ye.Schema.float),xyzDefined:!0,x:m,y:h,z:p}}e.getAtomicConformation=n;const r=[.123];function i(a,u){const l=r;for(let f=0,d=a.length;f<d;f++)l[f]=a[u[f]];for(let f=0,d=a.length;f<d;f++)a[f]=l[f]}function o(a,u,l){const f=new Float32Array(a.length);for(let d=0,m=a.length;d<m;d++)f[d]=a[u[l[d]]];return f}function s(a,u){const l=new Float32Array(a.length);for(let f=0,d=a.length;f<d;f++)l[f]=a[u[f]];return l}function c(a,u){const l=new Float32Array(a.length);for(let f=0,d=a.length;f<d;f++)l[u[f]]=a[f];return l}})(nd||(nd={}));var en;(function(e){e.Zero=0;const{_int32:t,_float64:n,_int32_1:r,_float64_1:i}=function(){const p=new ArrayBuffer(8),_=new ArrayBuffer(8);return{_int32:new Int32Array(p),_float64:new Float64Array(p),_int32_1:new Int32Array(_),_float64_1:new Float64Array(_)}}();function o(p){return typeof p=="number"}e.is=o;function s(p,_){return t[0]=p,t[1]=_,n[0]}e.create=s;function c(p){return n[0]=p,t[1]-t[0]}e.diff=c;function a(p){return n[0]=p,t[0]}e.fst=a;function u(p){return n[0]=p,t[1]}e.snd=u;function l(p,_){return n[0]=p,i[0]=_,t[0]===r[0]&&t[1]===r[1]}e.areEqual=l;function f(p,_){n[0]=p,i[0]=_;const y=t[0]-r[0];return y!==0?y:t[1]-r[1]}e.compare=f;function d(p,_,y){n[0]=p[_],i[0]=p[y];const v=t[0]-r[0];return v!==0?v:t[1]-r[1]}e.compareInArray=d;function m(p){return n[0]=p,ks(t[0],t[1])}e.hashCode=m;function h(p){return n[0]=p,`(${t[0]}, ${t[1]})`}e.toString=h})(en||(en={}));const q_=en.Zero;function U_(e,t){return t<e?en.create(e,e):en.create(e,t+1)}function rd(e,t){return t<=e?en.create(e,e):en.create(e,t)}function BS(e){return e<0?en.create(0,0):en.create(0,e)}const RS=en.is,Rr=en.fst,zr=en.snd,Hs=en.fst;function js(e){return en.snd(e)-1}const pi=en.diff,DS=en.hashCode,kS=en.toString;function TS(e,t){return en.fst(e)<=t&&t<en.snd(e)}function NS(e,t){const n=Rr(e);return t>=n&&t<zr(e)?t-n:-1}function OS(e,t){return en.fst(e)+t}const MS=en.areEqual;function F_(e,t){const n=pi(e),r=pi(t);return n===0&&r===0?!0:n>0&&r>0&&js(e)>=Hs(t)&&Hs(e)<=js(t)}function qS(e,t){return pi(e)?pi(t)?Rr(e)<=Rr(t)&&zr(e)>=zr(t):!0:pi(t)===0}function id(e,t){const n=Rr(e);if(t<=n)return 0;const r=zr(e);return t>=r?r-n:t-n}function US(e,t,n){const r=Rr(n),i=Rr(e);if(t<=r+i)return r;const o=zr(n);return t>=o+i?o:t-i}function L_(e,t,n){return rd(id(e,t),id(e,n+1))}function FS(e,t){return F_(e,t)?rd(Math.max(Rr(e),Rr(t)),Math.min(zr(e),zr(t))):q_}function LS(e,t){return pi(L_(e,Hs(t),js(t)))}var Ae;(function(e){e.Empty=q_,e.ofSingleton=t=>U_(t,t),e.ofRange=U_,e.ofBounds=rd,e.ofLength=BS,e.is=RS,e.has=TS,e.indexOf=NS,e.getAt=OS,e.start=Rr,e.end=zr,e.min=Hs,e.max=js,e.size=pi,e.hashCode=DS,e.toString=kS,e.areEqual=MS,e.areIntersecting=F_,e.isSubInterval=qS,e.findPredecessorIndex=id,e.findPredecessorIndexInInterval=US,e.findRange=L_,e.intersectionSize=LS,e.intersect=FS})(Ae||(Ae={}));const ko=[];function GS(e){return[e]}function HS(e){return e}function jS(e){return Jn(e),e}function G_(e,t){if(t<e)return[];const n=new Int32Array(t-e+1);for(let r=e;r<=t;r++)n[r-e]=r;return n}function VS(e){return e&&(Array.isArray(e)||!!e.buffer)}function H_(e){return e[e.length-1]-e[0]+1===e.length}function od(e){return e[0]}function sd(e){return e[e.length-1]+1}function zS(e){return e[0]}function KS(e){return e[e.length-1]}function j_(e){return e.length}function $S(e){const t=e.length;return t?t>2?qx(t,e[0],e[t-1],e[t>>1]):Mx(t,e[0],e[t-1]):0}function WS(e){const t=e.length;return t>5?`[${e[0]}, ${e[1]}, ..., ${e[t-1]}], length ${t}`:`[${e.join(", ")}]`}function V_(e,t){const n=e.length;return n===0?-1:e[0]<=t&&t<=e[n-1]?$_(e,t,0,n):-1}function YS(e,t,n){return z_(e,t,Ae.start(n),Ae.end(n))}function z_(e,t,n,r){return e.length===0||r<=n?-1:e[n]<=t&&t<=e[r-1]?$_(e,t,n,r):-1}function ZS(e,t){return V_(e,t)>=0}function K_(e,t){if(e===t)return!0;let n=e.length;if(n!==t.length||e[0]!==t[0]||e[n-1]!==t[n-1])return!1;if(H_(e))return!0;n--;for(let r=1;r<n;r++)if(e[r]!==t[r])return!1;return!0}function _i(e,t){return W_(e,t,0,e.length)}function XS(e,t,n){return W_(e,t,Ae.start(n),Ae.end(n))}function QS(e,t,n){return Ae.ofBounds(_i(e,t),_i(e,n+1))}function $_(e,t,n,r){let i=n,o=r-1;for(;i<=o;){if(i+11>o){for(let a=i;a<=o;a++)if(t===e[a])return a;return-1}const s=i+o>>1,c=e[s];if(t<c)o=s-1;else if(t>c)i=s+1;else return s}return-1}function W_(e,t,n,r){if(n===r||e[n]>=t)return n;if(e[r-1]<t)return r;let i=n,o=r;for(;o-i>4;){const s=i+o>>1;e[s]>=t?o=s:i=s+1}for(let s=i;s<o;s++)if(e[s]>=t)return s;return o}function JS(e,t){if(e===t)return!0;let{startI:n,startJ:r,endI:i,endJ:o}=yi(e,t);for(;n<i&&r<o;){const s=e[n],c=t[r];if(s<c)n++;else if(s>c)r++;else return!0}return!1}function e5(e,t){if(e===t)return!0;const n=t.length;let{startI:r,startJ:i,endI:o,endJ:s}=yi(e,t);if(s-i<n||o-r<n)return!1;let c=0;for(;r<o&&i<s;){const a=e[r],u=t[i];a<u?r++:a>u?i++:(r++,i++,c++)}return c===n}function Y_(e,t){if(e===t)return e;const n=e.length,r=t.length;if(n===0)return t;if(r===0)return e;if(e[0]>t[0])return Y_(t,e);const{startI:i,startJ:o,endI:s,endJ:c}=yi(e,t),a=ad(e,t,i,o,s,c);if(a===n&&a===r||a===r)return e;if(a===n)return t;const u=new Int32Array(n+r-a);let l=0,f=0,d=0;for(l=0;l<i;l++)u[d++]=e[l];for(;f<c&&e[i]>t[f];)u[d++]=t[f++];for(;l<s&&f<c;){const m=e[l],h=t[f];m<h?(u[d++]=m,l++):m>h?(u[d++]=h,f++):(u[d++]=m,l++,f++)}for(;l<s;l++)u[d++]=e[l];for(;f<c;f++)u[d++]=t[f];for(;l<n;l++)u[d++]=e[l];for(;f<r;f++)u[d++]=t[f];return u}function t5(e,t){if(e===t)return j_(e);const{startI:n,startJ:r,endI:i,endJ:o}=yi(e,t);return ad(e,t,n,r,i,o)}function ad(e,t,n,r,i,o){let s=n,c=r,a=0;for(;s<i&&c<o;){const u=e[s],l=t[c];u<l?s++:u>l?c++:(s++,c++,a++)}return a}function n5(e,t){if(e===t)return e;const{startI:n,startJ:r,endI:i,endJ:o}=yi(e,t),s=ad(e,t,n,r,i,o),c=e.length,a=t.length;if(!s)return ko;if(s===c&&s===a||s===a)return t;if(s===c)return e;const u=new Int32Array(s);let l=0,f=n,d=r;for(;f<i&&d<o;){const m=e[f],h=t[d];m<h?f++:(m>h||(u[l++]=m,f++),d++)}return u}function r5(e,t){if(e===t)return ko;const n=e.length,{startI:r,startJ:i,endI:o,endJ:s}=yi(e,t);let c=r,a=i,u=0;for(;c<o&&a<s;){const d=e[c],m=t[a];d<m?c++:d>m?a++:(c++,a++,u++)}if(!u)return e;if(u>=n)return ko;const l=new Int32Array(n-u);let f=0;for(let d=0;d<r;d++)l[f++]=e[d];for(c=r,a=i;c<o&&a<s;){const d=e[c],m=t[a];d<m?(l[f++]=d,c++):(d>m||c++,a++)}for(;c<n;c++)l[f++]=e[c];return l}function i5(e){if(e.length<2)return e;let t=1;for(let i=0,o=e.length-1;i<o;i++)e[i]!==e[i+1]&&t++;if(t===e.length)return e;const n=new Int32Array(t);let r=0;for(let i=0,o=e.length-1;i<o;i++)e[i]!==e[i+1]&&(n[r++]=e[i]);return n[r]=e[e.length-1],n}function o5(e,t){if(K_(e,t))return zl(0,e.length-1);const{startI:n,startJ:r,endI:i,endJ:o}=yi(e,t);let s=n,c=r,a=0;for(;s<i&&c<o;){const d=e[s],m=t[c];d<m?s++:d>m?c++:(s++,c++,a++)}const u=e.length;if(!a)return ko;if(a===u)return zl(0,e.length-1);const l=new Int32Array(a);let f=0;for(s=n,c=r;s<i&&c<o;){const d=e[s],m=t[c];d<m?s++:(d>m||(l[f++]=s,s++),c++)}return l}const Dr={startI:0,startJ:0,endI:0,endJ:0};function yi(e,t){const n=e.length,r=t.length,i=n/r;return n>=128||r>=128||i<=.34||i>=2.99?(Dr.startI=_i(e,od(t)),Dr.startJ=_i(t,od(e)),Dr.endI=_i(e,sd(t)),Dr.endJ=_i(t,sd(e))):(Dr.startI=0,Dr.startJ=0,Dr.endI=n,Dr.endJ=r),Dr}var Ee;(function(e){e.Empty=ko,e.ofUnsortedArray=jS,e.ofSingleton=GS,e.ofSortedArray=HS,e.ofRange=G_,e.ofBounds=(t,n)=>G_(t,n-1),e.is=VS,e.isRange=H_,e.has=ZS,e.indexOf=V_,e.indexOfInInterval=YS,e.indexOfInRange=z_,e.start=od,e.end=sd,e.min=zS,e.max=KS,e.size=j_,e.hashCode=$S,e.toString=WS,e.areEqual=K_,e.areIntersecting=JS,e.isSubset=e5,e.union=Y_,e.intersect=n5,e.subtract=r5,e.findPredecessorIndex=_i,e.findPredecessorIndexInInterval=XS,e.findRange=QS,e.intersectionSize=t5,e.deduplicate=i5,e.indicesOf=o5})(Ee||(Ee={}));const hr=Ae.Empty,s5=Ae.ofSingleton,a5=Ae.ofRange,c5=Ae.ofBounds;function er(e){return e.length?Ee.isRange(e)?Ae.ofRange(e[0],e[e.length-1]):e:hr}function gi(e){return Ae.is(e)?Ae.size(e):Ee.size(e)}function u5(e,t){return Ae.is(e)?Ae.has(e,t):Ee.has(e,t)}function l5(e,t){return Ae.is(e)?Ae.indexOf(e,t):Ee.indexOf(e,t)}function cd(e,t){return Ae.is(e)?Ae.getAt(e,t):e[t]}function $i(e){return Ae.is(e)?Ae.min(e):Ee.min(e)}function Wi(e){return Ae.is(e)?Ae.max(e):Ee.max(e)}function d5(e){return Ae.is(e)?Ae.start(e):Ee.start(e)}function f5(e){return Ae.is(e)?Ae.end(e):Ee.end(e)}function m5(e){return Ae.is(e)?Ae.hashCode(e):Ee.hashCode(e)}function h5(e){return Ae.is(e)?Ae.toString(e):Ee.toString(e)}function p5(e,t){return Ae.is(e)?Ae.is(t)?Ae.areEqual(e,t):Z_(e,t):Ae.is(t)?Z_(t,e):Ee.areEqual(e,t)}function _5(e,t){return Ae.is(e)?Ae.is(t)?Ae.areIntersecting(e,t):X_(t,e):Ae.is(t)?X_(e,t):Ee.areIntersecting(e,t)}function y5(e,t){return Ae.is(e)?Ae.is(t)?Ae.isSubInterval(e,t):w5(e,t):Ae.is(t)?I5(e,t):Ee.isSubset(e,t)}function g5(e,t){return Ae.is(e)?Ae.findPredecessorIndex(e,t):Ee.findPredecessorIndex(e,t)}function b5(e,t,n){return Ae.is(e)?Ae.findPredecessorIndexInInterval(e,t,n):Ee.findPredecessorIndexInInterval(e,t,n)}function v5(e,t,n){return Ae.is(e)?Ae.findRange(e,t,n):Ee.findRange(e,t,n)}function A5(e,t){return Ae.is(e)?Ae.is(t)?Ae.intersectionSize(e,t):J_(t,e):Ae.is(t)?J_(e,t):Ee.intersectionSize(e,t)}function x5(e,t){return Ae.is(e)?Ae.is(t)?B5(e,t):Q_(t,e):Ae.is(t)?Q_(e,t):er(Ee.union(e,t))}function S5(e,t){return Ae.is(e)?Ae.is(t)?Ae.intersect(e,t):ey(t,e):Ae.is(t)?ey(e,t):er(Ee.intersect(e,t))}function C5(e,t){return Ae.is(e)?Ae.is(t)?R5(e,t):k5(e,t):Ae.is(t)?D5(e,t):er(Ee.subtract(e,t))}function Z_(e,t){return Ae.size(e)===Ee.size(t)&&Ae.start(e)===Ee.start(t)&&Ae.end(e)===Ee.end(t)}function X_(e,t){return e.length!==0&&Ae.size(Ee.findRange(e,Ae.min(t),Ae.max(t)))!==0}function I5(e,t){const n=Ae.min(t),r=Ae.max(t);if(r-n+1===0)return!0;const i=Ee.min(e),o=Ee.max(e);if(n<i||r>o)return!1;const s=Ee.findRange(e,n,r);return Ae.size(s)===Ae.size(t)}function w5(e,t){const n=Ae.min(e),r=Ae.max(e);if(r-n+1===0)return!1;const i=Ee.min(t),o=Ee.max(t);return i>=n&&o<=r}function P5(e,t){const n=gi(e),r=gi(t);return n===0&&r===0?!0:n>0&&r>0&&Wi(e)>=$i(t)&&$i(e)<=Wi(t)}function E5(e,t){return gi(e)?gi(t)?$i(e)<=$i(t)&&Wi(e)>=Wi(t):!0:gi(t)===0}function B5(e,t){if(Ae.areEqual(e,t))return e;const n=Ae.size(e),r=Ae.size(t);if(!r)return e;if(!n)return t;const i=Ae.min(e),o=Ae.min(t);if(P5(e,t))return Ae.ofRange(Math.min(i,o),Math.max(Ae.max(e),Ae.max(t)));let s,c,a,u;i<o?(s=n,c=i,a=r,u=o):(s=r,c=o,a=n,u=i);const l=new Int32Array(n+r);for(let f=0;f<s;f++)l[f]=f+c;for(let f=0;f<a;f++)l[f+s]=f+u;return er(l)}function Q_(e,t){const n=Ae.size(t);if(!n)return e;if(E5(t,e))return t;const r=Ae.min(t),i=Ae.max(t),o=Ee.findRange(e,r,i),s=Ae.start(o),c=Ae.end(o),a=new Int32Array(s+(e.length-c)+n);let u=0;for(let l=0;l<s;l++)a[u++]=e[l];for(let l=r;l<=i;l++)a[u++]=l;for(let l=c,f=e.length;l<f;l++)a[u++]=e[l];return er(a)}function J_(e,t){if(!Ae.size(t))return 0;const n=Ee.findRange(e,Ae.min(t),Ae.max(t));return Ae.end(n)-Ae.start(n)}function ey(e,t){if(!Ae.size(t))return hr;const n=Ee.findRange(e,Ae.min(t),Ae.max(t)),r=Ae.start(n),i=Ae.end(n),o=i-r;if(!o)return hr;if(o===e.length)return e;const s=new Int32Array(o);let c=0;for(let a=r;a<i;a++)s[c++]=e[a];return er(s)}function R5(e,t){if(Ae.areEqual(e,t))return hr;if(!Ae.areIntersecting(e,t))return e;const n=Ae.min(e),r=Ae.max(e),i=Ae.min(t),o=Ae.max(t);if(r<n||o<i)return e;if(Ae.isSubInterval(t,e))return hr;if(Ae.isSubInterval(e,t)){const s=i-n,c=r-o;if(s<=0)return Ae.ofRange(o+1,o+c);if(c<=0)return Ae.ofRange(n,n+s-1);const a=new Int32Array(s+c);let u=0;for(let l=0;l<s;l++)a[u++]=n+l;for(let l=1;l<=c;l++)a[u++]=o+l;return er(a)}return n<i?Ae.ofRange(n,i-1):Ae.ofRange(o+1,r)}function D5(e,t){const n=Ae.min(t),r=Ae.max(t);if(r<n)return e;const i=Ee.findRange(e,n,r),o=Ae.start(i),s=Ae.end(i),c=e.length-(s-o);if(c<=0)return hr;if(c===e.length)return e;const a=new Int32Array(c);let u=0;for(let l=0;l<o;l++)a[u++]=e[l];for(let l=s,f=e.length;l<f;l++)a[u++]=e[l];return er(a)}function k5(e,t){const n=Ae.min(e),r=Ae.max(e);if(r<n)return e;const i=r-n+1,o=Ee.findRange(t,n,r),s=Ae.start(o),c=Ae.end(o),a=c-s;if(a===0)return e;const u=i-a;if(u<=0)return hr;const l=new Int32Array(u),f=t.length-1,d=t[Math.min(s,f)],m=t[Math.min(c,f)];let h=0;for(let p=n;p<d;p++)l[h++]=p;for(let p=d;p<=m;p++)Ee.indexOfInInterval(t,p,o)<0&&(l[h++]=p);for(let p=m+1;p<=r;p++)l[h++]=p;return er(l)}function T5(e,t,n){if(Ae.is(e)){const r=Ae.min(e);for(let i=r,o=Ae.max(e);i<=o;i++)t(i,i-r,n)}else for(let r=0,i=e.length;r<i;r++)t(e[r],r,n);return n}function N5(e,t,n,r){if(Ae.is(e)){let i=0;for(let o=Ae.min(e),s=Ae.max(e);o<=s;o++){const c=t(o);let a=o+1;for(;a<s&&t(a)===c;)a++;o=a-1,n(c,i,r),i++}}else{let i=0;for(let o=0,s=e.length;o<s;o++){const c=t(e[o]);let a=o+1;for(;a<s&&t(e[a])===c;)a++;o=a-1,n(c,i,r),i++}}return r}function O5(e,t,n){if(t===n)return e;const r=gi(e),i=t.length,o=n.length;if(r===0||i===0||o===0)return hr;const s=Ee.findPredecessorIndex(n,t[$i(e)]),c=Ee.findPredecessorIndex(n,t[Wi(e)]+1);let a=0,u=0,l=0,f=s;for(;l<r&&f<c;){const m=t[cd(e,l)],h=n[f];m<h?l++:(m>h||(a++,l++),f++)}if(a===0)return hr;if(a===i&&a===o)return e;const d=new Int32Array(a);for(u=0,l=0,f=s;l<r&&f<c;){const m=t[cd(e,l)],h=n[f];m<h?l++:(m>h||(d[u++]=f,l++),f++)}return er(d)}var Fe;(function(e){e.Empty=hr,e.ofSingleton=s5,e.ofRange=a5,e.ofBounds=c5,e.ofSortedArray=er,e.has=u5,e.indexOf=l5,e.getAt=cd,e.min=$i,e.max=Wi,e.start=d5,e.end=f5,e.size=gi,e.hashCode=m5,e.areEqual=p5,e.areIntersecting=_5,e.isSubset=y5,e.union=x5,e.intersect=S5,e.indexedIntersect=O5,e.subtract=C5,e.findPredecessorIndex=g5,e.findPredecessorIndexInInterval=b5,e.findRange=v5,e.intersectionSize=A5;function t(c,a,u){return T5(c,a,u)}e.forEach=t;function n(c,a,u,l){return N5(c,a,u,l)}e.forEachSegment=n;function r(c){return Ae.is(c)}e.isInterval=r;function i(c){return!Ae.is(c)}e.isSortedArray=i;function o(c){const a=[];return e.forEach(c,u=>a.push(u)),a}e.toArray=o;function s(c){return h5(c)}e.toString=s})(Fe||(Fe={}));function ty(e){const t=Ee.ofSortedArray(e),n=Ee.max(t),r=new Int32Array(n);for(let i=0,o=e.length-1;i<o;i++)for(let s=e[i],c=e[i+1];s<c;s++)r[s]=i;return{offsets:t,index:r,count:e.length-1}}function M5(e,t){const n=Ae.start(t),r=new Int32Array(e.length+1);for(let i=0,o=e.length;i<o;i++)r[i]=e[i]-n;return r[e.length]=Ae.end(t)-n,ty(r)}function q5({count:e}){return e}function U5({index:e},t){return e[t]}function F5({offsets:e},t,n){const r=Fe.max(e),i=n>=r?-1:Fe.findPredecessorIndex(e,n-1);return Fe.findRange(t,Fe.getAt(e,i),Fe.getAt(e,i+1)-1)}class L5{move(){for(;this.hasNext;)if(this.updateValue()){this.value.index=this.segmentMin++,this.hasNext=this.segmentMax>=this.segmentMin&&Ae.size(this.setRange)>0;break}else this.updateSegmentRange();return this.value}updateValue(){const t=this.segments[this.segmentMin+1],n=Fe.findPredecessorIndexInInterval(this.set,t,this.setRange);return this.value.start=Ae.start(this.setRange),this.value.end=n,this.setRange=Ae.ofBounds(n,Ae.end(this.setRange)),n>this.value.start}updateSegmentRange(){const t=Ae.min(this.setRange),n=Ae.max(this.setRange);if(n<t){this.hasNext=!1;return}this.segmentMin=this.segmentMap[Fe.getAt(this.set,t)],this.segmentMax=this.segmentMap[Fe.getAt(this.set,n)],this.hasNext=this.segmentMax>=this.segmentMin}setSegment(t){this.setRange=Ae.ofBounds(t.start,t.end),this.updateSegmentRange()}constructor(t,n,r,i){this.segments=t,this.segmentMap=n,this.set=r,this.segmentMin=0,this.segmentMax=0,this.setRange=Ae.Empty,this.value={index:0,start:0,end:0},this.hasNext=!1,this.setRange=i,this.updateSegmentRange()}}function G5(e,t,n){const r=typeof n<"u"?Ae.ofBounds(n.start,n.end):Ae.ofBounds(0,Fe.size(t));return new L5(e.offsets,e.index,t,r)}var Ct;(function(e){e.create=ty,e.ofOffsets=M5,e.count=q5,e.getSegment=U5,e.projectValue=F5,e.transientSegments=G5})(Ct||(Ct={}));function H5(e){return new j5(e)}class j5{remove(t){const{prev:n,next:r}=this,i=n[t],o=r[t];i>=0&&(r[i]=o,n[t]=-1),o>=0&&(n[o]=i,r[t]=-1),t===this.head&&(i<0?this.head=o:this.head=i)}has(t){return this.prev[t]>=0||this.next[t]>=0||this.head===t}constructor(t){this.head=t>0?0:-1,this.prev=new Int32Array(t),this.next=new Int32Array(t);for(let n=0;n<t;n++)this.next[n]=n+1,this.prev[n]=n-1;this.prev[0]=-1,this.next[t-1]=-1}}var Kr;(function(e){e.Empty=new Map;function t(s){return Lx(s.keys())}e.keyArray=t;function n(){return new Map}e.Mutable=n;function r(s){return s}e.asImmutable=r;function i(s){const c=n(),a=s.keys();for(;;){const{done:u,value:l}=a.next();if(u)break;c.set(l,s.get(l))}return c}e.copy=i;function o(s,c){const a=c.keys();for(;;){const{done:u,value:l}=a.next();if(u)break;s.set(l,c.get(l))}return s}e.addFrom=o})(Kr||(Kr={}));class V5{move(){return++this.index,this.lastValue=this.xs[this.index],this.hasNext=this.index<this.length-1,this.lastValue}constructor(t){this.xs=[],this.index=-1,this.length=0,this.hasNext=!1,this.length=t.length,this.hasNext=t.length>0,this.xs=t,this.index=-1,this.lastValue=t.length>0?t[0]:void 0}}class ny{move(){return++this.value,this.hasNext=this.value<this.max,this.value}constructor(t,n){this.max=n,this.value=0,this.hasNext=!1,this.value=t-1,this.hasNext=n>=t}}class z5{move(){return this.hasNext=!1,this.value}constructor(t){this.value=t,this.hasNext=!0}}class K5{move(){const t=this.f(this.base.move());return this.hasNext=this.base.hasNext,t}constructor(t,n){this.base=t,this.f=n,this.hasNext=!1,this.hasNext=t.hasNext}}class $5{move(){const t=this.next;return this.hasNext=this.findNext(),t}findNext(){for(;this.base.hasNext;)if(this.next=this.base.move(),this.p(this.next))return!0;return!1}constructor(t,n){this.base=t,this.p=n,this.hasNext=this.findNext()}}var Vs;(function(e){e.Empty=new ny(0,-1);function t(c){return new V5(c)}e.Array=t;function n(c){return new z5(c)}e.Value=n;function r(c,a){return new ny(c,a)}e.Range=r;function i(c,a){return new K5(c,a)}e.map=i;function o(c,a){return new $5(c,a)}e.filter=o;function s(c,a,u){for(;c.hasNext;)if(a(c.move(),u))return u;return u}e.forEach=s})(Vs||(Vs={}));var pr;(function(e){function t(f,d){if(f===d)return!0;if(f.vertexCount!==d.vertexCount||f.edgeCount!==d.edgeCount)return!1;const{a:m,b:h,offset:p}=f,{a:_,b:y,offset:v}=d;for(let A=0,g=f.a.length;A<g;A++)if(m[A]!==_[A])return!1;for(let A=0,g=f.b.length;A<g;A++)if(h[A]!==y[A])return!1;for(let A=0,g=f.offset.length;A<g;A++)if(p[A]!==v[A])return!1;for(const A of Object.keys(f.edgeProps)){const g=f.edgeProps[A],b=d.edgeProps[A];if(!b)return!1;for(let C=0,I=g.length;C<I;C++)if(g[C]!==b[C])return!1}return!0}e.areEqual=t;class n{getEdgeIndex(d,m){let h,p;d<m?(h=d,p=m):(h=m,p=d);for(let _=this.offset[h],y=this.offset[h+1];_<y;_++)if(this.b[_]===p)return _;return-1}getDirectedEdgeIndex(d,m){for(let h=this.offset[d],p=this.offset[d+1];h<p;h++)if(this.b[h]===m)return h;return-1}getVertexEdgeCount(d){return this.offset[d+1]-this.offset[d]}constructor(d,m,h,p,_,y){this.offset=d,this.a=m,this.b=h,this.edgeCount=p,this.props=y,this.vertexCount=d.length-1,this.edgeProps=_||{}}}function r(f,d,m,h,p,_){return new n(f,d,m,h,p,_)}e.create=r;class i{createGraph(d,m){return r(this.offsets,this.a,this.b,this.edgeCount,d,m)}addNextEdge(){const d=this.xs[this.current],m=this.ys[this.current],h=this.offsets[d]+this.bucketFill[d];this.a[h]=d,this.b[h]=m,this.bucketFill[d]++;const p=this.offsets[m]+this.bucketFill[m];this.a[p]=m,this.b[p]=d,this.bucketFill[m]++,this.current++,this.curA=h,this.curB=p}addAllEdges(){for(let d=0;d<this.edgeCount;d++)this.addNextEdge()}assignProperty(d,m){d[this.curA]=m,d[this.curB]=m}assignDirectedProperty(d,m,h,p){d[this.curA]=m,d[this.curB]=p,h[this.curB]=m,h[this.curA]=p}constructor(d,m,h){this.vertexCount=d,this.xs=m,this.ys=h,this.current=0,this.curA=0,this.curB=0,this.edgeCount=m.length,this.offsets=new Int32Array(this.vertexCount+1),this.bucketFill=new Int32Array(this.vertexCount);const p=new Int32Array(this.vertexCount);for(let y=0,v=this.xs.length;y<v;y++)p[this.xs[y]]++;for(let y=0,v=this.ys.length;y<v;y++)p[this.ys[y]]++;let _=0;for(let y=0;y<this.vertexCount;y++)this.offsets[y]=_,_+=p[y];this.offsets[this.vertexCount]=_,this.slotCount=_,this.a=new Int32Array(_),this.b=new Int32Array(_)}}e.EdgeBuilder=i;class o{createGraph(d,m){return r(this.offsets,this.a,this.b,this.edgeCount,d,m)}addNextEdge(){const d=this.xs[this.current],m=this.ys[this.current],h=this.offsets[d]+this.bucketFill[d];this.a[h]=d,this.b[h]=m,this.bucketFill[d]++,this.current++,this.curA=h}addAllEdges(){for(let d=0;d<this.edgeCount;d++)this.addNextEdge()}assignProperty(d,m){d[this.curA]=m}constructor(d,m,h){this.vertexCount=d,this.xs=m,this.ys=h,this.current=0,this.curA=0,this.edgeCount=m.length,this.offsets=new Int32Array(this.vertexCount+1),this.bucketFill=new Int32Array(this.vertexCount);const p=new Int32Array(this.vertexCount);for(let y=0,v=this.xs.length;y<v;y++)p[this.xs[y]]++;let _=0;for(let y=0;y<this.vertexCount;y++)this.offsets[y]=_,_+=p[y];this.offsets[this.vertexCount]=_,this.slotCount=_,this.a=new Int32Array(_),this.b=new Int32Array(_)}}e.DirectedEdgeBuilder=o;class s{addEdge(d,m){let h=d,p=m;d>m&&(h=m,p=d);const _=Un(h,p);return this.included.has(_)?!1:(this.included.add(_),this.xs[this.xs.length]=h,this.ys[this.ys.length]=p,!0)}getGraph(){return c(this.vertexCount,this.xs,this.ys)}getEdgeBuiler(){return new i(this.vertexCount,this.xs,this.ys)}constructor(d){this.vertexCount=d,this.xs=[],this.ys=[],this.included=new Set}}e.UniqueEdgeBuilder=s;function c(f,d,m){const h=new e.EdgeBuilder(f,d,m);return h.addAllEdges(),h.createGraph({})}e.fromVertexPairs=c;function a(f,d,m){const{b:h,offset:p,vertexCount:_,edgeProps:y}=f,v=new Int32Array(_);for(let D=0,w=d.length;D<w;D++)v[d[D]]=D+1;let A=0;for(let D=0;D<_;D++)if(v[D]!==0)for(let w=p[D],E=p[D+1];w<E;w++)h[w]>D&&v[h[w]]!==0&&A++;const g=new Int32Array(d.length+1),b=new Int32Array(2*A),C=new Int32Array(2*A),I=new Int32Array(2*A);let S=0,P=0;for(let D=0;D<_;D++){if(v[D]===0)continue;const w=v[D]-1;for(let E=p[D],k=p[D+1];E<k;E++){const F=v[h[E]];F!==0&&(C[S]=w,I[S]=F-1,b[S]=E,S++)}g[++P]=S}const T={};for(const D of Object.keys(y))T[D]=Gx(y[D],b);return r(g,C,I,A,T,m)}e.induceByVertices=a;function u(f){const d=f.vertexCount;if(d===0)return{componentCount:0,componentIndex:new Int32Array(0)};if(f.edgeCount===0){const A=new Int32Array(d);for(let g=0,b=d;g<b;g++)A[g]=g;return{componentCount:d,componentIndex:A}}const m=new Int32Array(d);for(let A=0,g=d;A<g;A++)m[A]=-1;let h=0;m[0]=h;const{offset:p,b:_}=f,y=[0],v=H5(d);for(v.remove(0);y.length>0;){const A=y.pop(),g=m[A];for(let b=p[A],C=p[A+1];b<C;b++){const I=_[b];v.has(I)&&(v.remove(I),y.push(I),m[I]=g)}y.length===0&&v.head>=0&&(y.push(v.head),m[v.head]=++h,v.remove(v.head))}return{componentCount:d,componentIndex:m}}e.connectedComponents=u;function l(f,d,m,h){if(Ee.areIntersecting(d,m))return!0;if(h<1)return!1;const p=new Set;for(let _=0,y=d.length;_<y;++_)p.add(d[_]);return ry(f,d,m,h,p)}e.areVertexSetsConnected=l})(pr||(pr={}));function ry(e,t,n,r,i){const{b:o,offset:s}=e,c=[];for(let a=0,u=t.length;a<u;++a){const l=t[a];for(let f=s[l],d=s[l+1];f<d;++f){const m=o[f];if(!i.has(m)){if(Ee.has(n,m))return!0;i.add(m),c[c.length]=m}}}return r>1?ry(e,c,n,r-1,i):!1}class W5{constructor(){this.map=new Map,this.applicable=new Map}add(t,n,r){this.map.set(t,n),r&&this.applicable.set(t,r)}remove(t){this.map.delete(t),this.applicable.delete(t)}get(t){return this.map.get(t)}isApplicable(t){if(!this.map.has(t.sourceData.kind))return!1;const n=this.applicable.get(t.sourceData.kind);return n?n(t):!0}}var _r;(function(e){function t(n,r){const{name:i}=n,o=new W5;return{descriptor:n,formatRegistry:o,isApplicable(s){return o.isApplicable(s)},get(s){const c=r?.asDynamic?s._dynamicPropertyData:s._staticPropertyData;if(c[i])return c[i];if(s.customProperties.has(n))return;const a=o.get(s.sourceData.kind);if(a)return c[i]=a(s),s.customProperties.add(n),c[i]},set(s,c){r?.asDynamic?s._dynamicPropertyData[i]=c:s._staticPropertyData[i]=c},delete(s){r?.asDynamic?delete s._dynamicPropertyData[i]:delete s._staticPropertyData[i]}}}e.create=t})(_r||(_r={}));function $n(){return $n.zero()}(function(e){function t(){const w=[.1,0,0];return w[0]=0,w}e.zero=t;function n(w,E,k){const F=t();return F[0]=w,F[1]=E,F[2]=k,F}e.create=n;function r(w,E,k,F){return w[0]=E,w[1]=k,w[2]=F,w}e.set=r;function i(w,E){const k=E[0]-w[0],F=E[1]-w[1],V=E[2]-w[2];return Math.sqrt(k*k+F*F+V*V)}e.distance=i;function o(w,E){const[k,F,V]=yr.toRgb(E),[de,W,J]=D(k,F,V),le=116*W-16;return w[0]=le<0?0:le,w[1]=500*(de-W),w[2]=200*(W-J),w}e.fromColor=o;function s(w,E){return kr.toLab(w,E)}e.fromHcl=s;function c(w){let E=(w[0]+16)/116,k=isNaN(w[1])?E:E+w[1]/500,F=isNaN(w[2])?E:E-w[2]/200;E=y*S(E),k=_*S(k),F=v*S(F);const V=I(3.2404542*k-1.5371385*E-.4985314*F),de=I(-.969266*k+1.8760108*E+.041556*F),W=I(.0556434*k-.2040259*E+1.0572252*F);return yr.fromRgb(Math.round(qr(V,0,255)),Math.round(qr(de,0,255)),Math.round(qr(W,0,255)))}e.toColor=c;function a(w,E){const[k,F,V]=E,de=Math.sqrt(F*F+V*V);let W=(li(Math.atan2(V,F))+360)%360;return Math.round(de*1e4)===0&&(W=Number.NaN),w[0]=W,w[1]=de,w[2]=k,w}e.toHcl=a;function u(w,E){return w[0]=E[0],w[1]=E[1],w[2]=E[2],w}e.copy=u;function l(w,E,k){return w[0]=E[0]-p*k,w[1]=E[1],w[2]=E[2],w}e.darken=l;function f(w,E,k){return l(w,E,-k)}e.lighten=f;const d=[0,0,0];function m(w,E,k){return a(d,E),kr.toLab(w,kr.saturate(d,d,k))}e.saturate=m;function h(w,E,k){return m(w,E,-k)}e.desaturate=h;const p=18,_=.95047,y=1,v=1.08883,A=.137931034,g=.206896552,b=.12841855,C=.008856452;function I(w){return 255*(w<=.00304?12.92*w:1.055*Math.pow(w,1/2.4)-.055)}function S(w){return w>g?w*w*w:b*(w-A)}function P(w){return(w/=255)<=.04045?w/12.92:Math.pow((w+.055)/1.055,2.4)}function T(w){return w>C?Math.pow(w,1/3):w/b+A}function D(w,E,k){w=P(w),E=P(E),k=P(k);const F=T((.4124564*w+.3575761*E+.1804375*k)/_),V=T((.2126729*w+.7151522*E+.072175*k)/y),de=T((.0193339*w+.119192*E+.9503041*k)/v);return[F,V,de]}})($n||($n={}));function kr(){return kr.zero()}(function(e){function t(){const v=[.1,0,0];return v[0]=0,v}e.zero=t;function n(v,A,g){const b=t();return b[0]=v,b[1]=A,b[2]=g,b}e.create=n;function r(v,A,g,b){return v[0]=A,v[1]=g,v[2]=b,v}e.set=r;function i(v){return!isNaN(v[0])}e.hasHue=i;const o=[0,0,0];function s(v,A){return $n.toHcl(v,$n.fromColor(o,A))}e.fromColor=s;function c(v,A){return $n.toHcl(v,A)}e.fromLab=c;const a=[0,0,0];function u(v){return $n.toColor(l(a,v))}e.toColor=u;function l(v,A){let[g,b,C]=A;return isNaN(g)&&(g=0),g=Ur(g),v[0]=C,v[1]=Math.cos(g)*b,v[2]=Math.sin(g)*b,v}e.toLab=l;function f(v,A){return v[0]=A[0],v[1]=A[1],v[2]=A[2],v}e.copy=f;function d(v,A,g){return v[0]=A[0],v[1]=Math.max(0,A[1]+y*g),v[2]=A[2],v}e.saturate=d;function m(v,A,g){return d(v,A,-g)}e.desaturate=m;const h=[0,0,0];function p(v,A,g){return l(h,A),$n.toHcl(v,$n.darken(h,h,g))}e.darken=p;function _(v,A,g){return p(v,A,-g)}e.lighten=_;const y=18})(kr||(kr={}));function yr(e){return e}(function(e){function t(V){return`rgb(${V>>16&255}, ${V>>8&255}, ${V&255})`}e.toStyle=t;function n(V){return"#"+("000000"+V.toString(16)).slice(-6)}e.toHexStyle=n;function r(V){return"0x"+("000000"+V.toString(16)).slice(-6)}e.toHexString=r;function i(V){return`RGB: ${e.toRgb(V).join(", ")}`}e.toRgbString=i;function o(V){return[V>>16&255,V>>8&255,V&255]}e.toRgb=o;function s(V){return[(V>>16&255)/255,(V>>8&255)/255,(V&255)/255]}e.toRgbNormalized=s;function c(V){return parseInt(V.replace("#","0x"))}e.fromHexStyle=c;function a(V){return parseInt(V)}e.fromHexString=a;function u(V,de,W){return V<<16|de<<8|W}e.fromRgb=u;function l(V,de,W){return V*255<<16|de*255<<8|W*255}e.fromNormalizedRgb=l;function f(V,de){return u(V[de],V[de+1],V[de+2])}e.fromArray=f;function d(V,de){return l(V[de],V[de+1],V[de+2])}e.fromNormalizedArray=d;function m(V,de,W){return de[W]=V>>16&255,de[W+1]=V>>8&255,de[W+2]=V&255,de}e.toArray=m;function h(V,de,W){return de[W]=(V>>16&255)/255,de[W+1]=(V>>8&255)/255,de[W+2]=(V&255)/255,de}e.toArrayNormalized=h;function p(V,de){return V[0]=de>>16&255,V[1]=de>>8&255,V[2]=de&255,V}e.toVec3=p;function _(V,de){return V[0]=(de>>16&255)/255,V[1]=(de>>8&255)/255,V[2]=(de&255)/255,V}e.toVec3Normalized=_;function y(V,de,W){const J=V>>16&255,le=V>>8&255,K=V&255,ae=de>>16&255,me=de>>8&255,De=de&255,te=J+(ae-J)*W,ce=le+(me-le)*W,M=K+(De-K)*W;return te<<16|ce<<8|M}e.interpolate=y;function v(V){const de=V>>16&255,W=V>>8&255,J=V&255;return de!==W||de!==J}e.hasHue=v;const A=[0,0,0];function g(V,de){return v(V)?(kr.fromColor(A,V),kr.toColor(kr.saturate(A,A,de))):V}e.saturate=g;function b(V,de){return g(V,-de)}e.desaturate=b;const C=[0,0,0];function I(V,de){return $n.fromColor(C,V),$n.toColor($n.darken(C,C,de))}e.darken=I;function S(V,de){return I(V,-de)}e.lighten=S;function P(V){return V<=.03928?V/12.92:Math.pow((V+.055)/1.055,2.4)}function T(V){const de=P((V>>16&255)/255),W=P((V>>8&255)/255),J=P((V&255)/255);return .2126*de+.7152*W+.0722*J}e.luminance=T;function D(V,de){const W=T(V),J=T(de);return W>J?(W+.05)/(J+.05):(J+.05)/(W+.05)}e.contrast=D;function w(V){return V<.04045?V*.0773993808:Math.pow(V*.9478672986+.0521327014,2.4)}function E(V){return l(w((V>>16&255)/255),w((V>>8&255)/255),w((V&255)/255))}e.sRGBToLinear=E;function k(V){return V<.0031308?V*12.92:1.055*Math.pow(V,.41666)-.055}function F(V){return l(k((V>>16&255)/255),k((V>>8&255)/255),k((V&255)/255))}e.linearToSRGB=F})(yr||(yr={}));function yt(e,t,n,r){return{label:e,description:n,list:r,type:t}}function I7(e){return e}function Y5(e,t=" "){return e.replace(/([a-z\xE0-\xFF])([A-Z\xC0\xDF])/g,`$1${t}$2`)}const Z5=e=>e.toUpperCase();function X5(e){return e?typeof e=="string"?e.toUpperCase():`${e}`.toUpperCase():""}function iy(e){return e.toLowerCase().replace(/^\w|\s\w/g,Z5)}function Q5(e){return e.replace(/_/g," ")}function J5(e){return e.replace(/-/g," ")}function To(e){return iy(Y5(Q5(J5(e))))}function Wt(e,t,n,r){const i=r.length;if(i>n-t)return!1;for(let o=0;o<i;o++)if(e.charCodeAt(t+o)!==r.charCodeAt(o))return!1;return!0}const Tr={"orange-red":yt("Orange-Red","sequential","Orange-Red, sequential color scheme from ColorBrewer 2.0",[16775148,16705736,16635038,16628612,16551257,15689032,14102559,11730944,8323072]),"purple-blue":yt("Purple-Blue","sequential","Purple-Blue, sequential color scheme from ColorBrewer 2.0",[16775163,15525874,13685222,10927579,7645647,3576e3,356528,285325,145496]),"blue-purple":yt("Blue-Purple","sequential","Blue-Purple, sequential color scheme from ColorBrewer 2.0",[16252157,14740724,12571622,10403034,9213638,9202609,8929693,8458108,5046347]),oranges:yt("Oranges","sequential","",[16774635,16705230,16634018,16625259,16616764,15821075,14239745,10892803,8333060]),"blue-green":yt("Blue-Green","sequential","",[16252157,15070713,13429990,10082505,6734500,4304502,2329413,27948,17435]),"yellow-orange-brown":yt("Yellow-Orange-Brown","sequential","",[16777189,16775100,16704401,16696399,16685353,15495188,13388802,10040324,6694150]),"yellow-green":yt("Yellow-Green","sequential","",[16777189,16252089,14282915,11394446,7915129,4303709,2327619,26679,17705]),reds:yt("Reds","sequential","",[16774640,16703698,16563105,16552562,16476746,15678252,13309981,10817301,6750221]),"red-purple":yt("Red-Purple","sequential","",[16775155,16638173,16565696,16424885,16214177,14496919,11403646,7995767,4784234]),greens:yt("Greens","sequential","",[16252149,15070688,13101504,10607003,7652470,4303709,2329413,27948,17435]),"yellow-green-blue":yt("Yellow-Green-Blue","sequential","",[16777177,15595697,13101492,8375739,4306628,1937856,2252456,2438292,531800]),purples:yt("Purples","sequential","",[16579581,15724021,14342891,12369372,10394312,8420794,6967715,5515151,4128893]),"green-blue":yt("Green-Blue","sequential","",[16252144,14742491,13429701,11066805,8113348,5157843,2854078,551084,540801]),greys:yt("Greys","sequential","",[16777215,15790320,14277081,12434877,9868950,7566195,5395026,2434341,0]),"yellow-orange-red":yt("Yellow-Orange-Red","sequential","",[16777164,16772512,16701814,16691788,16616764,16535082,14883356,12386342,8388646]),"purple-red":yt("Purple-Red","sequential","",[16250105,15196655,13941210,13210823,14640560,15149450,13505110,9961539,6750239]),blues:yt("Blues","sequential","",[16251903,14609399,13032431,10406625,7057110,4362950,2191797,545180,536683]),"purple-blue-green":yt("Purple-Blue-Green","sequential","",[16775163,15524592,13685222,10927579,6793679,3576e3,164234,93273,83510]),spectral:yt("Spectral","diverging","",[10355010,13975119,16018755,16625249,16703627,16777151,15136152,11263396,6734501,3311805,6180770]),"red-yellow-green":yt("Red-Yellow-Green","diverging","",[10813478,14102567,16018755,16625249,16703627,16777151,14282635,10934634,6733155,1742928,26679]),"red-blue":yt("Red-Blue","diverging","",[6750239,11671595,14049357,16033154,16636871,16250871,13755888,9618910,4428739,2188972,340065]),"pink-yellow-green":yt("Pink-Yellow-Green","diverging","",[9306450,12917629,14579630,15840986,16638191,16250871,15136208,12116358,8371265,5083681,2581529]),"purple-green":yt("Purple-Green","diverging","",[4194379,7744131,10055851,12756431,15193320,16250871,14282963,10935200,5942881,1800247,17435]),"red-yellow-blue":yt("Red-Yellow-Blue","diverging","Red-Yellow-Blue, diverging color scheme from ColorBrewer 2.0",[10813478,14102567,16018755,16625249,16703632,16777151,14742520,11262441,7646673,4552116,3225237]),"brown-white-green":yt("Brown-White-Green","diverging","",[5517317,9195786,12550445,14664317,16181443,16119285,13101797,8441281,3512207,91742,15408]),"red-grey":yt("Red-Grey","diverging","",[6750239,11671595,14049357,16033154,16636871,16777215,14737632,12237498,8882055,5066061,1710618]),"orange-purple":yt("Orange-Purple","diverging","",[8338184,11753478,14713364,16627811,16703670,16250871,14211819,11709394,8418220,5515144,2949195]),"set-2":yt("Set-2","qualitative","",[6734501,16551266,9281739,15174339,10934356,16767279,15058068,11776947]),accent:yt("Accent","qualitative","",[8374655,12496596,16629894,16777113,3697840,15729279,12540695,6710886]),"set-1":yt("Set-1","qualitative","",[14948892,3636920,5091146,9981603,16744192,16777011,10901032,16220607,10066329]),"set-3":yt("Set-3","qualitative","",[9294791,16777139,12499674,16482418,8434131,16626786,11787881,16567781,14277081,12353725,13429701,16772463]),"dark-2":yt("Dark-2","qualitative","",[1810039,14245634,7696563,15149450,6727198,15117058,10909213,6710886]),paired:yt("Paired","qualitative","",[10931939,2062516,11722634,3383340,16489113,14883356,16629615,16744192,13284054,6962586,16777113,11622696]),"pastel-2":yt("Pastel-2","qualitative","",[11789005,16633260,13358568,16042724,15136201,16773806,15852236,13421772]),"pastel-1":yt("Pastel-1","qualitative","",[16495790,11783651,13429701,14601188,16701862,16777164,15063229,16636652,15921906]),"many-distinct":yt("Many-Distinct","qualitative","",[1810039,14245634,7696563,15149450,6727198,15117058,10909213,6710886,14948892,3636920,5091146,9981603,16744192,16777011,10901032,16220607,10066329,6734501,16551266,9281739,15174339,10934356,16767279,15058068,11776947]),magma:yt("Magma","sequential","Perceptually uniform shades of black-red-white",[4329332,4853881,5378684,5903742,6363263,6888576,7413633,7938689,8463745,8988801,9513600,10038655,10563454,11088508,11613562,12138360,12728949,13254258,13714030,14239338,14699366,15094114,15489119,15753309,16017499,16216411,16350045,16483424,16551523,16619368,16621934,16689780,16692091,16694402,16696969,16633746,16636058,16638371,16575148,16577461,16514239]),inferno:yt("Inferno","sequential","Perceptually uniform shades of black-red-yellow",[4721514,5246316,5771373,6296430,6821486,7346542,7871597,8396651,8921450,9446504,9971557,10496610,10956127,11481435,12006486,12466258,12926285,13386056,13780802,14241085,14570295,14965297,15229227,15558693,15757342,15956248,16154897,16288267,16421638,16489734,16492043,16494612,16496926,16368426,16305463,16111429,15982678,15853928,15856253,16119953,16580260]),plasma:yt("Plasma","sequential","Perceptually uniform shades of blue-red-yellow",[1771148,2426257,3081365,3671193,4195228,4784799,5308834,5833124,6357158,6815911,7340200,7864744,8324007,8783782,9309348,9769377,10164126,10624154,11018902,11413393,11808141,12137352,12466307,12795519,13124730,13453685,13717361,14046573,14309992,14573668,14837344,15035483,15299159,15497299,15695438,15893834,16091974,16224833,16357693,16425017,16557877,16625457,16627245,16629289,16631334,16567845,16438820,16310052,16115494,15921190,15726625]),viridis:yt("Viridis","sequential","Perceptually uniform shades of blue-green-yellow",[4524123,4656994,4658793,4726127,4727668,4663929,4599933,4535937,4406404,4276870,4081800,3952010,3822475,3627148,3497356,3302029,3172237,3042446,2912654,2782862,2652814,2523022,2393229,2328973,2198924,2069132,2004874,2005897,2007175,2139525,2337154,2666111,3060348,3520376,4045684,4570991,5227369,5883748,6605661,7392854,8180303,8967495,9819967,10672695,11525166,12443174,13295646,14148121,15000344,15852828,16639780]),cividis:yt("Cividis","sequential","Perceptually uniform shades of blue-green-yellow, should look effectively identical to colorblind and non-colorblind users",[11367,12400,537456,1455727,2046574,2571629,3031404,3425388,3754092,4148075,4476779,4805227,5133932,5396844,5725549,5988462,6317166,6580079,6843249,7171698,7434867,7697781,7960951,8289656,8618104,8881272,9209976,9538679,9867127,10195830,10524533,10853235,11181938,11510640,11839343,12168045,12497002,12891240,13219941,13548642,13943134,14271834,14666326,14995025,15389516,15718470,16112703,16507190,16639799]),twilight:yt("Twilight","sequential","Perceptually uniform shades of white-blue-black-red-white, cyclic",[14670305,14211037,13554648,12766675,11847630,10993866,10139847,9351365,8628419,8036290,7509952,7048895,6718653,6519739,6386105,6252470,6184114,6181293,6112935,6044831,5976470,5777291,5447293,5052270,4592479,4067665,3674181,3281211,3150646,3543352,4067644,4657728,5379141,6166345,6953549,7741007,8463184,9120336,9777743,10304079,10830671,11291984,11687762,12083541,12348505,12613471,12878439,13077872,13211771,13411209,13545111,13809830,14074293,14338756,14537169,14735067,14801121]),turbo:yt("Turbo","sequential","Improved (smooth) rainbow colormap for visualization",[4866485,4872413,4354034,3770361,3120629,2667241,2475736,2611140,3073454,3928216,5109892,6487408,8126047,9829201,11531332,13167162,14605618,15780908,16693543,16753699,16748063,16741916,16146200,15026195,13644558,12198408,10818563,9833728]),rainbow:yt("Rainbow","sequential","",[3367393,3516485,16383744,15501073,12526114]),"red-white-blue":yt("Red-White-Blue","diverging","",[12526114,16777215,3367393])},oy=Object.keys(Tr).map(e=>[e,Tr[e].label,iy(Tr[e].type)]);oy.filter(e=>Tr[e[0]].type==="diverging"||Tr[e[0]].type==="sequential"),oy.filter(e=>Tr[e[0]].type==="qualitative");function sy(e){return e in Tr?Tr[e]:(console.warn(`unknown color list named '${e}'`),Tr["red-yellow-blue"])}function eC(e,t,n){return{kind:"scale-legend",minLabel:e,maxLabel:t,colors:n}}const tC={domain:[0,1],reverse:!1,listOrName:"red-yellow-blue",minLabel:"",maxLabel:""};var ay;(function(e){function t(a){return r(a,"continuous")}e.create=t;function n(a){return r(a,"discrete")}e.createDiscrete=n;function r(a,u){const{domain:l,reverse:f,listOrName:d}={...tC,...a},m=typeof d=="string"?sy(d).list:d,h=f?m.slice().reverse():m;let p=0,_=0,y=0;function v(I,S){_=I,y=S,p=y-_||1}v(l[0],l[1]);const A=a_(a.minLabel,_.toString()),g=a_(a.maxLabel,y.toString());let b;if(h.every(I=>Array.isArray(I))){const I=[...h];I.sort((D,w)=>D[1]-w[1]);const S=I.map(D=>D[0]),P=Ee.ofSortedArray(I.map(D=>D[1])),T=S.length-1;switch(u){case"continuous":b=D=>i(D,S,P,_,T,p);break;case"discrete":b=D=>s(D,S,P,_,T,p);break}}else switch(u){case"continuous":b=I=>o(I,h,_,y,p);break;case"discrete":b=I=>c(I,h,_,y,p);break}return{color:b,colorToArray:(I,S,P)=>{yr.toArray(b(I),S,P)},normalizedColorToArray:(I,S,P)=>{yr.toArrayNormalized(b(I),S,P)},setDomain:v,get legend(){return eC(A,g,h)}}}function i(a,u,l,f,d,m){const h=qr((a-f)/m,0,1),p=Ee.findPredecessorIndex(l,h);if(p===0)return u[f];if(p>d)return u[d];const _=l[p-1],y=l[p],v=qr((h-_)/(y-_),0,1);return yr.interpolate(u[p-1],u[p],v)}function o(a,u,l,f,d){const m=Math.min(u.length-1,Math.max(0,(a-l)/d*u.length-1)),h=Math.floor(m),p=u[h],_=u[Math.ceil(m)];return yr.interpolate(p,_,m-h)}function s(a,u,l,f,d,m){if(u.length===0)return yr.fromRgb(0,0,0);const h=qr((a-f)/m,0,1),p=Ee.findPredecessorIndex(l,h);return p===0?u[f]:p>d?u[d]:u[p]}function c(a,u,l,f,d){if(u.length===0)return yr.fromRgb(0,0,0);const m=d/u.length;if(a<=l)return u[0];if(a>=f)return u[u.length-1];const h=Math.min(u.length-1,Math.floor((a-l)/m));return u[h]}})(ay||(ay={}));const cy=new Set(["145","147","149","289","291","293","445","475","491","510","604","045","05L","07E","07Y","08U","09X","0AT","0BD","0H0","0HX","0LP","0MK","0NZ","0TS","0UB","0V4","0WK","0XY","0YT","10M","12E","14T","15L","16F","16G","16O","17T","18D","18O","18T","1AR","1BW","1CF","1FT","1GL","1GN","1JB","1LL","1NA","1S3","1S4","1SD","1X4","20S","20X","22O","22S","23V","24S","25E","26M","26O","26Q","26R","26V","26W","26Y","27C","2DG","2DR","2F8","2FG","2FL","2FP","2GL","2GS","2H5","2HA","2M4","2M5","2M8","2OS","2SI","2WP","2WS","32O","34V","38J","3BU","3CM","3DO","3DY","3FM","3GR","3HD","3J3","3J4","3LJ","3LR","3MF","3MG","3MK","3R3","3S6","3SA","3YW","40J","42D","44S","46D","46M","46Z","48Z","49A","49S","49T","49V","4AM","4CQ","4GC","4GL","4GP","4JA","4N2","4NN","4QY","4R1","4RS","4SG","4U0","4U1","4U2","4UZ","4V5","50A","51N","56N","57S","5DI","5GF","5GO","5II","5KQ","5KS","5KT","5KV","5L2","5L3","5LS","5LT","5MM","5N6","5QP","5RP","5SA","5SP","5TH","5TJ","5TK","5TM","61J","62I","64K","66O","6BG","6C2","6DM","6GB","6GP","6GR","6K3","6KH","6KL","6KS","6KU","6KW","6LA","6LS","6LW","6MJ","6MN","6PG","6PY","6PZ","6S2","6SA","6UD","6Y6","6YR","6ZC","73E","79J","7CV","7D1","7GP","7JZ","7K2","7K3","7NU","7SA","83Y","89Y","8B7","8B9","8EX","8GA","8GG","8GP","8I4","8LM","8LR","8OQ","8PK","8S0","8YV","95Z","96O","98U","9AM","9C1","9CD","9GP","9KJ","9MR","9OK","9PG","9QG","9QZ","9RN","9S7","9SG","9SJ","9SM","9SP","9T1","9T7","9VP","9WJ","9WN","9WZ","9YW","A0K","A1AIO","A1EKO","A1H03","A1H0P","A1H0Z","A1H10","A1H1B","A1H1F","A1H1V","A1IH4","A1JAQ","A1L1P","A1Q","A2G","A5C","A6P","AAL","AAO","ABC","ABD","ABE","ABF","ABL","AC1","ACG","ACR","ACX","ADA","ADG","ADR","AF1","AFD","AFL","AFO","AFP","AFR","AGC","AGH","AGL","AGR","AH2","AH8","AHG","AHM","AHR","AIG","ALL","ALX","AMG","AMN","AMU","AMV","ANA","AOG","AOS","AQA","ARA","ARB","ARE","ARI","ARW","ASC","ASG","ASO","AXP","AXR","AY9","AZC","B0D","B16","B1H","B1N","B2G","B4G","B6D","B7G","B8D","B9D","BBK","BBV","BCD","BCW","BDF","BDG","BDP","BDR","BDZ","BEM","BFN","BFP","BG6","BG8","BGC","BGL","BGN","BGP","BGS","BHG","BM3","BM7","BMA","BMX","BND","BNG","BNX","BO1","BOG","BQY","BRI","BS7","BTG","BTU","BW3","BWG","BXF","BXP","BXX","BXY","BZD","C3B","C3G","C3X","C4B","C4W","C4X","C5X","CAP","CBF","CBI","CBK","CDR","CE5","CE6","CE8","CEG","CEX","CEY","CEZ","CGF","CJB","CKB","CKP","CNP","CR1","CR6","CRA","CT3","CTO","CTR","CTT","D0N","D1M","D5E","D6G","DAF","DAG","DAN","DDA","DDB","DDL","DEG","DEL","DFR","DFX","DG0","DGC","DGD","DGM","DGO","DGS","DGU","DIG","DJB","DJE","DK4","DKX","DKZ","DL6","DLD","DLF","DLG","DMU","DNO","DO8","DOM","DP5","DPC","DQQ","DQR","DR2","DR3","DR4","DR5","DRI","DSR","DT6","DVC","DYM","E3M","E4P","E5G","EAG","EBG","EBQ","ED6","EEN","EEQ","EGA","EJT","EMP","EMZ","EPG","EQP","EQV","ERE","ERI","ETT","EUS","F1P","F1X","F55","F58","F6P","F8X","FBP","FCA","FCB","FCT","FDP","FDQ","FFC","FFX","FIF","FIX","FK9","FKD","FMF","FMO","FNG","FNY","FRU","FSA","FSI","FSM","FSR","FSW","FU4","FUB","FUC","FUD","FUF","FUL","FUY","FVQ","FX1","FYJ","G0S","G16","G1P","G20","G28","G2F","G3F","G3I","G4D","G4S","G6D","G6P","G6S","G7P","G8Z","GAA","GAC","GAD","GAF","GAL","GAT","GBH","GC1","GC4","GC9","GCB","GCD","GCN","GCO","GCS","GCT","GCU","GCV","GCW","GDA","GDL","GE1","GE3","GFP","GIV","GL0","GL1","GL2","GL4","GL5","GL6","GL7","GL9","GLA","GLB","GLC","GLD","GLF","GLG","GLO","GLP","GLS","GLT","GLW","GM0","GMB","GMH","GMT","GMZ","GN1","GN4","GNS","GNX","GP0","GP1","GP4","GPH","GPK","GPM","GPO","GPQ","GPU","GPV","GPW","GQ1","GRF","GRX","GS1","GS4","GS9","GSA","GSD","GTE","GTH","GTK","GTM","GTR","GU0","GU1","GU2","GU3","GU4","GU5","GU6","GU8","GU9","GUF","GUL","GUP","GUZ","GXL","GXV","GYE","GYG","GYP","GYU","GYV","GZL","H1M","H1S","H2P","H3S","H53","H6Q","H6Z","HBZ","HD4","HDL","HLA","HMS","HNV","HNW","HSG","HSH","HSJ","HSQ","HSR","HSU","HSX","HSY","HSZ","HTG","HTM","HVC","I57","IAB","IDC","IDF","IDG","IDR","IDS","IDT","IDU","IDX","IDY","IEM","IN1","IPT","ISD","ISL","ISX","IVG","IXD","J5B","JFZ","JHM","JLT","JRV","JS2","JSV","JV4","JVA","JVS","JZR","K5B","K99","KBA","KBG","KD5","KDA","KDB","KDD","KDE","KDF","KDM","KDN","KDO","KDR","KFN","KG1","KGM","KHP","KME","KO1","KO2","KOT","KQC","KTU","L1L","L6N","L6S","L6T","LAG","LAH","LAI","LAK","LAO","LAT","LB2","LBS","LBT","LCN","LDY","LEC","LER","LFC","LFR","LGC","LGU","LKA","LKS","LM2","LMO","LMT","LMU","LNV","LOG","LOX","LPK","LRH","LSM","LTG","LTM","LVO","LVZ","LXB","LXC","LXZ","LZ0","M1F","M1P","M2F","M3M","M3N","M55","M6D","M6P","M7B","M7P","M8C","MA1","MA2","MA3","MA8","MAB","MAF","MAG","MAL","MAN","MAT","MAV","MAW","MBE","MBF","MBG","MCU","MDA","MDP","MFA","MFB","MFU","MG5","MGA","MGC","MGL","MGS","MJJ","MLB","MLR","MMA","MMN","MN0","MNA","MQG","MQT","MRH","MRP","MSX","MTT","MUB","MUG","MUR","MVP","MXY","MXZ","MYG","N1L","N3U","N9S","NA1","NAA","NAG","NBG","NBX","NBY","NDG","NED","NFG","NG1","NG6","NGA","NGB","NGC","NGE","NGF","NGK","NGL","NGR","NGS","NGY","NGZ","NHF","NLC","NM6","NM9","NNG","NOJ","NPF","NSQ","NT1","NTF","NTO","NTP","NXD","NYT","O1G","OAK","OEL","OI7","OPM","ORP","OSU","OTG","OTN","OTU","OX2","P53","P6P","P8E","PA1","PA5","PAV","PDX","PH5","PKM","PNA","PNG","PNJ","PNW","PPC","PRP","PSG","PSJ","PSV","PTQ","PUF","PZU","QDK","QIF","QKH","QPS","QV4","R1P","R1X","R2B","R2G","R5P","RAA","RAE","RAF","RAM","RAO","RAT","RB5","RBL","RCD","RDP","REL","RER","RF5","RG1","RGG","RHA","RHC","RI2","RIB","RIP","RM4","RNS","RNT","ROB","ROR","RP3","RP5","RP6","RPA","RR7","RRJ","RRY","RST","RTG","RTV","RUB","RUG","RUU","RV7","RVG","RVM","RWI","RY7","RZM","S6P","S7P","S81","SA0","SCG","SCR","SDD","SDY","SEJ","SF6","SF9","SFJ","SFU","SG4","SG5","SG6","SG7","SGA","SGC","SGD","SGN","SGS","SHB","SHD","SHG","SI3","SIA","SID","SIO","SIZ","SLB","SLM","SLT","SMD","SN5","SNG","SOE","SOG","SOL","SOR","SR1","SSG","SSH","STW","STZ","SUC","SUP","SUS","SWE","SZZ","T68","T6D","T6P","T6T","TA6","TAG","TCB","TCG","TDG","TEU","TF0","TFU","TGA","TGK","TGR","TGY","TH1","TM5","TM6","TM9","TMR","TMX","TNX","TOA","TOC","TQY","TRE","TRV","TS8","TT7","TTV","TTZ","TU4","TUG","TUJ","TUP","TUR","TVD","TVG","TVM","TVS","TVV","TVY","TW7","TWA","TWD","TWG","TWJ","TWY","TXB","TY6","TYV","U1Y","U2A","U2D","U63","U8V","U97","U9A","U9D","U9G","U9J","U9M","UAP","UBH","UBO","UCD","UDC","UEA","V3M","V3P","V71","VDF","VG1","VJ1","VJ4","VKN","VTB","W9T","WIA","WKO","WKT","WOO","WT8","WUN","WZ1","WZ2","WZ4","X0X","X1P","X1X","X2F","X2Y","X34","X4S","X5S","X6N","X6X","X6Y","X6Z","XBP","XDP","XDX","XGP","XIL","XIQ","XKJ","XLF","XLS","XMM","XS2","XUL","XXM","XXR","XXX","XY6","XY9","XYB","XYF","XYL","XYP","XYS","XYT","XYZ","YDR","YIO","YJM","YKR","YO5","YX0","YX1","YYB","YYD","YYH","YYJ","YYK","YYM","YYQ","YYR","YZ0","YZT","Z0F","Z15","Z16","Z2D","Z2T","Z3K","Z3L","Z3Q","Z3U","Z4K","Z4R","Z4S","Z4U","Z4V","Z4W","Z4Y","Z57","Z5J","Z5L","Z61","Z6G","Z6H","Z6J","Z6W","Z8H","Z8T","Z9D","Z9E","Z9H","Z9K","Z9L","Z9M","Z9N","Z9W","ZB0","ZB1","ZB2","ZB3","ZCD","ZCZ","ZD0","ZDC","ZDM","ZDO","ZEE","ZEL","ZGE","ZMR","UMQ","SQD"]);var kn;(function(e){e[e.FilledSphere=0]="FilledSphere",e[e.FilledCube=1]="FilledCube",e[e.CrossedCube=2]="CrossedCube",e[e.DividedDiamond=3]="DividedDiamond",e[e.FilledCone=4]="FilledCone",e[e.DevidedCone=5]="DevidedCone",e[e.FlatBox=6]="FlatBox",e[e.FilledStar=7]="FilledStar",e[e.FilledDiamond=8]="FilledDiamond",e[e.FlatDiamond=9]="FlatDiamond",e[e.FlatHexagon=10]="FlatHexagon",e[e.Pentagon=11]="Pentagon",e[e.DiamondPrism=12]="DiamondPrism",e[e.PentagonalPrism=13]="PentagonalPrism",e[e.HexagonalPrism=14]="HexagonalPrism",e[e.HeptagonalPrism=15]="HeptagonalPrism"})(kn||(kn={}));const Ze={Blue:37052,Green:42577,Yellow:16765952,Orange:16021792,Pink:16162465,Purple:10830745,LightBlue:9424105,Brown:10582605,Red:15539236,Secondary:15854817};var Le;(function(e){e[e.Hexose=0]="Hexose",e[e.HexNAc=1]="HexNAc",e[e.Hexosamine=2]="Hexosamine",e[e.Hexuronate=3]="Hexuronate",e[e.Deoxyhexose=4]="Deoxyhexose",e[e.DeoxyhexNAc=5]="DeoxyhexNAc",e[e.DiDeoxyhexose=6]="DiDeoxyhexose",e[e.Pentose=7]="Pentose",e[e.Deoxynonulosonate=8]="Deoxynonulosonate",e[e.DiDeoxynonulosonate=9]="DiDeoxynonulosonate",e[e.Unknown=10]="Unknown",e[e.Assigned=11]="Assigned"})(Le||(Le={})),Le.Hexose+"",Le.HexNAc+"",Le.Hexosamine+"",Le.Hexuronate+"",Le.Deoxyhexose+"",Le.DeoxyhexNAc+"",Le.DiDeoxyhexose+"",Le.Pentose+"",Le.Deoxynonulosonate+"",Le.DiDeoxynonulosonate+"",Le.Unknown+"",Le.Assigned+"",Le.Hexose+"",kn.FilledSphere,Le.HexNAc+"",kn.FilledCube,Le.Hexosamine+"",kn.CrossedCube,Le.Hexuronate+"",kn.DividedDiamond,Le.Deoxyhexose+"",kn.FilledCone,Le.DeoxyhexNAc+"",kn.DevidedCone,Le.DiDeoxyhexose+"",kn.FlatBox,Le.Pentose+"",kn.FilledStar,Le.Deoxynonulosonate+"",kn.FilledDiamond,Le.DiDeoxynonulosonate+"",kn.FlatDiamond,Le.Unknown+"",kn.FlatHexagon,Le.Assigned+"",kn.Pentagon;const ud={abbr:"Unk",name:"Unknown",color:Ze.Secondary,type:Le.Unknown},Yi=[{abbr:"Glc",name:"Glucose",color:Ze.Blue,type:Le.Hexose},{abbr:"Man",name:"Mannose",color:Ze.Green,type:Le.Hexose},{abbr:"Gal",name:"Galactose",color:Ze.Yellow,type:Le.Hexose},{abbr:"Gul",name:"Gulose",color:Ze.Orange,type:Le.Hexose},{abbr:"Alt",name:"Altrose",color:Ze.Pink,type:Le.Hexose},{abbr:"All",name:"Allose",color:Ze.Purple,type:Le.Hexose},{abbr:"Tal",name:"Talose",color:Ze.LightBlue,type:Le.Hexose},{abbr:"Ido",name:"Idose",color:Ze.Brown,type:Le.Hexose},{abbr:"GlcNAc",name:"N-Acetyl Glucosamine",color:Ze.Blue,type:Le.HexNAc},{abbr:"ManNAc",name:"N-Acetyl Mannosamine",color:Ze.Green,type:Le.HexNAc},{abbr:"GalNAc",name:"N-Acetyl Galactosamine",color:Ze.Yellow,type:Le.HexNAc},{abbr:"GulNAc",name:"N-Acetyl Gulosamine",color:Ze.Orange,type:Le.HexNAc},{abbr:"AltNAc",name:"N-Acetyl Altrosamine",color:Ze.Pink,type:Le.HexNAc},{abbr:"AllNAc",name:"N-Acetyl Allosamine",color:Ze.Purple,type:Le.HexNAc},{abbr:"TalNAc",name:"N-Acetyl Talosamine",color:Ze.LightBlue,type:Le.HexNAc},{abbr:"IdoNAc",name:"N-Acetyl Idosamine",color:Ze.Brown,type:Le.HexNAc},{abbr:"GlcN",name:"Glucosamine",color:Ze.Blue,type:Le.Hexosamine},{abbr:"ManN",name:"Mannosamine",color:Ze.Green,type:Le.Hexosamine},{abbr:"GalN",name:"Galactosamine",color:Ze.Yellow,type:Le.Hexosamine},{abbr:"GulN",name:"Gulosamine",color:Ze.Orange,type:Le.Hexosamine},{abbr:"AltN",name:"Altrosamine",color:Ze.Pink,type:Le.Hexosamine},{abbr:"AllN",name:"Allosamine",color:Ze.Purple,type:Le.Hexosamine},{abbr:"TalN",name:"Talosamine",color:Ze.LightBlue,type:Le.Hexosamine},{abbr:"IdoN",name:"Idosamine",color:Ze.Brown,type:Le.Hexosamine},{abbr:"GlcA",name:"Glucuronic Acid",color:Ze.Blue,type:Le.Hexuronate},{abbr:"ManA",name:"Mannuronic Acid",color:Ze.Green,type:Le.Hexuronate},{abbr:"GalA",name:"Galacturonic Acid",color:Ze.Yellow,type:Le.Hexuronate},{abbr:"GulA",name:"Guluronic Acid",color:Ze.Orange,type:Le.Hexuronate},{abbr:"AltA",name:"Altruronic Acid",color:Ze.Pink,type:Le.Hexuronate},{abbr:"AllA",name:"Alluronic Acid",color:Ze.Purple,type:Le.Hexuronate},{abbr:"TalA",name:"Taluronic Acid",color:Ze.LightBlue,type:Le.Hexuronate},{abbr:"IdoA",name:"Iduronic Acid",color:Ze.Brown,type:Le.Hexuronate},{abbr:"Qui",name:"Quinovose",color:Ze.Blue,type:Le.Deoxyhexose},{abbr:"Rha",name:"Rhamnose",color:Ze.Green,type:Le.Deoxyhexose},{abbr:"6dGul",name:"6-Deoxy Gulose",color:Ze.Orange,type:Le.Deoxyhexose},{abbr:"6dAlt",name:"6-Deoxy Altrose",color:Ze.Pink,type:Le.Deoxyhexose},{abbr:"6dTal",name:"6-Deoxy Talose",color:Ze.LightBlue,type:Le.Deoxyhexose},{abbr:"Fuc",name:"Fucose",color:Ze.Red,type:Le.Deoxyhexose},{abbr:"QuiNAc",name:"N-Acetyl Quinovosamine",color:Ze.Blue,type:Le.DeoxyhexNAc},{abbr:"RhaNAc",name:"N-Acetyl Rhamnosamine",color:Ze.Green,type:Le.DeoxyhexNAc},{abbr:"6dAltNAc",name:"N-Acetyl 6-Deoxy Altrosamine",color:Ze.Pink,type:Le.DeoxyhexNAc},{abbr:"6dTalNAc",name:"N-Acetyl 6-Deoxy Talosamine",color:Ze.LightBlue,type:Le.DeoxyhexNAc},{abbr:"FucNAc",name:"N-Acetyl Fucosamine",color:Ze.Red,type:Le.DeoxyhexNAc},{abbr:"Oli",name:"Olivose",color:Ze.Blue,type:Le.DiDeoxyhexose},{abbr:"Tyv",name:"Tyvelose",color:Ze.Green,type:Le.DiDeoxyhexose},{abbr:"Abe",name:"Abequose",color:Ze.Orange,type:Le.DiDeoxyhexose},{abbr:"Par",name:"Paratose",color:Ze.Pink,type:Le.DiDeoxyhexose},{abbr:"Dig",name:"Digitoxose",color:Ze.Purple,type:Le.DiDeoxyhexose},{abbr:"Col",name:"Colitose",color:Ze.LightBlue,type:Le.DiDeoxyhexose},{abbr:"Ara",name:"Arabinose",color:Ze.Green,type:Le.Pentose},{abbr:"Lyx",name:"Lyxose",color:Ze.Yellow,type:Le.Pentose},{abbr:"Xyl",name:"Xylose",color:Ze.Orange,type:Le.Pentose},{abbr:"Rib",name:"Ribose",color:Ze.Pink,type:Le.Pentose},{abbr:"Kdn",name:"Keto-Deoxy Nonulonic Acid",color:Ze.Green,type:Le.Deoxynonulosonate},{abbr:"Neu5Ac",name:"N-Acetyl Neuraminic Acid",color:Ze.Purple,type:Le.Deoxynonulosonate},{abbr:"Neu5Gc",name:"N-Glycolyl Neuraminic Acid",color:Ze.LightBlue,type:Le.Deoxynonulosonate},{abbr:"Neu",name:"Neuraminic Acid",color:Ze.Brown,type:Le.Deoxynonulosonate},{abbr:"Sia",name:"Sialic acid",color:Ze.Red,type:Le.Deoxynonulosonate},{abbr:"Pse",name:"Pseudaminic Acid",color:Ze.Green,type:Le.DiDeoxynonulosonate},{abbr:"Leg",name:"Legionaminic Acid",color:Ze.Yellow,type:Le.DiDeoxynonulosonate},{abbr:"Aci",name:"Acinetaminic Acid",color:Ze.Pink,type:Le.DiDeoxynonulosonate},{abbr:"4eLeg",name:"4-Epilegionaminic Acid",color:Ze.LightBlue,type:Le.DiDeoxynonulosonate},{abbr:"Bac",name:"Bacillosamine",color:Ze.Blue,type:Le.Unknown},{abbr:"LDmanHep",name:"L-Glycero-D-Manno Heptose",color:Ze.Green,type:Le.Unknown},{abbr:"Kdo",name:"Keto-Deoxy Octulonic Acid",color:Ze.Yellow,type:Le.Unknown},{abbr:"Dha",name:"3-Deoxy Lyxo-Heptulosaric Acid",color:Ze.Orange,type:Le.Unknown},{abbr:"DDmanHep",name:"D-Glycero-D-Manno-Heptose",color:Ze.Pink,type:Le.Unknown},{abbr:"MurNAc",name:"N-Acetyl Muramic Acid",color:Ze.Purple,type:Le.Unknown},{abbr:"MurNGc",name:"N-Glycolyl Muramic Acid",color:Ze.LightBlue,type:Le.Unknown},{abbr:"Mur",name:"Muramic Acid",color:Ze.Brown,type:Le.Unknown},{abbr:"Api",name:"Apicose",color:Ze.Green,type:Le.Assigned},{abbr:"Fru",name:"Fructose",color:Ze.Green,type:Le.Assigned},{abbr:"Tag",name:"Tagatose",color:Ze.Yellow,type:Le.Assigned},{abbr:"Sor",name:"Sorbose",color:Ze.Orange,type:Le.Assigned},{abbr:"Psi",name:"Psicose",color:Ze.Pink,type:Le.Assigned}],nC=function(){const e=new Map;for(let t=0,n=Yi.length;t<n;++t){const r=Yi[t];e.set(r.abbr,r)}return e}();Ze.Blue,Ze.Green,Ze.Yellow,Ze.Orange,Ze.Pink,Ze.Purple,Ze.LightBlue,Ze.Brown,Ze.Red,Ze.Secondary;const uy={Glc:["GLC","BGC","Z8T","TRE","MLR"],Man:["MAN","BMA"],Gal:["GLA","GAL","GZL","GXL","GIV"],Gul:["4GL","GL0","GUP","Z8H"],Alt:["Z6H","3MK","SHD"],All:["AFD","ALL","WOO","Z2D"],Tal:["ZEE","A5C","SDY"],Ido:["ZCD","Z0F","4N2"],GlcNAc:["NDG","NAG","NGZ"],ManNAc:["BM3","BM7"],GalNAc:["A2G","NGA","YYQ"],GulNAc:["LXB"],AltNAc:[],AllNAc:["NAA"],TalNAc:[],IdoNAc:["LXZ","HSQ"],GlcN:["PA1","GCS"],ManN:["95Z"],GalN:["X6X","1GN"],GulN:[],AltN:[],AllN:[],TalN:[],IdoN:[],GlcA:["GCU","BDP"],ManA:["MAV","BEM"],GalA:["ADA","GTR","GTK"],GulA:["LGU"],AltA:[],AllA:[],TalA:["X1X","X0X"],IdoA:["IDR"],Qui:["G6D","YYK"],Rha:["RAM","RM4","XXR"],"6dGul":["66O"],"6dAlt":[],"6dTal":[],Fuc:["FUC","FUL","FCA","FCB","GYE"],QuiNAc:["Z9W"],RhaNAc:[],"6dAltNAc":[],"6dTalNAc":[],FucNAc:["49T"],Oli:["DDA","RAE","Z5J"],Tyv:["TYV"],Abe:["ABE"],Par:["PZU"],Dig:["Z3U"],Col:[],Ara:["64K","ARA","ARB","AHR","FUB","BXY","BXX","SEJ"],Lyx:["LDY","Z4W"],Xyl:["XYS","XYP","XYZ","HSY","LXC"],Rib:["YYM","RIP","RIB","BDR","0MK","Z6J","32O"],Kdn:["KDM","KDN"],Neu5Ac:["SIA","SLB"],Neu5Gc:["NGC","NGE"],Neu:[],Sia:[],Pse:[],Leg:[],Aci:[],"4eLeg":[],Bac:[],LDmanHep:["GMH"],Kdo:["KDO"],Dha:[],DDmanHep:["289"],MurNAc:["MUB","AMU"],MurNGc:[],Mur:["1S4","MUR"],Api:["XXM"],Fru:["BDF","Z9N","FRU","LFR"],Tag:["T6T"],Sor:["SOE","UEA"],Psi:["PSV","SF6","SF9","TTV"]},ly={Glc:["AGLC","BGLC"],GlcNAc:["AGLCNA","BGLCNA","BGLCN0"],GlcA:["AGLCA","BGLCA","BGLCA0"],Man:["AMAN","BMAN"],Rha:["ARHM","BRHM"],Ara:["AARB","BARB"],Gal:["AGAL","BGAL"],GalNAc:["AGALNA","BGALNA"],Gul:["AGUL","BGUL"],Alt:["AALT","BALT"],All:["AALL","BALL"],Tal:["ATAL","BTAL"],Ido:["AIDO","BIDO"],IdoA:["AIDOA","BIDOA"],Fuc:["AFUC","BFUC"],Lyx:["ALYF","BLYF"],Xyl:["AXYL","BXYL","AXYF","BXYF"],Rib:["ARIB","BRIB"],Fru:["AFRU","BFRU"],Neu5Ac:["ANE5AC","BNE5AC"]},rC={Glc:["0GA","0GB","1GA","1GB","2GA","2GB","3GA","3GB","4GA","4GB","6GA","6GB","ZGA","ZGB","YGA","YGB","XGA","XGB","WGA","WGB","VGA","VGB","UGA","UGB","TGA","TGB","SGA","SGB","RGA","RGB","QGA","QGB","PGA","PGB","0gA","0gB","1gA","1gB","2gA","2gB","3gA","3gB","4gA","4gB","6gA","6gB","ZgA","ZgB","YgA","YgB","XgA","XgB","WgA","WgB","VgA","VgB","UgA","UgB","TgA","TgB","SgA","SgB","RgA","RgB","QgA","QgB","PgA","PgB"],GlcNAc:["0YA","0YB","1YA","1YB","3YA","3YB","4YA","4YB","6YA","6YB","WYA","WYB","VYA","VYB","UYA","UYB","QYA","QYB","0yA","0yB","1yA","1yB","3yA","3yB","4yA","4yB","6yA","6yB","WyA","WyB","VyA","VyB","UyA","UyB","QyA","QyB","0YS","0Ys","3YS","3Ys","4YS","4Ys","6YS","6Ys","QYS","QYs","UYS","UYs","VYS","VYs","WYS","WYs","0yS","0ys","3yS","3ys","4yS","4ys"],GlcA:["0ZA","0ZB","1ZA","1ZB","2ZA","2ZB","3ZA","3ZB","4ZA","4ZB","ZZA","ZZB","YZA","YZB","WZA","WZB","TZA","TZB","0zA","0zB","1zA","1zB","2zA","2zB","3zA","3zB","4zA","4zB","ZzA","ZzB","YzA","YzB","WzA","WzB","TzA","TzB","0ZBP"],GlcN:["0YN","3YN","4YN","6YN","WYN","VYN","UYN","QYN","3Yn","4Yn","WYn","0Yn","0YP","3YP","4YP","6YP","WYP","VYP","UYP","QYP","0Yp","3Yp","4Yp","WYp"],Man:["0MA","0MB","1MA","1MB","2MA","2MB","3MA","3MB","4MA","4MB","6MA","6MB","ZMA","ZMB","YMA","YMB","XMA","XMB","WMA","WMB","VMA","VMB","UMA","UMB","TMA","TMB","SMA","SMB","RMA","RMB","QMA","QMB","PMA","PMB","0mA","0mB","1mA","1mB","2mA","2mB","3mA","3mB","4mA","4mB","6mA","6mB","ZmA","ZmB","YmA","YmB","XmA","XmB","WmA","WmB","VmA","VmB","UmA","UmB","TmA","TmB","SmA","SmB","RmA","RmB","QmA","QmB","PmA","PmB"],ManNAc:["0WA","0WB","1WA","1WB","3WA","3WB","4WA","4WB","6WA","6WB","WWA","WWB","VWA","VWB","UWA","UWB","QWA","QWB","0wA","0wB","1wA","1wB","3wA","3wB","4wA","4wB","6wA","6wB","WwA","WwB","VwA","VwB","UwA","UwB","QwA","QwB"],Ara:["0AA","0AB","1AA","1AB","2AA","2AB","3AA","3AB","4AA","4AB","ZAA","ZAB","YAA","YAB","WAA","WAB","TAA","TAB","0AD","0AU","1AD","1AU","2AD","2AU","3AD","3AU","5AD","5AU","ZAD","ZAU","0aA","0aB","1aA","1aB","2aA","2aB","3aA","3aB","4aA","4aB","ZaA","ZaB","YaA","YaB","WaA","WaB","TaA","TaB","0aD","0aU","1aD","1aU","2aD","2aU","3aD","3aU","5aD","5aU","ZaD","ZaU"],Gal:["0LA","0LB","1LA","1LB","2LA","2LB","3LA","3LB","4LA","4LB","6LA","6LB","ZLA","ZLB","YLA","YLB","XLA","XLB","WLA","WLB","VLA","VLB","ULA","ULB","TLA","TLB","SLA","SLB","RLA","RLB","QLA","QLB","PLA","PLB","0lA","0lB","1lA","1lB","2lA","2lB","3lA","3lB","4lA","4lB","6lA","6lB","ZlA","ZlB","YlA","YlB","XlA","XlB","WlA","WlB","VlA","VlB","UlA","UlB","TlA","TlB","SlA","SlB","RlA","RlB","QlA","QlB","PlA","PlB"],GalNAc:["0VA","0VB","1VA","1VB","3VA","3VB","4VA","4VB","6VA","6VB","WVA","WVB","VVA","VVB","UVA","UVB","QVA","QVB","0vA","0vB","1vA","1vB","3vA","3vB","4vA","4vB","6vA","6vB","WvA","WvB","VvA","VvB","UvA","UvB","QvA","QvB"],GalA:["0OA","0OB","1OA","1OB","2OA","2OB","3OA","3OB","4OA","4OB","ZOA","ZOB","YOA","YOB","WOA","WOB","TOA","TOB","0oA","0oB","1oA","1oB","2oA","2oB","3oA","3oB","4oA","4oB","ZoA","ZoB","YoA","YoB","WoA","WoB","ToA","ToB"],Gul:["0KA","0KB","1KA","1KB","2KA","2KB","3KA","3KB","4KA","4KB","6KA","6KB","ZKA","ZKB","YKA","YKB","XKA","XKB","WKA","WKB","VKA","VKB","UKA","UKB","TKA","TKB","SKA","SKB","RKA","RKB","QKA","QKB","PKA","PKB","0kA","0kB","1kA","1kB","2kA","2kB","3kA","3kB","4kA","4kB","6kA","6kB","ZkA","ZkB","YkA","YkB","XkA","XkB","WkA","WkB","VkA","VkB","UkA","UkB","TkA","TkB","SkA","SkB","RkA","RkB","QkA","QkB","PkA","PkB"],Alt:["0EA","0EB","1EA","1EB","2EA","2EB","3EA","3EB","4EA","4EB","6EA","6EB","ZEA","ZEB","YEA","YEB","XEA","XEB","WEA","WEB","VEA","VEB","UEA","UEB","TEA","TEB","SEA","SEB","REA","REB","QEA","QEB","PEA","PEB","0eA","0eB","1eA","1eB","2eA","2eB","3eA","3eB","4eA","4eB","6eA","6eB","ZeA","ZeB","YeA","YeB","XeA","XeB","WeA","WeB","VeA","VeB","UeA","UeB","TeA","TeB","SeA","SeB","ReA","ReB","QeA","QeB","PeA","PeB"],All:["0NA","0NB","1NA","1NB","2NA","2NB","3NA","3NB","4NA","4NB","6NA","6NB","ZNA","ZNB","YNA","YNB","XNA","XNB","WNA","WNB","VNA","VNB","UNA","UNB","TNA","TNB","SNA","SNB","RNA","RNB","QNA","QNB","PNA","PNB","0nA","0nB","1nA","1nB","2nA","2nB","3nA","3nB","4nA","4nB","6nA","6nB","ZnA","ZnB","YnA","YnB","XnA","XnB","WnA","WnB","VnA","VnB","UnA","UnB","TnA","TnB","SnA","SnB","RnA","RnB","QnA","QnB","PnA","PnB"],Tal:["0TA","0TB","1TA","1TB","2TA","2TB","3TA","3TB","4TA","4TB","6TA","6TB","ZTA","ZTB","YTA","YTB","XTA","XTB","WTA","WTB","VTA","VTB","UTA","UTB","TTA","TTB","STA","STB","RTA","RTB","QTA","QTB","PTA","PTB","0tA","0tB","1tA","1tB","2tA","2tB","3tA","3tB","4tA","4tB","6tA","6tB","ZtA","ZtB","YtA","YtB","XtA","XtB","WtA","WtB","VtA","VtB","UtA","UtB","TtA","TtB","StA","StB","RtA","RtB","QtA","QtB","PtA","PtB"],Ido:["0IA","0IB","1IA","1IB","2IA","2IB","3IA","3IB","4IA","4IB","6IA","6IB","ZIA","ZIB","YIA","YIB","XIA","XIB","WIA","WIB","VIA","VIB","UIA","UIB","TIA","TIB","SIA","SIB","RIA","RIB","QIA","QIB","PIA","PIB","0iA","0iB","1iA","1iB","2iA","2iB","3iA","3iB","4iA","4iB","6iA","6iB","ZiA","ZiB","YiA","YiB","XiA","XiB","WiA","WiB","ViA","ViB","UiA","UiB","TiA","TiB","SiA","SiB","RiA","RiB","QiA","QiB","PiA","PiB"],IdoA:["0UA","0UB","1UA","1UB","2UA","2UB","3UA","3UB","4UA","4UB","ZUA","ZUB","YUA","YUB","WUA","WUB","TUA","TUB","0uA","0uB","1uA","1uB","2uA","2uB","3uA","3uB","4uA","4uB","ZuA","ZuB","YuA","YuB","WuA","WuB","TuA","TuB","YuAP"],Fuc:["0FA","0FB","1FA","1FB","2FA","2FB","3FA","3FB","4FA","4FB","ZFA","ZFB","YFA","YFB","WFA","WFB","TFA","TFB","0fA","0fB","1fA","1fB","2fA","2fB","3fA","3fB","4fA","4fB","ZfA","ZfB","YfA","YfB","WfA","WfB","TfA","TfB"],Rha:["0HA","0HB","1HA","1HB","2HA","2HB","3HA","3HB","4HA","4HB","ZHA","ZHB","YHA","YHB","WHA","WHB","THA","THB","0hA","0hB","1hA","1hB","2hA","2hB","3hA","3hB","4hA","4hB","ZhA","ZhB","YhA","YhB","WhA","WhB","ThA","ThB"],Qui:["0QA","0QB","1QA","1QB","2QA","2QB","3QA","3QB","4QA","4QB","ZQA","ZQB","YQA","YQB","WQA","WQB","TQA","TQB","0qA","0qB","1qA","1qB","2qA","2qB","3qA","3qB","4qA","4qB","ZqA","ZqB","YqA","YqB","WqA","WqB","TqA","TqB"],Lyx:["0DA","0DB","1DA","1DB","2DA","2DB","3DA","3DB","4DA","4DB","ZDA","ZDB","YDA","YDB","WDA","WDB","TDA","TDB","0DD","0DU","1DD","1DU","2DD","2DU","3DD","3DU","5DD","5DU","ZDD","ZDU","0dA","0dB","1dA","1dB","2dA","2dB","3dA","3dB","4dA","4dB","ZdA","ZdB","YdA","YdB","WdA","WdB","TdA","TdB","0dD","0dU","1dD","1dU","2dD","2dU","3dD","3dU","5dD","5dU","ZdD","ZdU"],Xyl:["0XA","0XB","1XA","1XB","2XA","2XB","3XA","3XB","4XA","4XB","ZXA","ZXB","YXA","YXB","WXA","WXB","TXA","TXB","0XD","0XU","1XD","1XU","2XD","2XU","3XD","3XU","5XD","5XU","ZXD","ZXU","0xA","0xB","1xA","1xB","2xA","2xB","3xA","3xB","4xA","4xB","ZxA","ZxB","YxA","YxB","WxA","WxB","TxA","TxB","0xD","0xU","1xD","1xU","2xD","2xU","3xD","3xU","5xD","5xU","ZxD","ZxU"],Rib:["0RA","0RB","1RA","1RB","2RA","2RB","3RA","3RB","4RA","4RB","ZRA","ZRB","YRA","YRB","WRA","WRB","TRA","TRB","0RD","0RU","1RD","1RU","2RD","2RU","3RD","3RU","5RD","5RU","ZRD","ZRU","0rA","0rB","1rA","1rB","2rA","2rB","3rA","3rB","4rA","4rB","ZrA","ZrB","YrA","YrB","WrA","WrB","TrA","TrB","0rD","0rU","1rD","1rU","2rD","2rU","3rD","3rU","5rD","5rU","ZrD","ZrU"],Fru:["0CA","0CB","1CA","1CB","2CA","2CB","3CA","3CB","4CA","4CB","5CA","5CB","WCA","WCB","0CD","0CU","1CD","1CU","2CD","2CU","3CD","3CU","4CD","4CU","6CD","6CU","WCD","WCU","VCD","VCU","UCD","UCU","QCD","QCU","0cA","0cB","1cA","1cB","2cA","2cB","3cA","3cB","4cA","4cB","5cA","5cB","WcA","WcB","0cD","0cU","1cD","1cU","2cD","2cU","3cD","3cU","4cD","4cU","6cD","6cU","WcD","WcU","VcD","VcU","UcD","UcU","QcD","QcU"],Tag:["0JA","0JB","1JA","1JB","2JA","2JB","3JA","3JB","4JA","4JB","5JA","5JB","WJA","WJB","0JD","0JU","1JD","1JU","2JD","2JU","3JD","3JU","4JD","4JU","6JD","6JU","WJD","WJU","VJD","VJU","UJD","UJU","QJD","QJU","0jA","0jB","1jA","1jB","2jA","2jB","3jA","3jB","4jA","4jB","5jA","5jB","WjA","WjB","0jD","0jU","1jD","1jU","2jD","2jU","3jD","3jU","4jD","4jU","6jD","6jU","WjD","WjU","VjD","VjU","UjD","UjU","QjD","QjU"],Sor:["0BA","0BB","1BA","1BB","2BA","2BB","3BA","3BB","4BA","4BB","5BA","5BB","WBA","WBB","0BD","0BU","1BD","1BU","2BD","2BU","3BD","3BU","4BD","4BU","6BD","6BU","WBD","WBU","VBD","VBU","UBD","UBU","QBD","QBU","0bA","0bB","1bA","1bB","2bA","2bB","3bA","3bB","4bA","4bB","5bA","5bB","WbA","WbB","0bD","0bU","1bD","1bU","2bD","2bU","3bD","3bU","4bD","4bU","6bD","6bU","WbD","WbU","VbD","VbU","UbD","UbU","QbD","QbU"],Psi:["0PA","0PB","1PA","1PB","2PA","2PB","3PA","3PB","4PA","4PB","5PA","5PB","WPA","WPB","0PD","0PU","1PD","1PU","2PD","2PU","3PD","3PU","4PD","4PU","6PD","6PU","WPD","WPU","VPD","VPU","UPD","UPU","QPD","QPU","0pA","0pB","1pA","1pB","2pA","2pB","3pA","3pB","4pA","4pB","5pA","5pB","WpA","WpB","0pD","0pU","1pD","1pU","2pD","2pU","3pD","3pU","4pD","4pU","6pD","6pU","WpD","WpU","VpD","VpU","UpD","UpU","QpD","QpU"],Neu5Ac:["0SA","0SB","4SA","4SB","7SA","7SB","8SA","8SB","9SA","9SB","ASA","ASB","BSA","BSB","CSA","CSB","DSA","DSB","ESA","ESB","FSA","FSB","GSA","GSB","HSA","HSB","ISA","ISB","JSA","JSB","KSA","KSB","0sA","0sB","4sA","4sB","7sA","7sB","8sA","8sB","9sA","9sB","AsA","AsB","BsA","BsB","CsA","CsB","DsA","DsB","EsA","EsB","FsA","FsB","GsA","GsB","HsA","HsB","IsA","IsB","JsA","JsB","KsA","KsB"],Neu5Gc:["0GL","4GL","7GL","8GL","9GL","CGL","DGL","EGL","FGL","GGL","HGL","IGL","JGL","KGL","0gL","4gL","7gL","8gL","9gL","AgL","BgL","CgL","DgL","EgL","FgL","GgL","HgL","IgL","JgL","KgL"],Tyv:["0TV","0Tv","1TV","1Tv","2TV","2Tv","4TV","4Tv","YTV","YTv","0tV","0tv","1tV","1tv","2tV","2tv","4tV","4tv","YtV","Ytv"],Abe:["0AE","2AE","4AE","YGa","0AF","2AF","4AF","YAF"],Bac:["0BC","3BC","0bC","3bC"],Kdn:["0KN","4KN","5KN","7KN","8KN","9KN","AKN","BKN","CKN","DKN","EKN","FKN","GKN","HKN","IKN","JKN","KKN","LKN","MKN","NKN","OKN","PKN","QKN","RKN","SKN","TKN","UKN","VKN","WKN","XKN","YKN","0Kn","4Kn","5Kn","7Kn","8Kn","9Kn","AKn","BKn","CKn","DKn","EKn","FKn","GKn","HKn","IKn","JKn","KKn","LKn","MKn","NKn","OKn","PKn","QKn","RKn","SKn","TKn","UKn","VKn","WKn","XKn","YKn"],Kdo:["0KO","4KO","5KO","7KO","8KO","AKO","BKO","CKO","DKO","EKO","FKO","GKO","HKO","IKO","JKO","KKO","0Ko","4Ko","5Ko","7Ko","8Ko","AKo","BKo","CKo","DKo","EKo","FKo","GKo","HKo","IKo","JKo","KKo"]},iC=function(){const e=new Map;for(let t=0,n=Yi.length;t<n;++t){const r=Yi[t],i=uy[r.abbr];if(i)for(let s=0,c=i.length;s<c;++s)e.set(i[s],r);const o=ly[r.abbr];if(o)for(let s=0,c=o.length;s<c;++s)e.set(o[s],r)}return cy.forEach(t=>{e.has(t)||e.set(t,ud)}),e}();(function(){const e=new Map;for(let t=0,n=Yi.length;t<n;++t){const r=Yi[t],i=uy[r.abbr];if(i)for(let c=0,a=i.length;c<a;++c)e.set(i[c],r);const o=ly[r.abbr];if(o)for(let c=0,a=o.length;c<a;++c)e.set(o[c],r);const s=rC[r.abbr];if(s)for(let c=0,a=s.length;c<a;++c)e.has(s[c])||e.set(s[c],r)}return cy.forEach(t=>{e.has(t)||e.set(t,ud)}),e})();let $r=iC;var gr;(function(e){function t(m){return Array.from(m.values())}e.toArray=t;function n(m,h){if(m===h)return!0;if(m.size<h.size)return!1;for(const p of h)if(!m.has(p))return!1;return!0}e.isSuperset=n;function r(m,...h){for(let p=0;p<h.length;p++)for(const _ of h[p])m.add(_);return m}e.add=r;function i(m,h){const p=new Set(m);if(m===h)return p;for(const _ of h)p.add(_);return p}e.union=i;function o(...m){if(m.length===0)return new Set;const h=new Set(m[0]);for(let p=1,_=m.length;p<_;p++)for(const y of m[p])h.add(y);return h}e.unionMany=o;function s(m){if(m.length===0)return new Set;const h=new Set(m[0]);for(let p=1;p<m.length;p++)for(const _ of m[p])h.add(_);return h}e.unionManyArrays=s;function c(m,h){if(m===h)return new Set(m);const p=new Set;for(const _ of h)m.has(_)&&p.add(_);return p}e.intersection=c;function a(m,h){if(m===h)return m.size>0;m.size<h.size&&([m,h]=[h,m]);for(const p of h)if(m.has(p))return!0;return!1}e.areIntersecting=a;function u(m,h){if(m===h)return m.size;m.size<h.size&&([m,h]=[h,m]);let p=0;for(const _ of h)m.has(_)&&(p+=1);return p}e.intersectionSize=u;function l(m,h){if(m===h)return new Set;const p=new Set(m);for(const _ of h)p.delete(_);return p}e.difference=l;function f(m,h){if(m===h)return 0;let p=m.size;for(const _ of m)h.has(_)&&(p-=1);return p}e.differenceSize=f;function d(m,h){if(m===h)return!0;if(m.size!==h.size)return!1;for(const p of h)if(!m.has(p))return!1;return!0}e.areEqual=d})(gr||(gr={}));const dy=new Set(["DAPC","DBPC","DFPC","DGPC","DIPC","DLPC","DNPC","DOPC","DPPC","DRPC","DTPC","DVPC","DXPC","DYPC","LPPC","PAPC","PEPC","PGPC","PIPC","POPC","PRPC","PUPC","DAPE","DBPE","DFPE","DGPE","DIPE","DLPE","DNPE","DOPE","DPPE","DRPE","DTPE","DUPE","DVPE","DXPE","DYPE","LPPE","PAPE","PGPE","PIPE","POPE","PQPE","PRPE","PUPE","DAPS","DBPS","DFPS","DGPS","DIPS","DLPS","DNPS","DOPS","DPPS","DRPS","DTPS","DUPS","DVPS","DXPS","DYPS","LPPS","PAPS","PGPS","PIPS","POPS","PQPS","PRPS","PUPS","DAPA","DBPA","DFPA","DGPA","DIPA","DLPA","DNPA","DOPA","DPPA","DRPA","DTPA","DVPA","DXPA","DYPA","LPPA","PAPA","PGPA","PIPA","POPA","PRPA","PUPA","DAPG","DBPG","DFPG","DGPG","DIPG","DLPG","DNPG","DOPG","DPPG","DRPG","DTPG","DVPG","DXPG","DYPG","LPPG","PAPG","PGPG","PIPG","POPG","PRPG","DMPC","DPP","DPPI","PAPI","PIPI","POP","POPI","PUPI","PVP","PVPI","PADG","PIDG","PODG","PUDG","PVDG","APC","CPC","IPC","LPC","OPC","PPC","TPC","UPC","VPC","BNSM","DBSM","DPSM","DXSM","PGSM","PNSM","POSM","PVSM","XNSM","DPCE","DXCE","PNCE","XNCE"]),fy=new Set(["118","119","543","1AL","1CU","2FK","2HP","2OF","3CO","3MT","3NI","3OF","3P8","4MO","4PU","4TI","6MO","ACT","AG","AL","ALF","AM","ATH","AU","AU3","AUC","AZI","BA","BCT","BEF","BF4","BO4","BR","BS3","BSY","CA","CAC","CD","CD1","CD3","CD5","CE","CF","CHT","CL","CO","CO3","CO5","CON","CR","CS","CSB","CU","CU1","CU3","CUA","CUZ","CYN","DME","DMI","DSC","DTI","DY","E4N","EDR","EMC","ER3","EU","EU3","F","FE","FE2","FPO","GA","GD3","GEP","HAI","HG","HGC","IN","IOD","IR","IR3","IRI","IUM","K","KO4","LA","LCO","LCP","LI","LU","MAC","MG","MH2","MH3","MLI","MMC","MN","MN3","MN5","MN6","MO1","MO2","MO3","MO4","MO5","MO6","MOO","MOS","MOW","MW1","MW2","MW3","NA","NA2","NA5","NA6","NAO","NAW","ND","NET","NH4","NI","NI1","NI2","NI3","NO2","NO3","NRU","NT3","O4M","OAA","OC1","OC2","OC3","OC4","OC5","OC6","OC7","OC8","OCL","OCM","OCN","OCO","OF1","OF2","OF3","OH","OS","OS4","OXL","PB","PBM","PD","PDV","PER","PI","PO3","PO4","PR","PT","PT4","PTN","RB","RH3","RHD","RHF","RU","SB","SCN","SE4","SEK","SM","SMO","SO3","SO4","SR","T1A","TB","TBA","TCN","TEA","TH","THE","TL","TMA","TRA","UNX","V","VN3","VO4","W","WO5","Y1","YB","YB2","YH","YT3","ZCM","ZN","ZN2","ZN3","ZNO","ZO3","ZR","ZTM","NCO","OHX"]),oC=function(){const e=Object.create(null),t=[];for(let n=65;n<=90;n++)t[t.length]=String.fromCharCode(n);for(let n=97;n<=122;n++)t[t.length]=String.fromCharCode(n);for(let n=48;n<=57;n++)t[t.length]=String.fromCharCode(n);for(const n of t){e[n]=n.toUpperCase();for(const r of t){e[n+r]=(n+r).toUpperCase();for(const i of t)e[n+r+i]=(n+r+i).toUpperCase()}}return e}();function Zi(e){return oC[e]||e.toUpperCase()}new Map([[1,"H"],[2,"He"],[3,"Li"],[4,"Be"],[5,"B"],[6,"C"],[7,"N"],[8,"O"],[9,"F"],[10,"Ne"],[11,"Na"],[12,"Mg"],[13,"Al"],[14,"Si"],[15,"P"],[16,"S"],[17,"Cl"],[18,"Ar"],[19,"K"],[20,"Ca"],[21,"Sc"],[22,"Ti"],[23,"V"],[24,"Cr"],[25,"Mn"],[26,"Fe"],[27,"Co"],[28,"Ni"],[29,"Cu"],[30,"Zn"],[31,"Ga"],[32,"Ge"],[33,"As"],[34,"Se"],[35,"Br"],[36,"Kr"],[37,"Rb"],[38,"Sr"],[39,"Y"],[40,"Zr"],[41,"Nb"],[42,"Mo"],[43,"Tc"],[44,"Ru"],[45,"Rh"],[46,"Pd"],[47,"Ag"],[48,"Cd"],[49,"In"],[50,"Sn"],[51,"Sb"],[52,"Te"],[53,"I"],[54,"Xe"],[55,"Cs"],[56,"Ba"],[57,"La"],[58,"Ce"],[59,"Pr"],[60,"Nd"],[61,"Pm"],[62,"Sm"],[63,"Eu"],[64,"Gd"],[65,"Tb"],[66,"Dy"],[67,"Ho"],[68,"Er"],[69,"Tm"],[70,"Yb"],[71,"Lu"],[72,"Hf"],[73,"Ta"],[74,"W"],[75,"Re"],[76,"Os"],[77,"Ir"],[78,"Pt"],[79,"Au"],[80,"Hg"],[81,"Tl"],[82,"Pb"],[83,"Bi"],[84,"Po"],[85,"At"],[86,"Rn"],[87,"Fr"],[88,"Ra"],[89,"Ac"],[90,"Th"],[91,"Pa"],[92,"U"],[93,"Np"],[94,"Pu"],[95,"Am"],[96,"Cm"],[97,"Bk"],[98,"Cf"],[99,"Es"],[100,"Fm"],[101,"Md"],[102,"No"],[103,"Lr"],[104,"Rf"],[105,"Db"],[106,"Sg"],[107,"Bh"],[108,"Hs"],[109,"Mt"],[110,"Ds"],[111,"Rg"],[112,"Cn"],[113,"Uut"],[114,"Fl"],[115,"Uup"],[116,"Lv"],[117,"Uus"],[118,"Uuo"]].map(e=>[e[0],Zi(e[1])]));var my;(function(e){e[e.unknown=0]="unknown",e[e.polymer=1]="polymer",e[e["non-polymer"]=2]="non-polymer",e[e.macrolide=3]="macrolide",e[e.water=4]="water",e[e.branched=5]="branched"})(my||(my={}));var Nt;(function(e){e[e.Unknown=0]="Unknown",e[e.Other=1]="Other",e[e.Water=2]="Water",e[e.Ion=3]="Ion",e[e.Lipid=4]="Lipid",e[e.Protein=5]="Protein",e[e.RNA=6]="RNA",e[e.DNA=7]="DNA",e[e.PNA=8]="PNA",e[e.Saccharide=9]="Saccharide"})(Nt||(Nt={}));var un;(function(e){e[e.NA=0]="NA",e[e.Protein=1]="Protein",e[e.GammaProtein=2]="GammaProtein",e[e.BetaProtein=3]="BetaProtein",e[e.RNA=4]="RNA",e[e.DNA=5]="DNA",e[e.PNA=6]="PNA"})(un||(un={}));const sC={[un.NA]:{trace:new Set,directionFrom:new Set,directionTo:new Set,backboneStart:new Set,backboneEnd:new Set,coarseBackbone:new Set},[un.Protein]:{trace:new Set(["CA"]),directionFrom:new Set(["C"]),directionTo:new Set(["O","OC1","O1","OX1","OXT","OT1"]),backboneStart:new Set(["N"]),backboneEnd:new Set(["C"]),coarseBackbone:new Set(["CA","CA1","BB","BAS"])},[un.GammaProtein]:{trace:new Set(["CA"]),directionFrom:new Set(["C"]),directionTo:new Set(["O"]),backboneStart:new Set(["N"]),backboneEnd:new Set(["CD"]),coarseBackbone:new Set(["CA"])},[un.BetaProtein]:{trace:new Set(["CA"]),directionFrom:new Set(["C"]),directionTo:new Set(["O"]),backboneStart:new Set(["N"]),backboneEnd:new Set(["CG"]),coarseBackbone:new Set(["CA"])},[un.RNA]:{trace:new Set(["O3'","O3*"]),directionFrom:new Set(["C4'","C4*"]),directionTo:new Set(["C3'","C3*"]),backboneStart:new Set(["P"]),backboneEnd:new Set(["O3'","O3*"]),coarseBackbone:new Set(["P"])},[un.DNA]:{trace:new Set(["O3'","O3*"]),directionFrom:new Set(["C3'","C3*"]),directionTo:new Set(["C1'","C1*"]),backboneStart:new Set(["P"]),backboneEnd:new Set(["O3'","O3*"]),coarseBackbone:new Set(["P"])},[un.PNA]:{trace:new Set(["N4'","N4*"]),directionFrom:new Set(["N4'","N4*"]),directionTo:new Set(["C7'","C7*"]),backboneStart:new Set(["N1'","N1*"]),backboneEnd:new Set(["C'","C*"]),coarseBackbone:new Set(["P"])}},hy=new Set(["d-peptide linking","d-peptide nh3 amino terminus","d-peptide cooh carboxy terminus","d-gamma-peptide, c-delta linking","d-beta-peptide, c-gamma linking"]),py=new Set(["l-peptide linking","l-peptide nh3 amino terminus","l-peptide cooh carboxy terminus","l-gamma-peptide, c-delta linking","l-beta-peptide, c-gamma linking"]),aC=new Set(["d-gamma-peptide, c-delta linking","l-gamma-peptide, c-delta linking"]),cC=new Set(["d-beta-peptide, c-gamma linking","l-beta-peptide, c-gamma linking"]),uC=new Set(["d-peptide nh3 amino terminus","d-peptide cooh carboxy terminus","l-peptide nh3 amino terminus","l-peptide cooh carboxy terminus"]),_y=new Set(["peptide linking","peptide-like"]),lC=gr.unionMany(hy,py,_y),yy=new Set(["dna linking","l-dna linking","dna oh 5 prime terminus","dna oh 3 prime terminus"]),gy=new Set(["rna linking","l-rna linking","rna oh 5 prime terminus","rna oh 3 prime terminus"]),by=gr.unionMany(new Set(["d-saccharide, beta linking","l-saccharide, beta linking","d-saccharide, alpha linking","l-saccharide, alpha linking","l-saccharide","d-saccharide","saccharide"]),new Set(["d-saccharide 1,4 and 1,4 linking","l-saccharide 1,4 and 1,4 linking","d-saccharide 1,4 and 1,6 linking","l-saccharide 1,4 and 1,6 linking"])),dC=new Set(["non-polymer","other"]),fC=new Set(["ion"]),mC=new Set(["lipid"]),ld=new Set(["SOL","WAT","HOH","H2O","W","DOD","D3O","TIP","TIP3","TIP4","SPC"]),vy=new Set(["HIS","ARG","LYS","ILE","PHE","LEU","TRP","ALA","MET","PRO","CYS","ASN","VAL","GLY","SER","GLN","TYR","ASP","GLU","THR","SEC","PYL","UNK","MSE","SEP","TPO","PTR","PCA","HYP","HSD","HSE","HSP","LSN","ASPP","GLUP","HID","HIE","HIP","LYN","ASH","GLH"]),Ay=new Set(["DAL","DAR","DSG","DAS","DCY","DGL","DGN","DHI","DIL","DLE","DLY","MED","DPN","DPR","DSN","DTH","DTR","DTY","DVA","DNE"]),zs=gr.unionMany(vy,Ay),Ks=new Set(["A","C","T","G","I","U","N"]),$s=new Set(["DA","DC","DT","DG","DI","DU","DN"]),dd=new Set(["APN","CPN","TPN","GPN"]),xy=gr.unionMany(Ks,$s,dd),fd=gr.unionMany(zs,xy);function md(e,t){return t=t.toUpperCase(),dd.has(t)?Nt.PNA:lC.has(e)?Nt.Protein:gy.has(e)?Nt.RNA:yy.has(e)?Nt.DNA:by.has(e)?Nt.Saccharide:ld.has(t)?Nt.Water:fy.has(t)?Nt.Ion:dy.has(t)?Nt.Lipid:dC.has(e)?$r.has(t)?Nt.Saccharide:zs.has(t)?Nt.Protein:Ks.has(t)?Nt.RNA:$s.has(t)?Nt.DNA:Nt.Other:Nt.Unknown}function hC(e,t){return t===Nt.Protein?aC.has(e)?un.GammaProtein:cC.has(e)?un.BetaProtein:uC.has(e)?un.NA:un.Protein:t===Nt.RNA?un.RNA:t===Nt.DNA?un.DNA:t===Nt.PNA?un.PNA:un.NA}function Sy(e){return e=e.toUpperCase(),zs.has(e)?"peptide linking":Ks.has(e)?"rna linking":$s.has(e)?"dna linking":$r.has(e)?"saccharide":"other"}function pC(e){return{formula:"",formula_weight:0,id:e,name:e,mon_nstd_flag:fd.has(e)?"y":"n",pdbx_synonyms:[],type:Sy(e)}}function _C(e){return e=e.toUpperCase(),ld.has(e)?"water":fd.has(e)?"polymer":$r.has(e)?"branched":"non-polymer"}function yC(e,t){return e=e.toUpperCase(),py.has(t)?"polypeptide(L)":hy.has(t)?"polypeptide(D)":gy.has(t)?"polyribonucleotide":yy.has(t)?"polydeoxyribonucleotide":by.has(t)||$r.has(e)?"oligosaccharide":dd.has(e)?"peptide nucleic acid":vy.has(e)?"polypeptide(L)":Ay.has(e)?"polypeptide(D)":Ks.has(e)?"polyribonucleotide":$s.has(e)?"polydeoxyribonucleotide":fC.has(t)||fy.has(e)?"ion":mC.has(t)||dy.has(e)?"lipid":_y.has(t)?"peptide-like":"other"}function hd(e){return Cy(e)||pd(e)}function Cy(e){return e===Nt.DNA||e===Nt.RNA||e===Nt.PNA}function pd(e){return e===Nt.Protein}var ut;(function(e){e.is=fr.has,e.create=fr.create;let t;(function(n){n[n.None=0]="None",n[n.DoubleHelix=1]="DoubleHelix",n[n.Helix=2]="Helix",n[n.Beta=4]="Beta",n[n.Bend=8]="Bend",n[n.Turn=16]="Turn",n[n.LeftHanded=32]="LeftHanded",n[n.RightHanded=64]="RightHanded",n[n.ClassicTurn=128]="ClassicTurn",n[n.InverseTurn=256]="InverseTurn",n[n.HelixOther=512]="HelixOther",n[n.Helix27=1024]="Helix27",n[n.Helix3Ten=2048]="Helix3Ten",n[n.HelixAlpha=4096]="HelixAlpha",n[n.HelixGamma=8192]="HelixGamma",n[n.HelixOmega=16384]="HelixOmega",n[n.HelixPi=32768]="HelixPi",n[n.HelixPolyproline=65536]="HelixPolyproline",n[n.DoubleHelixOther=131072]="DoubleHelixOther",n[n.DoubleHelixZ=262144]="DoubleHelixZ",n[n.DoubleHelixA=524288]="DoubleHelixA",n[n.DoubleHelixB=1048576]="DoubleHelixB",n[n.BetaOther=2097152]="BetaOther",n[n.BetaStrand=4194304]="BetaStrand",n[n.BetaSheet=8388608]="BetaSheet",n[n.BetaBarell=16777216]="BetaBarell",n[n.TurnOther=33554432]="TurnOther",n[n.Turn1=67108864]="Turn1",n[n.Turn2=134217728]="Turn2",n[n.Turn3=268435456]="Turn3",n[n.NA=536870912]="NA"})(t=e.Flag||(e.Flag={})),e.SecondaryStructureMmcif={helx_lh_27_p:t.Helix|t.LeftHanded|t.Helix27,helx_lh_3t_p:t.Helix|t.LeftHanded|t.Helix3Ten,helx_lh_al_p:t.Helix|t.LeftHanded|t.HelixAlpha,helx_lh_a_n:t.DoubleHelix|t.LeftHanded|t.DoubleHelixA,helx_lh_b_n:t.DoubleHelix|t.LeftHanded|t.DoubleHelixB,helx_lh_ga_p:t.Helix|t.LeftHanded|t.HelixGamma,helx_lh_n:t.DoubleHelix|t.LeftHanded,helx_lh_om_p:t.Helix|t.LeftHanded|t.HelixOmega,helx_lh_ot_n:t.DoubleHelix|t.LeftHanded|t.DoubleHelixOther,helx_lh_ot_p:t.Helix|t.LeftHanded|t.HelixOther,helx_lh_p:t.Helix|t.LeftHanded,helx_lh_pi_p:t.Helix|t.LeftHanded|t.HelixPi,helx_lh_pp_p:t.Helix|t.LeftHanded|t.HelixPolyproline,helx_lh_z_n:t.DoubleHelix|t.LeftHanded|t.DoubleHelixZ,helx_n:t.DoubleHelix,helx_ot_n:t.DoubleHelix,helx_ot_p:t.Helix,helx_p:t.Helix,helx_rh_27_p:t.Helix|t.RightHanded|t.Helix27,helx_rh_3t_p:t.Helix|t.RightHanded|t.Helix3Ten,helx_rh_al_p:t.Helix|t.RightHanded|t.HelixAlpha,helx_rh_a_n:t.DoubleHelix|t.RightHanded|t.DoubleHelixA,helx_rh_b_n:t.DoubleHelix|t.RightHanded|t.DoubleHelixB,helx_rh_ga_p:t.Helix|t.RightHanded|t.HelixGamma,helx_rh_n:t.DoubleHelix|t.RightHanded,helx_rh_om_p:t.Helix|t.RightHanded|t.HelixOmega,helx_rh_ot_n:t.DoubleHelix|t.RightHanded|t.DoubleHelixOther,helx_rh_ot_p:t.Helix|t.RightHanded|t.HelixOther,helx_rh_p:t.Helix|t.RightHanded,helx_rh_pi_p:t.Helix|t.RightHanded|t.HelixPi,helx_rh_pp_p:t.Helix|t.RightHanded|t.HelixPolyproline,helx_rh_z_n:t.DoubleHelix|t.RightHanded|t.DoubleHelixZ,strn:t.Beta|t.BetaStrand,turn_ot_p:t.Turn|t.TurnOther,turn_p:t.Turn,turn_ty1p_p:t.Turn|t.InverseTurn|t.Turn1,turn_ty1_p:t.Turn|t.ClassicTurn|t.Turn1,turn_ty2p_p:t.Turn|t.InverseTurn|t.Turn2,turn_ty2_p:t.Turn|t.ClassicTurn|t.Turn2,turn_ty3p_p:t.Turn|t.InverseTurn|t.Turn3,turn_ty3_p:t.Turn|t.ClassicTurn|t.Turn3,bend:t.Bend,other:t.None},e.SecondaryStructurePdb={1:t.Helix|t.RightHanded|t.HelixAlpha,2:t.Helix|t.RightHanded|t.HelixOmega,3:t.Helix|t.RightHanded|t.HelixPi,4:t.Helix|t.RightHanded|t.HelixGamma,5:t.Helix|t.RightHanded|t.Helix3Ten,6:t.Helix|t.LeftHanded|t.HelixAlpha,7:t.Helix|t.LeftHanded|t.HelixOmega,8:t.Helix|t.LeftHanded|t.HelixGamma,9:t.Helix|t.Helix27,10:t.Helix|t.HelixPolyproline},e.SecondaryStructureStride={H:t.Helix|t.HelixAlpha,G:t.Helix|t.Helix3Ten,I:t.Helix|t.HelixPi,E:t.Beta|t.BetaSheet,B:t.Beta|t.BetaStrand,T:t.Turn,C:t.NA},e.SecondaryStructureDssp={H:t.Helix|t.HelixAlpha,B:t.Beta|t.BetaStrand,E:t.Beta|t.BetaSheet,G:t.Helix|t.Helix3Ten,I:t.Helix|t.HelixPi,T:t.Turn,S:t.Bend}})(ut||(ut={}));var pt;(function(e){e.is=fr.has;let t;(function(a){a[a.None=0]="None",a[a.Covalent=1]="Covalent",a[a.MetallicCoordination=2]="MetallicCoordination",a[a.HydrogenBond=4]="HydrogenBond",a[a.Disulfide=8]="Disulfide",a[a.Aromatic=16]="Aromatic",a[a.Computed=32]="Computed"})(t=e.Flag||(e.Flag={}));function n(a){return fr.create(a)}e.create=n;function r(a){return(a&e.Flag.Covalent)!==0}e.isCovalent=r;function i(a){return a===Math.pow(2,6)-1}e.isAll=i,e.Names={covalent:t.Covalent,"metal-coordination":t.MetallicCoordination,"hydrogen-bond":t.HydrogenBond,disulfide:t.Disulfide,aromatic:t.Aromatic,computed:t.Computed};function o(a){return a in e.Names}e.isName=o;function s(a){switch(a){case"covalent":return t.Covalent;case"metal-coordination":return t.MetallicCoordination;case"hydrogen-bond":return t.HydrogenBond;case"disulfide":return t.Disulfide;case"aromatic":return t.Aromatic;case"computed":return t.Computed}}e.fromName=s;function c(a){let u=t.None;for(let l=0,f=a.length;l<f;++l)u|=s(a[l]);return u}e.fromNames=c})(pt||(pt={}));function gC(e,t,n,r){const i=new pr.EdgeBuilder(r,e,t),o=new Int32Array(i.slotCount),s=new Array(i.slotCount),c=new Array(i.slotCount),a=new Int8Array(i.slotCount),u=new Array(i.slotCount),l=new Array(i.slotCount);for(let f=0,d=i.edgeCount;f<d;f++)i.addNextEdge(),i.assignProperty(o,n.key?n.key[f]:-1),i.assignDirectedProperty(s,n.operatorA?n.operatorA[f]:-1,c,n.operatorB?n.operatorB[f]:-1),i.assignProperty(a,n.order?n.order[f]:1),i.assignProperty(u,n.distance?n.distance[f]:-1),i.assignProperty(l,n.flag?n.flag[f]:pt.Flag.Covalent);return i.createGraph({key:o,operatorA:s,operatorB:c,order:a,distance:u,flag:l})}var xn;(function(e){e.Descriptor={name:"index_pair_bonds"},e.Provider=_r.create(e.Descriptor,{asDynamic:!0}),e.DefaultProps={maxDistance:-1,cacheable:!0};function t(r,i={}){const o={...e.DefaultProps,...i},{pairs:s,count:c}=r,a=s.indexA.toArray(),u=s.indexB.toArray(),l=s.key&&s.key.toArray(),f=s.operatorA&&s.operatorA.toArray(),d=s.operatorB&&s.operatorB.toArray(),m=s.order&&s.order.toArray(),h=s.distance&&s.distance.toArray(),p=s.flag&&s.flag.toArray();let _=!1;if(f&&d){_=!0;for(let A=0,g=f.length;A<g;++A)if(f[A]===-1||d[A]===-1){_=!1;break}}const y=gC(a,u,{key:l,operatorA:f,operatorB:d,order:m,distance:h,flag:p},c),v=new Map;if(_){const{operatorA:A,operatorB:g}=y.edgeProps;for(let b=0,C=A.length;b<C;++b)if(A[b]===g[b]){const I=A[b];v.has(I)?v.get(I).push(b):v.set(I,[b])}}return{bonds:y,maxDistance:o.maxDistance,cacheable:o.cacheable,hasOperators:_,bySameOperator:v}}e.fromData=t;function n(r,i,o,s,c){let a,u,l,f;i<o?(a=i,u=o,l=s,f=c):(a=o,u=i,l=c,f=s);for(let d=r.offset[a],m=r.offset[a+1];d<m;d++)if(r.b[d]===u&&r.edgeProps.operatorA[d]===l&&r.edgeProps.operatorB[d]===f)return d;return-1}e.getEdgeIndexForOperators=n})(xn||(xn={}));function tr(){return tr.empty()}(function(e){function t(d,m,h,p){return{origin:d,dirA:m,dirB:h,dirC:p}}e.create=t;function n(){return{origin:O(),dirA:O(),dirB:O(),dirC:O()}}e.empty=n;function r(d,m){return O.copy(d.origin,m.origin),O.copy(d.dirA,m.dirA),O.copy(d.dirB,m.dirB),O.copy(d.dirC,m.dirC),d}e.copy=r;function i(d){return r(n(),d)}e.clone=i;function o(d,m){return O.set(d,O.magnitude(m.dirA)*2,O.magnitude(m.dirB)*2,O.magnitude(m.dirC)*2)}e.size=o;const s=O();function c(d){return o(s,d),s[0]*s[1]*s[2]}e.volume=c;function a(d,m){return O.copy(d.origin,m.origin),O.normalize(d.dirA,m.dirA),O.normalize(d.dirB,m.dirB),O.normalize(d.dirC,m.dirC),d}e.normalize=a;const u=jn();function l(d,m,h){O.transformMat4(d.origin,m.origin,h);const p=jn.directionTransform(u,h);return O.transformMat3(d.dirA,m.dirA,p),O.transformMat3(d.dirB,m.dirB,p),O.transformMat3(d.dirC,m.dirC,p),d}e.transform=l;function f(d,m,h){return O.scale(d.dirA,m.dirA,h),O.scale(d.dirB,m.dirB,h),O.scale(d.dirC,m.dirC,h),d}e.scale=f})(tr||(tr={}));var on;(function(e){function t(d,m,h=Float32Array){const p=d*m;return{data:new h(p),size:p,cols:d,rows:m}}e.create=t;function n(d,m,h){return d.data[d.rows*h+m]}e.get=n;function r(d,m,h,p){return d.data[d.rows*h+m]=p,d}e.set=r;function i(d,m,h,p){return d.data[d.rows*h+m]+=p,d}e.add=i;function o(d){return d.data.fill(0),d}e.makeZero=o;function s(d){return{data:d.data.slice(),size:d.size,cols:d.cols,rows:d.rows}}e.clone=s;function c(d,m,h){return{data:d,size:m*h,cols:m,rows:h}}e.fromArray=c;function a(d,m){if(d.cols!==m.rows||d.rows!==m.cols)throw new Error("transpose: matrix dimensions incompatible");if(d.data===m.data)throw new Error("transpose: matrices share memory");const h=m.rows,p=m.cols,_=m.data,y=d.data;for(let v=0,A=0,g=0;v<h;g+=1,A+=p,++v){let b=g;for(let C=0;C<p;b+=h,C++)y[b]=_[A+C]}return d}e.transpose=a;function u(d,m,h){const p=m.cols,_=m.rows,y=h.rows,v=m.data,A=h.data,g=d.data;for(let b=0,C=0,I=0;b<_;C+=p,b++)for(let S=0,P=0;P<y;I++,P++){let T=0,D=C;for(let w=0;w<p;D++,S++,w++)T+=v[D]*A[S];g[I]=T}return d}e.multiplyABt=u;function l(d){const m=d.rows,h=d.cols,p=d.data,_=new Array(h);for(let y=0;y<h;++y)_[y]=0;for(let y=0,v=0;y<m;++y)for(let A=0;A<h;++A,++v)_[A]+=p[v];for(let y=0;y<h;++y)_[y]/=m;return _}e.meanRows=l;function f(d,m){const h=d.rows,p=d.cols,_=d.data;for(let y=0,v=0;y<h;++y)for(let A=0;A<p;++A,++v)_[v]-=m[A];return d}e.subRows=f})(on||(on={}));function _d(e,t,n,r){r=e[t],e[t]=e[n],e[n]=r}function bC(e,t){return e=Math.abs(e),t=Math.abs(t),e>t?(t/=e,e*Math.sqrt(1+t*t)):t>0?(e/=t,t*Math.sqrt(1+e*e)):0}const vC=1192092896e-16,AC=1e-37;function xC(e,t,n,r,i,o,s,c){const a=vC*2,u=AC;let l=0,f=0,d=0,m=0;const h=Math.max(o,30);let p=0,_=0,y=0,v=0,A=0,g=0,b=0,C=0,I=0,S=0,P=0,T=0,D=0,w=0,E=0,k=0,F=0,V=4660,de=0,W=0,J=0;const le=new Float64Array(s<<3);for(;l<s;l++){for(d=0,P=0;d<o;d++)C=e[l*t+d],P+=C*C;if(le[l]=P,r){for(d=0;d<s;d++)r[l*i+d]=0;r[l*i+l]=1}}for(;m<h;m++){for(A=0,l=0;l<s-1;l++)for(f=l+1;f<s;f++){for(p=l*t|0,_=f*t|0,E=le[l],k=0,F=le[f],d=2,k+=e[p]*e[_],k+=e[p+1]*e[_+1];d<o;d++)k+=e[p+d]*e[_+d];if(!(Math.abs(k)<=a*Math.sqrt(E*F))){for(k*=2,T=E-F,D=bC(k,T),T<0?(w=(D-T)*.5,b=Math.sqrt(w/D),g=k/(D*b*2)):(g=Math.sqrt((D+T)/(D*2)),b=k/(D*g*2)),E=0,F=0,d=2,I=g*e[p]+b*e[_],S=-b*e[p]+g*e[_],e[p]=I,e[_]=S,E+=I*I,F+=S*S,I=g*e[p+1]+b*e[_+1],S=-b*e[p+1]+g*e[_+1],e[p+1]=I,e[_+1]=S,E+=I*I,F+=S*S;d<o;d++)I=g*e[p+d]+b*e[_+d],S=-b*e[p+d]+g*e[_+d],e[p+d]=I,e[_+d]=S,E+=I*I,F+=S*S;if(le[l]=E,le[f]=F,A=1,r)for(y=l*i|0,v=f*i|0,d=2,I=g*r[y]+b*r[v],S=-b*r[y]+g*r[v],r[y]=I,r[v]=S,I=g*r[y+1]+b*r[v+1],S=-b*r[y+1]+g*r[v+1],r[y+1]=I,r[v+1]=S;d<s;d++)I=g*r[y+d]+b*r[v+d],S=-b*r[y+d]+g*r[v+d],r[y+d]=I,r[v+d]=S}}if(A===0)break}for(l=0;l<s;l++){for(d=0,P=0;d<o;d++)C=e[l*t+d],P+=C*C;le[l]=Math.sqrt(P)}for(l=0;l<s-1;l++){for(f=l,d=l+1;d<s;d++)le[f]<le[d]&&(f=d);if(l!==f&&(_d(le,l,f,P),r)){for(d=0;d<o;d++)_d(e,l*t+d,f*t+d,C);for(d=0;d<s;d++)_d(r,l*i+d,f*i+d,C)}}for(l=0;l<s;l++)n[l]=le[l];if(r)for(l=0;l<c;l++){for(P=l<s?le[l]:0;P<=u;){for(W=1/o,d=0;d<o;d++)V=V*214013+2531011,de=(V>>16&32767&256)!==0?W:-W,e[l*t+d]=de;for(m=0;m<2;m++)for(f=0;f<l;f++){for(P=0,d=0;d<o;d++)P+=e[l*t+d]*e[f*t+d];for(J=0,d=0;d<o;d++)C=e[l*t+d]-P*e[f*t+d],e[l*t+d]=C,J+=Math.abs(C);for(J=J?1/J:0,d=0;d<o;d++)e[l*t+d]*=J}for(P=0,d=0;d<o;d++)C=e[l*t+d],P+=C*C;P=Math.sqrt(P)}for(b=1/P,d=0;d<o;d++)e[l*t+d]*=b}}function SC(e,t,n,r){let i=0,o=0;const s=e.rows,c=e.cols;let a=s,u=c;a<u&&(i=1,o=a,a=u,u=o);const l=on.create(a,a),f=on.create(1,u),d=on.create(u,u);if(i===0)on.transpose(l,e);else{for(o=0;o<c*s;o++)l.data[o]=e.data[o];for(;o<u*a;o++)l.data[o]=0}if(xC(l.data,a,f.data,d.data,u,a,u,a),t){for(o=0;o<u;o++)t.data[o]=f.data[o];for(;o<c;o++)t.data[o]=0}i===0?(n&&on.transpose(n,l),r&&on.transpose(r,d)):(n&&on.transpose(n,d),r&&on.transpose(r,l))}var Nr;(function(e){function t(s){const c=n(s),a=o(s,c);return{momentsAxes:c,boxAxes:a}}e.ofPositions=t;function n(s){if(s.length===3)return tr.create(O.fromArray(O(),s,0),O.create(1,0,0),O.create(0,1,0),O.create(0,0,1));const c=on.fromArray(s,3,s.length/3),a=c.rows,u=a/3,l=on.create(3,3),f=on.create(1,3),d=on.create(3,3),m=on.create(3,3),h=on.meanRows(c),p=on.subRows(on.clone(c),h),_=on.transpose(on.create(a,3),p);on.multiplyABt(l,_,_),SC(l,f,d,m);const y=O.create(h[0],h[1],h[2]),v=O.create(d.data[0],d.data[3],d.data[6]),A=O.create(d.data[1],d.data[4],d.data[7]),g=O.create(d.data[2],d.data[5],d.data[8]);return O.scale(v,v,Math.sqrt(f.data[0]/u)),O.scale(A,A,Math.sqrt(f.data[1]/u)),O.scale(g,g,Math.sqrt(f.data[2]/u)),tr.create(y,v,A,g)}e.calculateMomentsAxes=n;function r(s){const c=tr.clone(s);return O.magnitude(c.dirC)<jt&&O.cross(c.dirC,c.dirA,c.dirB),tr.normalize(c,c)}e.calculateNormalizedAxes=r;const i=O();function o(s,c){if(s.length===3)return tr.clone(c);let a=-1/0,u=-1/0,l=-1/0,f=-1/0,d=-1/0,m=-1/0;const h=O(),p=O(),_=c.origin,y=r(c);for(let T=0,D=s.length;T<D;T+=3){O.projectPointOnVector(h,O.fromArray(h,s,T),y.dirA,_);const w=O.dot(y.dirA,O.normalize(p,O.sub(p,h,_))),E=O.distance(h,_);w>0?E>a&&(a=E):E>u&&(u=E),O.projectPointOnVector(h,O.fromArray(h,s,T),y.dirB,_);const k=O.dot(y.dirB,O.normalize(p,O.sub(p,h,_))),F=O.distance(h,_);k>0?F>l&&(l=F):F>f&&(f=F),O.projectPointOnVector(h,O.fromArray(h,s,T),y.dirC,_);const V=O.dot(y.dirC,O.normalize(p,O.sub(p,h,_))),de=O.distance(h,_);V>0?de>d&&(d=de):de>m&&(m=de)}const v=O.setMagnitude(O(),y.dirA,(a+u)/2),A=O.setMagnitude(O(),y.dirB,(l+f)/2),g=O.setMagnitude(O(),y.dirC,(d+m)/2),b=O.isFinite(v),C=O.isFinite(A),I=O.isFinite(g),S=O(),P=function(T,D,w){O.copy(i,_),b&&O.scaleAndAdd(i,i,y.dirA,T),C&&O.scaleAndAdd(i,i,y.dirB,D),I&&O.scaleAndAdd(i,i,y.dirC,w),O.add(S,S,i)};return P(a,l,d),P(a,l,-m),P(a,-f,-m),P(a,-f,d),P(-u,-f,-m),P(-u,-f,d),P(-u,l,d),P(-u,l,-m),O.scale(S,S,1/8),tr.create(S,v,A,g)}e.calculateBoxAxes=o})(Nr||(Nr={}));function Sn(){return Sn.zero()}(function(e){function t(w){return w.extrema!==void 0}e.hasExtrema=t;function n(w,E){return{center:w,radius:E}}e.create=n;function r(){return{center:O(),radius:0}}e.zero=r;function i(w){const E=n(O.clone(w.center),w.radius);return t(w)&&(E.extrema=w.extrema.map(k=>O.clone(k))),E}e.clone=i;function o(w,E,k){return O.copy(w.center,E),w.radius=k,w}e.set=o;function s(w,E){return O.copy(w.center,E.center),w.radius=E.radius,t(E)&&c(w,E.extrema.map(k=>O.clone(k))),w}e.copy=s;function c(w,E){return w.extrema!==void 0?(w.extrema.length=0,w.extrema.push(...E)):w.extrema=E,w}e.setExtrema=c;function a(w){const{x:E,y:k,z:F,indices:V}=w;let de=0,W=0,J=0,le=0;const K=Fe.size(V);for(let ae=0;ae<K;ae++){const me=Fe.getAt(V,ae);de+=E[me],W+=k[me],J+=F[me]}K>0&&(de/=K,W/=K,J/=K);for(let ae=0;ae<K;ae++){const me=Fe.getAt(V,ae),De=E[me]-de,te=k[me]-W,ce=F[me]-J,M=De*De+te*te+ce*ce;M>le&&(le=M)}return{center:O.create(de,W,J),radius:Math.sqrt(le)}}e.computeBounding=a;function u(w,E,k){return O.transformMat4(w.center,E.center,k),w.radius=E.radius*Ke.getMaxScaleOnAxis(k),t(E)&&c(w,E.extrema.map(F=>O.transformMat4(O(),F,k))),w}e.transform=u;function l(w,E,k){return O.add(w.center,E.center,k),t(E)&&c(w,E.extrema.map(F=>O.add(O(),F,k))),w}e.translate=l;function f(w,E,k){return O.toArray(w.center,E,k),E[k+3]=w.radius,E}e.toArray=f;function d(w,E,k){return O.fromArray(w.center,E,k),w.radius=E[k+3],w}e.fromArray=d;function m(w,E){return O.scale(w.center,O.add(w.center,E.max,E.min),.5),w.radius=O.distance(w.center,E.max),e.setExtrema(w,[O.create(E.min[0],E.min[1],E.min[2]),O.create(E.max[0],E.max[1],E.max[2]),O.create(E.max[0],E.min[1],E.min[2]),O.create(E.min[0],E.max[1],E.max[2]),O.create(E.min[0],E.min[1],E.max[2]),O.create(E.max[0],E.min[1],E.max[2]),O.create(E.max[0],E.max[1],E.min[2]),O.create(E.min[0],E.max[1],E.min[2])]),w}e.fromBox3D=m;function h(w,E){return O.copy(w.center,E.origin),w.radius=Math.max(O.magnitude(E.dirA),O.magnitude(E.dirB),O.magnitude(E.dirC)),w}e.fromAxes3D=h;const p=O();function _(w,E,k){const[F,V,de]=E,W=O.create(0,0,0);O.transformMat4(W,W,k);const J=O.create(F,V,de);O.transformMat4(J,J,k);const le=O.create(F,0,0);O.transformMat4(le,le,k);const K=O.create(0,V,de);O.transformMat4(K,K,k);const ae=O.create(0,0,de);O.transformMat4(ae,ae,k);const me=O.create(F,0,de);O.transformMat4(me,me,k);const De=O.create(F,V,0);O.transformMat4(De,De,k);const te=O.create(0,V,0);O.transformMat4(te,te,k),O.add(p,W,J),O.scale(p,p,.5);const ce=Math.max(O.distance(W,J),O.distance(le,K));return e.set(w,p,ce/2),e.setExtrema(w,[W,J,le,K,ae,me,De,te]),w}e.fromDimensionsAndTransform=_;const y=O();function v(w,E,k){return O.distance(E.center,k)<E.radius?e.copy(w,E):(O.sub(y,E.center,k),O.sub(y,E.center,y),O.setMagnitude(y,y,E.radius),O.scale(w.center,O.add(y,y,k),.5),w.radius=O.distance(w.center,k),w)}e.addVec3=v;function A(w,E,k){return O.copy(w.center,E.center),w.radius=Math.max(E.radius,O.distance(E.center,k.center)+k.radius),t(E)&&t(k)&&c(w,[...E.extrema.map(F=>O.clone(F)),...k.extrema.map(F=>O.clone(F))]),w}e.expandBySphere=A;const g=O();function b(w,E,k){var F,V;if(O.copy(w.center,E.center),w.radius=E.radius+k,E.radius<1e-12||((V=(F=E.extrema)===null||F===void 0?void 0:F.length)!==null&&V!==void 0?V:0)<=1)return w.extrema=void 0,w;if(t(E)){const de=new Float32Array(E.extrema.length*3);for(let J=0;J<E.extrema.length;J++)O.toArray(E.extrema[J],de,J*3);const W=Nr.calculateMomentsAxes(de);tr.scale(W,tr.normalize(W,W),k),c(w,E.extrema.map(J=>{O.normalize(g,O.sub(g,J,E.center));const le=O.clone(J),K=O.dot(g,W.dirA)<0?-1:1;O.scaleAndAdd(le,le,W.dirA,K);const ae=O.dot(g,W.dirB)<0?-1:1;O.scaleAndAdd(le,le,W.dirB,ae);const me=O.dot(g,W.dirC)<0?-1:1;return O.scaleAndAdd(le,le,W.dirC,me),O.distance(w.center,le)>w.radius&&(E.extrema.length>=14&&O.normalize(g,O.sub(g,le,E.center)),O.scaleAndAdd(le,w.center,g,w.radius)),le}))}return w}e.expand=b;function C(w,E){return w.radius===E.radius&&O.exactEquals(w.center,E.center)}e.exactEquals=C;function I(w,E){const k=w.radius,F=E.radius;return Math.abs(k-F)<=jt*Math.max(1,Math.abs(k),Math.abs(F))&&O.equals(w.center,E.center)}e.equals=I;function S(w,E){if(t(E)){for(const k of E.extrema)if(O.distance(w.center,k)>w.radius)return!1;return!0}else return O.distance(w.center,E.center)+E.radius<=w.radius}e.includes=S;function P(w,E){return O.distance(w.center,E.center)<=w.radius+E.radius}e.overlaps=P;function T(w,E){return O.distance(w.center,E.center)-w.radius+E.radius}e.distance=T;function D(w,E){const{center:k,radius:F}=w;return O.distance(E,k)-F}e.distanceToVec=D})(Sn||(Sn={}));function nr(){return nr.zero()}(function(e){function t(k,F){return{min:k,max:F}}e.create=t;function n(){return{min:O(),max:O()}}e.zero=n;function r(k,F){return O.copy(k.min,F.min),O.copy(k.max,F.max),k}e.copy=r;function i(k,F,V){return O.copy(k.min,F),O.copy(k.max,V),k}e.set=i;function o(k){return r(n(),k)}e.clone=o;const s=O();function c(k,F){return Sn.hasExtrema(F)&&F.extrema.length>=14?u(k,F.extrema):(O.set(s,F.radius,F.radius,F.radius),O.sub(k.min,F.center,s),O.add(k.max,F.center,s),k)}e.fromSphere3D=c;function a(k,F){for(let V=0,de=F.length;V<de;V++)y(k,F[V]);return k}e.addVec3Array=a;function u(k,F){return _(k),a(k,F),k}e.fromVec3Array=u;function l(k,F){return Sn.hasExtrema(F)&&F.extrema.length>=14?a(k,F.extrema):(y(k,O.subScalar(s,F.center,F.radius)),y(k,O.addScalar(s,F.center,F.radius)),k)}e.addSphere3D=l;function f(k,F){return O.clamp(s,F.center,k.min,k.max),O.squaredDistance(s,F.center)<=F.radius*F.radius}e.intersectsSphere3D=f;function d(k){const F=O.create(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),V=O.create(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),{x:de,y:W,z:J,indices:le}=k;for(let K=0,ae=Fe.size(le);K<ae;K++){const me=Fe.getAt(le,K);F[0]=Math.min(de[me],F[0]),F[1]=Math.min(W[me],F[1]),F[2]=Math.min(J[me],F[2]),V[0]=Math.max(de[me],V[0]),V[1]=Math.max(W[me],V[1]),V[2]=Math.max(J[me],V[2])}return{min:F,max:V}}e.computeBounding=d;function m(k,F){return O.sub(k,F.max,F.min)}e.size=m;const h=O();function p(k){return m(h,k),h[0]*h[1]*h[2]}e.volume=p;function _(k){return O.set(k.min,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),O.set(k.max,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),k}e.setEmpty=_;function y(k,F){return O.min(k.min,k.min,F),O.max(k.max,k.max,F),k}e.add=y;function v(k,F,V){return O.sub(k.min,F.min,V),O.add(k.max,F.max,V),k}e.expand=v;function A(k,F,V){return O.subScalar(k.min,F.min,V),O.addScalar(k.max,F.max,V),k}e.expandUniformly=A;function g(k,F,V){return O.scale(k.min,F.min,V),O.scale(k.max,F.max,V),k}e.scale=g;const b=O();function C(k,F,V){const[de,W,J]=F.min,[le,K,ae]=F.max;return _(k),y(k,O.transformMat4(b,O.set(b,de,W,J),V)),y(k,O.transformMat4(b,O.set(b,de,W,ae),V)),y(k,O.transformMat4(b,O.set(b,de,K,J),V)),y(k,O.transformMat4(b,O.set(b,de,K,ae),V)),y(k,O.transformMat4(b,O.set(b,le,W,J),V)),y(k,O.transformMat4(b,O.set(b,le,W,ae),V)),y(k,O.transformMat4(b,O.set(b,le,K,J),V)),y(k,O.transformMat4(b,O.set(b,le,K,ae),V)),k}e.transform=C;function I(k,F){return!(F[0]<k.min[0]||F[0]>k.max[0]||F[1]<k.min[1]||F[1]>k.max[1]||F[2]<k.min[2]||F[2]>k.max[2])}e.containsVec3=I;function S(k,F){return!(k.max[0]<F.min[0]||k.min[0]>F.max[0]||k.max[1]<F.min[1]||k.min[1]>F.max[1]||k.max[2]<F.min[2]||k.min[2]>F.max[2])}e.overlaps=S;function P(k,F){const V=F.center,de=F.radius;return!(V[0]-de<k.min[0]||V[0]+de>k.max[0]||V[1]-de<k.min[1]||V[1]+de>k.max[1]||V[2]-de<k.min[2]||V[2]+de>k.max[2])}e.containsSphere3D=P;function T(k,F,V,de){const[W,J,le]=F.min,[K,ae,me]=F.max,[De,te,ce]=V,M=1/de[0],B=1/de[1],j=1/de[2];let ne,G,$;return M>=0?ne=(W-De)*M:ne=(K-De)*M,B>=0?G=(J-te)*B:G=(ae-te)*B,j>=0?$=(le-ce)*j:$=(me-ce)*j,G>ne&&(ne=G),$>ne&&(ne=$),O.scale(k,de,ne),O.set(k,k[0]+De,k[1]+te,k[2]+ce)}e.nearestIntersectionWithRay=T;function D(k,F){return O.center(k,F.max,F.min)}e.center=D;function w(k,F){return O.exactEquals(k.min,F.min)&&O.exactEquals(k.max,F.max)}e.exactEquals=w;function E(k,F){return O.equals(k.min,F.min)&&O.equals(k.max,F.max)}e.equals=E})(nr||(nr={}));var Mt;(function(e){e.DefaultName="1_555",e.Default=t(e.DefaultName,Ke.identity()),e.RotationTranslationEpsilon=.005;function t(v,A,g){let{assembly:b,ncsId:C,hkl:I,spgrOp:S,key:P}=g||{};const T=I?O.clone(I):O();S=S??-1,P=P??-1,C=C||-1;const D=Ke.isIdentity(A),w=r(g,D);return D?{name:v,assembly:b,matrix:A,inverse:Ke.identity(),isIdentity:!0,hkl:T,spgrOp:S,ncsId:C,suffix:w,key:P}:(Ke.isRotationAndTranslation(A,e.RotationTranslationEpsilon)||console.warn(`Symmetry operator (${v}) should be a composition of rotation and translation.`),{name:v,assembly:b,matrix:A,inverse:Ke.invert(Ke(),A),isIdentity:!1,hkl:T,spgrOp:S,key:P,ncsId:C,suffix:w})}e.create=t;function n(v){return!!v&&!!v.matrix&&!!v.inverse&&typeof v.name=="string"}function r(v,A){if(!v)return"";if(v.assembly)return n(v)?v.suffix:A?"":`_${v.assembly.operId}`;if(typeof v.spgrOp<"u"&&typeof v.hkl<"u"&&v.spgrOp!==-1){const[g,b,C]=v.hkl;return`-${v.spgrOp+1}_${5+g}${5+b}${5+C}`}return v.ncsId!==-1?`_${v.ncsId}`:""}const i=Ke();function o(v,A){Ke.setIdentity(i);for(let g=0;g<3;g++)for(let b=0;b<3;b++)Ke.setValue(i,g,b,jn.getValue(v,g,b));return Ke.setTranslation(i,A),Ke.isRotationAndTranslation(i,e.RotationTranslationEpsilon)}e.checkIfRotationAndTranslation=o;function s(v,A,g,b){const C=Ke.identity();for(let I=0;I<3;I++)for(let S=0;S<3;S++)Ke.setValue(C,I,S,jn.getValue(A,I,S));return Ke.setTranslation(C,g),t(v,C,{ncsId:b})}e.ofRotationAndOffset=s;const c=lr.identity(),a=lr(),u=lr(),l=O();function f(v,A,g){const b=A.inverse;if(A.isIdentity)return Ke.copy(v,b);const C=1-g;Ke.getRotation(a,b),lr.slerp(a,c,a,C);const I=lr.getAxisAngle(l,a);return Ke.fromRotation(v,I,l),Ke.setValue(v,0,3,C*Ke.getValue(b,0,3)),Ke.setValue(v,1,3,C*Ke.getValue(b,1,3)),Ke.setValue(v,2,3,C*Ke.getValue(b,2,3)),v}e.lerpFromIdentity=f;function d(v,A,g,b){if(Math.abs(b)<=1e-5)return Ke.copy(v,A);if(Math.abs(b-1)<=1e-5)return Ke.copy(v,g);Ke.getRotation(a,A),Ke.getRotation(u,g),lr.slerp(u,a,u,b);const C=lr.getAxisAngle(l,u);return Ke.fromRotation(v,C,l),Ke.setValue(v,0,3,Pl(Ke.getValue(A,0,3),Ke.getValue(g,0,3),b)),Ke.setValue(v,1,3,Pl(Ke.getValue(A,1,3),Ke.getValue(g,1,3),b)),Ke.setValue(v,2,3,Pl(Ke.getValue(A,2,3),Ke.getValue(g,2,3),b)),v}e.slerp=d;function m(v,A){const g=Ke.mul(Ke(),A.matrix,v.matrix);return t(A.name,g,A)}e.compose=m;class h{constructor(A,g,b=Ws){this.operator=A,this.coordinates=g,this.r=b,this._x=g.x,this._y=g.y,this._z=g.z,this._m=A.matrix}invariantPosition(A,g){return g[0]=this._x[A],g[1]=this._y[A],g[2]=this._z[A],g}position(A,g){return g[0]=this._x[A],g[1]=this._y[A],g[2]=this._z[A],O.transformMat4(g,g,this._m),g}x(A){const g=this._m,b=g[0],C=g[4],I=g[8],S=g[12],P=this._x[A],T=this._y[A],D=this._z[A],w=g[3]*P+g[7]*T+g[11]*D+g[15]||1;return(b*P+C*T+I*D+S)/w}y(A){const g=this._m,b=g[1],C=g[5],I=g[9],S=g[13],P=this._x[A],T=this._y[A],D=this._z[A],w=g[3]*P+g[7]*T+g[11]*D+g[15]||1;return(b*P+C*T+I*D+S)/w}z(A){const g=this._m,b=g[2],C=g[6],I=g[10],S=g[14],P=this._x[A],T=this._y[A],D=this._z[A],w=g[3]*P+g[7]*T+g[11]*D+g[15]||1;return(b*P+C*T+I*D+S)/w}}class p{constructor(A,g,b=Ws){this.operator=A,this.coordinates=g,this.r=b,this._x=g.x,this._y=g.y,this._z=g.z,this._m=A.matrix}invariantPosition(A,g){return g[0]=this._x[A],g[1]=this._y[A],g[2]=this._z[A],g}position(A,g){return g[0]=this.x(A),g[1]=this.y(A),g[2]=this.z(A),g}x(A){const g=this._m;return g[0]*this._x[A]+g[4]*this._y[A]+g[8]*this._z[A]+g[12]}y(A){const g=this._m;return g[1]*this._x[A]+g[5]*this._y[A]+g[9]*this._z[A]+g[13]}z(A){const g=this._m;return g[2]*this._x[A]+g[6]*this._y[A]+g[10]*this._z[A]+g[14]}}class _{constructor(A,g,b=Ws){this.operator=A,this.coordinates=g,this.r=b,this._x=g.x,this._y=g.y,this._z=g.z}invariantPosition(A,g){return g[0]=this._x[A],g[1]=this._y[A],g[2]=this._z[A],g}position(A,g){return g[0]=this._x[A],g[1]=this._y[A],g[2]=this._z[A],g}x(A){return this._x[A]}y(A){return this._y[A]}z(A){return this._z[A]}}function y(v,A,g=Ws){return Ke.isIdentity(v.matrix)?new _(v,A,g):CC(v.matrix)?new p(v,A,g):new h(v,A,g)}e.createMapping=y})(Mt||(Mt={}));function Ws(e){return 0}function CC(e){return e[3]===0&&e[7]===0&&e[11]===0&&e[15]===1}const yd=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[-1,0,0,0],[0,-1,0,0],[0,0,-1,0],[0,1,0,.5],[1,0,0,.5],[-1,0,0,.5],[0,0,1,.5],[0,-1,0,.5],[0,0,-1,.5],[1,0,0,.25],[0,-1,0,.25],[0,0,1,.25],[-1,0,0,.25],[0,1,0,.25],[0,-1,0,.75],[0,0,1,.75],[0,1,0,.75],[1,0,0,.75],[-1,0,0,.75],[0,0,-1,.25],[0,0,-1,.75],[1,-1,0,0],[-1,1,0,0],[0,0,1,1/3],[0,0,1,2/3],[1,0,0,2/3],[0,1,0,1/3],[0,-1,0,2/3],[1,-1,0,1/3],[-1,1,0,2/3],[-1,0,0,1/3],[1,0,0,1/3],[0,1,0,2/3],[0,-1,0,1/3],[1,-1,0,2/3],[-1,1,0,1/3],[-1,0,0,2/3],[0,0,-1,1/3],[0,0,-1,2/3],[0,0,1,5/6],[0,0,1,1/6],[0,0,-1,5/6],[0,0,-1,1/6]],IC=[[0,1,2],[3,4,5],[3,1,5],[3,6,5],[7,6,2],[8,6,5],[0,4,2],[0,4,9],[7,10,2],[7,10,9],[0,10,2],[8,10,5],[3,1,11],[3,6,11],[0,10,9],[8,6,11],[3,4,2],[0,4,5],[3,4,9],[7,10,5],[8,4,9],[8,10,9],[8,10,2],[0,6,9],[3,10,9],[0,10,11],[7,1,9],[8,1,11],[7,4,11],[7,6,9],[7,10,11],[3,10,2],[8,1,5],[0,4,11],[3,1,2],[3,1,9],[7,4,2],[8,1,2],[8,1,9],[3,6,9],[7,4,9],[8,6,2],[8,6,9],[3,6,2],[12,13,14],[15,16,14],[12,17,18],[15,19,18],[20,13,18],[21,16,18],[20,17,14],[21,19,14],[0,1,5],[8,10,11],[7,6,11],[7,6,5],[8,4,2],[7,4,5],[7,1,5],[7,1,11],[0,10,5],[0,1,11],[0,6,11],[0,6,5],[3,10,11],[8,4,11],[15,13,22],[12,16,22],[15,17,23],[12,19,23],[21,13,23],[20,16,23],[21,17,22],[20,19,22],[4,0,2],[1,3,2],[4,0,14],[1,3,18],[4,0,9],[1,3,9],[4,0,18],[1,3,14],[10,7,9],[6,8,9],[4,7,14],[6,3,18],[10,0,18],[1,8,14],[1,3,5],[4,0,5],[6,8,11],[10,7,11],[1,3,11],[4,0,11],[10,7,2],[6,8,2],[3,10,22],[7,1,23],[8,4,23],[0,6,22],[1,0,5],[4,3,5],[1,0,23],[4,3,22],[10,7,14],[6,8,18],[8,6,22],[7,10,23],[4,3,11],[1,0,11],[1,0,22],[4,3,23],[10,7,18],[6,8,14],[8,6,23],[7,10,22],[6,7,11],[10,8,11],[8,1,23],[0,10,22],[3,6,22],[7,4,23],[4,3,2],[1,0,2],[10,8,2],[6,7,2],[4,3,9],[1,0,9],[10,8,9],[6,7,9],[4,8,14],[6,0,18],[10,3,18],[1,7,14],[4,8,18],[6,0,14],[10,3,14],[1,7,18],[6,7,5],[10,8,5],[6,8,5],[10,7,5],[8,1,22],[0,10,23],[3,6,23],[7,4,22],[4,24,2],[25,3,2],[4,24,26],[25,3,27],[4,24,27],[25,3,26],[28,29,26],[30,31,26],[32,33,26],[34,35,27],[36,37,27],[38,39,27],[2,0,1],[1,2,0],[1,25,5],[24,0,5],[39,36,40],[35,38,40],[37,34,40],[33,30,41],[29,32,41],[31,28,41],[5,3,4],[4,5,3],[25,1,5],[0,24,5],[24,4,5],[3,25,5],[4,3,41],[25,1,40],[24,4,41],[3,25,40],[4,3,40],[25,1,41],[24,4,40],[3,25,41],[35,34,40],[37,36,40],[39,38,40],[29,28,41],[31,30,41],[33,32,41],[3,5,4],[5,4,3],[25,1,2],[0,24,2],[24,4,2],[3,25,2],[25,1,9],[0,24,9],[24,4,9],[3,25,9],[30,33,26],[32,29,26],[28,31,26],[36,39,27],[38,35,27],[34,37,27],[0,2,1],[2,1,0],[30,33,42],[32,29,42],[28,31,42],[36,39,43],[38,35,43],[34,37,43],[7,9,6],[9,6,7],[25,1,11],[0,24,11],[24,4,11],[3,25,11],[35,34,44],[37,36,44],[39,38,44],[29,28,45],[31,30,45],[33,32,45],[8,11,10],[11,10,8],[1,25,2],[24,0,2],[1,25,42],[24,0,43],[1,25,43],[24,0,42],[1,25,27],[24,0,26],[1,25,26],[24,0,27],[1,25,9],[24,0,9],[4,24,5],[25,3,5],[4,24,11],[25,3,11],[1,0,40],[4,3,44],[0,24,45],[1,0,41],[4,3,45],[0,24,44],[0,24,40],[0,24,41],[2,3,4],[5,3,1],[5,0,4],[4,2,3],[1,5,3],[4,5,0],[2,7,6],[2,8,10],[5,8,6],[5,7,10],[1,9,7],[4,9,8],[1,11,8],[4,11,7],[9,0,6],[9,3,10],[11,3,6],[11,0,10],[6,2,7],[10,2,8],[6,5,8],[10,5,7],[9,7,1],[9,8,4],[11,8,1],[11,7,4],[6,9,0],[10,9,3],[6,11,3],[10,11,0],[9,7,6],[9,8,10],[11,8,6],[11,7,10],[6,9,7],[10,9,8],[6,11,8],[10,11,7],[2,3,10],[5,8,1],[11,0,4],[10,2,3],[1,5,8],[4,11,0],[5,0,1],[2,0,4],[2,3,1],[1,5,0],[4,2,0],[1,2,3],[11,8,10],[11,7,6],[9,7,10],[9,8,6],[10,11,8],[6,11,7],[10,9,7],[6,9,8],[5,8,10],[5,7,6],[2,7,10],[2,8,6],[4,11,8],[1,11,7],[4,9,7],[1,9,8],[11,3,10],[11,0,6],[9,0,10],[9,3,6],[10,5,8],[6,5,7],[10,2,7],[6,2,8],[11,8,4],[11,7,1],[9,7,4],[9,8,1],[10,11,3],[6,11,0],[10,9,0],[6,9,3],[22,15,13],[22,12,16],[14,12,13],[14,15,16],[13,22,15],[16,22,12],[13,14,12],[16,14,15],[22,21,17],[22,20,19],[14,20,17],[14,21,19],[13,23,21],[16,23,20],[13,18,20],[16,18,21],[23,15,17],[23,12,19],[18,12,17],[18,15,19],[17,22,21],[19,22,20],[17,14,20],[19,14,21],[23,21,13],[23,20,16],[18,20,13],[18,21,16],[17,23,15],[19,23,12],[17,18,12],[19,18,15],[5,0,6],[2,7,4],[9,3,1],[6,5,0],[4,2,7],[1,9,3],[0,2,4],[3,2,1],[0,5,1],[2,1,3],[2,4,0],[5,1,0],[7,9,10],[8,9,6],[7,11,6],[9,6,8],[9,10,7],[11,6,7],[1,7,11],[4,8,11],[1,8,9],[4,7,9],[0,9,10],[3,9,6],[3,11,10],[0,11,6],[2,6,8],[2,10,7],[5,6,7],[5,10,8],[6,0,11],[10,3,11],[6,3,9],[10,0,9],[7,2,10],[8,2,6],[8,5,10],[7,5,6],[9,1,8],[9,4,7],[11,1,7],[11,4,8],[7,9,4],[8,9,1],[8,11,4],[7,11,1],[9,6,3],[9,10,0],[11,6,0],[11,10,3],[19,12,23],[13,15,22],[16,21,18],[17,20,14],[20,14,17],[21,18,16],[15,22,13],[12,23,19],[18,16,21],[14,17,20],[23,19,12],[22,13,15],[19,20,22],[13,21,23],[16,15,14],[17,12,18],[20,18,13],[21,14,19],[15,23,17],[12,22,16],[18,19,15],[14,13,12],[23,16,20],[22,17,21],[16,12,22],[17,15,23],[19,21,14],[13,20,18],[12,14,13],[15,18,19],[21,22,17],[20,23,16],[14,16,15],[18,17,12],[22,19,20],[23,13,21],[16,20,23],[17,21,22],[19,15,18],[13,12,14],[12,18,17],[15,14,16],[21,23,13],[20,22,19],[14,19,21],[18,13,20],[22,16,12],[23,17,15],[19,12,22],[17,21,23],[16,15,18],[13,20,14],[20,14,13],[15,18,16],[21,23,17],[12,22,19],[18,16,15],[14,13,20],[22,19,12],[23,17,21],[3,2,4],[3,5,1],[0,5,4],[2,4,3],[5,1,3],[5,4,0],[1,7,9],[4,8,9],[1,8,11],[4,7,11],[0,9,6],[3,9,10],[3,11,6],[0,11,10],[2,6,7],[2,10,8],[5,6,8],[5,10,7],[6,0,9],[10,3,9],[6,3,11],[10,0,11],[7,2,6],[8,2,10],[8,5,6],[7,5,10],[9,1,7],[9,4,8],[11,1,8],[11,4,7],[7,9,1],[8,9,4],[8,11,1],[7,11,4],[9,6,0],[9,10,3],[11,6,3],[11,10,0],[8,9,10],[8,11,6],[7,11,10],[9,10,8],[11,6,8],[11,10,7],[6,0,2],[10,3,2],[6,3,5],[10,0,5],[7,2,1],[8,2,4],[8,5,1],[7,5,4],[9,1,0],[9,4,3],[11,1,3],[11,4,0],[1,7,2],[4,8,2],[1,8,5],[4,7,5],[0,9,1],[3,9,4],[3,11,1],[0,11,4],[2,6,0],[2,10,3],[5,6,3],[5,10,0],[0,2,6],[3,2,10],[3,5,6],[0,5,10],[2,1,7],[2,4,8],[5,1,8],[5,4,7],[16,12,14],[13,21,18],[19,15,23],[17,20,22],[12,14,16],[21,18,13],[15,23,19],[20,22,17],[14,16,12],[18,13,21],[23,19,15],[22,17,20],[19,20,18],[17,15,14],[16,21,22],[13,12,23],[20,18,19],[15,14,17],[21,22,16],[12,23,13],[18,19,20],[14,17,15],[22,16,21],[23,13,12],[6,0,5],[10,3,5],[6,3,2],[10,0,2],[7,2,4],[8,2,1],[8,5,4],[7,5,1],[9,1,3],[9,4,0],[11,1,0],[11,4,3],[1,7,5],[4,8,5],[1,8,2],[4,7,2],[0,9,4],[3,9,1],[3,11,4],[0,11,1],[2,6,3],[2,10,0],[5,6,0],[5,10,3],[0,2,10],[3,2,6],[3,5,10],[0,5,6],[2,1,8],[2,4,7],[5,1,7],[5,4,8],[21,17,23],[20,16,22],[12,13,18],[15,19,14],[23,21,17],[22,20,16],[18,12,13],[14,15,19],[17,23,21],[16,22,20],[13,18,12],[19,14,15],[21,13,22],[20,19,23],[12,17,14],[15,16,18],[23,15,13],[22,12,19],[18,20,17],[14,21,16],[17,22,15],[16,23,12],[13,14,20],[19,18,21],[15,17,22],[12,16,23],[20,13,14],[21,19,18],[22,21,13],[23,20,19],[14,12,17],[18,15,16],[13,23,15],[19,22,12],[17,18,20],[16,14,21],[15,13,23],[12,19,22],[20,17,18],[21,16,14],[22,15,17],[23,12,16],[14,20,13],[18,21,19],[13,22,21],[19,23,20],[17,14,12],[16,18,15],[6,5,3],[4,9,3],[9,3,4],[5,7,4],[4,5,7],[5,3,6]],wC=[[0],[0,1],[0,2],[0,3],[0,2,4,5],[0,6],[0,7],[0,6,4,8],[0,7,4,9],[0,6,2,1],[0,3,1,10],[0,6,2,1,4,8,5,11],[0,12,1,7],[0,1,13,14],[0,12,1,7,4,15,11,9],[0,16,2,17],[0,18,12,17],[0,16,5,19],[0,20,13,19],[0,18,12,17,4,21,15,19],[0,16,2,17,4,22,5,19],[0,16,2,17,23,24,13,25,26,20,27,28,4,22,5,19],[0,16,17,2,29,21,30,15],[0,20,13,19,29,31,32,33],[0,16,6,34],[0,18,7,34],[0,16,7,35],[0,16,36,37],[0,18,36,38],[0,16,14,39],[0,20,40,34],[0,16,8,41],[0,18,8,42],[0,16,9,42],[0,16,6,34,4,22,8,41],[0,18,7,34,4,21,9,41],[0,16,7,35,4,22,9,42],[0,16,6,34,23,24,14,39],[0,16,10,43,23,24,7,35],[0,16,36,37,23,24,9,42],[0,16,8,41,23,24,40,38],[0,16,6,34,23,24,14,39,26,20,40,38,4,22,8,41],[0,16,44,45,23,24,46,47,26,20,48,49,4,22,50,51],[0,16,6,34,29,21,9,42],[0,16,8,41,29,21,7,35],[0,16,36,37,29,21,14,39],[0,16,2,17,1,52,6,34],[0,16,2,17,53,54,9,42],[0,16,12,33,1,52,7,35],[0,16,2,17,11,55,8,41],[0,56,2,57,1,58,6,37],[0,56,15,25,1,58,9,39],[0,20,27,17,1,59,40,34],[0,56,12,28,1,58,7,38],[0,16,5,19,1,52,8,41],[0,22,13,28,1,55,14,38],[0,18,13,60,1,61,14,43],[0,16,15,30,1,52,9,42],[0,16,5,19,11,55,6,34],[0,21,12,19,1,54,7,41],[0,20,13,19,1,59,14,41],[0,20,3,30,1,59,10,42],[0,18,12,17,1,61,7,34,4,21,15,19,11,54,9,41],[0,24,13,17,1,62,14,34,4,20,27,19,11,59,40,41],[0,16,2,17,1,52,6,34,4,22,5,19,11,55,8,41],[0,16,12,33,1,52,7,35,4,22,15,30,11,55,9,42],[0,31,3,17,1,63,10,34,4,56,32,19,11,58,36,41],[0,22,2,19,64,59,14,38,4,16,5,17,65,62,40,39],[0,16,2,17,1,52,6,34,23,24,13,25,64,62,14,39,26,20,27,28,65,59,40,38,4,22,5,19,11,55,8,41],[0,16,2,17,66,67,44,45,23,24,13,25,68,69,46,47,26,20,27,28,70,71,48,49,4,22,5,19,72,73,50,51],[0,16,2,17,1,52,6,34,29,21,15,30,53,54,9,42],[0,16,5,19,1,52,8,41,29,21,12,33,53,54,7,35],[0,20,13,19,1,59,14,41,29,31,32,33,53,63,36,35],[0,31,3,17,1,63,10,34,29,20,27,30,53,59,40,42],[0,16,74,75],[0,18,76,77],[0,16,78,79],[0,18,80,81],[0,16,74,75,29,21,82,83],[0,21,84,85,29,16,86,87],[0,16,88,89],[0,16,88,89,29,21,90,91],[0,16,74,75,1,52,88,89],[0,16,78,79,1,52,92,93],[0,16,94,95,11,55,88,89],[0,16,82,83,53,54,88,89],[0,16,74,75,1,52,88,89,29,21,82,83,53,54,90,91],[0,21,84,85,96,97,88,91,29,16,86,87,98,99,90,89],[0,16,74,75,2,17,100,101],[0,16,94,95,5,19,100,101],[0,18,76,77,2,33,102,103],[0,18,104,105,106,107,100,108],[0,16,78,79,2,17,109,108],[0,16,82,83,15,30,100,101],[0,18,80,81,2,33,110,111],[0,18,112,113,114,115,100,108],[0,16,74,75,2,17,100,101,29,21,82,83,15,30,116,117],[0,21,84,85,118,119,116,101,29,16,86,87,120,121,100,117],[0,16,74,75,6,34,122,123],[0,16,74,75,8,41,124,125],[0,16,78,79,7,35,122,123],[0,16,82,83,9,42,122,123],[0,16,74,75,7,35,126,127],[0,16,74,75,9,42,128,129],[0,16,78,79,6,34,126,127],[0,16,78,79,8,41,128,129],[0,16,74,75,6,34,122,123,29,21,82,83,9,42,128,129],[0,16,74,75,7,35,126,127,29,21,82,83,8,41,124,125],[0,21,84,85,6,42,130,131,29,16,86,87,9,34,132,133],[0,21,84,85,7,41,134,135,29,16,86,87,8,35,136,137],[0,16,89,88,2,17,122,123],[0,16,89,88,12,33,126,127],[0,16,89,88,5,19,124,125],[0,16,89,88,15,30,128,129],[0,16,88,89,6,34,100,101],[0,16,89,88,7,35,109,108],[0,16,89,88,8,41,138,139],[0,16,89,88,9,42,116,117],[0,16,89,88,6,34,100,101,29,21,91,90,9,42,116,117],[0,16,89,88,7,35,109,108,29,21,91,90,8,41,138,139],[0,16,89,88,2,17,122,123,29,21,91,90,15,30,128,129],[0,16,89,88,118,121,132,131,29,21,91,90,120,119,130,133],[0,16,74,75,2,17,100,101,1,52,88,89,6,34,122,123],[0,16,74,75,12,33,109,108,1,52,88,89,7,35,126,127],[0,16,74,75,2,17,100,101,11,55,140,141,8,41,124,125],[0,16,74,75,2,17,100,101,53,54,90,91,9,42,128,129],[0,16,74,75,5,19,138,139,1,52,88,89,8,41,124,125],[0,16,74,75,15,30,116,117,1,52,88,89,9,42,128,129],[0,16,94,95,5,19,100,101,11,55,88,89,6,34,124,125],[0,16,94,95,15,30,109,108,11,55,88,89,7,35,128,129],[0,16,78,79,2,17,109,108,1,52,92,93,6,34,126,127],[0,16,78,79,12,33,100,101,1,52,92,93,7,35,122,123],[0,16,82,83,12,33,138,139,53,54,88,89,8,41,126,127],[0,16,82,83,2,17,116,117,53,54,88,89,9,42,122,123],[0,16,78,79,5,19,116,117,1,52,92,93,8,41,128,129],[0,16,82,83,15,30,100,101,1,52,90,91,9,42,122,123],[0,16,82,83,15,30,100,101,53,54,88,89,6,34,128,129],[0,16,82,83,5,19,109,108,53,54,88,89,7,35,124,125],[0,16,74,75,2,17,100,101,1,52,88,89,6,34,122,123,29,21,82,83,15,30,116,117,53,54,90,91,9,42,128,129],[0,16,74,75,12,33,109,108,1,52,88,89,7,35,126,127,29,21,82,83,5,19,138,139,53,54,90,91,8,41,124,125],[0,21,84,85,118,119,116,101,96,97,88,91,9,34,132,133,29,16,86,87,120,121,100,117,98,99,90,89,6,42,130,131],[0,21,84,85,142,143,138,108,96,97,88,91,8,35,136,137,29,16,86,87,144,145,109,139,98,99,90,89,7,41,134,135],[0,146,147],[0,148,149],[0,150,151],[0,146,147,152,153,154,155,156,157],[0,158,159],[0,146,147,1,160,161],[0,146,147,1,160,161,152,153,154,162,163,164,155,156,157,165,166,167],[0,158,159,1,168,169],[0,146,147,101,170,171],[0,146,147,100,172,173],[0,148,149,174,175,171],[0,148,149,100,176,177],[0,150,151,178,179,171],[0,150,151,100,180,181],[0,146,147,100,172,173,152,153,154,182,183,184,155,156,157,185,186,187],[0,158,159,101,188,189],[0,146,147,122,190,191],[0,146,147,123,192,193],[0,146,147,126,194,195],[0,146,147,127,196,197],[0,146,147,122,190,191,152,153,154,198,199,200,155,156,157,201,202,203],[0,158,159,123,204,205],[0,146,147,126,194,195,152,153,154,206,207,208,155,156,157,209,210,211],[0,158,159,129,212,213],[0,146,147,101,170,171,1,160,161,123,192,193],[0,146,147,108,214,215,1,160,161,127,196,197],[0,146,147,100,172,173,1,160,161,122,190,191],[0,146,147,109,216,217,1,160,161,126,194,195],[0,146,147,100,172,173,1,160,161,122,190,191,152,153,154,182,183,184,162,163,164,198,199,200,155,156,157,185,186,187,165,166,167,201,202,203],[0,158,159,101,188,189,1,168,169,123,204,205],[0,146,147,109,216,217,1,160,161,126,194,195,152,153,154,218,219,220,162,163,164,206,207,208,155,156,157,221,222,223,165,166,167,209,210,211],[0,158,159,117,224,225,1,168,169,129,212,213],[0,146,147,16,226,227],[0,148,149,18,228,229],[0,150,151,18,230,231],[0,150,151,16,232,233],[0,148,149,16,234,235],[0,146,147,18,236,237],[0,146,147,52,238,239],[0,146,147,16,226,227,1,160,161,52,238,239],[0,146,147,18,236,237,1,160,161,61,240,241],[0,146,147,16,226,227,100,172,173,101,170,171],[0,148,149,18,228,229,242,172,181,243,214,244],[0,150,151,18,230,231,245,172,177,246,214,247],[0,150,151,16,232,233,245,172,177,174,170,248],[0,148,149,16,234,235,242,172,181,178,170,249],[0,146,147,18,236,237,100,172,173,108,214,215],[0,146,147,16,226,227,122,190,191,123,192,193],[0,146,147,16,226,227,126,194,195,127,196,197],[0,146,147,18,236,237,126,194,195,123,192,193],[0,146,147,18,236,237,122,190,191,127,196,197],[0,146,147,52,238,239,122,190,191,101,170,171],[0,146,147,61,240,241,126,194,195,101,170,171],[0,146,147,52,238,239,100,172,173,123,192,193],[0,146,147,61,240,241,100,172,173,127,196,197],[0,146,147,16,226,227,100,172,173,101,170,171,1,160,161,52,239,238,122,190,191,123,192,193],[0,146,147,16,226,227,109,216,217,108,214,215,1,160,161,52,239,238,126,194,195,127,196,197],[0,146,147,18,236,237,109,216,217,101,170,171,1,160,161,61,241,240,126,194,195,123,192,193],[0,146,147,18,236,237,100,172,173,108,214,215,1,160,161,61,241,240,122,190,191,127,196,197],[0,16,2,17,158,250,251,252,159,253,254,255],[0,16,2,17,158,250,251,252,159,253,254,255,23,24,13,25,256,257,258,259,260,261,262,263,26,20,27,28,264,265,266,267,268,269,270,271,4,22,5,19,272,273,274,275,276,277,278,279],[0,16,2,17,158,250,251,252,159,253,254,255,29,21,15,30,280,281,282,283,284,285,286,287],[0,20,13,19,158,273,266,259,159,261,278,271],[0,20,13,19,158,273,266,259,159,261,278,271,29,31,32,33,280,288,289,290,284,291,292,293],[0,16,2,17,158,250,251,252,159,253,254,255,1,52,6,34,168,294,295,296,169,297,298,299],[0,16,2,17,158,250,251,252,159,253,254,255,53,54,9,42,300,301,302,303,304,305,306,307],[0,16,2,17,158,250,251,252,159,253,254,255,1,52,6,34,168,294,295,296,169,297,298,299,23,24,13,25,256,257,258,259,260,261,262,263,64,62,14,39,308,309,310,311,312,313,314,315,26,20,27,28,264,265,266,267,268,269,270,271,65,59,40,38,316,317,318,319,320,321,322,323,4,22,5,19,272,273,274,275,276,277,278,279,11,55,8,41,324,325,326,327,328,329,330,331],[0,16,2,17,158,250,251,252,159,253,254,255,66,67,44,45,332,333,334,335,336,337,338,339,23,24,13,25,256,257,258,259,260,261,262,263,68,69,46,47,340,341,342,343,344,345,346,347,26,20,27,28,264,265,266,267,268,269,270,271,70,71,48,49,348,349,350,351,352,353,354,355,4,22,5,19,272,273,274,275,276,277,278,279,72,73,50,51,356,357,358,359,360,361,362,363],[0,16,2,17,158,250,251,252,159,253,254,255,1,52,6,34,168,294,295,296,169,297,298,299,29,21,15,30,280,281,282,283,284,285,286,287,53,54,9,42,300,301,302,303,304,305,306,307],[0,20,13,19,158,273,266,259,159,261,278,271,1,59,14,41,168,325,318,311,169,313,330,323],[0,20,13,19,158,273,266,259,159,261,278,271,1,59,14,41,168,325,318,311,169,313,330,323,29,31,32,33,280,288,289,290,284,291,292,293,53,63,36,35,300,364,365,366,304,367,368,369],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,23,24,13,25,256,257,258,259,260,261,262,263,382,383,384,385,386,387,388,389,390,391,392,393,26,20,27,28,264,265,266,267,268,269,270,271,394,395,396,397,398,399,400,401,402,403,404,405,4,22,5,19,272,273,274,275,276,277,278,279,138,139,95,94,406,407,408,409,410,411,412,413],[0,24,5,28,158,265,258,275,159,277,270,263,414,415,416,417,418,419,420,421,422,423,424,425,23,16,27,19,256,273,251,267,260,269,278,255,426,427,428,429,430,431,432,433,434,435,436,437,26,22,13,17,264,250,274,259,268,261,254,279,438,439,440,441,442,443,444,445,446,447,448,449,4,20,2,25,272,257,266,252,276,253,262,271,450,451,452,453,454,455,456,457,458,459,460,461],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,29,21,15,30,280,281,282,283,284,285,286,287,116,117,83,82,376,377,224,378,379,380,381,225],[0,20,13,19,158,273,266,259,159,261,278,271,450,415,440,429,454,431,420,445,458,447,436,425],[0,20,13,19,158,273,266,259,159,261,278,271,462,463,464,465,466,467,468,469,470,471,472,473],[0,20,13,19,158,273,266,259,159,261,278,271,462,463,464,465,466,467,468,469,470,471,472,473,29,31,32,33,280,288,289,290,284,291,292,293,450,415,440,429,454,431,420,445,458,447,436,425],[0,16,2,17,158,250,251,252,159,253,254,255,123,122,88,89,204,474,475,476,205,477,478,479],[0,16,2,17,158,250,251,252,159,253,254,255,123,122,88,89,204,474,475,476,205,477,478,479,23,24,13,25,256,257,258,259,260,261,262,263,480,481,482,483,484,485,486,487,488,489,490,491,26,20,27,28,264,265,266,267,268,269,270,271,492,493,494,495,496,497,498,499,500,501,502,503,4,22,5,19,272,273,274,275,276,277,278,279,125,124,140,141,504,505,506,507,508,509,510,511],[0,16,2,17,158,250,251,252,159,253,254,255,123,122,88,89,204,474,475,476,205,477,478,479,29,21,15,30,280,281,282,283,284,285,286,287,129,128,90,91,212,512,513,514,213,515,516,517],[0,16,2,17,158,250,251,252,159,253,254,255,129,128,90,91,212,512,513,514,213,515,516,517],[0,16,2,17,158,250,251,252,159,253,254,255,129,128,90,91,212,512,513,514,213,515,516,517,23,24,13,25,256,257,258,259,260,261,262,263,518,519,520,521,522,523,524,525,526,527,528,529,26,20,27,28,264,265,266,267,268,269,270,271,530,531,532,533,534,535,536,537,538,539,540,541,4,22,5,19,272,273,274,275,276,277,278,279,127,126,92,93,542,543,544,545,546,547,548,549],[0,20,13,19,158,273,266,259,159,261,278,271,550,551,552,553,554,555,556,557,558,559,560,561,29,31,32,33,280,288,289,290,284,291,292,293,562,563,564,565,566,567,568,569,570,571,572,573],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,1,52,6,34,168,294,295,296,169,297,298,299,122,123,89,88,475,476,204,474,479,478,477,205],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,53,54,9,42,300,301,302,303,304,305,306,307,128,129,91,90,513,514,212,512,517,516,515,213],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225,1,52,6,34,168,294,295,296,169,297,298,299,128,129,91,90,513,514,212,512,517,516,515,213],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225,53,54,9,42,300,301,302,303,304,305,306,307,122,123,89,88,475,476,204,474,479,478,477,205],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,1,52,6,34,168,294,295,296,169,297,298,299,122,123,89,88,475,476,204,474,479,478,477,205,23,24,13,25,256,257,258,259,260,261,262,263,382,383,384,385,386,387,388,389,390,391,392,393,64,62,14,39,308,309,310,311,312,313,314,315,481,480,483,482,486,487,484,485,491,490,489,488,26,20,27,28,264,265,266,267,268,269,270,271,394,395,396,397,398,399,400,401,402,403,404,405,65,59,40,38,316,317,318,319,320,321,322,323,493,492,495,494,498,499,496,497,503,502,501,500,4,22,5,19,272,273,274,275,276,277,278,279,138,139,95,94,406,407,408,409,410,411,412,413,11,55,8,41,324,325,326,327,328,329,330,331,124,125,141,140,506,507,504,505,511,510,509,508],[0,16,2,17,158,250,251,252,159,253,254,255,116,117,83,82,376,377,224,378,379,380,381,225,1,52,6,34,168,294,295,296,169,297,298,299,128,129,91,90,513,514,212,512,517,516,515,213,23,24,13,25,256,257,258,259,260,261,262,263,574,575,576,577,578,579,580,581,582,583,584,585,64,62,14,39,308,309,310,311,312,313,314,315,519,518,521,520,524,525,522,523,529,528,527,526,26,20,27,28,264,265,266,267,268,269,270,271,586,587,588,589,590,591,592,593,594,595,596,597,65,59,40,38,316,317,318,319,320,321,322,323,531,530,533,532,536,537,534,535,541,540,539,538,4,22,5,19,272,273,274,275,276,277,278,279,109,108,79,78,598,599,600,601,602,603,604,605,11,55,8,41,324,325,326,327,328,329,330,331,126,127,93,92,544,545,542,543,549,548,547,546],[0,24,5,28,158,265,258,275,159,277,270,263,414,415,416,417,418,419,420,421,422,423,424,425,66,69,50,49,332,349,342,359,336,361,354,347,493,123,483,140,498,507,204,485,503,490,509,205,23,16,27,19,256,273,251,267,260,269,278,255,426,427,428,429,430,431,432,433,434,435,436,437,68,67,48,51,340,357,334,351,344,353,362,339,124,480,89,494,506,499,484,474,511,478,501,488,26,22,13,17,264,250,274,259,268,261,254,279,438,439,440,441,442,443,444,445,446,447,448,449,70,73,46,45,348,333,358,343,352,345,338,363,122,492,141,482,475,487,496,505,479,510,489,500,4,20,2,25,272,257,266,252,276,253,262,271,450,451,452,453,454,455,456,457,458,459,460,461,72,71,44,47,356,341,350,335,360,337,346,355,481,125,495,88,486,476,504,497,491,502,477,508],[0,24,5,28,158,265,258,275,159,277,270,263,414,415,416,417,418,419,420,421,422,423,424,425,606,607,608,609,610,611,612,613,614,615,616,617,531,129,521,92,536,545,212,523,541,528,547,213,23,16,27,19,256,273,251,267,260,269,278,255,426,427,428,429,430,431,432,433,434,435,436,437,618,619,620,621,622,623,624,625,626,627,628,629,126,518,91,532,544,537,522,512,549,516,539,526,26,22,13,17,264,250,274,259,268,261,254,279,438,439,440,441,442,443,444,445,446,447,448,449,630,631,632,633,634,635,636,637,638,639,640,641,128,530,93,520,513,525,534,543,517,548,527,538,4,20,2,25,272,257,266,252,276,253,262,271,450,451,452,453,454,455,456,457,458,459,460,461,642,643,644,645,646,647,648,649,650,651,652,653,519,127,533,90,524,514,542,535,529,540,515,546],[0,16,2,17,158,250,251,252,159,253,254,255,100,101,75,74,370,371,188,372,373,374,375,189,1,52,6,34,168,294,295,296,169,297,298,299,122,123,89,88,475,476,204,474,479,478,477,205,29,21,15,30,280,281,282,283,284,285,286,287,116,117,83,82,376,377,224,378,379,380,381,225,53,54,9,42,300,301,302,303,304,305,306,307,128,129,91,90,513,514,212,512,517,516,515,213],[0,20,13,19,158,273,266,259,159,261,278,271,462,463,464,465,466,467,468,469,470,471,472,473,1,59,14,41,168,325,318,311,169,313,330,323,551,550,553,552,556,557,554,555,561,560,559,558,29,31,32,33,280,288,289,290,284,291,292,293,450,415,440,429,454,431,420,445,458,447,436,425,53,63,36,35,300,364,365,366,304,367,368,369,563,562,565,564,568,569,566,567,573,572,571,570],[0,16],[0,18],[0,16,26,20],[0,2,23,13],[0,3,4,32],[0,2,29,15],[0,3,29,27],[0,52],[0,63],[0,52,26,59],[0,63,26,54],[0,52,16,1],[0,18,1,61],[0,52,16,1,26,59,20,65],[0,31,1,63],[0,1,24,62],[0,15,1,9],[0,5,1,8],[0,31,1,63,26,21,65,54],[0,2,57,56],[0,60,3,16],[0,22,57,3],[0,2,28,20],[0,17,13,24],[0,20,19,13,4,24,17,27],[0,22,57,3,4,16,60,32],[0,22,57,3,23,20,30,12,26,24,33,15,4,16,60,32],[0,22,57,3,29,18,27,25],[0,22,3,57,1,55,10,37],[0,22,385,396,3,57,109,117],[0,22,57,3,159,279,654,655,158,274,656,657,29,18,25,27,284,658,262,269,280,659,257,267]],No={"P 1":0,"P -1":1,"P 1 2 1":2,"P 1 21 1":3,"C 1 2 1":4,"P 1 m 1":5,"P 1 c 1":6,"C 1 m 1":7,"C 1 c 1":8,"P 1 2/m 1":9,"P 1 21/m 1":10,"C 1 2/m 1":11,"P 1 2/c 1":12,"P 1 21/c 1":13,"C 1 2/c 1":14,"P 2 2 2":15,"P 2 2 21":16,"P 21 21 2":17,"P 21 21 21":18,"C 2 2 21":19,"C 2 2 2":20,"F 2 2 2":21,"I 2 2 2":22,"I 21 21 21":23,"P m m 2":24,"P m c 21":25,"P c c 2":26,"P m a 2":27,"P c a 21":28,"P n c 2":29,"P m n 21":30,"P b a 2":31,"P n a 21":32,"P n n 2":33,"C m m 2":34,"C m c 21":35,"C c c 2":36,"A m m 2":37,"A b m 2":38,"A m a 2":39,"A b a 2":40,"F m m 2":41,"F d d 2":42,"I m m 2":43,"I b a 2":44,"I m a 2":45,"P 2/m 2/m 2/m":46,"P m m m":46,"P 2/n 2/n 2/n":47,"P n n n":47,"P 2/c 2/c 2/m":48,"P c c m":48,"P 2/b 2/a 2/n":49,"P b a n":49,"P 21/m 2/m 2/a":50,"P m m a":50,"P 2/n 21/n 2/a":51,"P n n a":51,"P 2/m 2/n 21/a":52,"P m n a":52,"P 21/c 2/c 2/a":53,"P c c a":53,"P 21/b 21/a 2/m":54,"P b a m":54,"P 21/c 21/c 2/n":55,"P c c n":55,"P 2/b 21/c 21/m":56,"P b c m":56,"P 21/n 21/n 2/m":57,"P n n m":57,"P 21/m 21/m 2/n":58,"P m m n":58,"P 21/b 2/c 21/n":59,"P b c n":59,"P 21/b 21/c 21/a":60,"P b c a":60,"P 21/n 21/m 21/a":61,"P n m a":61,"C 2/m 2/c 21/m":62,"C m c m":62,"C 2/m 2/c 21/a":63,"C m c a":63,"C 2/m 2/m 2/m":64,"C m m m":64,"C 2/c 2/c 2/m":65,"C c c m":65,"C 2/m 2/m 2/a":66,"C m m a":66,"C 2/c 2/c 2/a":67,"C c c a":67,"F 2/m 2/m 2/m":68,"F m m m":68,"F 2/d 2/d 2/d":69,"F d d d":69,"I 2/m 2/m 2/m":70,"I m m m":70,"I 2/b 2/a 2/m":71,"I b a m":71,"I 21/b 21/c 21/a":72,"I b c a":72,"I 21/m 21/m 21/a":73,"I m m a":73,"P 4":74,"P 41":75,"P 42":76,"P 43":77,"I 4":78,"I 41":79,"P -4":80,"I -4":81,"P 4/m":82,"P 42/m":83,"P 4/n":84,"P 42/n":85,"I 4/m":86,"I 41/a":87,"P 4 2 2":88,"P 4 21 2":89,"P 41 2 2":90,"P 41 21 2":91,"P 42 2 2":92,"P 42 21 2":93,"P 43 2 2":94,"P 43 21 2":95,"I 4 2 2":96,"I 41 2 2":97,"P 4 m m":98,"P 4 b m":99,"P 42 c m":100,"P 42 n m":101,"P 4 c c":102,"P 4 n c":103,"P 42 m c":104,"P 42 b c":105,"I 4 m m":106,"I 4 c m":107,"I 41 m d":108,"I 41 c d":109,"P -4 2 m":110,"P -4 2 c":111,"P -4 21 m":112,"P -4 21 c":113,"P -4 m 2":114,"P -4 c 2":115,"P -4 b 2":116,"P -4 n 2":117,"I -4 m 2":118,"I -4 c 2":119,"I -4 2 m":120,"I -4 2 d":121,"P 4/m 2/m 2/m":122,"P4/m m m":122,"P 4/m 2/c 2/c":123,"P4/m c c":123,"P 4/n 2/b 2/m":124,"P4/n b m":124,"P 4/n 2/n 2/c":125,"P4/n n c":125,"P 4/m 21/b 2/m":126,"P4/m b m":126,"P 4/m 21/n 2/c":127,"P4/m n c":127,"P 4/n 21/m 2/m":128,"P4/n m m":128,"P 4/n 2/c 2/c":129,"P4/n c c":129,"P 42/m 2/m 2/c":130,"P42/m m c":130,"P 42/m 2/c 2/m":131,"P42/m c m":131,"P 42/n 2/b 2/c":132,"P42/n b c":132,"P 42/n 2/n 2/m":133,"P42/n n m":133,"P 42/m 21/b 2/c":134,"P42/m b c":134,"P 42/m 21/n 2/m":135,"P42/m n m":135,"P 42/n 21/m 2/c":136,"P42/n m c":136,"P 42/n 21/c 2/m":137,"P42/n c m":137,"I 4/m 2/m 2/m":138,"I4/m m m":138,"I 4/m 2/c 2/m":139,"I4/m c m":139,"I 41/a 2/m 2/d":140,"I41/a m d":140,"I 41/a 2/c 2/d":141,"I41/a c d":141,"P 3":142,"P 31":143,"P 32":144,"H 3":145,"R 3":146,"P -3":147,"H -3":148,"R -3":149,"P 3 1 2":150,"P 3 2 1":151,"P 31 1 2":152,"P 31 2 1":153,"P 32 1 2":154,"P 32 2 1":155,"H 3 2":156,"R 3 2":157,"P 3 m 1":158,"P 3 1 m":159,"P 3 c 1":160,"P 3 1 c":161,"H 3 m":162,"R 3 m":163,"H 3 c":164,"R 3 c":165,"P -3 1 2/m":166,"P -3 1 m":166,"P -3 1 2/c":167,"P -3 1 c":167,"P -3 2/m 1":168,"P -3 m 1":168,"P -3 2/c 1":169,"P -3 c 1":169,"H -3 2/m":170,"H -3 m":170,"R -3 2/m":171,"R -3 m":171,"H -3 2/c":172,"H -3 c":172,"R -3 2/c":173,"R -3 c":173,"P 6":174,"P 61":175,"P 65":176,"P 62":177,"P 64":178,"P 63":179,"P -6":180,"P 6/m":181,"P 63/m":182,"P 6 2 2":183,"P 61 2 2":184,"P 65 2 2":185,"P 62 2 2":186,"P 64 2 2":187,"P 63 2 2":188,"P 6 m m":189,"P 6 c c":190,"P 63 c m":191,"P 63 m c":192,"P -6 m 2":193,"P -6 c 2":194,"P -6 2 m":195,"P -6 2 c":196,"P 6/m 2/m 2/m":197,"P 6/m m m":197,"P 6/m 2/c 2/c":198,"P 6/m c c":198,"P 63/m 2/c 2/m":199,"P 63/m c m":199,"P 63/m 2/m 2/c":200,"P 63/m m c":200,"P 2 3":201,"F 2 3":202,"I 2 3":203,"P 21 3":204,"I 21 3":205,"P 2/m -3":206,"P m -3":206,"P 2/n -3":207,"P n -3":207,"F 2/m -3":208,"F m -3":208,"F 2/d -3":209,"F d -3":209,"I 2/m -3":210,"I m -3":210,"P 21/a -3":211,"P a -3":211,"I 21/a -3":212,"I a -3":212,"P 4 3 2":213,"P 42 3 2":214,"F 4 3 2":215,"F 41 3 2":216,"I 4 3 2":217,"P 43 3 2":218,"P 41 3 2":219,"I 41 3 2":220,"P -4 3 m":221,"F -4 3 m":222,"I -4 3 m":223,"P -4 3 n":224,"F -4 3 c":225,"I -4 3 d":226,"P 4/m -3 2/m":227,"P m -3 m":227,"P 4/n -3 2/n":228,"P n -3 n":228,"P 42/m -3 2/n":229,"P m -3 n":229,"P 42/n -3 2/m":230,"P n -3 m":230,"F 4/m -3 2/m":231,"F m -3 m":231,"F 4/m -3 2/c":232,"F m -3 c":232,"F 41/d -3 2/m":233,"F d -3 m":233,"F 41/d -3 2/c":234,"F d -3 c":234,"I 4/m -3 2/m":235,"I m -3 m":235,"I 41/a -3 2/d":236,"I a -3 d":236,"P 1 1 2":237,"P 1 1 21":238,"B 1 1 2":239,"B 2":239,"A 1 2 1":240,"C 1 21 1":241,"I 1 2 1":242,"I 2":242,"I 1 21 1":243,"P 1 1 m":244,"P 1 1 b":245,"B 1 1 m":246,"B 1 1 b":247,"P 1 1 2/m":248,"P 1 1 21/m":249,"B 1 1 2/m":250,"P 1 1 2/b":251,"P 1 1 21/b":252,"P 1 21/n 1":253,"P 1 21/a 1":254,"B 1 1 2/b":255,"P 21 2 2":256,"P 2 21 2":257,"P 21 21 2 (a)":258,"P 21 2 21":259,"P 2 21 21":260,"C 2 2 21a)":261,"C 2 2 2a":262,"F 2 2 2a":263,"I 2 2 2a":264,"P 21/m 21/m 2/n a":265,"P 42 21 2a":266,"I 2 3a":267};function PC(e){switch(e){case 1146:return 146;case 1148:return 149;case 1155:return 157;case 1160:return 163;case 1161:return 165;case 1166:return 171;case 1167:return 173;case 1003:return 237;case 1004:return 238;case 1005:return 239;case 2005:return 240;case 3005:return 241;case 4005:return 242;case 5005:return 243;case 1006:return 244;case 1007:return 245;case 1008:return 246;case 1009:return 247;case 1010:return 248;case 1011:return 249;case 1012:return 250;case 1013:return 251;case 1014:return 252;case 2014:return 253;case 3014:return 254;case 1015:return 255;case 1017:return 256;case 2017:return 257;case 1018:return 258;case 2018:return 259;case 3018:return 260;case 1020:return 261;case 1021:return 262;case 1022:return 263;case 1023:return 264;case 1059:return 265;case 1094:return 266;case 1197:return 267}let t=0;return e>146&&++t,e>148&&++t,e>155&&++t,e>160&&++t,e>161&&++t,e>166&&++t,e>167&&++t,e-1+t}function EC(e){if(e<146)return e+1;if(e===146)return 1146;if(e<149)return e+1-1;if(e===149)return 1148;if(e<157)return e+1-2;if(e===157)return 1155;if(e<163)return e+1-3;if(e===163)return 1160;if(e<165)return e+1-4;if(e===165)return 1161;if(e<171)return e+1-5;if(e===171)return 1166;if(e<173)return e+1-6;if(e===173)return 1167;if(e<237)return e+1-7;if(e===237)return 1003;if(e===238)return 1004;if(e===239)return 1005;if(e===240)return 2005;if(e===241)return 3005;if(e===242)return 4005;if(e===243)return 5005;if(e===244)return 1006;if(e===245)return 1007;if(e===246)return 1008;if(e===247)return 1009;if(e===248)return 1010;if(e===249)return 1011;if(e===250)return 1012;if(e===251)return 1013;if(e===252)return 1014;if(e===253)return 2014;if(e===254)return 3014;if(e===255)return 1015;if(e===256)return 1017;if(e===257)return 2017;if(e===258)return 1018;if(e===259)return 2018;if(e===260)return 3018;if(e===261)return 1020;if(e===262)return 1021;if(e===263)return 1022;if(e===264)return 1023;if(e===265)return 1059;if(e===266)return 1094;if(e===267)return 1197;throw new Error(`unknown spacegroup index '${e}'`)}const Iy=function(){const e=Object.create(null);for(const t of Object.keys(No))e[No[t]]=t;return e}(),BC=function(){const e=Object.create(null);for(const t of Object.keys(No)){const n=No[t];e[n]=EC(n)}return e}();function RC(e){const t=typeof e=="number"?PC(e):No[e];return typeof t>"u"||typeof Iy[t]>"u"?-1:t}var bi;(function(e){e.Zero=n("P 1",O.create(1,1,1),O.create(Math.PI/2,Math.PI/2,Math.PI/2));function t(r){return r?r.index===0&&r.size[0]===1&&r.size[1]===1&&r.size[1]===1:!0}e.isZero=t;function n(r,i,o){const s=RC(r);if(s<0)return console.warn(`Unknown spacegroup '${r}', returning a 'P 1' with cellsize [1, 1, 1]`),e.Zero;const c=i[0]*i[1]*i[2],a=o[0],u=o[1],l=o[2],f=i[0],d=i[1],m=i[2],h=Math.cos(u),p=(Math.cos(a)-Math.cos(u)*Math.cos(l))/Math.sin(l),_=Math.sqrt(1-h*h-p*p),y=[f,0,0],v=[Math.cos(l)*d,Math.sin(l)*d,0],A=[h*m,p*m,_*m],g=Ke.ofRows([[y[0],v[0],A[0],0],[0,v[1],A[1],0],[0,0,A[2],0],[0,0,0,1]]),b=Ke.invert(Ke.zero(),g);return{index:s,size:i,volume:c,anglesInRadians:o,toFractional:b,fromFractional:g}}e.create=n})(bi||(bi={}));var rr;(function(e){e.ZeroP1=t(bi.Zero);function t(_){const y=wC[_.index].map(g=>f(IC[g])),v=Iy[_.index],A=BC[_.index];return{name:v,num:A,cell:_,operators:y}}e.create=t;const n=O(),r=Ke();function i(_,y,v,A,g,b){return O.set(n,v,A,g),Ke.fromTranslation(r,n),Ke.mul(b,Ke.mul(b,Ke.mul(b,_.cell.fromFractional,r),_.operators[y]),_.cell.toFractional)}e.setOperatorMatrix=i;function o(_,y,v,A,g){const b=i(_,y,v,A,g,Ke.zero());return Mt.create(`${y+1}_${5+v}${5+A}${5+g}`,b,{hkl:O.create(v,A,g),spgrOp:y})}e.getSymmetryOperator=o;const s=O(),c=O(),a=O(),u=O();function l(_,y,v,A,g,b){const C=Ke.zero();O.set(n,v,A,g),O.floor(s,b),Ke.copy(C,_.operators[y]),O.floor(c,O.transformMat4(c,b,C)),Ke.getTranslation(u,C),O.sub(u,u,c),O.add(u,u,s),O.add(u,u,n),Ke.setTranslation(C,u),Ke.mul(C,_.cell.fromFractional,C),Ke.mul(C,C,_.cell.toFractional),O.sub(a,c,s);const I=v-a[0],S=A-a[1],P=g-a[2];return Mt.create(`${y+1}_${5+I}${5+S}${5+P}`,C,{hkl:O.create(I,S,P),spgrOp:y})}e.getSymmetryOperatorRef=l;function f(_){const y=yd[_[0]],v=yd[_[1]],A=yd[_[2]];return Ke.ofRows([y,v,A,[0,0,0,1]])}function d(_){return[p(m(_[0],_[4],_[8]),h(_[12])),p(m(_[1],_[5],_[9]),h(_[13])),p(m(_[2],_[6],_[10]),h(_[14]))].join(",")}e.getOperatorXyz=d;function m(_,y,v){const A=[];if(_>0?A.push("+X"):_<0&&A.push("-X"),y>0?A.push("+Y"):y<0&&A.push("-Y"),v>0?A.push("+Z"):v<0&&A.push("-Z"),A.length===1)return A[0].charAt(0)==="+"?A[0].substr(1):A[0];if(A.length===2){const g=A[0].charAt(0),b=A[1].charAt(0);if(g==="+")return`${A[0].substr(1)}${A[1]}`;if(b==="+")return`${A[1].substr(1)}${A[0]}`}throw new Error(`unknown rotation '${A}', ${_} ${y} ${v}`)}function h(_){switch(_){case 1/2:return"1/2";case 1/4:return"1/4";case 3/4:return"3/4";case 1/3:return"1/3";case 2/3:return"2/3";case 1/6:return"1/6";case 5/6:return"5/6"}return""}function p(_,y){return y===""?_:_.length>2?`${_}+${y}`:_.charAt(0)==="-"?`${y}${_}`:`${y}+${_}`}})(rr||(rr={}));var Pn;(function(e){function t(o,s,c){o.squaredDistances[o.count]=c,o.indices[o.count++]=s}e.add=t;function n(o){o.count=0}e.reset=n;function r(){return{count:0,indices:[],squaredDistances:[]}}e.create=r;function i(o,s){for(let c=0;c<s.count;++c)o.indices[c]=s.indices[c],o.squaredDistances[c]=s.squaredDistances[c];return o.count=s.count,o}e.copy=i})(Pn||(Pn={}));class DC{constructor(t,n){this.parent=null,this.child=null,this.degree=0,this.isMarked=!1,this.key=t,this.value=n,this.prev=this,this.next=this}}class kC{constructor(t){if(this._index=-1,this._items=[],this._len=0,t){let n=t,r=0;do this._items[r++]=n,n=n.next;while(t!==n);this._len=r}}hasNext(){return this._index<this._len-1}next(){return this._items[++this._index]}reset(t){this._index=-1,this._len=0;let n=t,r=0;do this._items[r++]=n,n=n.next;while(t!==n);this._len=r}}const gd=new kC;class wy{constructor(t){this._minNode=null,this._nodeCount=0,this._compare=t||this._defaultCompare}clear(){this._minNode=null,this._nodeCount=0}decreaseKey(t,n){if(!t)throw new Error("Cannot decrease key of non-existent node");if(this._compare({key:n},{key:t.key})>0)throw new Error("New key is larger than old key");t.key=n;const r=t.parent;r&&this._compare(t,r)<0&&(this._cut(t,r,this._minNode),this._cascadingCut(r,this._minNode)),this._compare(t,this._minNode)<0&&(this._minNode=t)}delete(t){const n=t.parent;n&&(this._cut(t,n,this._minNode),this._cascadingCut(n,this._minNode)),this._minNode=t,this.extractMinimum()}extractMinimum(){const t=this._minNode;if(t){if(t.child){let r=t.child;do r.parent=null,r=r.next;while(r!==t.child)}let n=null;t.next!==t&&(n=t.next),this._removeNodeFromList(t),this._nodeCount--,this._minNode=this._mergeLists(n,t.child),this._minNode&&(this._minNode=this._consolidate(this._minNode))}return t}findMinimum(){return this._minNode}insert(t,n){const r=new DC(t,n);return this._minNode=this._mergeLists(this._minNode,r),this._nodeCount++,r}isEmpty(){return this._minNode===null}size(){return this._minNode===null?0:this._getNodeListSize(this._minNode)}union(t){this._minNode=this._mergeLists(this._minNode,t._minNode),this._nodeCount+=t._nodeCount}_defaultCompare(t,n){return t.key>n.key?1:t.key<n.key?-1:0}_cut(t,n,r){t.parent=null,n.degree--,t.next===t?n.child=null:n.child=t.next,this._removeNodeFromList(t);const i=this._mergeLists(r,t);return t.isMarked=!1,i}_cascadingCut(t,n){const r=t.parent;return r&&(t.isMarked?(n=this._cut(t,r,n),n=this._cascadingCut(r,n)):t.isMarked=!0),n}_consolidate(t){const n=[];for(gd.reset(t);gd.hasNext();){let i=gd.next(),o=n[i.degree];for(;o;){if(this._compare(i,o)>0){const s=i;i=o,o=s}this._linkHeaps(o,i),n[i.degree]=null,i.degree++,o=n[i.degree]}n[i.degree]=i}let r=null;for(let i=0;i<n.length;i++){const o=n[i];o&&(o.next=o,o.prev=o,r=this._mergeLists(r,o))}return r}_removeNodeFromList(t){const n=t.prev,r=t.next;n.next=r,r.prev=n,t.next=t,t.prev=t}_linkHeaps(t,n){this._removeNodeFromList(t),n.child=this._mergeLists(t,n.child),t.parent=n,t.isMarked=!1}_mergeLists(t,n){if(!t)return n||null;if(!n)return t;const r=t.next;return t.next=n.next,t.next.prev=t,n.next=r,n.next.prev=n,this._compare(t,n)<0?t:n}_getNodeListSize(t){let n=0,r=t;do n++,r.child&&(n+=this._getNodeListSize(r.child)),r=r.next;while(r!==t);return n}}function Py(e){const t=new Map;return n=>{if(t.has(n))return t.get(n);const r=e(n);return t.set(n,r),r}}function Ys(e,t,n){return new TC(e,t,n)}class TC{find(t,n,r,i,o){this.ctx.x=t,this.ctx.y=n,this.ctx.z=r,this.ctx.radius=i,this.ctx.isCheck=!1;const s=o??this.result;return By(this.ctx,s),s}nearest(t,n,r,i=1,o,s){this.ctx.x=t,this.ctx.y=n,this.ctx.z=r,this.ctx.k=i,this.ctx.stopIf=o;const c=s??this.result;return jC(this.ctx,c),c}check(t,n,r,i){return this.ctx.x=t,this.ctx.y=n,this.ctx.z=r,this.ctx.radius=i,this.ctx.isCheck=!0,By(this.ctx,this.result)}approxNearest(t,n,r,i,o){this.ctx.x=t,this.ctx.y=n,this.ctx.z=r,this.ctx.radius=i,this.ctx.isCheck=!1;const s=o??this.result;return FC(this.ctx,s),s}constructor(t,n,r){const i=OC(t,n,r);this.ctx=MC(i),this.boundary={box:i.boundingBox,sphere:i.boundingSphere},this.buckets={offset:i.bucketOffset,count:i.bucketCounts,array:i.bucketArray},this.result=Pn.create()}}function NC(e){const{expandedBox:t,size:[n,r,i],data:{x:o,y:s,z:c,radius:a,indices:u},elementCount:l,delta:f}=e,d=n*r*i,{min:[m,h,p]}=t;let _=0,y=0;const v=new Uint32Array(d),A=new Int32Array(l);for(let S=0;S<l;S++){const P=Fe.getAt(u,S),T=Math.floor((o[P]-m)/f[0]),D=Math.floor((s[P]-h)/f[1]),w=Math.floor((c[P]-p)/f[2]),E=(T*r+D)*i+w;(v[E]+=1)===1&&(y+=1),A[S]=E}if(a)for(let S=0;S<l;S++){const P=Fe.getAt(u,S);a[P]>_&&(_=a[P])}const g=new Int32Array(y);for(let S=0,P=0;S<d;S++){const T=v[S];T>0&&(v[S]=P+1,g[P]=T,P+=1)}const b=new Uint32Array(y);for(let S=1;S<y;++S)b[S]+=b[S-1]+g[S-1];const C=new Int32Array(y),I=new Int32Array(l);for(let S=0;S<l;S++){const P=v[A[S]];if(P>0){const T=P-1;I[b[T]+C[T]]=S,C[T]+=1}}return{size:e.size,bucketArray:I,bucketCounts:g,bucketOffset:b,grid:v,delta:f,min:e.expandedBox.min,data:e.data,maxRadius:_,expandedBox:e.expandedBox,boundingBox:e.boundingBox,boundingSphere:e.boundingSphere}}const Ey=2**24;function OC(e,t,n){const r=nr.expand(nr(),t.box,O.create(.5,.5,.5)),{indices:i}=e,o=nr.size(O(),r);let s,c;const a=Fe.size(i),u=typeof n=="number"?n:32,l=Array.isArray(n)&&n;if(l&&!O.isZero(l))c=[Math.ceil(o[0]/l[0]),Math.ceil(o[1]/l[1]),Math.ceil(o[2]/l[2])],s=l;else if(a>0){const h=Math.ceil(a/u),p=Math.pow(h/(o[0]*o[1]*o[2]),1/3);c=[Math.ceil(o[0]*p),Math.ceil(o[1]*p),Math.ceil(o[2]*p)],s=[o[0]/c[0],o[1]/c[1],o[2]/c[2]]}else s=o,c=[1,1,1];const f=c[0]*c[1]*c[2];if(f>Ey){const h=Math.cbrt(f/Ey);c=[Math.ceil(c[0]/h),Math.ceil(c[1]/h),Math.ceil(c[2]/h)],s=[o[0]/c[0],o[1]/c[1],o[2]/c[2]]}const d={x:e.x,y:e.y,z:e.z,indices:i,radius:e.radius},m={size:c,data:d,expandedBox:r,boundingBox:t.box,boundingSphere:t.sphere,elementCount:a,delta:s};return NC(m)}function MC(e){return{grid:e,x:.1,y:.1,z:.1,k:1,stopIf:void 0,radius:.1,isCheck:!1}}function By(e,t){const{min:n,size:[r,i,o],bucketOffset:s,bucketCounts:c,bucketArray:a,grid:u,data:{x:l,y:f,z:d,indices:m,radius:h},delta:p,maxRadius:_}=e.grid,{radius:y,isCheck:v,x:A,y:g,z:b}=e,C=y+_,I=C*C;Pn.reset(t);const S=Math.max(0,Math.floor((A-C-n[0])/p[0])),P=Math.max(0,Math.floor((g-C-n[1])/p[1])),T=Math.max(0,Math.floor((b-C-n[2])/p[2])),D=Math.min(r-1,Math.floor((A+C-n[0])/p[0])),w=Math.min(i-1,Math.floor((g+C-n[1])/p[1])),E=Math.min(o-1,Math.floor((b+C-n[2])/p[2]));if(S>D||P>w||T>E)return!1;for(let k=S;k<=D;k++)for(let F=P;F<=w;F++)for(let V=T;V<=E;V++){const de=u[(k*i+F)*o+V];if(de===0)continue;const W=de-1,J=s[W],le=c[W],K=J+le;for(let ae=J;ae<K;ae++){const me=Fe.getAt(m,a[ae]),De=l[me]-A,te=f[me]-g,ce=d[me]-b,M=De*De+te*te+ce*ce;if(M<=I){if(_>0&&Math.sqrt(M)-h[me]>y)continue;if(v)return!0;Pn.add(t,a[ae],M)}}}return t.count>0}function qC(e){const t=[],n=e*2+1;for(let r=0;r<n;++r)for(let i=0;i<n;++i)for(let o=0;o<n;++o)t.push(O.create(r-e,i-e,o-e));return t.sort((r,i)=>O.squaredMagnitude(r)-O.squaredMagnitude(i)),t.flat()}const UC=Py(qC);function FC(e,t){const{min:n,size:[r,i,o],bucketOffset:s,bucketCounts:c,bucketArray:a,grid:u,data:{x:l,y:f,z:d,indices:m},delta:h}=e.grid,{radius:p,x:_,y,z:v}=e,A=p*p;Pn.reset(t);const g=Math.max(0,Math.floor((_-p-n[0])/h[0])),b=Math.max(0,Math.floor((y-p-n[1])/h[1])),C=Math.max(0,Math.floor((v-p-n[2])/h[2])),I=Math.min(r-1,Math.floor((_+p-n[0])/h[0])),S=Math.min(i-1,Math.floor((y+p-n[1])/h[1])),P=Math.min(o-1,Math.floor((v+p-n[2])/h[2]));if(g>I||b>S||C>P)return!1;const T=Math.floor((_-n[0])/h[0]),D=Math.floor((y-n[1])/h[1]),w=Math.floor((v-n[2])/h[2]),E=UC(Math.max(I-g,S-b,P-C)+1);for(let k=0,F=E.length;k<F;k+=3){const V=T+E[k],de=D+E[k+1],W=w+E[k+2];if(V<g||V>I||de<b||de>S||W<C||W>P)continue;const J=u[(V*i+de)*o+W];if(J===0)continue;const le=J-1,K=s[le],ae=c[le],me=K+ae;let De=Number.MAX_VALUE;for(let te=K;te<me;te++){const ce=Fe.getAt(m,a[te]),M=l[ce]-_,B=f[ce]-y,j=d[ce]-v,ne=M*M+B*B+j*j;ne<=A&&ne<De&&(Pn.add(t,a[te],ne),De=ne)}if(De!==Number.MAX_VALUE)return!0}return t.count>0}const Ry=O(),Wr=O(),Oo=new Set,bd=new Set,LC=[.1],GC=[.1],HC=[.1],Xi=new wy;function jC(e,t){const{min:n,expandedBox:r,boundingSphere:{center:i},size:[o,s,c],bucketOffset:a,bucketCounts:u,bucketArray:l,grid:f,data:{x:d,y:m,z:h,indices:p,radius:_},delta:y,maxRadius:v}=e.grid,{x:A,y:g,z:b,k:C,stopIf:I}=e,S=Fe.size(p);if(Pn.reset(t),S===0||C<=0)return!1;let P,T,D,w=!1,E=1,k=!0,F=0,V=LC,de=GC,W=0,J=!0,le,K=!1;const ae=HC,me=v*v;V.length=0,ae.length=0,Oo.clear(),Xi.clear(),O.set(Wr,A,g,b),nr.containsVec3(r,Wr)?(P=Math.floor((A-n[0])/y[0]),T=Math.floor((g-n[1])/y[1]),D=Math.floor((b-n[2])/y[2])):(nr.nearestIntersectionWithRay(Wr,r,Wr,O.normalize(Ry,O.sub(Ry,i,Wr))),P=Math.max(0,Math.min(o-1,Math.floor((Wr[0]-n[0])/y[0]))),T=Math.max(0,Math.min(s-1,Math.floor((Wr[1]-n[1])/y[1]))),D=Math.max(0,Math.min(c-1,Math.floor((Wr[2]-n[2])/y[2]))));const De=v!==0?Math.max(1,Math.min(o-1,Math.ceil(v/y[0]))):1,te=v!==0?Math.max(1,Math.min(s-1,Math.ceil(v/y[1]))):1,ce=v!==0?Math.max(1,Math.min(c-1,Math.ceil(v/y[2]))):1;for(V.push(P,T,D,(P*s+T)*c+D);t.count<S;){const M=E*4;for(let B=0;B<M;B+=4)if(le=V[B+3],!Oo.has(le)){Oo.add(le),K=Oo.size>=f.length;const j=f[le];if(j!==0){const ne=W,G=j-1,$=a[G],Y=u[G],ie=$+Y;for(let oe=$;oe<ie;oe++){const pe=l[oe],L=Fe.getAt(p,pe),q=d[L]-A,H=m[L]-g,Z=h[L]-b;let re=q*q+H*H+Z*Z;if(v!==0){const Re=_[L];re-=Re*Re}J&&re>W&&(W=re),Xi.insert(re,pe)}ne<W&&(J=!1)}}de.length=0,F=0,bd.clear();for(let B=0;B<M;B+=4){P=V[B],T=V[B+1],D=V[B+2];for(let j=-De;j<=De;j++){const ne=P+j;if(!(ne<0||ne>=o))for(let G=-te;G<=te;G++){const $=T+G;if(!($<0||$>=s))for(let Y=-ce;Y<=ce;Y++){const ie=D+Y;if(!(ie<0||ie>=c)&&(le=(ne*s+$)*c+ie,!bd.has(le)&&(bd.add(le),!Oo.has(le)))){if(!k){const oe=n[0]+ne*y[0]-A,pe=n[1]+$*y[1]-g,L=n[2]+ie*y[2]-b;if(oe*oe+pe*pe+L*L-me>W){ae.push(ne,$,ie,le);continue}}de.push(ne,$,ie,le),F++}}}}}if(k=!1,F===0){if(C===1){const B=Xi.findMinimum();if(B){const{key:j,value:ne}=B;return Pn.add(t,ne,j),!0}}else for(;!Xi.isEmpty()&&(K||Xi.findMinimum().key<=W)&&t.count<C;){const B=Xi.extractMinimum(),j=B.key,ne=B.value;Pn.add(t,ne,j),I&&!w&&(w=I(ne,j))}if(t.count>=C||w||t.count>=S)return t.count>0;if(k=!0,J=!0,ae.length>0){for(let B=0,j=ae.length;B<j;B++)V.push(ae[B]);ae.length=0,E=V.length}}else{const B=V;V=de,de=B,E=F}}return t.count>0}var lt;(function(e){function t(m,h,p){return{kind:"element-location",structure:m,unit:h,element:p||0}}e.create=t;function n(m){return t(m.structure,m.unit,m.element)}e.clone=n;function r(m,h,p,_){return h&&(m.structure=h),p&&(m.unit=p),_!==void 0&&(m.element=_),m}e.set=r;function i(m,h){return m.unit=h.unit,m.element=h.element,m}e.copy=i;function o(m){return!!m&&m.kind==="element-location"}e.is=o;function s(m,h){return m.unit===h.unit&&m.element===h.element}e.areEqual=s;const c=O(),a=O();function u(m,h){return m.unit.conformation.position(m.element,c),h.unit.conformation.position(h.element,a),O.distance(c,a)}e.distance=u;function l(m,h){return h.unit.conformation.position(h.element,m)}e.position=l;function f(m){return m.unit.model.atomicHierarchy.residueAtomSegments.index[m.element]}e.residueIndex=f;function d(m){return m.unit.model.atomicHierarchy.chainAtomSegments.index[m.element]}e.chainIndex=d})(lt||(lt={}));class VC{add(t){const n=this.getHash(t);if(this.byHash.has(n)){const r=this.byHash.get(n);for(let i=0,o=r.length;i<o;i++)if(this.areEqual(t,r[i]))return!1;return r[r.length]=t,this.size++,!0}else return this.byHash.set(n,[t]),this.size++,!0}has(t){const n=this.getHash(t);if(!this.byHash.has(n))return!1;const r=this.byHash.get(n);for(let i=0,o=r.length;i<o;i++)if(this.areEqual(t,r[i]))return!0;return!1}constructor(t,n){this.getHash=t,this.areEqual=n,this.size=0,this.byHash=new Map}}function vd(e,t){return new VC(e,t)}var zt;(function(e){function t(){return{keys:new Set,array:[]}}e.create=t;function n({keys:i,array:o},s,c){return i.has(s)?!1:(i.add(s),o[o.length]=c,!0)}e.add=n;function r({keys:i},o){return i.has(o)}e.has=r})(zt||(zt={}));var se;(function(e){function t(c,a,u){return{kind:"variable",name:c,type:a,isConstraint:u}}e.Variable=t;function n(c,a,u){return{kind:"value",namespace:c,name:a,parent:u}}e.Value=n;function r(c,a,u,l){return{kind:"container",namespace:c,name:a,child:u,alias:l}}e.Container=r;function i(c){return{kind:"union",types:c}}e.Union=i;function o(c,a,u,l){const f=Object.create(null);for(const d of l)f[d]=!0;return{kind:"oneof",namespace:c,name:a,type:u,values:f}}e.OneOf=o,e.Any={kind:"any"},e.AnyValue={kind:"any-value"},e.Num=n("","Number"),e.Str=n("","String"),e.Bool=o("","Bool",e.Str,["true","false"]);function s({values:c}){return Object.keys(c).sort()}e.oneOfValues=s})(se||(se={}));var br;(function(e){function t(a){return{name:a}}e.Symbol=t;function n(a,u){return u?{head:a,args:u}:{head:a}}e.Apply=n;function r(a){return!!a&&Array.isArray(a)}e.isArgumentsArray=r;function i(a){return!!a&&!Array.isArray(a)}e.isArgumentsMap=i;function o(a){return!s(a)&&!c(a)}e.isLiteral=o;function s(a){return!!a&&!!a.head&&typeof a=="object"}e.isApply=s;function c(a){return!!a&&typeof a.name=="string"}e.isSymbol=c})(br||(br={}));function ke(e,t){const{description:n=void 0,isOptional:r=!1,isRest:i=!1,defaultValue:o=void 0}=t||{};return{type:e,isOptional:r,isRest:i,defaultValue:o,description:n}}var nt;(function(e){e.None=t({});function t(r){return{kind:"dictionary",map:r,"@type":0}}e.Dictionary=t;function n(r,i){const{nonEmpty:o=!1}=i||{};return{kind:"list",type:r,nonEmpty:o,"@type":0}}e.List=n})(nt||(nt={}));function zC(e,t,n,r){const i=function(o){return br.Apply(br.Symbol(i.id),o)};return i.info={namespace:"",name:e,description:r},i.id="",i.args=t,i.type=n,i}function Dy(e,t,n,r){const i=function(o){return br.Apply(br.Symbol(i.id),o)};return i.info={namespace:e,name:t,description:r},i.id=`${e}.${t}`,i.args=nt.None,i.type=n,i}function Zs(e){const t=e;return typeof t=="function"&&!!t.info&&!!t.args&&typeof t.info.namespace=="string"&&!!t.type}function it(e,t,n){return zC("",e,t,n)}function ky(e){Oy("","",e)}function Ty(e){const t=[];return My(e,t),t}function Ny(e){const t=/([a-z])([A-Z])([a-z]|$)/g;return e.replace(t,(n,r,i,o)=>`${r}-${i.toLocaleLowerCase()}${o}`).replace(t,(n,r,i,o)=>`${r}-${i.toLocaleLowerCase()}${o}`)}function Oy(e,t,n){if(Zs(n)){n.info.namespace=e,n.info.name=n.info.name||Ny(t),n.id=`${n.info.namespace}.${n.info.name}`;return}const r=`${n["@namespace"]||Ny(t)}`,i=e?`${e}.${r}`:r;for(const o of Object.keys(n))typeof n[o]!="object"&&!Zs(n[o])||Oy(i,o,n[o])}function My(e,t){if(Zs(e)){t.push(e);return}for(const n of Object.keys(e))typeof e[n]!="object"&&!Zs(e[n])||My(e[n],t)}var gt;(function(e){e.AnyVar=se.Variable("a",se.Any),e.AnyValueVar=se.Variable("a",se.Any),e.ConstrainedVar=se.Variable("a",se.Any,!0),e.Regex=se.Value("Core","Regex"),e.Set=t=>se.Container("Core","Set",t||e.AnyValueVar),e.List=t=>se.Container("Core","List",t||e.AnyVar),e.Fn=(t,n)=>se.Container("Core","Fn",t||e.AnyVar,n),e.Flags=(t,n)=>se.Container("Core","Flags",t,n),e.BitFlags=e.Flags(se.Num,"BitFlags")})(gt||(gt={}));function sn(e,t){return it(nt.Dictionary({0:ke(e)}),e,t)}function Yr(e,t){return it(nt.List(e,{nonEmpty:!0}),e,t)}function Wn(e,t,n){return it(nt.Dictionary({0:ke(e),1:ke(e)}),t,n)}nt.Dictionary({0:ke(se.Num),1:ke(se.Num)});const KC={"@header":"Types",bool:it(nt.Dictionary({0:ke(se.AnyValue)}),se.Bool,"Convert a value to boolean."),num:it(nt.Dictionary({0:ke(se.AnyValue)}),se.Num,"Convert a value to number."),str:it(nt.Dictionary({0:ke(se.AnyValue)}),se.Str,"Convert a value to string."),regex:it(nt.Dictionary({0:ke(se.Str,{description:"Expression"}),1:ke(se.Str,{isOptional:!0,description:"Flags, e.g. 'i' for ignore case"})}),gt.Regex,"Creates a regular expression from a string using the ECMAscript syntax."),list:it(nt.List(gt.AnyVar),gt.List()),set:it(nt.List(gt.AnyValueVar),gt.Set()),bitflags:it(nt.Dictionary({0:ke(se.Num)}),gt.BitFlags,"Interpret a number as bitflags."),compositeKey:it(nt.List(se.AnyValue),se.AnyValue)},$C={"@header":"Logic",not:sn(se.Bool),and:Yr(se.Bool),or:Yr(se.Bool)},WC={"@header":"Control",eval:it(nt.Dictionary({0:ke(gt.Fn(gt.AnyVar))}),gt.AnyVar,"Evaluate a function."),fn:it(nt.Dictionary({0:ke(gt.AnyVar)}),gt.Fn(gt.AnyVar),'Wrap an expression to a "lazy" function.'),if:it(nt.Dictionary({0:ke(se.Bool,{description:"Condition"}),1:ke(se.Variable("a",se.Any),{description:"If true"}),2:ke(se.Variable("b",se.Any),{description:"If false"})}),se.Union([se.Variable("a",se.Any),se.Variable("b",se.Any)])),assoc:it(nt.Dictionary({0:ke(se.Str,{description:"Name"}),1:ke(se.Variable("a",se.Any),{description:"Value to assign"})}),se.Variable("a",se.Any))},YC={"@header":"Relational",eq:Wn(se.Variable("a",se.AnyValue,!0),se.Bool),neq:Wn(se.Variable("a",se.AnyValue,!0),se.Bool),lt:Wn(se.Num,se.Bool),lte:Wn(se.Num,se.Bool),gr:Wn(se.Num,se.Bool),gre:Wn(se.Num,se.Bool),inRange:it(nt.Dictionary({0:ke(se.Num,{description:"Value to test"}),1:ke(se.Num,{description:"Minimum value"}),2:ke(se.Num,{description:"Maximum value"})}),se.Bool,"Check if the value of the 1st argument is >= 2nd and <= 3rd.")},ZC={"@header":"Math",add:Yr(se.Num),sub:Yr(se.Num),mult:Yr(se.Num),div:Wn(se.Num,se.Num),pow:Wn(se.Num,se.Num),mod:Wn(se.Num,se.Num),min:Yr(se.Num),max:Yr(se.Num),cantorPairing:Wn(se.Num,se.Num),sortedCantorPairing:Wn(se.Num,se.Num),invertCantorPairing:it(nt.Dictionary({0:ke(se.Num)}),gt.List(se.Num)),floor:sn(se.Num),ceil:sn(se.Num),roundInt:sn(se.Num),trunc:sn(se.Num),abs:sn(se.Num),sign:sn(se.Num),sqrt:sn(se.Num),cbrt:sn(se.Num),sin:sn(se.Num),cos:sn(se.Num),tan:sn(se.Num),asin:sn(se.Num),acos:sn(se.Num),atan:sn(se.Num),sinh:sn(se.Num),cosh:sn(se.Num),tanh:sn(se.Num),exp:sn(se.Num),log:sn(se.Num),log10:sn(se.Num),atan2:Wn(se.Num,se.Num)},XC={"@header":"Strings",concat:Yr(se.Str),match:it(nt.Dictionary({0:ke(gt.Regex),1:ke(se.Str)}),se.Bool)},QC={"@header":"Lists",getAt:it(nt.Dictionary({0:ke(gt.List()),1:ke(se.Num)}),gt.AnyVar),equal:it(nt.Dictionary({0:ke(gt.List()),1:ke(gt.List())}),se.Bool)},JC={"@header":"Sets",has:it(nt.Dictionary({0:ke(gt.Set(gt.ConstrainedVar)),1:ke(gt.ConstrainedVar)}),se.Bool,"Check if the the 1st argument includes the value of the 2nd."),isSubset:it(nt.Dictionary({0:ke(gt.Set(gt.ConstrainedVar)),1:ke(gt.Set(gt.ConstrainedVar))}),se.Bool,"Check if the the 1st argument is a subset of the 2nd.")},e4={"@header":"Flags",hasAny:it(nt.Dictionary({0:ke(gt.Flags(gt.ConstrainedVar)),1:ke(gt.Flags(gt.ConstrainedVar))}),se.Bool,"Check if the the 1st argument has at least one of the 2nd one's flags."),hasAll:it(nt.Dictionary({0:ke(gt.Flags(gt.ConstrainedVar)),1:ke(gt.Flags(gt.ConstrainedVar))}),se.Bool,"Check if the the 1st argument has all 2nd one's flags.")},Ad={"@header":"Language Primitives",type:KC,logic:$C,ctrl:WC,rel:YC,math:ZC,str:XC,list:QC,set:JC,flags:e4};ky(Ad);const t4=Ty(Ad);(function(){const e=Object.create(null);for(const t of t4)e[t.id]=t;return e})();var We;(function(e){e.ElementSymbol=se.Value("Structure","ElementSymbol"),e.AtomName=se.Value("Structure","AtomName"),e.BondFlag=se.OneOf("Structure","BondFlag",se.Str,["covalent","metallic","ion","hydrogen","sulfide","computed","aromatic"]),e.BondFlags=gt.Flags(e.BondFlag,"BondFlags"),e.SecondaryStructureFlag=se.OneOf("Structure","SecondaryStructureFlag",se.Str,["alpha","beta","3-10","pi","sheet","strand","helix","turn","none"]),e.SecondaryStructureFlags=gt.Flags(e.SecondaryStructureFlag,"SecondaryStructureFlag"),e.RingFingerprint=se.Value("Structure","RingFingerprint"),e.EntityType=se.OneOf("Structure","EntityType",se.Str,["polymer","non-polymer","water","branched"]),e.EntitySubtype=se.OneOf("Structure","EntitySubtype",se.Str,["other","polypeptide(D)","polypeptide(L)","polydeoxyribonucleotide","polyribonucleotide","polydeoxyribonucleotide/polyribonucleotide hybrid","cyclic-pseudo-peptide","peptide nucleic acid","oligosaccharide"]),e.ObjectPrimitive=se.OneOf("Structure","ObjectPrimitive",se.Str,["atomistic","sphere","gaussian","other"]),e.ResidueId=se.Value("Structure","ResidueId"),e.ElementSet=se.Value("Structure","ElementSet"),e.ElementSelection=se.Value("Structure","ElementSelection"),e.ElementReference=se.Value("Structure","ElementReference"),e.ElementSelectionQuery=gt.Fn(e.ElementSelection,"ElementSelectionQuery")})(We||(We={}));const n4={"@header":"Types",elementSymbol:it(nt.Dictionary({0:ke(se.Str)}),We.ElementSymbol,"Create element symbol representation from a string value."),atomName:it(nt.Dictionary({0:ke(se.AnyValue)}),We.AtomName,"Convert a value to an atom name."),entityType:it(nt.Dictionary({0:ke(We.EntityType)}),We.EntityType,`Create normalized representation of entity type: ${se.oneOfValues(We.EntityType).join(", ")}.`),bondFlags:it(nt.List(We.BondFlag),We.BondFlags,`Create bond flags representation from a list of strings. Allowed flags: ${se.oneOfValues(We.BondFlag).join(", ")}.`),ringFingerprint:it(nt.List(We.ElementSymbol,{nonEmpty:!0}),We.RingFingerprint,"Create ring fingerprint from the supplied atom element list."),secondaryStructureFlags:it(nt.List(We.SecondaryStructureFlag),We.SecondaryStructureFlags,`Create secondary structure flags representation from a list of strings. Allowed flags: ${se.oneOfValues(We.SecondaryStructureFlag).join(", ")}.`),authResidueId:it(nt.Dictionary({0:ke(se.Str,{description:"auth_asym_id"}),1:ke(se.Num,{description:"auth_seq_id"}),2:ke(se.Str,{description:"pdbx_PDB_ins_code",isOptional:!0})}),We.ResidueId,'Residue identifier based on "auth_" annotation.'),labelResidueId:it(nt.Dictionary({0:ke(se.Str,{description:"label_entity_id"}),1:ke(se.Str,{description:"label_asym_id"}),2:ke(se.Num,{description:"label_seq_id"}),3:ke(se.Str,{description:"pdbx_PDB_ins_code",isOptional:!0})}),We.ResidueId,`Residue identifier based on mmCIF's "label_" annotation.`)},r4={"@header":"Iteration Slots",element:it(nt.None,We.ElementReference,"A reference to the current element."),elementSetReduce:it(nt.None,se.Variable("a",se.AnyValue,!0),"Current value of the element set reducer.")},i4={"@header":"Generators",all:it(nt.None,We.ElementSelectionQuery,"The entire structure."),atomGroups:it(nt.Dictionary({"entity-test":ke(se.Bool,{isOptional:!0,defaultValue:!0,description:"Test for the 1st atom of every entity"}),"chain-test":ke(se.Bool,{isOptional:!0,defaultValue:!0,description:"Test for the 1st atom of every chain"}),"residue-test":ke(se.Bool,{isOptional:!0,defaultValue:!0,description:"Test for the 1st atom every residue"}),"atom-test":ke(se.Bool,{isOptional:!0,defaultValue:!0}),"group-by":ke(se.Any,{isOptional:!0,defaultValue:"atom-key",description:"Group atoms to sets based on this property. Default: each atom has its own set"})}),We.ElementSelectionQuery,"Return all atoms for which the tests are satisfied, grouped into sets."),bondedAtomicPairs:it(nt.Dictionary({0:ke(se.Bool,{isOptional:!0,defaultValue:"true for covalent bonds",description:"Test each bond with this predicate. Each bond is visited twice with swapped atom order."})}),We.ElementSelectionQuery,"Return all pairs of atoms for which the test is satisfied."),rings:it(nt.Dictionary({fingerprint:ke(We.RingFingerprint,{isOptional:!0}),"only-aromatic":ke(se.Bool,{isOptional:!0,defaultValue:!1})}),We.ElementSelectionQuery,"Return all rings or those with the specified fingerprint and/or only aromatic rings."),queryInSelection:it(nt.Dictionary({0:ke(We.ElementSelectionQuery),query:ke(We.ElementSelectionQuery),"in-complement":ke(se.Bool,{isOptional:!0,defaultValue:!1})}),We.ElementSelectionQuery,"Executes query only on atoms that are in the source selection."),empty:it(nt.None,We.ElementSelectionQuery,"Nada.")},o4={"@header":"Selection Modifications",queryEach:it(nt.Dictionary({0:ke(We.ElementSelectionQuery),query:ke(We.ElementSelectionQuery)}),We.ElementSelectionQuery,"Query every atom set in the input selection separately."),intersectBy:it(nt.Dictionary({0:ke(We.ElementSelectionQuery),by:ke(We.ElementSelectionQuery)}),We.ElementSelectionQuery,"Intersect each atom set from the first sequence from atoms in the second one."),exceptBy:it(nt.Dictionary({0:ke(We.ElementSelectionQuery),by:ke(We.ElementSelectionQuery)}),We.ElementSelectionQuery,"Remove all atoms from 'selection' that occur in 'by'."),unionBy:it(nt.Dictionary({0:ke(We.ElementSelectionQuery),by:ke(We.ElementSelectionQuery)}),We.ElementSelectionQuery,"For each atom set A in the orginal sequence, combine all atoms sets in the target selection that intersect with A."),union:it(nt.Dictionary({0:ke(We.ElementSelectionQuery)}),We.ElementSelectionQuery,"Collects all atom sets in the sequence into a single atom set."),cluster:it(nt.Dictionary({0:ke(We.ElementSelectionQuery),"min-distance":ke(se.Num,{isOptional:!0,defaultValue:0}),"max-distance":ke(se.Num),"min-size":ke(se.Num,{description:"Minimal number of sets to merge, must be at least 2",isOptional:!0,defaultValue:2}),"max-size":ke(se.Num,{description:"Maximal number of sets to merge, if not set, no limit",isOptional:!0})}),We.ElementSelectionQuery,"Combines atom sets that have mutual distance in the interval [min-radius, max-radius]. Minimum/maximum size determines how many atom sets can be combined."),includeSurroundings:it(nt.Dictionary({0:ke(We.ElementSelectionQuery),radius:ke(se.Num),"atom-radius":ke(se.Num,{isOptional:!0,defaultValue:0,description:"Value added to each atom before the distance check, for example VDW radius. Using this argument is computationally demanding."}),"as-whole-residues":ke(se.Bool,{isOptional:!0})}),We.ElementSelectionQuery,"For each atom set in the selection, include all surrouding atoms/residues that are within the specified radius."),surroundingLigands:it(nt.Dictionary({0:ke(We.ElementSelectionQuery),radius:ke(se.Num),"include-water":ke(se.Bool,{isOptional:!0,defaultValue:!0})}),We.ElementSelectionQuery,"Find all ligands components around the source query."),includeConnected:it(nt.Dictionary({0:ke(We.ElementSelectionQuery),"bond-test":ke(se.Bool,{isOptional:!0,defaultValue:"true for covalent bonds"}),"layer-count":ke(se.Num,{isOptional:!0,defaultValue:1,description:"Number of bonded layers to include."}),"fixed-point":ke(se.Bool,{isOptional:!0,defaultValue:!1,description:"Continue adding layers as long as new connections exist."}),"as-whole-residues":ke(se.Bool,{isOptional:!0})}),We.ElementSelectionQuery,"Pick all atom sets that are connected to the target."),wholeResidues:it(nt.Dictionary({0:ke(We.ElementSelectionQuery)}),We.ElementSelectionQuery,"Expand the selection to whole residues."),expandProperty:it(nt.Dictionary({0:ke(We.ElementSelectionQuery),property:ke(se.AnyValue)}),We.ElementSelectionQuery,"To each atom set in the selection, add all atoms that have the same property value that was already present in the set.")},s4={"@header":"Selection Filters",pick:it(nt.Dictionary({0:ke(We.ElementSelectionQuery),test:ke(se.Bool)}),We.ElementSelectionQuery,"Pick all atom sets that satisfy the test."),first:it(nt.Dictionary({0:ke(We.ElementSelectionQuery)}),We.ElementSelectionQuery,"Take the 1st atom set in the sequence."),withSameAtomProperties:it(nt.Dictionary({0:ke(We.ElementSelectionQuery),source:ke(We.ElementSelectionQuery),property:ke(se.Any)}),We.ElementSelectionQuery,"Pick all atom sets for which the set of given atom properties is a subset of the source properties."),intersectedBy:it(nt.Dictionary({0:ke(We.ElementSelectionQuery),by:ke(We.ElementSelectionQuery)}),We.ElementSelectionQuery,"Pick all atom sets that have non-zero intersection with the target."),within:it(nt.Dictionary({0:ke(We.ElementSelectionQuery),target:ke(We.ElementSelectionQuery),"min-radius":ke(se.Num,{isOptional:!0,defaultValue:0}),"max-radius":ke(se.Num),"atom-radius":ke(se.Num,{isOptional:!0,defaultValue:0,description:"Value added to each atom before the distance check, for example VDW radius. Using this argument is computationally demanding."}),invert:ke(se.Bool,{isOptional:!0,defaultValue:!1,description:"If true, pick only atom sets that are further than the specified radius."})}),We.ElementSelectionQuery,"Pick all atom sets from selection that have any atom within the radius of any atom from target."),isConnectedTo:it(nt.Dictionary({0:ke(We.ElementSelectionQuery),target:ke(We.ElementSelectionQuery),"bond-test":ke(se.Bool,{isOptional:!0,defaultValue:"true for covalent bonds"}),disjunct:ke(se.Bool,{isOptional:!0,defaultValue:!0,description:"If true, there must exist a bond to an atom that lies outside the given atom set to pass test."}),invert:ke(se.Bool,{isOptional:!0,defaultValue:!1,description:"If true, return atom sets that are not connected."})}),We.ElementSelectionQuery,"Pick all atom sets that are connected to the target.")},a4={"@header":"Selection Combinators",intersect:it(nt.List(We.ElementSelectionQuery),We.ElementSelectionQuery,"Return all unique atom sets that appear in all of the source selections."),merge:it(nt.List(We.ElementSelectionQuery),We.ElementSelectionQuery,"Merges multiple selections into a single one. Only unique atom sets are kept."),distanceCluster:it(nt.Dictionary({matrix:ke(gt.List(gt.List(se.Num)),{description:"Distance matrix, represented as list of rows (num[][])). Lower triangle is min distance, upper triangle is max distance."}),selections:ke(gt.List(We.ElementSelectionQuery),{description:"A list of held selections."})}),We.ElementSelectionQuery,"Pick combinations of atom sets from the source sequences that are mutually within distances specified by a matrix.")},c4={"@header":"Atom Sets",atomCount:it(nt.None,se.Num),countQuery:it(nt.Dictionary({0:ke(We.ElementSelectionQuery)}),se.Num,"Counts the number of occurences of a specific query inside the current atom set."),reduce:it(nt.Dictionary({initial:ke(se.Variable("a",se.AnyValue,!0),{description:"Initial value assigned to slot.atom-set-reduce. Current atom is set to the 1st atom of the current set for this."}),value:ke(se.Variable("a",se.AnyValue,!0),{description:"Expression executed for each atom in the set"})}),se.Variable("a",se.AnyValue,!0),"Execute the value expression for each atom in the current atom set and return the result. Works the same way as Array.reduce in JavaScript (``result = value(value(...value(initial)))``)"),propertySet:it(nt.Dictionary({0:ke(gt.ConstrainedVar)}),gt.Set(gt.ConstrainedVar),"Returns a set with all values of the given property in the current atom set.")},u4={"@header":"Atom Properties",core:{"@header":"Core Properties",elementSymbol:_t(We.ElementSymbol),vdw:_t(se.Num,"Van der Waals radius"),mass:_t(se.Num,"Atomic weight"),atomicNumber:_t(se.Num,"Atomic number"),x:_t(se.Num,"Cartesian X coordinate"),y:_t(se.Num,"Cartesian Y coordinate"),z:_t(se.Num,"Cartesian Z coordinate"),atomKey:_t(se.AnyValue,"Unique value for each atom. Main use case is grouping of atoms."),bondCount:it(nt.Dictionary({0:ke(We.ElementReference,{isOptional:!0,defaultValue:"slot.current-atom"}),flags:ke(We.BondFlags,{isOptional:!0,defaultValue:"covalent"})}),se.Num,"Number of bonds (by default only covalent bonds are counted)."),sourceIndex:_t(se.Num,"Index of the atom/element in the input file."),operatorName:_t(se.Str,"Name of the symmetry operator applied to this element."),operatorKey:_t(se.Num,"Key of the symmetry operator applied to this element."),modelIndex:_t(se.Num,"Index of the model in the input file."),modelLabel:_t(se.Str,"Label/header of the model in the input file.")},topology:{connectedComponentKey:_t(se.AnyValue,"Unique value for each connected component.")},macromolecular:{"@header":"Macromolecular Properties (derived from the mmCIF format)",authResidueId:_t(We.ResidueId,"type.auth-residue-id symbol executed on current atom's residue"),labelResidueId:_t(We.ResidueId,"type.label-residue-id symbol executed on current atom's residue"),residueKey:_t(se.AnyValue,"Unique value for each tuple ``(label_entity_id,auth_asym_id, auth_seq_id, pdbx_PDB_ins_code)``, main use case is grouping of atoms"),chainKey:_t(se.AnyValue,"Unique value for each tuple ``(label_entity_id, auth_asym_id)``, main use case is grouping of atoms"),entityKey:_t(se.AnyValue,"Unique value for each tuple ``label_entity_id``, main use case is grouping of atoms"),isHet:_t(se.Bool,"Equivalent to atom_site.group_PDB !== ATOM"),id:_t(se.Num,"_atom_site.id"),label_atom_id:_t(We.AtomName),label_alt_id:_t(se.Str),label_comp_id:_t(se.Str),label_asym_id:_t(se.Str),label_entity_id:_t(se.Str),label_seq_id:_t(se.Num),auth_atom_id:_t(We.AtomName),auth_comp_id:_t(se.Str),auth_asym_id:_t(se.Str),auth_seq_id:_t(se.Num),pdbx_PDB_ins_code:_t(se.Str),pdbx_formal_charge:_t(se.Num),occupancy:_t(se.Num),B_iso_or_equiv:_t(se.Num),entityType:_t(We.EntityType,"Type of the entity as defined in mmCIF (polymer, non-polymer, branched, water)"),entitySubtype:_t(We.EntitySubtype,"Subtype of the entity as defined in mmCIF _entity_poly.type and _pdbx_entity_branch.type (other, polypeptide(D), polypeptide(L), polydeoxyribonucleotide, polyribonucleotide, polydeoxyribonucleotide/polyribonucleotide hybrid, cyclic-pseudo-peptide, peptide nucleic acid, oligosaccharide)"),entityPrdId:_t(se.Str,"The PRD ID of the entity."),entityDescription:_t(gt.List(se.Str)),objectPrimitive:_t(We.ObjectPrimitive,"Type of the primitive object used to model this segment as defined in mmCIF/IHM (atomistic, sphere, gaussian, other)"),secondaryStructureKey:_t(se.AnyValue,"Unique value for each secondary structure element."),secondaryStructureFlags:_t(We.SecondaryStructureFlags),isModified:_t(se.Bool,"True if the atom belongs to modification of a standard residue."),modifiedParentName:_t(se.Str,"'3-letter' code of the modifed parent residue."),isNonStandard:_t(se.Bool,"True if this is a non-standard residue."),chemCompType:_t(se.Str,"Type of the chemical component as defined in mmCIF.")},ihm:{hasSeqId:it(nt.Dictionary({0:ke(se.Num)}),se.Bool,"Checks if the current element represents a given sequence id"),overlapsSeqIdRange:it(nt.Dictionary({beg:ke(se.Num),end:ke(se.Num)}),se.Bool,"Checks if the current element overlaps with the specified residue range")}},l4={"@header":"Bond Properties",flags:Qi(We.BondFlags),order:Qi(se.Num),key:Qi(se.Num),length:Qi(se.Num),atomA:Qi(We.ElementReference),atomB:Qi(We.ElementReference)};function _t(e,t){return it(nt.Dictionary({0:ke(We.ElementReference,{isOptional:!0,defaultValue:"slot.current-atom"})}),e,t)}function Qi(e,t){return it(nt.None,e,t)}const d4={"@header":"Structure Queries",type:n4,slot:r4,generator:i4,modifier:o4,filter:s4,combinator:a4,atomSet:c4,atomProperty:u4,bondProperty:l4},f4={"@header":"Internal Queries",generator:{"@header":"Generators",bundleElement:it(nt.Dictionary({groupedUnits:ke(se.Any),set:ke(se.Any),ranges:ke(se.Any)}),se.Any),bundle:it(nt.Dictionary({elements:ke(se.Any)}),We.ElementSelectionQuery,"A selection with single structure containing represented by the bundle."),current:it(nt.None,We.ElementSelectionQuery,"Current selection provided by the query context. Avoid using this in State Transforms.")}},Se={core:Ad,structureQuery:d4,internal:f4};ky(Se);const m4=Ty(Se);(function(){const e=Object.create(null);for(const t of m4)e[t.id]=t;return e})();var xt;(function(e){e.core=Se.core,e.struct=Se.structureQuery,e.internal=Se.internal;function t(v){return e.struct.type.atomName([v])}e.atomName=t;function n(v){return e.struct.type.elementSymbol([v])}e.es=n;function r(...v){return e.core.type.list(v)}e.list=r;function i(...v){return e.core.type.set(v)}e.set=i;function o(v,A){return e.core.type.regex([v,A])}e.re=o;function s(v){return e.core.ctrl.fn([v])}e.fn=s;function c(v){return e.core.ctrl.eval([v])}e.evaluate=c;const a=e.struct.atomProperty.core,u=e.struct.atomProperty.macromolecular,l=e.struct.atomProperty.topology;function f(v){return a[v]()}e.acp=f;function d(v){return l[v]()}e.atp=d;function m(v){return u[v]()}e.ammp=m;const h=e.struct.atomSet.propertySet;function p(v){return h([f(v)])}e.acpSet=p;function _(v){return h([d(v)])}e.atpSet=_;function y(v){return h([m(v)])}e.ammpSet=y})(xt||(xt={}));var qy;(function(e){function t(n,r,i,o){return{id:_n.create22(),label:n,basic:r,sourceData:o,bonds:i}}e.create=t})(qy||(qy={}));function Xs(e,t){if(t.length===0)return wt.Empty;if(t.length===1)return t[0];const n=new Map,r=new Set;for(const{units:o}of t)for(let s=0,c=o.length;s<c;s++){const a=o[s];if(n.has(a.id)){if(r.has(a.id))continue;const u=Ee.union(n.get(a.id),a.elements);n.set(a.id,u),u.length===e.unitMap.get(a.id).elements.length&&r.add(a.id)}else n.set(a.id,a.elements),a.elements.length===e.unitMap.get(a.id).elements.length&&r.add(a.id)}const i=e.subsetBuilder(!0);return n.forEach(h4,i),i.getStructure()}function h4(e,t){this.setUnit(t,e)}function xd(e,t){if(e===t)return!0;let n,r;e.units.length<t.units.length?(n=e,r=t):(n=t,r=e);const i=n.units,o=r.unitMap;for(let s=0,c=i.length;s<c;s++){const a=i[s];if(!o.has(a.id))continue;const u=o.get(a.id);if(Ee.areIntersecting(a.elements,u.elements))return!0}return!1}function p4(e,t){if(e===t)return e;if(!xd(e,t))return wt.Empty;let n,r;e.units.length<t.units.length?(n=e,r=t):(n=t,r=e);const i=n.units,o=r.unitMap,s=[];for(let c=0,a=i.length;c<a;c++){const u=i[c];if(!o.has(u.id))continue;const l=o.get(u.id);if(Ee.areIntersecting(u.elements,l.elements)){const f=Ee.intersect(u.elements,l.elements);s[s.length]=u.getChild(f)}}return wt.create(s,{parent:e.parent||t.parent})}function Uy(e,t){if(e===t)return wt.Empty;if(!xd(e,t))return e;const n=e.units,r=t.unitMap,i=[];for(let o=0,s=n.length;o<s;o++){const c=n[o];if(!r.has(c.id)){i[i.length]=c;continue}const a=r.get(c.id),u=Ee.subtract(c.elements,a.elements);u.length>0&&(i[i.length]=c.getChild(u))}return wt.create(i,{parent:e.parent||t.parent})}var Ye;(function(e){function t(y,v){return{kind:"singletons",source:y,structure:v}}e.Singletons=t;function n(y,v){return{kind:"sequence",source:y,structures:v}}e.Sequence=n;function r(y){return t(y,wt.Empty)}e.Empty=r;function i(y){return y.kind==="singletons"}e.isSingleton=i;function o(y){return i(y)?y.structure.units.length===0:y.structures.length===0}e.isEmpty=o;function s(y){return i(y)?y.structure.elementCount:y.structures.length}e.structureCount=s;function c(y){return o(y)?wt.Empty:i(y)?y.structure:Xs(y.source,y.structures)}e.unionStructure=c;function a(y){const v=[],{unitMap:A}=y.source;for(const g of c(y).units)g===A.get(g.id)?v[v.length]={unit:g,indices:Fe.ofBounds(0,g.elements.length)}:v[v.length]={unit:g,indices:Fe.ofSortedArray(Ee.indicesOf(A.get(g.id).elements,g.elements))};return On(y.source,v)}e.toLociWithCurrentUnits=a;function u(y){const v=[],{unitMap:A}=y.source;for(const g of c(y).units){const b=A.get(g.id);b===g?v[v.length]={unit:b,indices:Fe.ofBounds(0,b.elements.length)}:v[v.length]={unit:b,indices:Fe.ofSortedArray(Ee.indicesOf(b.elements,g.elements))}}return On(y.source,v)}e.toLociWithSourceUnits=u;function l(y,v,A){return v.length===0?r(y):A?t(y,Xs(y,v)):n(y,v)}class f{add(v){const A=v.elementCount;A!==0&&(this.structures[this.structures.length]=v,A!==1&&(this.allSingletons=!1))}getSelection(){return l(this.source,this.structures,this.allSingletons)}constructor(v){this.source=v,this.structures=[],this.allSingletons=!0}}class d{add(v){const A=v.elementCount;A===0||!this.uniqueSets.add(v)||(this.structures[this.structures.length]=v,A!==1&&(this.allSingletons=!1))}getSelection(){return l(this.structure,this.structures,this.allSingletons)}constructor(v){this.structure=v,this.structures=[],this.allSingletons=!0,this.uniqueSets=vd(wt.hashCode,wt.areUnitIdsAndIndicesEqual)}}function m(y){return new f(y)}e.LinearBuilder=m;function h(y){return new d(y)}e.UniqueBuilder=h;function p(y,v){let A=0;if(e.isSingleton(y))for(const g of y.structure.units){const{elements:b}=g;for(let C=0,I=b.length;C<I;C++){const S=wt.create([g.getChild(Ee.ofSingleton(b[C]))],{parent:y.source});v(S,A++)}}else for(const g of y.structures)v(g,A++)}e.forEach=p;function _(y,v){return i(y)?t(v,y.structure):n(v,y.structures)}e.withInputStructure=_})(Ye||(Ye={}));var Ft;(function(e){function t(g){return Ee.ofSortedArray(g)}e.ofSortedRanges=t;function n(g){return g[0]}e.start=n;function r(g){return g[g.length-1]+1}e.end=r;function i(g){return g[0]}e.min=i;function o(g){return g[g.length-1]}e.max=o;function s(g){let b=0;for(let C=0,I=g.length;C<I;C+=2)b+=g[C+1]-g[C]+1;return b}e.size=s;function c(g){return g.length/2}e.count=c;function a(g,b){return g[b*2]}e.startAt=a;function u(g,b){return g[b*2+1]+1}e.endAt=u;function l(g,b){return g[b*2]}e.minAt=l;function f(g,b){return g[b*2+1]}e.maxAt=f;function d(g,b){if(g.length!==b.length)return!1;for(let C=0,I=g.length;C<I;++C)if(g[C]!==b[C])return!1;return!0}e.areEqual=d;function m(g,b){let C=0;for(let I=0,S=g.length;I<S;I+=2)for(let P=g[I],T=g[I+1];P<=T;++P)b(P,C),++C}e.forEach=m;function h(g,b){return _(g,b)!==-1}e.has=h;function p(g,b,C){return y(g,b,C)!==-1}e.hasFrom=p;function _(g,b){return y(g,b,0)}e.firstIntersectionIndex=_;function y(g,b,C){if(l(g,C)>Fe.max(b)||o(g)<Fe.min(b))return-1;for(let I=C,S=c(g);I<S;++I){const P=Ae.ofRange(l(g,I),f(g,I));if(Fe.areIntersecting(P,b))return I}return-1}e.firstIntersectionIndexFrom=y;function v(g,b){return new A(g,b)}e.transientSegments=v;class A{updateValue(){this.value.index=this.curIndex,this.value.start=Fe.findPredecessorIndex(this.set,a(this.ranges,this.curIndex)),this.value.end=Fe.findPredecessorIndex(this.set,u(this.ranges,this.curIndex))}move(){return this.hasNext&&(this.updateValue(),this.curIndex=y(this.ranges,this.set,this.curIndex+1),this.hasNext=this.curIndex!==-1),this.value}constructor(b,C){this.ranges=b,this.set=C,this.value={index:0,start:0,end:0},this.curIndex=0,this.hasNext=!1,this.curIndex=_(b,C),this.hasNext=this.curIndex!==-1}}e.Iterator=A})(Ft||(Ft={}));function _4(e){return!!e.items}function y4(e){const{and:t}=xt.core.logic,{eq:n,gre:r,lte:i}=xt.core.rel,{macromolecular:o,ihm:s,core:c}=xt.struct.atomProperty,a={};hn(e.label_entity_id)&&(a["entity-test"]=n([o.label_entity_id(),e.label_entity_id]));const u=[];hn(e.operator_name)&&u.push(n([c.operatorName(),e.operator_name])),hn(e.label_asym_id)&&u.push(n([o.label_asym_id(),e.label_asym_id])),hn(e.auth_asym_id)&&u.push(n([o.auth_asym_id(),e.auth_asym_id])),u.length===1?a["chain-test"]=u[0]:u.length>1&&(a["chain-test"]=t(u));const l=[];hn(e.label_seq_id)&&l.push(s.hasSeqId({0:e.label_seq_id})),hn(e.auth_seq_id)&&l.push(n([o.auth_seq_id(),e.auth_seq_id])),hn(e.pdbx_PDB_ins_code)&&l.push(n([o.pdbx_PDB_ins_code(),e.pdbx_PDB_ins_code])),(hn(e.beg_label_seq_id)||hn(e.end_label_seq_id))&&l.push(s.overlapsSeqIdRange({beg:e.beg_label_seq_id,end:e.end_label_seq_id})),hn(e.beg_auth_seq_id)&&l.push(r([o.auth_seq_id(),e.beg_auth_seq_id])),hn(e.end_auth_seq_id)&&l.push(i([o.auth_seq_id(),e.end_auth_seq_id])),l.length===1?a["residue-test"]=l[0]:l.length>1&&(a["residue-test"]=t(l));const f=[];return hn(e.label_comp_id)&&f.push(n([o.label_comp_id(),e.label_comp_id])),hn(e.auth_comp_id)&&f.push(n([o.auth_comp_id(),e.auth_comp_id])),hn(e.atom_id)&&f.push(n([o.id(),e.atom_id])),hn(e.atom_index)&&f.push(n([xt.struct.atomProperty.core.sourceIndex(),e.atom_index])),hn(e.label_atom_id)&&f.push(n([o.label_atom_id(),e.label_atom_id])),hn(e.auth_atom_id)&&f.push(n([o.auth_atom_id(),e.auth_atom_id])),hn(e.type_symbol)&&f.push(n([xt.struct.atomProperty.core.elementSymbol(),e.type_symbol.toUpperCase()])),f.length===1?a["atom-test"]=f[0]:f.length>1&&(a["atom-test"]=t(f)),xt.struct.generator.atomGroups(a)}function Fy(e){const t=[];return Ly(e,n=>t.push(y4(n))),t.length===1?t[0]:g4(t)}function g4(e){return xt.struct.combinator.merge(e.map(t=>xt.struct.modifier.union([t])))}function hn(e){return e!=null}function Ly(e,t){if(_4(e))if(Array.isArray(e.items))if(e.prefix)for(const n of e.items)t(Object.assign({},e.prefix,n));else for(const n of e.items)t(n);else{const n={...e.prefix},r=Object.keys(e.items),i=e.items[r[0]].length;for(let o=0;o<i;o++){for(const s of r)n[s]=e.items[s][o];t(n)}}else t(e)}function Gy(e,t,n){const r=Fy(t);return On.fromExpression(e,r,n)}function b4(e,t,n){const r=Gy(e,t,n);return Qs.fromLoci(r)}const Hy={forEachItem:Ly,toExpression:Fy,toLoci:Gy,toBundle:b4};var Qs;(function(e){e.Empty={hash:-1,elements:[]};function t(m,h){return s(Ye.toLociWithSourceUnits(Ye.Singletons(m,h)))}e.fromSubStructure=t;function n(m){return s(Ye.toLociWithSourceUnits(m))}e.fromSelection=n;function r(m,h,p){return s(On.fromExpression(m,h,p))}e.fromExpression=r;function i(m,h,p){return s(On.fromQuery(m,h,p))}e.fromQuery=i;function o(m,h,p){return Hy.toBundle(m,h,p)}e.fromSchema=o;function s(m){const h=[];for(const y of m.elements){const{unit:v,indices:A}=y;if(Fe.size(A)===0)continue;const g=[],b=[];if(Fe.isInterval(A))Fe.size(A)===1?b.push(Ae.min(A)):g.push(Ae.min(A),Ae.max(A));else{let C=0;const I=A.length;for(;C<I;){const S=C;for(C++;C<I&&A[C-1]+1===A[C];)C++;const P=C;if(P-S>2)g.push(A[S],A[P-1]);else for(let T=S;T<P;T++)b[b.length]=A[T]}}h.push({unit:v,set:Ee.ofSortedArray(b),ranges:Ft.ofSortedRanges(g)})}const p=new Map;for(let y=0,v=h.length;y<v;++y){const A=h[y],g=ks(Vi(A.ranges),Vi(A.set));if(p.has(g)){const{groupedUnits:b}=p.get(g);b.has(A.unit.invariantId)?b.get(A.unit.invariantId).push(A.unit.id):b.set(A.unit.invariantId,[A.unit.id])}else{const b=new Map;b.set(A.unit.invariantId,[A.unit.id]),p.set(g,{groupedUnits:b,set:A.set,ranges:A.ranges})}}const _=[];return p.forEach(y=>{const v=[];y.groupedUnits.forEach(A=>v.push(Ee.ofUnsortedArray(A))),v.sort((A,g)=>A[0]-g[0]),_.push({groupedUnits:v,set:y.set,ranges:y.ranges})}),{hash:m.structure.hashCode,elements:_}}e.fromLoci=s;function c(m,h){const p=[];for(let _=0,y=m.length;_<y;++_){const v=m[_];h.unitMap.has(v)&&p.push(h.unitMap.get(v))}return p}function a(m,h){m.hash!==-1&&(m.hash,h.hashCode);const p=[];for(const _ of m.elements)for(const y of _.groupedUnits){const v=c(y,h);if(v.length===0)continue;let A;if(_.ranges.length===0)A=_.set;else if(_.set.length===0)if(_.ranges.length===2)A=Ae.ofRange(_.ranges[0],_.ranges[1]);else{const g=new Int32Array(Ft.size(_.ranges));Ft.forEach(_.ranges,(b,C)=>g[C]=b),A=Ee.ofSortedArray(g)}else{const g=Ft.size(_.ranges),b=new Int32Array(_.set.length+g);Ft.forEach(_.ranges,(C,I)=>b[I]=C),b.set(_.set,g),A=Ee.ofUnsortedArray(b)}for(const g of v)p.push({unit:g,indices:A})}return On(h,p)}e.toLoci=a;function u(m,h){m.hash!==-1&&(m.hash,h.hashCode);const p=[];for(const _ of m.elements)for(const y of _.groupedUnits){const v=c(y,h);if(v.length===0)continue;const A=v[0].elements,g=Ft.size(_.ranges),b=_.set.length,C=new Int32Array(b+g);let I;if(g===0){for(let S=0,P=b;S<P;++S)C[S]=A[_.set[S]];I=Ee.ofSortedArray(C)}else if(b===0)Ft.forEach(_.ranges,(S,P)=>C[P]=A[S]),I=Ee.ofSortedArray(C);else if(Ee.min(_.set)>Ft.max(_.ranges)){Ft.forEach(_.ranges,(S,P)=>C[P]=A[S]);for(let S=0,P=b;S<P;++S)C[S+g]=A[_.set[S]];I=Ee.ofSortedArray(C)}else if(Ft.min(_.ranges)>Ee.max(_.set)){for(let S=0,P=b;S<P;++S)C[S]=A[_.set[S]];Ft.forEach(_.ranges,(S,P)=>C[P+b]=A[S]),I=Ee.ofSortedArray(C)}else{Ft.forEach(_.ranges,(S,P)=>C[P]=A[S]);for(let S=0,P=b;S<P;++S)C[S+g]=A[_.set[S]];I=Ee.ofUnsortedArray(C)}for(const S of v)p.push(S.getChild(I))}return wt.create(p,{parent:h})}e.toStructure=u;function l(m){return xt.internal.generator.bundleElement({groupedUnits:xt.core.type.list(m.groupedUnits.map(h=>xt.core.type.list(h))),ranges:xt.core.type.list(m.ranges),set:xt.core.type.list(m.set)})}function f(m){return xt.internal.generator.bundle({elements:xt.core.type.list(m.elements.map(l))})}e.toExpression=f;function d(m,h){if(m.elements.length!==h.elements.length)return!1;for(let p=0,_=m.elements.length;p<_;++p){const y=m.elements[p],v=h.elements[p];if(y.groupedUnits.length!==v.groupedUnits.length)return!1;for(let A=0,g=v.groupedUnits.length;A<g;++A)if(!Ee.areEqual(y.groupedUnits[A],v.groupedUnits[A]))return!1;if(!Ee.areEqual(y.set,v.set)||!Ft.areEqual(y.ranges,v.ranges))return!1}return!0}e.areEqual=d})(Qs||(Qs={}));function jy(e){return pt.isCovalent(e.atomicBond.type)}function v4(e,t,n){return{groupedUnits:e,ranges:t,set:n}}function A4(e){return function(n){const r={hash:n.inputStructure.hashCode,elements:e};return Ye.Sequence(n.inputStructure,[Qs.toStructure(r,n.inputStructure)])}}class vi{pushCurrentElement(){return this.currentElementStack[this.currentElementStack.length]=this.element,this.element=lt.create(void 0),this.element}popCurrentElement(){this.element=this.currentElementStack.pop()}pushCurrentBond(){return this.atomicBond&&this.currentAtomicBondStack.push(this.atomicBond),this.atomicBond=new Vy,this.atomicBond}popCurrentBond(){this.currentAtomicBondStack.length>0?this.atomicBond=this.currentAtomicBondStack.pop():this.atomicBond=void 0}pushCurrentStructure(){this.currentStructure&&this.currentStructureStack.push(this.currentStructure)}popCurrentStructure(){this.currentStructureStack.length?this.currentStructure=this.currentStructureStack.pop():this.currentStructure=void 0}pushInputStructure(t){this.inputStructureStack.push(this.inputStructure),this.inputStructure=t}popInputStructure(){if(this.inputStructureStack.length===0)throw new Error("Must push before pop.");this.inputStructure=this.inputStructureStack.pop()}throwIfTimedOut(){if(this.timeoutMs!==0&&Vn()-this.timeCreated>this.timeoutMs)throw new Error(`The query took too long to execute (> ${this.timeoutMs/1e3}s).`)}tryGetCurrentSelection(){if(!this.currentSelection)throw new Error("The current selection is not assigned.");return this.currentSelection}constructor(t,n){this.currentElementStack=[],this.currentAtomicBondStack=[],this.currentStructureStack=[],this.inputStructureStack=[],this.timeCreated=Vn(),this.element=lt.create(void 0),this.currentStructure=void 0,this.atomicBond=new Vy,this.currentSelection=void 0,this.inputStructure=t,this.timeoutMs=n&&n.timeoutMs||0,this.currentSelection=n&&n.currentSelection}}class Vy{constructor(){this.a=lt.create(void 0),this.aIndex=0,this.b=lt.create(void 0),this.bIndex=0,this.type=pt.Flag.None,this.order=0,this.key=-1,this.testFn=jy}setStructure(t){this.a.structure=t,this.b.structure=t}setTestFn(t){this.testFn=t||jy}test(t,n){return this.testFn(t)?!0:n?(this.swap(),this.testFn(t)):!1}swap(){const t=this.aIndex;this.aIndex=this.bIndex,this.bIndex=t;const n=this.a.unit;this.a.unit=this.b.unit,this.b.unit=n;const r=this.a.element;this.a.element=this.b.element,this.b.element=r}get length(){return lt.distance(this.a,this.b)}}var zy;(function(e){function t(r,i,o){return r(new vi(i,o))}e.run=t;function n(r,i,o){const s=r(new vi(i,o));return Ye.toLociWithSourceUnits(s)}e.loci=n})(zy||(zy={}));class Sd{add(t){t.elementCount&&(t.elementCount!==1&&(this.allSingletons=!1),this.set.add(t)&&(this.structures[this.structures.length]=t))}getSelection(){return this.allSingletons?Ye.Singletons(this.source,Xs(this.source,this.structures)):Ye.Sequence(this.source,this.structures)}constructor(t){this.source=t,this.set=vd(wt.hashCode,wt.areUnitIdsAndIndicesEqual),this.structures=[],this.allSingletons=!0}}class x4{add(t,n,r){let i=this.builderMap.get(t);i||(i=this.source.subsetBuilder(!0),this.builders[this.builders.length]=i,this.builderMap.set(t,i)),i.addToUnit(n,r)}allSingletons(){for(let t=0,n=this.builders.length;t<n;t++)if(this.builders[t].elementCount>1)return!1;return!0}singletonSelection(){const t=this.source.subsetBuilder(!0),n=lt.create(this.source);for(let r=0,i=this.builders.length;r<i;r++)this.builders[r].setSingletonLocation(n),t.addToUnit(n.unit.id,n.element);return Ye.Singletons(this.source,t.getStructure())}fullSelection(){const t=new Array(this.builders.length);for(let n=0,r=this.builders.length;n<r;n++)t[n]=this.builders[n].getStructure();return Ye.Sequence(this.source,t)}getSelection(){return this.builders.length===0?Ye.Empty(this.source):this.allSingletons()?this.singletonSelection():this.fullSelection()}constructor(t){this.source=t,this.builders=[],this.builderMap=new Map}}const Cd=e=>Ye.Sequence(e.inputStructure,[]),Ky=e=>Ye.Singletons(e.inputStructure,e.inputStructure);function S4(e){return Id({...e,groupBy:t=>Xe.residue.key(t.element)})}function C4(e){return Id({...e,groupBy:t=>Xe.chain.key(t.element)})}function Zr(e){return!0}function I4(e){return 0}function Id(e){if(!e||!e.atomTest&&!e.residueTest&&!e.chainTest&&!e.entityTest&&!e.unitTest&&!e.groupBy)return Ky;if(e.atomTest&&!e.residueTest&&!e.chainTest&&!e.entityTest&&!e.unitTest&&!e.groupBy)return w4(e.atomTest);const t={unitTest:e.unitTest||Zr,entityTest:e.entityTest||Zr,chainTest:e.chainTest||Zr,residueTest:e.residueTest||Zr,atomTest:e.atomTest||Zr,groupBy:e.groupBy||I4};return e.groupBy?E4(t):P4(t)}function w4(e){return function(n){const{inputStructure:r}=n,{units:i}=r,o=n.pushCurrentElement(),s=r.subsetBuilder(!0);o.structure=r;for(const c of i){o.unit=c;const a=c.elements;s.beginUnit(c.id);for(let u=0,l=a.length;u<l;u++)o.element=a[u],e(n)&&s.addElement(o.element);s.commitUnit(),n.throwIfTimedOut()}return n.popCurrentElement(),Ye.Singletons(r,s.getStructure())}}function P4({unitTest:e,entityTest:t,chainTest:n,residueTest:r,atomTest:i}){return function(s){const{inputStructure:c}=s,{units:a}=c,u=s.pushCurrentElement(),l=c.subsetBuilder(!0),f=r===Zr&&i===Zr,d=i===Zr;u.structure=c;for(const m of a){if(u.unit=m,!e(s))continue;const{elements:h,model:p}=m;if(l.beginUnit(m.id),m.kind===Ce.Kind.Atomic){const _=Ct.transientSegments(m.model.atomicHierarchy.chainAtomSegments,h),y=Ct.transientSegments(m.model.atomicHierarchy.residueAtomSegments,h);for(;_.hasNext;){const v=_.move();if(u.element=h[v.start],!(!t(s)||!n(s))){if(f){l.addElementRange(h,v.start,v.end);continue}for(y.setSegment(v);y.hasNext;){const A=y.move();if(u.element=h[A.start],!!r(s)){if(d){l.addElementRange(h,A.start,A.end);continue}for(let g=A.start,b=A.end;g<b;g++)u.element=h[g],i(s)&&l.addElement(u.element)}}}}}else{const{chainElementSegments:_}=m.kind===Ce.Kind.Spheres?p.coarseHierarchy.spheres:p.coarseHierarchy.gaussians,y=Ct.transientSegments(_,h);for(;y.hasNext;){const v=y.move();if(u.element=h[v.start],!(!t(s)||!n(s))){if(f){l.addElementRange(h,v.start,v.end);continue}for(let A=v.start,g=v.end;A<g;A++)u.element=h[A],r(s)&&l.addElement(u.element)}}}l.commitUnit(),s.throwIfTimedOut()}return s.popCurrentElement(),Ye.Singletons(c,l.getStructure())}}function E4({unitTest:e,entityTest:t,chainTest:n,residueTest:r,atomTest:i,groupBy:o}){return function(c){const{inputStructure:a}=c,{units:u}=a,l=c.pushCurrentElement(),f=new x4(a);l.structure=a;for(const d of u){if(l.unit=d,!e(c))continue;const{elements:m,model:h}=d;if(d.kind===Ce.Kind.Atomic){const p=Ct.transientSegments(h.atomicHierarchy.chainAtomSegments,m),_=Ct.transientSegments(h.atomicHierarchy.residueAtomSegments,m);for(;p.hasNext;){const y=p.move();if(l.element=m[y.start],!(!t(c)||!n(c)))for(_.setSegment(y);_.hasNext;){const v=_.move();if(l.element=m[v.start],!!r(c))for(let A=v.start,g=v.end;A<g;A++)l.element=m[A],i(c)&&f.add(o(c),d.id,l.element)}}}else{const{chainElementSegments:p}=d.kind===Ce.Kind.Spheres?h.coarseHierarchy.spheres:h.coarseHierarchy.gaussians,_=Ct.transientSegments(p,m);for(;_.hasNext;){const y=_.move();if(l.element=m[y.start],!(!t(c)||!n(c)))for(let v=y.start,A=y.end;v<A;v++)l.element=m[v],r(c)&&f.add(o(c),d.id,l.element)}}c.throwIfTimedOut()}return c.popCurrentElement(),f.getSelection()}}function wd(e,t,n){const r=new Int32Array(t.length);for(let i=0,o=t.length;i<o;i++)r[i]=e.elements[t[i]];return wt.create([e.getChild(Ee.ofSortedArray(r))],{parent:n})}function B4(e,t){return function(r){const{units:i}=r.inputStructure,o=Ye.LinearBuilder(r.inputStructure);if(!e||e.length===0){for(const s of i)if(Ce.isAtomic(s))if(t)for(const c of s.rings.aromaticRings)o.add(wd(s,s.rings.all[c],r.inputStructure));else for(const c of s.rings.all)o.add(wd(s,c,r.inputStructure))}else{const s=zt.create();for(let c=0;c<e.length;c++)zt.add(s,e[c],e[c]);for(const c of i){if(!Ce.isAtomic(c))continue;const a=c.rings;for(const u of s.array)if(a.byFingerprint.has(u))for(const l of a.byFingerprint.get(u))t&&!a.aromaticRings.includes(l)||o.add(wd(c,a.all[l],r.inputStructure))}}return o.getSelection()}}function R4(e,t,n=!1){return function(i){const o=e(i);if(Ye.structureCount(o)===0)return o;const s=n?Uy(i.inputStructure,Ye.unionStructure(o)):Ye.unionStructure(o);if(s.elementCount===0)return Ye.Empty(i.inputStructure);i.throwIfTimedOut(),i.pushInputStructure(s);const c=t(i);return i.popInputStructure(),Ye.withInputStructure(c,i.inputStructure)}}function D4(e){return function(n){const r=n.inputStructure,i=r.interUnitBonds,o=Ye.UniqueBuilder(n.inputStructure);n.pushCurrentBond();const s=n.atomicBond;s.setTestFn(e),s.setStructure(r);for(const c of r.units){if(c.kind!==Ce.Kind.Atomic)continue;const{offset:a,b:u,edgeProps:{flags:l,order:f,key:d}}=c.bonds;s.a.unit=c,s.b.unit=c;for(let m=0,h=c.elements.length;m<h;m++){s.aIndex=m,s.a.element=c.elements[m];for(let p=a[m],_=a[m+1];p<_;p++)if(s.bIndex=u[p],s.b.element=c.elements[u[p]],s.type=l[p],s.order=f[p],s.key=d[p],s.test(n,!1)){const y=r.subsetBuilder(!1);y.beginUnit(c.id),y.addElement(s.a.element),y.addElement(s.b.element),y.commitUnit(),o.add(y.getStructure())}}}for(const c of i.edges)if(s.a.unit=r.unitMap.get(c.unitA),s.a.element=s.a.unit.elements[c.indexA],s.aIndex=c.indexA,s.b.unit=r.unitMap.get(c.unitB),s.b.element=s.b.unit.elements[c.indexB],s.bIndex=c.indexB,s.order=c.props.order,s.type=c.props.flag,s.key=c.props.key,s.test(n,!1)){const a=r.subsetBuilder(!1);a.addToUnit(s.a.unit.id,s.a.element),a.addToUnit(s.b.unit.id,s.b.element),o.add(a.getStructure())}return n.popCurrentBond(),o.getSelection()}}var k4=Object.freeze({__proto__:null,all:Ky,atoms:Id,bondedAtomicPairs:D4,chains:C4,none:Cd,querySelection:R4,residues:S4,rings:B4});const T4=O.add,N4=O.squaredDistance,O4=O.distance;class Js{reset(){O.set(this.center,0,0,0),this.radiusSq=0,this.count=0}includeStep(t){T4(this.center,this.center,t),this.count++}finishedIncludeStep(){this.count!==0&&O.scale(this.center,this.center,1/this.count)}radiusStep(t){const n=N4(t,this.center);n>this.radiusSq&&(this.radiusSq=n)}radiusSphereStep(t,n){const r=O4(t,this.center)+n,i=r*r;i>this.radiusSq&&(this.radiusSq=i)}getSphere(t){return t||(t=Sn()),O.copy(t.center,this.center),t.radius=Math.sqrt(this.radiusSq),t}getCount(){return this.count}constructor(){this.count=0,this.center=O(),this.radiusSq=0}}(function(e){const t=new e,n=O(),r=O();function i({x:c,y:a,z:u},l){t.reset();const f=c.length;for(let d=0;d<f;d++)O.set(n,c[d],a[d],u[d]),t.includeStep(n);t.finishedIncludeStep();for(let d=0;d<f;d++)O.set(n,c[d],a[d],u[d]),t.radiusStep(n);return O.copy(l.center,t.center),l.radius=Math.sqrt(t.radiusSq),l}e.fromArrays=i;function o(c,a,u){t.reset();for(let l=0;l<c;l++)a(l,n),t.includeStep(n);t.finishedIncludeStep();for(let l=0;l<c;l++)a(l,n),t.radiusStep(n);return O.copy(u.center,t.center),u.radius=Math.sqrt(t.radiusSq),u}e.fromProvider=o;function s(c,a,u){t.reset();for(let l=0;l<c;l++)a(l,n,r),t.includeStep(n),t.includeStep(r);t.finishedIncludeStep();for(let l=0;l<c;l++)a(l,n,r),t.radiusStep(n),t.radiusStep(r);return O.copy(u.center,t.center),u.radius=Math.sqrt(t.radiusSq),u}e.fromPairProvider=s})(Js||(Js={}));class Yn{getConnectedUnits(t){return this.map.has(t)?this.map.get(t):$y}getEdgeIndex(t,n,r,i){const o=this.edgeKeyIndex.get(Yn.getEdgeUnitKey(n,i));if(o===void 0)return-1;const s=o.get(Yn.getEdgeIndexKey(t,r));return s!==void 0?s:-1}hasEdge(t,n,r,i){return this.getEdgeIndex(t,n,r,i)!==-1}getEdge(t,n,r,i){const o=this.getEdgeIndex(t,n,r,i);return o!==-1?this.edges[o]:void 0}getEdgeIndices(t,n){return this.vertexKeyIndex.get(Yn.getVertexKey(t,n))||[]}constructor(t){this.map=t;let n=0;const r=[],i=new Map,o=new Map;this.map.forEach(s=>{s.forEach(c=>{n+=c.edgeCount,c.connectedIndices.forEach(a=>{c.getEdges(a).forEach(u=>{const{unitA:l,unitB:f}=c,d=Yn.getEdgeIndexKey(l,f),m=Yn.getEdgeIndexKey(a,u.indexB),h=i.get(d);h===void 0?i.set(d,new Map([[m,r.length]])):h.set(m,r.length);const p=Yn.getVertexKey(a,l),_=o.get(p);_===void 0?o.set(p,[r.length]):_.push(r.length),r.push({...u,indexA:a,unitA:l,unitB:f})})})})}),this.edgeCount=n,this.edges=r,this.edgeKeyIndex=i,this.vertexKeyIndex=o}}(function(e){class t{hasEdges(a){return this.edgeMap.has(a)}getEdges(a){return this.edgeMap.has(a)?this.edgeMap.get(a):$y}get areUnitsOrdered(){return this.unitA<this.unitB}constructor(a,u,l,f,d){this.unitA=a,this.unitB=u,this.edgeCount=l,this.connectedIndices=f,this.edgeMap=d}}e.UnitPairEdges=t;function n(c,a){return Un(c,a)}e.getEdgeUnitKey=n;function r(c,a){return Un(c,a)}e.getEdgeIndexKey=r;function i(c,a){return Un(c,a)}e.getVertexKey=i;function o(c,a,u){c.has(a)?c.get(a).push(u):c.set(a,[u])}class s{constructor(){this.map=new Map}startUnitPair(a,u){this.uA=a,this.uB=u,this.mapAB=new Map,this.mapBA=new Map,this.linkedA=zt.create(),this.linkedB=zt.create(),this.linkCount=0}finishUnitPair(){this.linkCount!==0&&(o(this.map,this.uA,new t(this.uA,this.uB,this.linkCount,this.linkedA.array,this.mapAB)),o(this.map,this.uB,new t(this.uB,this.uA,this.linkCount,this.linkedB.array,this.mapBA)))}add(a,u,l){o(this.mapAB,a,{indexB:u,props:l}),o(this.mapBA,u,{indexB:a,props:l}),zt.add(this.linkedA,a,a),zt.add(this.linkedB,u,u),this.linkCount+=1}getMap(){return this.map}}e.Builder=s})(Yn||(Yn={}));const $y=[];var Mo;(function(e){e.Empty=pr.create([],[],[],0,{flags:[],order:[],key:[]})})(Mo||(Mo={}));class Ji extends Yn{getBondFromLocation(t){return Ce.isAtomic(t.aUnit)&&Ce.isAtomic(t.bUnit)?this.getEdge(t.aIndex,t.aUnit.id,t.bIndex,t.bUnit.id):void 0}getBondIndexFromLocation(t){return Ce.isAtomic(t.aUnit)&&Ce.isAtomic(t.bUnit)?this.getEdgeIndex(t.aIndex,t.aUnit.id,t.bIndex,t.bUnit.id):-1}}(function(e){class t extends Yn.UnitPairEdges{}e.UnitPairBonds=t})(Ji||(Ji={}));const Wy={forceCompute:!1,noCompute:!1,maxRadius:4},Pd={H:0,h:0,D:0,d:0,T:0,t:0,He:2,HE:2,he:2,Li:3,LI:3,li:3,Be:4,BE:4,be:4,B:5,b:5,C:6,c:6,N:7,n:7,O:8,o:8,F:9,f:9,Ne:10,NE:10,ne:10,Na:11,NA:11,na:11,Mg:12,MG:12,mg:12,Al:13,AL:13,al:13,Si:14,SI:14,si:14,P:15,p:15,S:16,s:16,Cl:17,CL:17,cl:17,Ar:18,AR:18,ar:18,K:19,k:19,Ca:20,CA:20,ca:20,Sc:21,SC:21,sc:21,Ti:22,TI:22,ti:22,V:23,v:23,Cr:24,CR:24,cr:24,Mn:25,MN:25,mn:25,Fe:26,FE:26,fe:26,Co:27,CO:27,co:27,Ni:28,NI:28,ni:28,Cu:29,CU:29,cu:29,Zn:30,ZN:30,zn:30,Ga:31,GA:31,ga:31,Ge:32,GE:32,ge:32,As:33,AS:33,as:33,Se:34,SE:34,se:34,Br:35,BR:35,br:35,Kr:36,KR:36,kr:36,Rb:37,RB:37,rb:37,Sr:38,SR:38,sr:38,Y:39,y:39,Zr:40,ZR:40,zr:40,Nb:41,NB:41,nb:41,Mo:42,MO:42,mo:42,Tc:43,TC:43,tc:43,Ru:44,RU:44,ru:44,Rh:45,RH:45,rh:45,Pd:46,PD:46,pd:46,Ag:47,AG:47,ag:47,Cd:48,CD:48,cd:48,In:49,IN:49,in:49,Sn:50,SN:50,sn:50,Sb:51,SB:51,sb:51,Te:52,TE:52,te:52,I:53,i:53,Xe:54,XE:54,xe:54,Cs:55,CS:55,cs:55,Ba:56,BA:56,ba:56,La:57,LA:57,la:57,Ce:58,CE:58,ce:58,Pr:59,PR:59,pr:59,Nd:60,ND:60,nd:60,Pm:61,PM:61,pm:61,Sm:62,SM:62,sm:62,Eu:63,EU:63,eu:63,Gd:64,GD:64,gd:64,Tb:65,TB:65,tb:65,Dy:66,DY:66,dy:66,Ho:67,HO:67,ho:67,Er:68,ER:68,er:68,Tm:69,TM:69,tm:69,Yb:70,YB:70,yb:70,Lu:71,LU:71,lu:71,Hf:72,HF:72,hf:72,Ta:73,TA:73,ta:73,W:74,w:74,Re:75,RE:75,re:75,Os:76,OS:76,os:76,Ir:77,IR:77,ir:77,Pt:78,PT:78,pt:78,Au:79,AU:79,au:79,Hg:80,HG:80,hg:80,Tl:81,TL:81,tl:81,Pb:82,PB:82,pb:82,Bi:83,BI:83,bi:83,Po:84,PO:84,po:84,At:85,AT:85,at:85,Rn:86,RN:86,rn:86,Fr:87,FR:87,fr:87,Ra:88,RA:88,ra:88,Ac:89,AC:89,ac:89,Th:90,TH:90,th:90,Pa:91,PA:91,pa:91,U:92,u:92,Np:93,NP:93,np:93,Pu:94,PU:94,pu:94,Am:95,AM:95,am:95,Cm:96,CM:96,cm:96,Bk:97,BK:97,bk:97,Cf:98,CF:98,cf:98,Es:99,ES:99,es:99,Fm:100,FM:100,fm:100,Md:101,MD:101,md:101,No:102,NO:102,no:102,Lr:103,LR:103,lr:103,Rf:104,RF:104,rf:104,Db:105,DB:105,db:105,Sg:106,SG:106,sg:106,Bh:107,BH:107,bh:107,Hs:108,HS:108,hs:108,Mt:109,MT:109,mt:109},M4={0:1.42,1:1.42,3:2.7,4:2.7,6:1.75,7:1.6,8:1.52,11:2.7,12:2.7,13:2.7,14:1.9,15:2,16:1.9,17:1.8,19:2.7,20:2.7,21:2.7,22:2.7,23:2.7,24:2.7,25:2.7,26:2.7,27:2.7,28:2.7,29:2.7,30:2.7,31:2.7,33:2.68,37:2.7,38:2.7,39:2.7,40:2.7,41:2.7,42:2.7,43:2.7,44:2.7,45:2.7,46:2.7,47:2.7,48:2.7,49:2.7,50:2.7,55:2.7,56:2.7,57:2.7,58:2.7,59:2.7,60:2.7,61:2.7,62:2.7,63:2.7,64:2.7,65:2.7,66:2.7,67:2.7,68:2.7,69:2.7,70:2.7,71:2.7,72:2.7,73:2.7,74:2.7,75:2.7,76:2.7,77:2.7,78:2.7,79:2.7,80:2.7,81:2.7,82:2.7,83:2.7,87:2.7,88:2.7,89:2.7,90:2.7,91:2.7,92:2.7,93:2.7,94:2.7,95:2.7,96:2.7,97:2.7,98:2.7,99:2.7,100:2.7,101:2.7,102:2.7,103:2.7,104:2.7,105:2.7,106:2.7,107:2.7,108:2.7,109:2.88},q4={0:.8,20:1.31,27:1.2,35:1.15,44:1.1,54:1,60:1.84,72:1.88,84:1.75,85:1.56,86:1.76,98:1.6,99:1.68,100:1.63,112:1.6,113:1.59,114:1.36,129:1.45,135:1.47,144:1.6,152:1.45,170:1.4,180:1.55,202:2.4,222:2.24,224:1.91,225:1.98,243:2.02,269:2,293:1.9,316:1.8,420:2.37,480:2.3,512:2.3,544:2.3,612:2.1,629:1.54,665:1,813:2.6,854:2.27,894:1.93,896:2.1,937:2.05,938:2.06,981:1.62,1258:2.68,1309:2.33,1484:1,1763:2.14,1823:2.48,1882:2.1,1944:1.72,2380:2.34,3367:2.44,3733:2.11,3819:2.6,3821:2.36,4736:2.75,5724:2.73,5959:2.63,6519:2.84,6750:2.87,8991:2.81},Yy=2.001,ea=function(){const e=["LI","NA","K","RB","CS","FR","BE","MG","CA","SR","BA","RA","AL","GA","IN","SN","TL","PB","BI","SC","TI","V","CR","MN","FE","CO","NI","CU","ZN","Y","ZR","NB","MO","TC","RU","RH","PD","AG","CD","LA","HF","TA","W","RE","OS","IR","PT","AU","HG","AC","RF","DB","SG","BH","HS","MT","CE","PR","ND","PM","SM","EU","GD","TB","DY","HO","ER","TM","YB","LU","TH","PA","U","NP","PU","AM","CM","BK","CF","ES","FM","MD","NO","LR"],t=new Set;for(const n of e)t.add(Pd[n]);return t}();function U4(e,t){return e<t?(e+t)*(e+t+1)/2+t:(e+t)*(e+t+1)/2+e}function Xr(e){const t=Pd[e];return t===void 0?-1:t}function F4(e,t){if(e<0||t<0)return-1;const n=q4[U4(e,t)];return n===void 0?-1:n}function Qr(e){if(e<0)return Yy;const t=M4[e];return t===void 0?Yy:t}function ta(e,t,n,r){const i=F4(e,t);return i>0?i:t<0?n:(n+r)/1.95}const L4=Pd.H;function Jr(e){return e===L4}const G4=new Map([["HIS|CD2|CG",2],["HIS|CE1|ND1",2],["ARG|CZ|NH2",2],["PHE|CE1|CZ",2],["PHE|CD2|CE2",2],["PHE|CD1|CG",2],["TRP|CD1|CG",2],["TRP|CD2|CE2",2],["TRP|CE3|CZ3",2],["TRP|CH2|CZ2",2],["ASN|CG|OD1",2],["GLN|CD|OE1",2],["TYR|CD1|CG",2],["TYR|CD2|CE2",2],["TYR|CE1|CZ",2],["ASP|CG|OD1",2],["GLU|CD|OE1",2],["G|C8|N7",2],["G|C4|C5",2],["G|C2|N3",2],["G|C6|O6",2],["C|C4|N3",2],["C|C5|C6",2],["C|C2|O2",2],["A|C2|N3",2],["A|C6|N1",2],["A|C4|C5",2],["A|C8|N7",2],["U|C5|C6",2],["U|C2|O2",2],["U|C4|O4",2],["DG|C8|N7",2],["DG|C4|C5",2],["DG|C2|N3",2],["DG|C6|O6",2],["DC|C4|N3",2],["DC|C5|C6",2],["DC|C2|O2",2],["DA|C2|N3",2],["DA|C6|N1",2],["DA|C4|C5",2],["DA|C8|N7",2],["DT|C5|C6",2],["DT|C2|O2",2],["DT|C4|O4",2]]);function H4(e,t,n){return[t,n]=t<n?[t,n]:[n,t],zs.has(e)&&t==="C"&&n==="O"||xy.has(e)&&t==="OP1"&&n==="P"?2:G4.get(`${e}|${t}|${n}`)||1}const j4=new Map([["LYS|NZ|RET|C15",2]]);function Zy(e,t,n,r){return e>n&&([e,n]=[n,e],[t,r]=[r,t]),j4.get(`${e}|${t}|${n}|${r}`)||1}var mn;(function(e){let t;(function(a){a[a.Str=0]="Str",a[a.Int=1]="Int",a[a.Float=2]="Float"})(t=e.Type||(e.Type={}));function n(a,u,l){return{name:a,type:t.Str,value:u,valueKind:l&&l.valueKind,defaultFormat:l&&l.encoder?{encoder:l.encoder}:void 0,shouldInclude:l&&l.shouldInclude}}e.str=n;function r(a,u,l){return{name:a,type:t.Int,value:u,valueKind:l&&l.valueKind,defaultFormat:l?{encoder:l.encoder,typedArray:l.typedArray}:void 0,shouldInclude:l&&l.shouldInclude}}e.int=r;function i(a,u,l){return{name:a,type:t.Float,value:u,valueKind:l&&l.valueKind,defaultFormat:l?{encoder:l.encoder,typedArray:l.typedArray,digitCount:typeof l.digitCount<"u"?l.digitCount:void 0}:void 0,shouldInclude:l&&l.shouldInclude}}e.float=i;function o(a){return r(a,(u,l,f)=>f+1,{typedArray:Int32Array,encoder:ht.by(ht.delta).and(ht.runLength).and(ht.integerPacking)})}e.index=o;class s{constructor(){this.fields=[]}index(u){return this.fields.push(e.index(u)),this}str(u,l,f){return this.fields.push(e.str(u,l,f)),this}int(u,l,f){return this.fields.push(e.int(u,l,f)),this}vec(u,l,f){for(let d=0;d<l.length;d++)this.fields.push(e.int(`${u}[${d+1}]`,l[d],f));return this}float(u,l,f){return this.fields.push(e.float(u,l,f)),this}many(u){for(let l=0;l<u.length;l++)this.fields.push(u[l]);return this}add(u){return this.fields.push(u),this}getFields(){return this.fields}}e.Builder=s;function c(){return new s}e.build=c})(mn||(mn={}));var Gn;(function(e){e.Empty={fields:[],source:[]};function t(r){const i=[],o=[],s=[],c=[];for(let u of r.split(/[\r\n]+/)){if(u=u.trim(),u.length===0)continue;const l=/^!/.test(u);l&&(u=u.substr(1));const f=u.split(/\./),d=f[1],m=l?d?c:o:d?s:i;m[m.length]=u,d&&!i.includes(f[0])&&(i[i.length]=f[0])}const a=s.map(u=>u.split(".")[0]);return{includeCategory(u){return o.includes(u)?!1:i.length<=0||i.indexOf(u)!==-1},includeField(u,l){const f=u+"."+l;return c.includes(f)?!1:!a.includes(u)||s.includes(f)}}}e.filterOf=t,e.DefaultFilter={includeCategory(r){return!0},includeField(r,i){return!0}},e.DefaultFormatter={getFormat(r,i){}};function n(r,i){return i?{fields:Xy(r._schema),source:[{data:r,rowCount:i.length,keys:()=>Vs.Array(i)}]}:{fields:Xy(r._schema),source:[{data:r,rowCount:r._rowCount}]}}e.ofTable=n})(Gn||(Gn={}));var Ed;(function(e){function t(r,i,o){r.startDataBlock(i);for(const s of o._tableNames)r.writeCategory({name:s,instance:()=>Gn.ofTable(o[s])})}e.writeDatabase=t;function n(r,i){for(const o of Object.keys(i))t(r,o,i[o])}e.writeDatabaseCollection=n})(Ed||(Ed={}));function Bd(e){return(t,n)=>n[e].value(t)}function V4(e){return(t,n)=>n[e].value(t).join(n[e].schema.separator)}function Rd(e,...t){return(n,r)=>r[e].schema.space.get(r[e].value(n),...t)}function qo(e){return(t,n)=>n[e].valueKind(t)}function z4(e,t){const n=[],r=mn.Type.Float,i=qo(e);if(t.rank===1){const o=t.dimensions[0];for(let s=0;s<o;s++){const c=`${e}[${s+1}]`;n.push({name:c,type:r,value:Rd(e,s),valueKind:i})}}else if(t.rank===2){const o=t.dimensions[0],s=t.dimensions[1];for(let c=0;c<o;c++)for(let a=0;a<s;a++){const u=`${e}[${c+1}][${a+1}]`;n.push({name:u,type:r,value:Rd(e,c,a),valueKind:i})}}else if(t.rank===3){const o=t.dimensions[0],s=t.dimensions[1],c=t.dimensions[2];for(let a=0;a<o;a++)for(let u=0;u<s;u++)for(let l=0;l<c;l++){const f=`${e}[${a+1}][${u+1}][${l+1}]`;n.push({name:f,type:r,value:Rd(e,a,u,l),valueKind:i})}}else throw new Error("Tensors with rank > 3 or rank 0 are currently not supported.");return n}function Xy(e){const t=[];for(const n of Object.keys(e)){const r=e[n];r.valueType==="int"?t.push({name:n,type:mn.Type.Int,value:Bd(n),valueKind:qo(n)}):r.valueType==="float"?t.push({name:n,type:mn.Type.Float,value:Bd(n),valueKind:qo(n)}):r.valueType==="str"?t.push({name:n,type:mn.Type.Str,value:Bd(n),valueKind:qo(n)}):r.valueType==="list"?t.push({name:n,type:mn.Type.Str,value:V4(n),valueKind:qo(n)}):r.valueType==="tensor"?t.push(...z4(n,r.space)):qi(r.valueType)}return t}function K4(e){return e.defaultFormat&&typeof e.defaultFormat.digitCount<"u"?Math.max(0,Math.min(e.defaultFormat.digitCount,16)):6}function Dd(e){return e.fields.some(t=>!!t.shouldInclude)?e.fields.filter(t=>!t.shouldInclude||e.source.some(n=>t.shouldInclude(n.data))):e.fields}function Qy(e,t){const n=e.instance(t),r=n.source.filter(s=>s.rowCount>0);if(!r.length)return{instance:n,rowCount:0,source:[]};const i=r.reduce((s,c)=>s+c.rowCount,0),o=r.map(s=>({data:s.data,keys:()=>s.keys?s.keys():Vs.Range(0,s.rowCount-1),rowCount:s.rowCount}));return{instance:n,rowCount:i,source:o}}let $4=class{constructor(){this.builder=St.create(),this.encoded=!1,this.dataBlockCreated=!1,this.filter=Gn.DefaultFilter,this.formatter=Gn.DefaultFormatter,this.isBinary=!1,this.binaryEncodingProvider=void 0}setFilter(t){this.filter=t||Gn.DefaultFilter}isCategoryIncluded(t){return this.filter.includeCategory(t)}setFormatter(t){this.formatter=t||Gn.DefaultFormatter}startDataBlock(t){this.dataBlockCreated=!0,St.write(this.builder,`data_${(t||"").replace(/[ \n\t]/g,"").toUpperCase()}
#
`)}writeCategory(t,n,r){if(this.encoded)throw new Error("The writer contents have already been encoded, no more writing.");if(!this.dataBlockCreated)throw new Error("No data block created.");if(!r?.ignoreFilter&&!this.filter.includeCategory(t.name))return;const{instance:i,rowCount:o,source:s}=Qy(t,n);o&&(o===1?W4(t,i,s,this.builder,this.filter,this.formatter):Y4(t,i,s,this.builder,this.filter,this.formatter))}encode(){this.encoded=!0}writeTo(t){const n=St.getChunks(this.builder);for(let r=0,i=n.length;r<i;r++)t.writeString(n[r])}getSize(){return St.getSize(this.builder)}getData(){return St.getString(this.builder)}};function Jy(e,t,n,r,i,o){const s=r.valueKind,c=s?s(n,t):ye.ValueKinds.Present;if(c!==ye.ValueKinds.Present)c===ye.ValueKinds.NotPresent?J4(e):eI(e);else{const a=r.value(n,t,o),u=r.type;if(u===mn.Type.Str)return Z4(a)?(na(e,a),!0):tI(e,a);u===mn.Type.Int?X4(e,a):Q4(e,a,i)}return!1}function e2(e,t,n){const r=[];for(const i of t){const o=n.getFormat(e,i.name);o&&typeof o.digitCount<"u"?r[r.length]=i.type===mn.Type.Float?Math.pow(10,Math.max(0,Math.min(o.digitCount,15))):0:r[r.length]=i.type===mn.Type.Float?Math.pow(10,K4(i)):0}return r}function W4(e,t,n,r,i,o){const s=Dd(t),c=n[0],a=c.data;let u=s.reduce((m,h)=>i.includeField(e.name,h.name)?Math.max(m,h.name.length):0,0);if(u===0)return;u+=e.name.length+6;const f=c.keys().move(),d=e2(e.name,t.fields,o);for(let m=0;m<s.length;m++){const h=s[m];if(!i.includeField(e.name,h.name))continue;St.writePadRight(r,`_${e.name}.${h.name}`,u),Jy(r,a,f,h,d[m],0)||St.newline(r)}St.write(r,`#
`)}function Y4(e,t,n,r,i,o){const s=Dd(t),c=i===Gn.DefaultFilter?s:s.filter(f=>i.includeField(e.name,f.name)),a=c.length;if(a===0)return;const u=e2(e.name,c,o);t2(r,"loop_");for(let f=0;f<a;f++)t2(r,`_${e.name}.${c[f].name}`);let l=0;for(let f=0;f<n.length;f++){const d=n[f],m=d.data;if(d.rowCount===0)continue;const h=d.keys();for(;h.hasNext;){const p=h.move();let _=!1;for(let y=0;y<a;y++)_=Jy(r,m,p,c[y],u[y],l);_||St.newline(r),l++}}St.write(r,`#
`)}function Z4(e){return typeof e=="string"&&e.indexOf(`
`)>=0}function t2(e,t){St.write(e,t),St.newline(e)}function X4(e,t){St.writeInteger(e,t),St.whitespace1(e)}function Q4(e,t,n){St.writeFloat(e,t,n),St.whitespace1(e)}function J4(e){St.writeSafe(e,". ")}function eI(e){St.writeSafe(e,"? ")}function tI(e,t){if(!t)return St.writeSafe(e,". "),!1;const n=t.charCodeAt(0);let r=!1,i=0,o=!1,s=!1;for(let c=0,a=t.length-1;c<=a;c++)switch(t.charCodeAt(c)){case 9:r=!0;break;case 10:return na(e,t),!0;case 32:r=!0;break;case 34:if(c&&c===a)break;if(o)return na(e,t),!0;s=!0,r=!0,i=0;break;case 39:if(c&&c===a)break;if(s)return na(e,t),!0;o=!0,r=!0,i=1;break}return!r&&(n===35||n===36||n===59||n===91||n===93||n===95)&&(r=!0),r?(St.writeSafe(e,i?'"':"'"),St.writeSafe(e,t),St.writeSafe(e,i?'" ':"' ")):(St.writeSafe(e,t),St.writeSafe(e," ")),!1}function na(e,t){St.writeSafe(e,`
;`+t),St.writeSafe(e,`
;
`)}function nI(e){const t=new ArrayBuffer(ra(e)),n=new DataView(t),r=new Uint8Array(t);return ia(e,n,r,0),r}function ra(e){const t=typeof e;if(t==="string"){const n=B_(e);if(n<32)return 1+n;if(n<256)return 2+n;if(n<65536)return 3+n;if(n<4294967296)return 5+n}if(e instanceof Uint8Array){const n=e.byteLength;if(n<256)return 2+n;if(n<65536)return 3+n;if(n<4294967296)return 5+n}if(t==="number"){if(Math.floor(e)!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if(t==="boolean"||e===null||e===void 0)return 1;if(t==="object"){let n,r=0;if(Array.isArray(e)){n=e.length;for(let i=0;i<n;i++)r+=ra(e[i])}else{const i=Object.keys(e);n=i.length;for(let o=0;o<n;o++){const s=i[o];r+=ra(s)+ra(e[s])}}if(n<16)return 1+r;if(n<65536)return 3+r;if(n<4294967296)return 5+r;throw new Error("Array or object too long 0x"+n.toString(16))}throw new Error("Unknown type "+t)}function ia(e,t,n,r){const i=typeof e;if(i==="string"){const o=B_(e);if(o<32)return t.setUint8(r,o|160),Ns(n,r+1,e),1+o;if(o<256)return t.setUint8(r,217),t.setUint8(r+1,o),Ns(n,r+2,e),2+o;if(o<65536)return t.setUint8(r,218),t.setUint16(r+1,o),Ns(n,r+3,e),3+o;if(o<4294967296)return t.setUint8(r,219),t.setUint32(r+1,o),Ns(n,r+5,e),5+o}if(e instanceof Uint8Array){const o=e.byteLength,s=new Uint8Array(t.buffer);if(o<256)return t.setUint8(r,196),t.setUint8(r+1,o),s.set(e,r+2),2+o;if(o<65536)return t.setUint8(r,197),t.setUint16(r+1,o),s.set(e,r+3),3+o;if(o<4294967296)return t.setUint8(r,198),t.setUint32(r+1,o),s.set(e,r+5),5+o}if(i==="number"){if(!isFinite(e))throw new Error("Number not finite: "+e);if(Math.floor(e)!==e)return t.setUint8(r,203),t.setFloat64(r+1,e),9;if(e>=0){if(e<128)return t.setUint8(r,e),1;if(e<256)return t.setUint8(r,204),t.setUint8(r+1,e),2;if(e<65536)return t.setUint8(r,205),t.setUint16(r+1,e),3;if(e<4294967296)return t.setUint8(r,206),t.setUint32(r+1,e),5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return t.setInt8(r,e),1;if(e>=-128)return t.setUint8(r,208),t.setInt8(r+1,e),2;if(e>=-32768)return t.setUint8(r,209),t.setInt16(r+1,e),3;if(e>=-2147483648)return t.setUint8(r,210),t.setInt32(r+1,e),5;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if(e==null)return t.setUint8(r,192),1;if(i==="boolean")return t.setUint8(r,e?195:194),1;if(i==="object"){let o,s=0;const c=Array.isArray(e);let a;if(c?o=e.length:(a=Object.keys(e),o=a.length),o<16?(t.setUint8(r,o|(c?144:128)),s=1):o<65536?(t.setUint8(r,c?220:222),t.setUint16(r+1,o),s=3):o<4294967296&&(t.setUint8(r,c?221:223),t.setUint32(r+1,o),s=5),c)for(let u=0;u<o;u++)s+=ia(e[u],t,n,r+s);else for(let u=0,l=a.length;u<l;u++){const f=a[u];s+=ia(f,t,n,r+s),s+=ia(e[f],t,n,r+s)}return s}throw new Error("Unknown type "+i)}class rI{setFilter(t){this.filter=t||Gn.DefaultFilter}isCategoryIncluded(t){return this.filter.includeCategory(t)}setFormatter(t){this.formatter=t||Gn.DefaultFormatter}startDataBlock(t){this.dataBlocks.push({header:(t||"").replace(/[ \n\t]/g,"").toUpperCase(),categories:[]})}writeCategory(t,n,r){if(!this.data)throw new Error("The writer contents have already been encoded, no more writing.");if(!this.dataBlocks.length)throw new Error("No data block created.");if(!r?.ignoreFilter&&!this.filter.includeCategory(t.name))return;const{instance:i,rowCount:o,source:s}=Qy(t,n);if(!o)return;const c={name:"_"+t.name,columns:[],rowCount:o},a=Dd(i);for(const u of a){if(!this.filter.includeField(t.name,u.name))continue;const l=this.formatter.getFormat(t.name,u.name);c.columns.push(cI(t.name,u,s,o,l,this.binaryEncodingProvider,this.autoClassify))}c.columns.length&&this.dataBlocks[this.dataBlocks.length-1].categories.push(c)}encode(){this.encodedData||(this.encodedData=nI(this.data),this.data=null,this.dataBlocks=null)}writeTo(t){t.writeBinary(this.encodedData)}getData(){return this.encode(),this.encodedData}getSize(){return this.encodedData.length}constructor(t,n,r){this.autoClassify=r,this.dataBlocks=[],this.filter=Gn.DefaultFilter,this.formatter=Gn.DefaultFormatter,this.isBinary=!0,this.binaryEncodingProvider=void 0,this.binaryEncodingProvider=n,this.data={encoder:t,version:fx,dataBlocks:this.dataBlocks}}}function iI(e,t){return t&&t.typedArray?t.typedArray:e.defaultFormat&&e.defaultFormat.typedArray?e.defaultFormat.typedArray:e.type===mn.Type.Str?Array:e.type===mn.Type.Int?Int32Array:Float64Array}function oI(e){return e===mn.Type.Str?wr.by(ht.stringArray):wr.by(ht.byteArray)}function sI(e,t,n,r){return n&&n.encoder?n.encoder:t.defaultFormat&&t.defaultFormat.encoder?t.defaultFormat.encoder:r?r.get(e,t.name):void 0}function aI(e,t){return e===mn.Type.Str?wr.by(ht.stringArray):e===mn.Type.Int?Kl(t):zx(t)}function cI(e,t,n,r,i,o,s){const{array:c,allPresent:a,mask:u}=uI(t,iI(t,i),r,n);let l;t.type===mn.Type.Str?l=wr.by(ht.stringArray):l=sI(e,t,i,o),l||(s?l=aI(t.type,c):l=oI(t.type));const f=l.encode(c);let d;if(!a){const m=wr.by(ht.runLength).and(ht.byteArray).encode(u);m.data.length<u.length?d=m:d=wr.by(ht.byteArray).encode(u)}return{name:t.name,data:f,mask:d}}function uI(e,t,n,r){const i=e.type===mn.Type.Str,o=new t(n),s=new Uint8Array(n),c=e.valueKind,a=e.value;let u=!0,l=0;for(let f=0;f<r.length;f++){const d=r[f].data,m=r[f].keys();for(;m.hasNext;){const h=m.move(),p=c?c(h,d):ye.ValueKinds.Present;if(p!==ye.ValueKinds.Present)s[l]=p,i&&(o[l]=""),u=!1;else{const _=a(h,d,l);typeof _=="string"&&!_?(s[l]=ye.ValueKinds.NotPresent,u=!1):s[l]=ye.ValueKinds.Present,o[l]=_}l++}}return{array:o,allPresent:u,mask:s}}var an;(function(e){e.Encoder=Ed,e.Category=Gn,e.Field=mn,e.Encoding=ht;function t(a){const{binary:u=!1,encoderName:l="mol*"}=a||{};return u?new rI(l,a?a.binaryEncodingPovider:void 0,a?!!a.binaryAutoClassifyEncoding:!1):new $4}e.createEncoder=t;function n(){return e.Field.build()}e.fields=n;var r=e.Encoding;e.Encodings={deltaRLE:r.by(r.delta).and(r.runLength).and(r.integerPacking),fixedPoint2:r.by(r.fixedPoint(100)).and(r.delta).and(r.integerPacking),fixedPoint3:r.by(r.fixedPoint(1e3)).and(r.delta).and(r.integerPacking)};function i(a,u){return{fields:a,source:[u]}}e.categoryInstance=i;function o(a){return{get(u,l){const f=a.categories[u];if(!f)return;const d=f.getField(l);return d&&d.binaryEncoding?wr.fromEncoding(d.binaryEncoding):void 0}}}e.createEncodingProviderFromCifFrame=o;function s(a){return{get(u,l){for(let f=0;f<a.length;f++){const d=a[f];if(d.categoryName===u&&d.columnName===l)return c(d)}}}}e.createEncodingProviderFromJsonConfig=s;function c(a){const u=a.precision;if(u!==void 0){const l=Math.pow(10,u),f=r.by(r.fixedPoint(l));switch(a.encoding){case"pack":return f.and(r.integerPacking);case"rle":return f.and(r.runLength).and(r.integerPacking);case"delta":return f.and(r.delta).and(r.integerPacking);case"delta-rle":return f.and(r.delta).and(r.runLength).and(r.integerPacking)}}else switch(a.encoding){case"pack":return r.by(r.integerPacking);case"rle":return r.by(r.runLength).and(r.integerPacking);case"delta":return r.by(r.delta).and(r.integerPacking);case"delta-rle":return r.by(r.delta).and(r.runLength).and(r.integerPacking)}throw new Error("cannot be reached")}})(an||(an={}));var Uo;(function(e){e.Descriptor={name:"chem_comp_bond",cifExport:{prefix:"",categories:[{name:"chem_comp_bond",instance(i){const o=e.Provider.get(i.firstModel);if(!o)return an.Category.Empty;const s=o.data;if(!s)return an.Category.Empty;const c=i.structures[0].uniqueResidueNames,{comp_id:a,_rowCount:u}=s,l=[];for(let f=0;f<u;f++)c.has(a.value(f))&&(l[l.length]=f);return an.Category.ofTable(s,l)}}]}},e.Provider=_r.create(e.Descriptor);function t(i,o){return Ot.pick(o,mt.chem_comp_bond,s=>i.properties.chemicalComponentMap.has(o.comp_id.value(s)))}e.chemCompBondFromTable=t;function n(i){const o=new Map;function s(p){if(o.has(p))return o.get(p);const _=new r(p);return o.set(p,_),_}const{comp_id:c,atom_id_1:a,atom_id_2:u,value_order:l,pdbx_aromatic_flag:f,_rowCount:d,pdbx_ordinal:m}=i;let h=s(c.value(0));for(let p=0;p<d;p++){const _=c.value(p),y=a.value(p),v=u.value(p),A=l.value(p),g=f.value(p)==="y",b=m.value(p);h.id!==_&&(h=s(_));let C=pt.Flag.Covalent,I=1;switch(g&&(C|=pt.Flag.Aromatic),A.toLowerCase()){case"delo":C|=pt.Flag.Aromatic;break;case"doub":I=2;break;case"trip":I=3;break;case"quad":I=4;break}h.add(y,v,I,C,b)}return o}e.getEntriesFromChemCompBond=n;class r{add(o,s,c,a,u,l=!0){const f=this.map.get(o);if(f!==void 0)f.get(s)===void 0&&f.set(s,{order:c,flags:a,key:u});else{const d=new Map;d.set(s,{order:c,flags:a,key:u}),this.map.set(o,d)}l&&this.add(s,o,c,a,u,!1)}constructor(o){this.id=o,this.map=new Map}}e.Entry=r})(Uo||(Uo={}));var ir;(function(e){e.Descriptor={name:"struct_conn",cifExport:{prefix:"",categories:[{name:"struct_conn",instance(o){const s=e.Provider.get(o.firstModel);if(!s||s.entries.length===0)return an.Category.Empty;const c=o.structures[0],a=[];for(const u of s.entries)n(c,u.partnerA.atomIndex)&&n(c,u.partnerB.atomIndex)&&(a[a.length]=u.rowIndex);return an.Category.ofTable(s.data,a)}}]}},e.Provider=_r.create(e.Descriptor);function t(o){const s=e.Provider.get(o);return!!s&&s.entries.length/o.atomicConformation.atomId.rowCount>.95}e.isExhaustive=t;function n({units:o},s){for(let c=0,a=o.length;c<a;c++)if(Ee.indexOf(o[c].elements,s)>=0)return!0;return!1}function r(o){const s=new Map;for(const c of o){const{partnerA:{atomIndex:a},partnerB:{atomIndex:u}}=c;s.has(a)?s.get(a).push(c):s.set(a,[c]),s.has(u)?s.get(u).push(c):s.set(u,[c])}return s}e.getAtomIndexFromEntries=r;function i(o,s){const{conn_type_id:c,pdbx_dist_value:a,pdbx_value_order:u}=o,l={label_asym_id:o.ptnr1_label_asym_id,label_seq_id:o.ptnr1_label_seq_id,auth_seq_id:o.ptnr1_auth_seq_id,label_atom_id:o.ptnr1_label_atom_id,label_alt_id:o.pdbx_ptnr1_label_alt_id,ins_code:o.pdbx_ptnr1_PDB_ins_code,symmetry:o.ptnr1_symmetry},f={label_asym_id:o.ptnr2_label_asym_id,label_seq_id:o.ptnr2_label_seq_id,auth_seq_id:o.ptnr2_auth_seq_id,label_atom_id:o.ptnr2_label_atom_id,label_alt_id:o.pdbx_ptnr2_label_alt_id,ins_code:o.pdbx_ptnr2_PDB_ins_code,symmetry:o.ptnr2_symmetry},d=Array.from(s.entities.data.id.toArray()),m=(p,_)=>{if(_.label_asym_id.valueKind(p)!==ye.ValueKinds.Present)return;const y=_.label_asym_id.value(p),v=_.label_atom_id.value(p);if(!v)return;const A=_.auth_seq_id.valueKind(p)===ye.ValueKind.Present?_.auth_seq_id.value(p):_.label_seq_id.value(p),g=_.ins_code.value(p),b=_.label_alt_id.value(p);for(const C of d){const I=s.atomicHierarchy.index.findResidue(C,y,A,g);if(I<0)continue;const S=s.atomicHierarchy.index.findAtomOnResidue(I,v,b);if(!(S<0))return{residueIndex:I,atomIndex:S,symmetry:_.symmetry.value(p)}}},h=[];for(let p=0;p<o._rowCount;p++){const _=m(p,l),y=m(p,f);if(_===void 0||y===void 0)continue;const v=c.value(p),A=u.value(p)||"";let g=pt.Flag.None,b=1;switch(A){case"sing":b=1;break;case"doub":b=2;break;case"trip":b=3;break;case"quad":b=4;break;default:b=Zy(o.ptnr1_label_comp_id.value(p),o.ptnr1_label_atom_id.value(p),o.ptnr2_label_comp_id.value(p),o.ptnr2_label_atom_id.value(p))}switch(v){case"covale":g=pt.Flag.Covalent;break;case"disulf":g=pt.Flag.Covalent|pt.Flag.Disulfide;break;case"hydrog":g=pt.Flag.HydrogenBond;break;case"metalc":g=pt.Flag.MetallicCoordination;break}h.push({rowIndex:p,flags:g,order:b,distance:a.value(p),partnerA:_,partnerB:y})}return h}e.getEntriesFromStructConn=i})(ir||(ir={}));const lI=O.distance,dI=6,fI=5.5,mI=3.9;function kd(e,t,n,r,i,o,s){const c=new pr.EdgeBuilder(o,e,t),a=new Uint16Array(c.slotCount),u=new Int8Array(c.slotCount),l=new Uint32Array(c.slotCount);for(let f=0,d=c.edgeCount;f<d;f++)c.addNextEdge(),c.assignProperty(a,r[f]),c.assignProperty(u,n[f]),c.assignProperty(l,i[f]);return c.createGraph({flags:a,order:u,key:l},s)}const n2=O(),r2=O();function hI(e,t,n){return e.conformation.position(t,n2),e.conformation.position(n,r2),lI(n2,r2)}const pI=new Set;function _I(e){const t=xn.Provider.get(e.model),{elements:n}=e,{type_symbol:r}=e.model.atomicHierarchy.atoms,i=e.elements.length,{maxDistance:o}=t,{offset:s,b:c,edgeProps:{order:a,distance:u,flag:l,key:f,operatorA:d,operatorB:m}}=t.bonds,{atomSourceIndex:h}=e.model.atomicHierarchy,{invertedIndex:p}=Lt.getInvertedAtomSourceIndex(e.model),_=[],y=[],v=[],A=[],g=[],b=e.conformation.operator.key;for(let C=0;C<i;C++){const I=n[C],S=Xr(r.value(I)),P=Jr(S),T=h.value(I);for(let D=s[T],w=s[T+1];D<w;++D){const E=p[c[D]];if(I>=E)continue;const k=Ee.indexOf(e.elements,E);if(k<0)continue;const F=d[D],V=m[D];if(F>=0&&F!==b||V>=0&&V!==b)continue;const de=Xr(r.value(E)),W=u[D],J=hI(e,I,E);let le=!1;if(W>=0)le=fn(J,W,.3);else if(o>=0)le=J<o;else{const K=ta(S,de,Qr(S),Qr(de));le=J<K,P&&Jr(de)&&(le=!1)}le&&(_[_.length]=C,y[y.length]=k,A[A.length]=a[D],v[v.length]=l[D],g[g.length]=f[D])}}return kd(_,y,A,v,g,i,{canRemap:!1,cacheable:t.cacheable})}function yI(e,t){const n=Lt.isCoarseGrained(e.model),r=n?dI:t.maxRadius,{x:i,y:o,z:s}=e.model.atomicConformation,c=e.elements.length,{elements:a,residueIndex:u,chainIndex:l}=e,{type_symbol:f,label_atom_id:d,label_alt_id:m,label_comp_id:h}=e.model.atomicHierarchy.atoms,{label_seq_id:p}=e.model.atomicHierarchy.residues,{traceElementIndex:_}=e.model.atomicHierarchy.derived.residue,{index:y}=e.model.atomicHierarchy,{byEntityKey:v}=e.model.sequence,A=e.lookup3d,g=ir.Provider.get(e.model),b=Uo.Provider.get(e.model),C=ir.isExhaustive(e.model),I=[],S=[],P=[],T=[],D=[];let w=-1,E,k=!0,F=!0,V=!0;const de=pI,W=!!g?.residueCantorPairs.size;for(let J=0;J<c;J++){const le=a[J],K=f.value(le);k&&K!=="H"&&K!=="O"&&(k=!1);const ae=t.forceCompute?void 0:g&&g.byAtomIndex.get(le);let me=!1;if(ae)for(const L of ae){const{partnerA:q,partnerB:H}=L;if(q.symmetry!==H.symmetry)continue;const Z=q.atomIndex===le?H:q,re=Ee.indexOf(e.elements,Z.atomIndex);re<0||a[re]<le||(I[I.length]=J,S[S.length]=re,P[P.length]=L.flags,T[T.length]=L.order,D[D.length]=L.rowIndex,me||de.clear(),me=!0,de.add(re))}if(C)continue;const De=u[le],te=p.value(De),ce=h.value(le);if(!t.forceCompute&&De!==w)if(b&&b.entries.has(ce)){const L=v[y.getEntityFromChain(l[le])];L&&L.sequence.microHet.has(te)?E=void 0:E=b.entries.get(ce).map}else E=void 0;w=De;const M=Xr(K),B=d.value(le),j=E?E.get(B):void 0,{indices:ne,count:G,squaredDistances:$}=A.find(i[le],o[le],s[le],r),Y=Jr(M),ie=Qr(M),oe=m.value(le),pe=ea.has(M);for(let L=0;L<G;L++){const q=ne[L];if(me&&de.has(q))continue;const H=a[q];if(H<=le)continue;const Z=m.value(H);if(oe&&Z&&oe!==Z)continue;if(W){const R=ji(u[le],u[H]);if(g.residueCantorPairs.has(R))continue}const re=Xr(f.value(H)),Re=Jr(re);if(Y&&Re)continue;const qe=(pe||ea.has(re))&&!(Y||Re),xe=u[H];if(De===xe&&j){const R=j.get(d.value(H));if(R){I[I.length]=J,S[S.length]=q,T[T.length]=R.order;let Q=R.flags;qe&&(Q|pt.Flag.Covalent&&(Q^=pt.Flag.Covalent),Q|=pt.Flag.MetallicCoordination),P[P.length]=Q,D[D.length]=R.key}continue}const be=Math.sqrt($[L]);if(be===0)continue;let x=!1;if(n)De===xe?x=be<=fI:x=be<=mI&&_[De]===le&&_[xe]===H;else{const R=ta(M,re,ie,Qr(re));x=be<=R}if(x){I[I.length]=J,S[S.length]=q,T[T.length]=H4(ce,B,d.value(H)),P[P.length]=(qe?pt.Flag.MetallicCoordination:pt.Flag.Covalent)|pt.Flag.Computed,D[D.length]=-1;const R=p.value(xe);te===R&&(F=!1),Math.abs(te-R)>1&&(V=!1)}}}return kd(I,S,T,P,D,c,{canRemap:k||F&&V})}function gI(e){if(e.conformation.operator.key===-1)return!1;const t=xn.Provider.get(e.model);return!!t?.hasOperators}function bI(e){const t=xn.Provider.get(e.model),n=t.bySameOperator.get(e.conformation.operator.key);if(!n)return Mo.Empty;const{a:r,b:i,edgeProps:{key:o,flag:s,order:c}}=t.bonds,{invertedIndex:a}=Lt.getInvertedAtomSourceIndex(e.model),{elements:u}=e,l=[],f=[],d=[],m=[],h=[];for(let p=0,_=n.length;p<_;++p){const y=n[p];if(r[y]>=i[y])continue;const v=a[r[y]],A=Ee.indexOf(u,v);if(A<0)continue;const g=a[i[y]],b=Ee.indexOf(u,g);b<0||(l[l.length]=A,f[f.length]=b,d[d.length]=s[y],m[m.length]=c[y],h[h.length]=o[y])}return kd(l,f,m,d,h,u.length,{canRemap:!1,cacheable:t.cacheable})}function vI(e,t){const n={...Wy,...t};return n.noCompute||e.elements.length<=1?Mo.Empty:!n.forceCompute&&xn.Provider.get(e.model)?gI(e)?bI(e):_I(e):yI(e,n)}const AI=O.distance,xI=O.set,SI=O.squaredDistance,CI=O.transformMat4,i2=O(),o2=O();function s2(e,t,n,r){return e.conformation.position(t,i2),n.conformation.position(r,o2),AI(i2,o2)}const II=Ke(),Ai=O();function wI(e,t,n,r){const{maxRadius:i}=n,{elements:o,residueIndex:s}=e,{x:c,y:a,z:u}=e.model.atomicConformation,{elements:l,residueIndex:f}=t,d=e.elements.length,{type_symbol:m,label_alt_id:h,label_atom_id:p,label_comp_id:_}=e.model.atomicHierarchy.atoms,{type_symbol:y,label_alt_id:v,label_atom_id:A,label_comp_id:g}=t.model.atomicHierarchy.atoms,{auth_seq_id:b}=e.model.atomicHierarchy.residues,{auth_seq_id:C}=t.model.atomicHierarchy.residues,{occupancy:I}=e.model.atomicConformation,{occupancy:S}=t.model.atomicConformation,P=I.isDefined&&S.isDefined,T=e.model===t.model&&ir.Provider.get(e.model),D=!n.forceCompute&&e.model===t.model&&xn.Provider.get(e.model),{atomSourceIndex:w}=e.model.atomicHierarchy,{invertedIndex:E}=D?Lt.getInvertedAtomSourceIndex(t.model):{invertedIndex:void 0},k=e.model===t.model&&ir.isExhaustive(e.model),F=Ke.mul(II,t.conformation.operator.inverse,e.conformation.operator.matrix),V=!Ke.isIdentity(F),{center:de,radius:W}=t.boundary.sphere,J=(W+i)*(W+i);r.startUnitPair(e.id,t.id);const le=e.conformation.operator.key,K=t.conformation.operator.key;for(let ae=0;ae<d;ae++){const me=o[ae];if(xI(Ai,c[me],a[me],u[me]),V&&CI(Ai,Ai,F),SI(Ai,de)>J)continue;if(!n.forceCompute&&D){const{maxDistance:L}=D,{offset:q,b:H,edgeProps:{order:Z,distance:re,flag:Re,key:qe,operatorA:xe,operatorB:be}}=D.bonds,x=w.value(me),R=Xr(m.value(me));for(let Q=q[x],_e=q[x+1];Q<_e;++Q){const ue=E[H[Q]],he=Ee.indexOf(t.elements,ue);if(he<0)continue;const fe=xe[Q],ve=be[Q];if(fe>=0&&ve>=0&&(fe===ve||fe!==le||ve!==K))continue;const Ie=Xr(m.value(ue)),Pe=re[Q],Te=s2(e,me,t,ue);let Me=!1;if(Pe>=0)Me=fn(Te,Pe,.3);else if(L>=0)Me=Te<L;else{const Ve=ta(R,Ie,Qr(R),Qr(Ie));Me=Te<Ve,Jr(R)&&Jr(Ie)&&(Me=!1)}Me&&r.add(ae,he,{order:Z[Q],flag:Re[Q],key:qe[Q]})}continue}const De=n.forceCompute?void 0:T&&T.byAtomIndex.get(me);if(De&&De.length){let L=!1;for(const q of De){const{partnerA:H,partnerB:Z}=q,re=H.atomIndex===me?Z:H,Re=Ee.indexOf(t.elements,re.atomIndex);Re<0||s2(e,me,t,re.atomIndex)>i||(r.add(ae,Re,{order:q.order,flag:q.flags,key:q.rowIndex}),L=!0)}if(L)continue}if(k)continue;const te=I.value(me),{lookup3d:ce}=t,{indices:M,count:B,squaredDistances:j}=ce.find(Ai[0],Ai[1],Ai[2],i);if(B===0)continue;const ne=Xr(m.value(me)),G=Jr(ne),$=Qr(ne),Y=h.value(me),ie=ea.has(ne),oe=p.value(me),pe=_.value(s[me]);for(let L=0;L<B;L++){const q=M[L],H=l[q],Z=v.value(H);if(Y&&Z&&Y!==Z||P&&S.value(H)<1&&te<1&&b.value(s[me])===C.value(f[H]))continue;if(T&&e.model===t.model){const x=ji(s[me],f[H]);if(T.residueCantorPairs.has(x))continue}const re=Xr(y.value(H)),Re=Jr(re);if(G&&Re)continue;const qe=(ie||ea.has(re))&&!(G||Re),xe=Math.sqrt(j[L]);if(xe===0)continue;const be=ta(ne,re,$,Qr(re));if(xe<=be){const x=A.value(H),R=g.value(f[H]);r.add(ae,q,{order:Zy(pe,R,oe,x),flag:(qe?pt.Flag.MetallicCoordination:pt.Flag.Covalent)|pt.Flag.Computed,key:-1})}}}r.finishUnitPair()}function PI(e){for(const t of e.models){const n=xn.Provider.get(t);if(!n?.hasOperators)return!1}for(const t of e.units)if(t.conformation.operator.key===-1)return!1;return!0}function EI(e,t){const n=new Map;for(const r of e.units){const{key:i}=r.conformation.operator;n.has(i)?n.get(i).add(r):n.set(i,new Set([r]))}for(const r of e.models){const i=xn.Provider.get(r),{a:o,b:s}=i.bonds,{order:c,flag:a,key:u,operatorA:l,operatorB:f}=i.bonds.edgeProps,{invertedIndex:d}=Lt.getInvertedAtomSourceIndex(r),m=new Map;for(const _ of e.units)if(_.model===r)for(let y=0,v=_.elements.length;y<v;++y){const A=_.elements[y];m.has(A)?m.get(A).add(_):m.set(A,new Set([_]))}const h=new Map;for(let _=0,y=l.length;_<y;++_){let v,A;if(l[_]===f[_]?(v=m.get(d[o[_]]),A=m.get(d[s[_]])):(v=n.get(l[_]),A=n.get(f[_])),!(!v||!A)){for(const g of v)if(l[_]===g.conformation.operator.key)for(const b of A){if(f[_]!==b.conformation.operator.key||g===b||!Ce.isAtomic(g)||!Ce.isAtomic(b)||g.id>b.id)continue;const C=Un(g.id,b.id);h.has(C)?h.get(C).add(_):h.set(C,new Set([_]))}}}const p=[-1,-1];h.forEach((_,y)=>{const[v,A]=w_(p,y),g=e.unitMap.get(v),b=e.unitMap.get(A);t.startUnitPair(v,A),_.forEach(C=>{const I=d[o[C]],S=Ee.indexOf(g.elements,I);if(S<0)return;const P=d[s[C]],T=Ee.indexOf(b.elements,P);T<0||t.add(S,T,{order:c[C],flag:a[C],key:u[C]})}),t.finishUnitPair()})}}const BI={...Wy,ignoreWater:!0,ignoreIon:!0};function RI(e,t){const n=new Yn.Builder,r=e.models.some(o=>xn.Provider.get(o)),i=e.models.some(o=>ir.isExhaustive(o));return t.noCompute||e.isCoarseGrained&&!r&&!i?new Ji(n.getMap()):!t.forceCompute&&PI(e)?(EI(e,n),new Ji(n.getMap())):(wt.eachUnitPair(e,(o,s)=>{wI(o,s,t,n)},{maxRadius:t.maxRadius,validUnit:o=>t.validUnit(o),validUnitPair:(o,s)=>t.validUnitPair(e,o,s)}),new Ji(n.getMap()))}function DI(e,t){const n={...BI,...t};return RI(e,{...n,validUnit:t&&t.validUnit||(r=>Ce.isAtomic(r)),validUnitPair:t&&t.validUnitPair||((r,i,o)=>{if(!wt.validUnitPair(r,i,o))return!1;const c=i.model.atomicHierarchy.derived.residue.moleculeType,a=o.model.atomicHierarchy.derived.residue.moleculeType,u=(!Ce.isAtomic(i)||c[i.residueIndex[i.elements[0]]]!==Nt.Water)&&(!Ce.isAtomic(o)||a[o.residueIndex[o.elements[0]]]!==Nt.Water),l=!Ce.isAtomic(i)||c[i.residueIndex[i.elements[0]]]!==Nt.Ion,f=!Ce.isAtomic(o)||a[o.residueIndex[o.elements[0]]]!==Nt.Ion,d=l&&f;return(u||!n.ignoreWater)&&(d||!n.ignoreIon)?!0:kI(i,o)})})}function kI(e,t){if(e.model!==t.model||!Ce.isAtomic(e)||!Ce.isAtomic(t))return!1;const n=ir.Provider.get(e.model);if(!n)return!1;const r=e.elements.length<t.elements.length?e:t,i=e.elements.length>=t.elements.length?e:t,{elements:o}=r,{elements:s}=i,{indexOf:c}=Ee;for(let a=0,u=o.length;a<u;a++){const l=o[a],f=n.byAtomIndex.get(l);if(f?.length)for(const d of f){const m=d.partnerA.atomIndex===l?d.partnerB.atomIndex:d.partnerA.atomIndex;if(c(s,m)>=0)return!0}}return!1}var Td;(function(e){function t(_,y,v,A,g,b){return{kind:"bond-location",aStructure:_,aUnit:y,aIndex:v,bStructure:A,bUnit:g,bIndex:b}}e.Location=t;function n(_){return!!_&&_.kind==="bond-location"}e.isLocation=n;function r(_,y){return _.aStructure.label===y.aStructure.label&&_.bStructure.label===y.bStructure.label&&_.aIndex===y.aIndex&&_.bIndex===y.bIndex&&_.aUnit.id===y.aUnit.id&&_.bUnit.id===y.bUnit.id}e.areLocationsEqual=r;function i(_,y){return{kind:"bond-loci",structure:_,bonds:y}}e.Loci=i;function o(_){return!!_&&_.kind==="bond-loci"}e.isLoci=o;function s(_,y){if(_.structure!==y.structure||_.bonds.length!==y.bonds.length)return!1;for(let v=0,A=_.bonds.length;v<A;++v)if(!r(_.bonds[v],y.bonds[v]))return!1;return!0}e.areLociEqual=s;function c(_){return _.bonds.length===0}e.isLociEmpty=c;function a(_,y){if(y===_.structure)return _;const v=[];return _.bonds.forEach(A=>{const g=y.unitMap.get(A.aUnit.id);if(!g)return;const b=y.unitMap.get(A.bUnit.id);if(!b)return;const C=A.aUnit.elements[A.aIndex],I=Ee.indexOf(g.elements,C);if(I===-1)return;const S=A.bUnit.elements[A.bIndex],P=Ee.indexOf(b.elements,S);P!==-1&&v.push(t(_.structure,g,I,_.structure,b,P))}),i(y,v)}e.remapLoci=a;function u(_){const y=[],v=new Map;for(const A of _.bonds){const{aIndex:g,aUnit:b,bIndex:C,bUnit:I}=A;b===I?v.has(b.id)?v.get(b.id).push(g,C):v.set(b.id,[g,C]):(v.has(b.id)?v.get(b.id).push(g):v.set(b.id,[g]),v.has(I.id)?v.get(I.id).push(C):v.set(I.id,[C]))}return v.forEach((A,g)=>{y.push({unit:_.structure.unitMap.get(g),indices:Ee.deduplicate(Ee.ofUnsortedArray(A))})}),On(_.structure,y)}e.toStructureElementLoci=u;function l(_){const{aUnit:y,aIndex:v}=_.bonds[0];return On(_.structure,[{unit:y,indices:Fe.ofSingleton(v)}])}e.toFirstStructureElementLoci=l;function f(_,y){if(y.aUnit===y.bUnit){const v=y.aUnit.bonds,A=v.getEdgeIndex(y.aIndex,y.bIndex);return A<0?pt.create(pt.Flag.None):pt.create(v.edgeProps.flags[A])}else{const v=_.interUnitBonds.getBondFromLocation(y);return v?pt.create(v.props.flag):pt.create(pt.Flag.None)}}e.getType=f;function d(_,y){if(y.aUnit===y.bUnit){const v=y.aUnit.bonds,A=v.getEdgeIndex(y.aIndex,y.bIndex);return A<0?0:v.edgeProps.order[A]}else{const v=_.interUnitBonds.getBondFromLocation(y);return v?v.props.order:0}}e.getOrder=d;function m(_){let y=0;for(const v of _.unitSymmetryGroups){const A=v.units[0];Ce.isAtomic(A)&&(y+=A.bonds.edgeCount*v.units.length)}return y}e.getIntraUnitBondCount=m;class h{move(){return this.advance(),this.current}setElement(y,v,A){this.structure=y,this.unit=v,this.index=A,this.interBondIndices=y.interUnitBonds.getEdgeIndices(A,v.id),this.interBondCount=this.interBondIndices.length,this.interBondIndex=0,this.intraBondEnd=v.bonds.offset[A+1],this.intraBondIndex=v.bonds.offset[A],this.hasNext=this.interBondIndex<this.interBondCount||this.intraBondIndex<this.intraBondEnd}advance(){if(this.intraBondIndex<this.intraBondEnd)this.current.otherUnit=this.unit,this.current.otherIndex=this.unit.bonds.b[this.intraBondIndex],this.current.type=this.unit.bonds.edgeProps.flags[this.intraBondIndex],this.current.order=this.unit.bonds.edgeProps.order[this.intraBondIndex],this.intraBondIndex+=1;else if(this.interBondIndex<this.interBondCount){const y=this.structure.interUnitBonds.edges[this.interBondIndices[this.interBondIndex]];this.current.otherUnit=this.structure.unitMap.get(y.unitA!==this.unit.id?y.unitA:y.unitB),this.current.otherIndex=y.indexA!==this.index?y.indexA:y.indexB,this.current.type=y.props.flag,this.current.order=y.props.order,this.interBondIndex+=1}else{this.hasNext=!1;return}this.hasNext=this.interBondIndex<this.interBondCount||this.intraBondIndex<this.intraBondEnd}constructor(){this.current={},this.hasNext=!1}}e.ElementBondIterator=h;function p(_,y){return Js.fromPairProvider(_.bonds.length,(v,A,g)=>{const{aUnit:b,aIndex:C,bUnit:I,bIndex:S}=_.bonds[v];b.conformation.position(b.elements[C],A),I.conformation.position(I.elements[S],g)},y)}e.getBoundingSphere=p})(Td||(Td={}));function TI(e){const t=OI(e),n=NI(e,t),r=Ct.transientSegments(e.model.atomicHierarchy.residueAtomSegments,e.elements);for(;r.hasNext;){const i=r.move();MI(n,i.start,i.end)}return n.rings}var ei;(function(e){e[e.MaxDepth=5]="MaxDepth"})(ei||(ei={}));function NI(e,t){return{startVertex:0,endVertex:0,count:0,isRingAtom:new Int32Array(t),marked:new Int32Array(t),queue:new Int32Array(t),pred:new Int32Array(t),depth:new Int32Array(t),left:new Int32Array(ei.MaxDepth),right:new Int32Array(ei.MaxDepth),color:new Int32Array(t),currentColor:0,currentAltLoc:"",hasAltLoc:!1,rings:[],currentRings:[],unit:e,bonds:e.bonds,altLoc:e.model.atomicHierarchy.atoms.label_alt_id}}function a2(e){e.count=e.endVertex-e.startVertex;const{isRingAtom:t,pred:n,color:r,depth:i,marked:o}=e;for(let s=0;s<e.count;s++)t[s]=0,n[s]=-1,o[s]=-1,r[s]=0,i[s]=0;e.currentColor=0,e.currentAltLoc="",e.hasAltLoc=!1}function c2(e){const{depth:t}=e;for(let n=0;n<e.count;n++)t[n]=e.count+1}function OI(e){const t=Ct.transientSegments(e.model.atomicHierarchy.residueAtomSegments,e.elements);let n=0;for(;t.hasNext;){const r=t.move();n=Math.max(n,r.end-r.start)}return n}function u2(e,t){const n=e.bonds.offset,r=e.startVertex+t,i=n[r],s=n[r+1]-i;return!(s<=1||e.isRingAtom[t]&&s===2)}function MI(e,t,n){if(e.startVertex=t,e.endVertex=n,e.endVertex-e.startVertex<3)return;e.currentRings=[];const{elements:r}=e.unit,i=[];for(let s=e.startVertex;s<e.endVertex;s++){const c=e.altLoc.value(r[s]);Do(i,c)}CS(i,"");let o=1;if(i.length===0){a2(e);for(let s=0;s<e.count;s++)u2(e,s)&&(c2(e),o=l2(e,s,o))}else for(let s=0;s<i.length;s++){a2(e),e.hasAltLoc=!0,e.currentAltLoc=i[s];for(let c=0;c<e.count;c++){if(!u2(e,c))continue;const a=e.altLoc.value(r[e.startVertex+c]);a&&a!==e.currentAltLoc||(c2(e),o=l2(e,c,o))}}for(let s=0,c=e.currentRings.length;s<c;s++)e.rings.push(e.currentRings[s])}function qI(e,t,n,r){if(n<t)return!1;const{pred:i,color:o,left:s,right:c}=e,a=++e.currentColor;let u=t;for(let y=0;y<ei.MaxDepth&&(o[u]=a,u=i[u],!(u<0));y++);let l=0,f=0,d=!1,m=0;u=n;for(let y=0;y<ei.MaxDepth;y++){if(o[u]===a){m=u,d=!0;break}if(c[f++]=u,u=i[u],u<0)break}if(!d)return!1;u=t;for(let y=0;y<ei.MaxDepth&&(s[l++]=u,!(m===u||(u=i[u],u<0)));y++);const h=l+f;if(h<3)return!1;const p=new Int32Array(h);let _=0;for(let y=0;y<l;y++)p[_++]=e.startVertex+s[y],r[s[y]]=1;for(let y=f-1;y>=0;y--)p[_++]=e.startVertex+c[y],r[c[y]]=1;Jn(p);for(let y=0,v=e.currentRings.length;y<v;y++){const A=e.currentRings[y];if(p.length===A.length){if(Ee.areEqual(p,A))return!1}else if(p.length>A.length&&Ee.isSubset(p,A))return!1}return e.currentRings.push(Ee.ofSortedArray(p)),!0}function l2(e,t,n){const{bonds:r,startVertex:i,endVertex:o,isRingAtom:s,marked:c,queue:a,pred:u,depth:l}=e,{elements:f}=e.unit,{b:d,edgeProps:{flags:m},offset:h}=r;c[t]=n,l[t]=0,a[0]=t;let p=0,_=1;for(;p<_;){const y=a[p++],v=l[y],A=i+y,g=h[A],b=h[A+1];for(let C=g;C<b;C++){const I=d[C];if(I<i||I>=o||!pt.isCovalent(m[C]))continue;if(e.hasAltLoc){const T=e.altLoc.value(f[I]);if(T&&e.currentAltLoc!==T)continue}const S=I-i;if(c[S]===n){if(u[S]!==y&&u[y]!==S&&qI(e,y,S,s))return n+1;continue}const P=Math.min(l[S],v+1);P>ei.MaxDepth||(l[S]=P,c[S]=n,a[_++]=S,u[S]=y)}}return n+1}function UI(e){const t=e.length,n=new Array(t);for(let s=0;s<t;s++)n[s]=e[t-s-1];const r=d2(e),i=d2(n);let o=!1;for(let s=0;s<t;s++){const c=e[(s+r)%t],a=n[(s+i)%t];if(c!==a){o=c<a;break}}return o?f2(e,r):f2(n,i)}function d2(e){const t=e.length,n=new Int32Array(t*2);for(let s=0;s<n.length;s++)n[s]=-1;let r="",i="",o=0;for(let s=1;s<n.length;s++){let c=n[s-o-1];for(;c!==-1&&(r=e[s%t],i=e[(o+c+1)%t],r!==i);)r<i&&(o=s-c-1),c=n[c];c===-1?(r=e[s%t],i=e[(o+c+1)%t],r!==i?(r<i&&(o=s),n[s-o]=-1):n[s-o]=c+1):n[s-o]=c+1}return o}function f2(e,t){const n=e.length,r=[];let i;for(i=0;i<n-1;i++)r.push(e[(i+t)%n]),r.push("-");return r.push(e[(i+t)%n]),r.join("")}function FI(e,t){const n=new Map,r=new Map;for(let a=0,u=e.length;a<u;a++){const l=e[a];for(let f=0,d=l.length;f<d;f++){const m=l[f];n.has(m)?n.get(m).push(a):n.set(m,[a])}}for(let a=0,u=t.length;a<u;a++){const l=t[a],f=e[l];for(let d=0,m=f.length;d<m;d++){const h=f[d];r.has(h)?r.get(h).push(l):r.set(h,[l])}}const i=new pr.UniqueEdgeBuilder(e.length);for(let a=0,u=e.length;a<u;a++){const l=e[a];for(let f=0,d=l.length;f<d;f++){const m=l[f],h=n.get(m);if(h.length!==1)for(let p=0,_=h.length;p<_;p++){const y=h[p];a>=y||i.addEdge(a,y)}}}const o=pr.connectedComponents(i.getGraph()),s=o.componentIndex,c=[];for(let a=0;a<o.componentCount;a++)c[a]=[];for(let a=0,u=e.length;a<u;a++)c[s[a]].push(a);return{elementRingIndices:n,elementAromaticRingIndices:r,ringComponentIndex:s,ringComponents:c}}const Nd={H:1,D:1,T:1,HE:2,LI:3,BE:4,B:5,C:6,N:7,O:8,F:9,NE:10,NA:11,MG:12,AL:13,SI:14,P:15,S:16,CL:17,AR:18,K:19,CA:20,SC:21,TI:22,V:23,CR:24,MN:25,FE:26,CO:27,NI:28,CU:29,ZN:30,GA:31,GE:32,AS:33,SE:34,BR:35,KR:36,RB:37,SR:38,Y:39,ZR:40,NB:41,MO:42,TC:43,RU:44,RH:45,PD:46,AG:47,CD:48,IN:49,SN:50,SB:51,TE:52,I:53,XE:54,CS:55,BA:56,LA:57,CE:58,PR:59,ND:60,PM:61,SM:62,EU:63,GD:64,TB:65,DY:66,HO:67,ER:68,TM:69,YB:70,LU:71,HF:72,TA:73,W:74,RE:75,OS:76,IR:77,PT:78,AU:79,HG:80,TL:81,PB:82,BI:83,PO:84,AT:85,RN:86,FR:87,RA:88,AC:89,TH:90,PA:91,U:92,NP:93,PU:94,AM:95,CM:96,BK:97,CF:98,ES:99,FM:100,MD:101,NO:102,LR:103,RF:104,DB:105,SG:106,BH:107,HS:108,MT:109},LI={1:1.1,2:1.4,3:1.81,4:1.53,5:1.92,6:1.7,7:1.55,8:1.52,9:1.47,10:1.54,11:2.27,12:1.73,13:1.84,14:2.1,15:1.8,16:1.8,17:1.75,18:1.88,19:2.75,20:2.31,21:2.3,22:2.15,23:2.05,24:2.05,25:2.05,26:2.05,27:2,28:2,29:2,30:2.1,31:1.87,32:2.11,33:1.85,34:1.9,35:1.83,36:2.02,37:3.03,38:2.49,39:2.4,40:2.3,41:2.15,42:2.1,43:2.05,44:2.05,45:2,46:2.05,47:2.1,48:2.2,49:2.2,50:1.93,51:2.17,52:2.06,53:1.98,54:2.16,55:3.43,56:2.68,57:2.5,58:2.48,59:2.47,60:2.45,61:2.43,62:2.42,63:2.4,64:2.38,65:2.37,66:2.35,67:2.33,68:2.32,69:2.3,70:2.28,71:2.27,72:2.25,73:2.2,74:2.1,75:2.05,76:2,77:2,78:2.05,79:2.1,80:2.05,81:1.96,82:2.02,83:2.07,84:1.97,85:2.02,86:2.2,87:3.48,88:2.83,89:2,90:2.4,91:2,92:2.3,93:2,94:2,95:2,96:2,97:2,98:2,99:2,100:2,101:2,102:2,103:2,104:2,105:2,106:2,107:2,108:2,109:2},GI={1:1.008,2:4.0026,3:6.94,4:9.0122,5:10.81,6:10.81,7:14.007,8:15.999,9:18.998,10:20.18,11:22.99,12:24.305,13:26.982,14:28.085,15:30.974,16:32.06,17:35.45,18:39.948,19:39.098,20:40.078,21:44.956,22:47.867,23:50.942,24:51.996,25:54.938,26:55.845,27:58.933,28:58.693,29:63.546,30:65.38,31:69.723,32:72.63,33:74.922,34:78.971,35:79.904,36:83.798,37:85.468,38:87.62,39:88.906,40:91.224,41:92.906,42:95.95,43:96.906,44:101.07,45:102.91,46:106.42,47:107.87,48:112.41,49:114.82,50:118.71,51:121.76,52:127.6,53:127.6,54:131.29,55:132.91,56:137.33,57:138.91,58:140.12,59:140.91,60:144.24,61:144.912,62:150.36,63:151.96,64:157.25,65:158.93,66:162.5,67:164.93,68:167.26,69:168.93,70:173.05,71:174.97,72:178.49,73:180.95,74:183.84,75:186.21,76:190.23,77:192.22,78:195.08,79:196.97,80:200.59,81:204.38,82:207.2,83:208.98,84:1.97,85:2.02,86:2.2,87:3.48,88:2.83,89:2,90:232.04,91:231.04,92:238.03,93:237.048,94:244.064,95:243.061,96:247.07,97:247.07,98:251.079,99:252.083,100:257.095,101:258.098,102:259.101,103:262.11,104:267.122,105:270.131,106:271.134,107:270.133,108:270.134,109:278.156},HI=1.7,jI=10.81,VI=0;function m2(e){const t=Nd[e];return t===void 0?HI:LI[t]}function zI(e){const t=Nd[e];return t===void 0?jI:GI[t]}function h2(e){const t=Nd[e];return t===void 0?VI:t}var Tn;(function(e){e.H="H",e.D="D",e.T="T",e.HE="HE",e.LI="LI",e.BE="BE",e.B="B",e.C="C",e.N="N",e.O="O",e.F="F",e.NE="NE",e.NA="NA",e.MG="MG",e.AL="AL",e.SI="SI",e.P="P",e.S="S",e.CL="CL",e.AR="AR",e.K="K",e.CA="CA",e.SC="SC",e.TI="TI",e.V="V",e.CR="CR",e.MN="MN",e.FE="FE",e.CO="CO",e.NI="NI",e.CU="CU",e.ZN="ZN",e.GA="GA",e.GE="GE",e.AS="AS",e.SE="SE",e.BR="BR",e.KR="KR",e.RB="RB",e.SR="SR",e.Y="Y",e.ZR="ZR",e.NB="NB",e.MO="MO",e.TC="TC",e.RU="RU",e.RH="RH",e.PD="PD",e.AG="AG",e.CD="CD",e.IN="IN",e.SN="SN",e.SB="SB",e.TE="TE",e.I="I",e.XE="XE",e.CS="CS",e.BA="BA",e.LA="LA",e.CE="CE",e.PR="PR",e.ND="ND",e.PM="PM",e.SM="SM",e.EU="EU",e.GD="GD",e.TB="TB",e.DY="DY",e.HO="HO",e.ER="ER",e.TM="TM",e.YB="YB",e.LU="LU",e.HF="HF",e.TA="TA",e.W="W",e.RE="RE",e.OS="OS",e.IR="IR",e.PT="PT",e.AU="AU",e.HG="HG",e.TL="TL",e.PB="PB",e.BI="BI",e.PO="PO",e.AT="AT",e.RN="RN",e.FR="FR",e.RA="RA",e.AC="AC",e.TH="TH",e.PA="PA",e.U="U",e.NP="NP",e.PU="PU",e.AM="AM",e.CM="CM",e.BK="BK",e.CF="CF",e.ES="ES",e.FM="FM",e.MD="MD",e.NO="NO",e.LR="LR",e.RF="RF",e.DB="DB",e.SG="SG",e.BH="BH",e.HS="HS",e.MT="MT",e.DS="DS",e.RG="RG",e.CN="CN",e.NH="NH",e.FL="FL",e.MC="MC",e.LV="LV",e.TS="TS",e.OG="OG"})(Tn||(Tn={}));const KI=new Set;function ti(e,t){const n=sC[e];if(n!==void 0){const r=n[t];if(r!==void 0)return r}return KI}const p2=O.zero();function _2(e,t){const n=e.conformation,r=new Float32Array(t.length*3),{elements:i}=e;for(let o=0,s=t.length;o<s;++o)n.position(i[t[o]],p2),O.toArray(p2,r,o*3);return r}class oa{get index(){return this._index?this._index:(this._index=FI(this.all,this.aromaticRings),this._index)}get byFingerprint(){return this._byFingerprint?this._byFingerprint:(this._byFingerprint=$I(this.unit,this.all),this._byFingerprint)}get elementRingIndices(){return this.index.elementRingIndices}get elementAromaticRingIndices(){return this.index.elementAromaticRingIndices}get ringComponentIndex(){return this.index.ringComponentIndex}get ringComponents(){return this.index.ringComponents}get aromaticRings(){return this._aromaticRings?this._aromaticRings:(this._aromaticRings=ZI(this.unit,this.all),this._aromaticRings)}constructor(t,n){this.unit=n,this.all=t}}var Zn;(function(e){function t(c,a){const{elements:u}=c,{type_symbol:l}=c.model.atomicHierarchy.atoms,f=[];for(let d=0,m=a.length;d<m;d++)f[f.length]=l.value(u[a[d]]);return n(f)}e.fingerprint=t;function n(c){return UI(c)}e.elementFingerprint=n;const r=new Set([Tn.B,Tn.C,Tn.N,Tn.O,Tn.SI,Tn.P,Tn.S,Tn.GE,Tn.AS,Tn.SN,Tn.SB,Tn.BI]),i=.05;function o(c,a){const{elements:u,bonds:{b:l,offset:f,edgeProps:{flags:d}}}=c,{type_symbol:m,label_comp_id:h}=c.model.atomicHierarchy.atoms;if(h.value(c.elements[a[0]])==="PRO")return!1;let p=0,_=!1;for(let v=0,A=a.length;v<A;++v){const g=a[v];!_&&r.has(m.value(u[g]))&&(_=!0);for(let b=f[g],C=f[g+1];b<C;++b)pt.is(pt.Flag.Aromatic,d[b])&&Ee.has(a,l[b])&&(p+=1)}if(p===2*a.length)return!0;if(!_||a.length<5||p>0)return!1;const y=Nr.calculateMomentsAxes(_2(c,a));return O.magnitude(y.dirC)<i}e.isAromatic=o;function s(c,a){const{label_alt_id:u}=c.model.atomicHierarchy.atoms,{elements:l}=c;for(let f=0,d=a.length;f<d;++f){const m=l[a[f]],h=u.value(m);if(h)return h}return""}e.getAltId=s})(Zn||(Zn={})),function(e){function t(r){const i=TI(r);return new e(i,r)}e.create=t;function n(r,i){const o=new Map;for(let s=0,c=i.length;s<c;s++){const a=i[s];YI(r,a,o)}return o}e.byFingerprintAndResidue=n}(oa||(oa={}));function $I(e,t){const n=new Map;let r=0;for(let i=0,o=t.length;i<o;i++){const s=t[i],c=Zn.fingerprint(e,s);n.has(c)?n.get(c).push(r):n.set(c,[r]),r++}return n}function WI(e,t){const{elements:n}=e,r=e.model.atomicHierarchy.residueAtomSegments.index,i=r[n[t[0]]];for(let o=1,s=t.length;o<s;o++)if(i!==r[n[t[o]]])return-1;return i}function YI(e,t,n){const r=e.byFingerprint.get(t);if(r)for(let i=0,o=r.length;i<o;i++){const s=r[i],c=WI(e.unit,e.all[s]);c>=0&&(n.has(c)?n.get(c).push(s):n.set(c,[s]))}}function ZI(e,t){const n=[];for(let r=0,i=t.length;r<i;++r)Zn.isAromatic(e,t[r])&&n.push(r);return n}function XI(e){const t=[],{elements:n,model:r}=e,{residueAtomSegments:i}=e.model.atomicHierarchy,{traceElementIndex:o}=r.atomicHierarchy.derived.residue,s=Ft.transientSegments(e.model.atomicRanges.polymerRanges,n),c=Ct.transientSegments(i,n);for(;s.hasNext;){const a=s.move();for(c.setSegment(a);c.hasNext;){const u=c.move(),{start:l,end:f,index:d}=u;if(Fe.areIntersecting(Ae.ofRange(n[l],n[f-1]),n)){const m=o[d];t.push(m===-1?i.offsets[d]:m)}}}return Ee.ofSortedArray(t)}function QI(e){const t=[],{elements:n,model:r}=e,{spheres:i,gaussians:o}=r.coarseHierarchy,s=Ce.isSpheres(e)?i.polymerRanges:o.polymerRanges,c=Ft.transientSegments(s,n);for(;c.hasNext;){const{start:a,end:u}=c.move();for(let l=a;l<u;++l)t.push(n[l])}return Ee.ofSortedArray(t)}function JI(e){const t=[],{elements:n,model:r,residueIndex:i}=e,{residueAtomSegments:o}=e.model.atomicHierarchy,{traceElementIndex:s}=r.atomicHierarchy.derived.residue,c=Ft.transientSegments(e.model.atomicRanges.gapRanges,e.elements);for(;c.hasNext;){const a=c.move(),u=i[n[a.start]],l=i[n[a.end-1]],f=s[u],d=s[l];t.push(f===-1?o.offsets[u]:f),t.push(d===-1?o.offsets[l]:d)}return Ee.ofSortedArray(t)}function ew(e){const t=[],{elements:n,model:r}=e,{spheres:i,gaussians:o}=r.coarseHierarchy,s=Ce.isSpheres(e)?i.gapRanges:o.gapRanges,c=Ft.transientSegments(s,n);for(;c.hasNext;){const{start:a,end:u}=c.move();t.push(n[a],n[u-1])}return Ee.ofSortedArray(t)}function tw(e){const t=[],{elements:n,model:r}=e,{chainAtomSegments:i,residueAtomSegments:o}=r.atomicHierarchy,{moleculeType:s,traceElementIndex:c}=r.atomicHierarchy.derived.residue,a=Ct.transientSegments(i,n),u=Ct.transientSegments(o,n);for(;a.hasNext;)for(u.setSegment(a.move());u.hasNext;){const{index:l}=u.move();if(Cy(s[l])){const f=c[l];t.push(f===-1?o.offsets[l]:f)}}return Ee.ofSortedArray(t)}function nw(e){const t=[],{elements:n,model:r}=e,{chainAtomSegments:i,residueAtomSegments:o}=r.atomicHierarchy,{moleculeType:s,traceElementIndex:c}=r.atomicHierarchy.derived.residue,a=Ct.transientSegments(i,n),u=Ct.transientSegments(o,n);for(;a.hasNext;)for(u.setSegment(a.move());u.hasNext;){const{index:l}=u.move();if(pd(s[l])){const f=c[l];t.push(f===-1?o.offsets[l]:f)}}return Ee.ofSortedArray(t)}const y2=O();function rw(e){const{elements:t,conformation:n}=e,r=new Float32Array(t.length*3);for(let i=0,o=t.length;i<o;i++)n.invariantPosition(t[i],y2),O.toArray(y2,r,i*3);return r}function g2(e){const t=rw(e);return Nr.ofPositions(t)}const b2=O.dot,v2=O.copy,iw=O.scaleAndSub,ow=O.scaleAndAdd;class Fo{computeExtrema(t,n){const r=b2(this.dir[t],n);r<this.minDist[t]&&(this.minDist[t]=r,v2(this.extrema[t*2],n)),r>this.maxDist[t]&&(this.maxDist[t]=r,v2(this.extrema[t*2+1],n))}computeSphereExtrema(t,n,r){const i=this.dir[t],o=b2(i,n);o-r<this.minDist[t]&&(this.minDist[t]=o-r,iw(this.extrema[t*2],n,i,r)),o+r>this.maxDist[t]&&(this.maxDist[t]=o+r,ow(this.extrema[t*2+1],n,i,r))}includeSphere(t){if(Sn.hasExtrema(t)&&t.extrema.length>1)for(const n of t.extrema)this.includePosition(n);else this.includePositionRadius(t.center,t.radius)}includePosition(t){for(let n=0;n<this.dirLength;++n)this.computeExtrema(n,t)}includePositionRadius(t,n){for(let r=0;r<this.dirLength;++r)this.computeSphereExtrema(r,t,n)}finishedIncludeStep(){for(let t=0;t<this.extrema.length;t++)this.centroidHelper.includeStep(this.extrema[t]);this.centroidHelper.finishedIncludeStep()}radiusSphere(t){if(Sn.hasExtrema(t)&&t.extrema.length>1)for(const n of t.extrema)this.radiusPosition(n);else this.radiusPositionRadius(t.center,t.radius)}radiusPosition(t){this.centroidHelper.radiusStep(t)}radiusPositionRadius(t,n){this.centroidHelper.radiusSphereStep(t,n)}getSphere(t){return Sn.setExtrema(this.centroidHelper.getSphere(t),this.extrema.slice())}getBox(t){return nr.fromVec3Array(t||nr(),this.extrema)}reset(){for(let t=0;t<this.dirLength;++t)this.minDist[t]=1/0,this.maxDist[t]=-1/0,this.extrema[t*2]=O(),this.extrema[t*2+1]=O();this.centroidHelper.reset()}constructor(t){this.minDist=[],this.maxDist=[],this.extrema=[],this.centroidHelper=new Js,this.dir=sw(t),this.dirLength=this.dir.length,this.reset()}}function sw(e){let t;switch(e){case"6":t=[...sa];break;case"14":t=[...sa,...Od];break;case"26":t=[...sa,...Od,...A2];break;case"98":t=[...sa,...Od,...A2,...aw,...cw,...uw];break}return t.map(n=>{const r=O.create(n[0],n[1],n[2]);return O.normalize(r,r)})}const sa=[[1,0,0],[0,1,0],[0,0,1]],Od=[[1,1,1],[-1,1,1],[-1,-1,1],[1,-1,1]],A2=[[1,1,0],[1,-1,0],[1,0,1],[1,0,-1],[0,1,1],[0,1,-1]],aw=[[0,1,2],[0,2,1],[1,0,2],[2,0,1],[1,2,0],[2,1,0],[0,1,-2],[0,2,-1],[1,0,-2],[2,0,-1],[1,-2,0],[2,-1,0]],cw=[[1,1,2],[2,1,1],[1,2,1],[1,-1,2],[1,1,-2],[1,-1,-2],[2,-1,1],[2,1,-1],[2,-1,-1],[1,-2,1],[1,2,-1],[1,-2,-1]],uw=[[2,2,1],[1,2,2],[2,1,2],[2,-2,1],[2,2,-1],[2,-2,-1],[1,-2,2],[1,2,-2],[1,-2,-2],[2,-1,2],[2,1,-2],[2,-1,-2]],x2=O.set,lw=new Fo("14"),dw=new Fo("98");function fw(e){return e>1e4?lw:dw}function Md(e){const t=nr.computeBounding(e);return{box:t,sphere:Sn.fromBox3D(Sn(),t)}}const aa=O();function qd(e){const{x:t,y:n,z:r,radius:i,indices:o}=e,s=Fe.size(o);if(s>25e4)return Md(e);const c=fw(s);c.reset();for(let u=0;u<s;u++){const l=Fe.getAt(o,u);x2(aa,t[l],n[l],r[l]),c.includePositionRadius(aa,i&&i[l]||0)}c.finishedIncludeStep();for(let u=0;u<s;u++){const l=Fe.getAt(o,u);x2(aa,t[l],n[l],r[l]),c.radiusPositionRadius(aa,i&&i[l]||0)}const a=c.getSphere();if(!i&&Sn.hasExtrema(a)&&s<=a.extrema.length){const u=[];for(let l=0;l<s;l++){const f=Fe.getAt(o,l);u.push(O.create(t[f],n[f],r[f]))}Sn.setExtrema(a,u)}return{box:c.getBox(),sphere:a}}class Ud{constructor(){this.data=new Map}get(t){const n=Ee.hashCode(t);if(this.data.has(n)){for(const[r,i]of this.data.get(n))if(Ee.areEqual(t,r))return i}}set(t,n){const r=Ee.hashCode(t);if(this.data.has(r)){const i=this.data.get(r);for(const o of i)if(Ee.areEqual(t,o[0])){o[1]=n;return}i.push([t,n])}else this.data.set(r,[[t,n]])}static get(t){return t._dynamicPropertyData.ElementSetIntraBondCache||(t._dynamicPropertyData.ElementSetIntraBondCache=new Ud),t._dynamicPropertyData.ElementSetIntraBondCache}}function mw(e){return{delocalizedTriplets:hw(e)}}function hw(e){const t=e.bonds,{b:n,edgeProps:r,offset:i}=t,{order:o,flags:s}=r,{elementAromaticRingIndices:c}=e.rings,a=[],u=new Map,l=new Map,f=(d,m,h)=>{const p=a.length;a.push(Ee.ofUnsortedArray([d,m,h])),u.set(ji(d,m),h),l.has(d)?l.get(d).push(p):l.set(d,[p])};for(let d=0;d<e.elements.length;d++){if(c.has(d)||i[d+1]-i[d]+1<2)continue;const h=[];for(let p=i[d],_=i[d+1];p<_;p++){const y=s[p];pt.is(y,pt.Flag.Aromatic)&&h.push(n[p])}if(h.length>=2){f(d,h[0],h[1]);for(let p=1,_=h.length;p<_;p++)f(d,h[p],h[0])}}return{getThirdElement:(d,m)=>u.get(ji(d,m)),getTripletIndices:d=>l.get(d),triplets:a}}var Ce;(function(e){let t;(function(W){W[W.Atomic=0]="Atomic",W[W.Spheres=1]="Spheres",W[W.Gaussians=2]="Gaussians"})(t=e.Kind||(e.Kind={})),function(W){W[W.Atomic=0]="Atomic",W[W.Spheres=1]="Spheres",W[W.Gaussians=2]="Gaussians"}(e.Kinds||(e.Kinds={}));function n(W){return W.kind===t.Atomic}e.isAtomic=n;function r(W){return W.kind===t.Spheres||W.kind===t.Gaussians}e.isCoarse=r;function i(W){return W.kind===t.Spheres}e.isSpheres=i;function o(W){return W.kind===t.Gaussians}e.isGaussians=o;function s(W,J,le,K,ae,me,De,te,ce){switch(ae){case t.Atomic:return new y(W,J,le,K,me,te,Mt.createMapping(De,me.atomicConformation),ce??v());case t.Spheres:return S(W,J,le,K,me,t.Spheres,te,Mt.createMapping(De,me.coarseConformation.spheres,p(me)),ce??b());case t.Gaussians:return S(W,J,le,K,me,t.Gaussians,te,Mt.createMapping(De,me.coarseConformation.gaussians,_()),ce??b())}}e.create=s;function c(W){const J=Kr.Mutable();for(let le=0,K=W.length;le<K;le++)J.set(W[le].id,le);return J}function a(W){const J=[];for(let le=0,K=W.length;le<K;le++)J.push(W[le].id);return Vi(J)}function u(W){const J={};return{elements:W[0].elements,units:W,get unitIndexMap(){return J.unitIndexMap||(J.unitIndexMap=c(W)),J.unitIndexMap},hashCode:f(W[0]),transformHash:a(W)}}e.SymmetryGroup=u,function(W){function J(K,ae){return K.hashCode!==ae.hashCode?!1:Ee.areEqual(K.elements,ae.elements)}W.areInvariantElementsEqual=J;function le(K){const ae=Kr.Mutable();for(let me=0,De=K.length;me<De;++me){const te=K[me];for(let ce=0,M=te.units.length;ce<M;++ce)ae.set(te.units[ce].id,me)}return ae}W.getUnitSymmetryGroupsIndexMap=le}(u=e.SymmetryGroup||(e.SymmetryGroup={}));function l(W){return e.isAtomic(W)?W.model.atomicConformation.id:W.model.coarseConformation.id}e.conformationId=l;function f(W){return ks(W.invariantId,Ee.hashCode(W.elements))}e.hashUnit=f;let d;(function(W){W[W.None=0]="None",W[W.MultiChain=1]="MultiChain",W[W.Partitioned=2]="Partitioned",W[W.FastBoundary=4]="FastBoundary",W[W.Water=8]="Water"})(d=e.Trait||(e.Trait={}));let m;(function(W){W.is=fr.has,W.create=fr.create})(m=e.Traits||(e.Traits={}));function h(){return{}}function p(W){const J=W.coarseConformation.spheres.radius;return le=>J[le]}function _(W){return J=>0}class y{get transientCache(){return this._transientCache===void 0&&(this._transientCache=new Map),this._transientCache}getChild(J){return J.length===this.elements.length?this:new y(this.id,this.invariantId,this.chainGroupId,this.traits,this.model,J,this.conformation,v())}getCopy(J,le,K,ae){const me=new y(J,le,K,this.traits,this.model,this.elements,this.conformation,this.props);return ae?.propagateTransientCache&&(me._transientCache=this._transientCache),me}applyOperator(J,le,K=!1){const ae=K?le:Mt.compose(this.conformation.operator,le);return new y(J,this.invariantId,this.chainGroupId,this.traits,this.model,this.elements,Mt.createMapping(ae,this.model.atomicConformation,this.conformation.r),this.props)}remapModel(J,le,K){var ae,me;K||(K={...this.props,bonds:le&&!(!((me=(ae=this.props.bonds)===null||ae===void 0?void 0:ae.props)===null||me===void 0)&&me.canRemap)?void 0:w(this,this.props.bonds,J,le)},e.isSameConformation(this,J)||(K.boundary=void 0,K.lookup3d=void 0,K.principalAxes=void 0));let De=this.conformation.operator;const te=Nn.Provider.get(J);if(De.spgrOp!==-1&&te&&te!==Nn.Provider.get(this.model)){const[M,B,j]=De.hkl,{toFractional:ne}=te.spacegroup.cell,G=O.transformMat4(O(),Lt.getCenter(J),ne);De=rr.getSymmetryOperatorRef(te.spacegroup,De.spgrOp,M,B,j,G)}const ce=this.model.atomicConformation!==J.atomicConformation||De!==this.conformation.operator?Mt.createMapping(De,J.atomicConformation):this.conformation;return new y(this.id,this.invariantId,this.chainGroupId,this.traits,J,this.elements,ce,K)}get boundary(){if(this.props.boundary)return this.props.boundary;const{x:J,y:le,z:K}=this.model.atomicConformation;return this.props.boundary=m.is(this.traits,d.FastBoundary)?Md({x:J,y:le,z:K,indices:this.elements}):qd({x:J,y:le,z:K,indices:this.elements}),this.props.boundary}get lookup3d(){if(this.props.lookup3d)return this.props.lookup3d;const{x:J,y:le,z:K}=this.model.atomicConformation;return this.props.lookup3d=Ys({x:J,y:le,z:K,indices:this.elements},this.boundary),this.props.lookup3d}get principalAxes(){return this.props.principalAxes?this.props.principalAxes:(this.props.principalAxes=g2(this),this.props.principalAxes)}get bonds(){var J;if(this.props.bonds)return this.props.bonds;const le=Ud.get(this.model);let K=le.get(this.elements);return K||(K=vI(this),!((J=K.props)===null||J===void 0)&&J.cacheable&&le.set(this.elements,K)),this.props.bonds=K,this.props.bonds}get rings(){return this.props.rings?this.props.rings:(this.props.rings=oa.create(this),this.props.rings)}get resonance(){return this.props.resonance?this.props.resonance:(this.props.resonance=mw(this),this.props.resonance)}get polymerElements(){return this.props.polymerElements?this.props.polymerElements:(this.props.polymerElements=XI(this),this.props.polymerElements)}get gapElements(){return this.props.gapElements?this.props.gapElements:(this.props.gapElements=JI(this),this.props.gapElements)}get nucleotideElements(){return this.props.nucleotideElements?this.props.nucleotideElements:(this.props.nucleotideElements=tw(this),this.props.nucleotideElements)}get proteinElements(){return this.props.proteinElements?this.props.proteinElements:(this.props.proteinElements=nw(this),this.props.proteinElements)}get residueCount(){if(this.props.residueCount!==void 0)return this.props.residueCount;let J=0;const le=Ct.transientSegments(this.model.atomicHierarchy.residueAtomSegments,this.elements);for(;le.hasNext;)le.move(),J+=1;return this.props.residueCount=J,this.props.residueCount}getResidueIndex(J){return this.residueIndex[this.elements[J]]}constructor(J,le,K,ae,me,De,te,ce){this.kind=t.Atomic,this.objectPrimitive="atomistic",this._transientCache=void 0,this.id=J,this.invariantId=le,this.chainGroupId=K,this.traits=ae,this.model=me,this.elements=De,this.conformation=te,this.residueIndex=me.atomicHierarchy.residueAtomSegments.index,this.chainIndex=me.atomicHierarchy.chainAtomSegments.index,this.props=ce}}e.Atomic=y;function v(){return h()}class A{get transientCache(){return this._transientCache===void 0&&(this._transientCache=new Map),this._transientCache}getChild(J){return J.length===this.elements.length?this:S(this.id,this.invariantId,this.chainGroupId,this.traits,this.model,this.kind,J,this.conformation,b())}getCopy(J,le,K,ae){const me=S(J,le,K,this.traits,this.model,this.kind,this.elements,this.conformation,this.props);return ae?.propagateTransientCache&&(me._transientCache=this._transientCache),me}applyOperator(J,le,K=!1){const ae=K?le:Mt.compose(this.conformation.operator,le);return S(J,this.invariantId,this.chainGroupId,this.traits,this.model,this.kind,this.elements,Mt.createMapping(ae,this.getCoarseConformation(),this.conformation.r),this.props)}remapModel(J,le,K){const ae=this.getCoarseConformation(),me=g(this.kind,J);K||(K={...this.props},e.isSameConformation(this,J)||(K.boundary=void 0,K.lookup3d=void 0,K.principalAxes=void 0));const De=ae!==me?Mt.createMapping(this.conformation.operator,me,this.kind===e.Kind.Spheres?p(J):_()):this.conformation;return new A(this.id,this.invariantId,this.chainGroupId,this.traits,J,this.kind,this.elements,De,K)}get boundary(){if(this.props.boundary)return this.props.boundary;const{x:J,y:le,z:K}=this.getCoarseConformation();return this.props.boundary=m.is(this.traits,d.FastBoundary)?Md({x:J,y:le,z:K,indices:this.elements}):qd({x:J,y:le,z:K,indices:this.elements}),this.props.boundary}get lookup3d(){if(this.props.lookup3d)return this.props.lookup3d;const{x:J,y:le,z:K}=this.getCoarseConformation();return this.props.lookup3d=Ys({x:J,y:le,z:K,indices:this.elements},this.boundary),this.props.lookup3d}get principalAxes(){return this.props.principalAxes?this.props.principalAxes:(this.props.principalAxes=g2(this),this.props.principalAxes)}get polymerElements(){return this.props.polymerElements?this.props.polymerElements:(this.props.polymerElements=QI(this),this.props.polymerElements)}get gapElements(){return this.props.gapElements?this.props.gapElements:(this.props.gapElements=ew(this),this.props.gapElements)}getCoarseConformation(){return g(this.kind,this.model)}constructor(J,le,K,ae,me,De,te,ce,M){this._transientCache=void 0,this.kind=De,this.objectPrimitive=De===t.Spheres?"sphere":"gaussian",this.id=J,this.invariantId=le,this.chainGroupId=K,this.traits=ae,this.model=me,this.elements=te,this.conformation=ce,this.coarseElements=De===t.Spheres?me.coarseHierarchy.spheres:me.coarseHierarchy.gaussians,this.coarseConformation=De===t.Spheres?me.coarseConformation.spheres:me.coarseConformation.gaussians,this.props=M}}function g(W,J){return W===t.Spheres?J.coarseConformation.spheres:J.coarseConformation.gaussians}function b(){return h()}class C extends A{}e.Spheres=C;class I extends A{}e.Gaussians=I;function S(W,J,le,K,ae,me,De,te,ce){return new A(W,J,le,K,ae,me,De,te,ce)}function P(W,J){return W.chainGroupId===J.chainGroupId&&W.conformation.operator.name===J.conformation.operator.name}e.areSameChainOperatorGroup=P;function T(W,J){return Ke.areEqual(W.conformation.operator.matrix,J.conformation.operator.matrix,1e-6)}e.areOperatorsEqual=T;function D(W,J){return W===J?!0:Ee.areEqual(W.elements,J.elements)?E(W,J.model):!1}e.areConformationsEqual=D;function w(W,J,le,K){var ae;if(!J)return;if(W.model.atomicConformation.id===le.atomicConformation.id)return J;const me=xn.Provider.get(W.model);if(me){const De=xn.Provider.get(le);return!De||me===De?J:void 0}return!((ae=J.props)===null||ae===void 0)&&ae.canRemap||!K||E(W,le)?J:void 0}function E(W,J){const le=Lt.CoordinatesHistory.get(Lt.getRoot(J));if(le)return le.areEqual(W.elements,W.kind,J);const K=W.elements,{x:ae,y:me,z:De}=W.conformation.coordinates,{x:te,y:ce,z:M}=k(W.kind,J);for(let B=0,j=K.length;B<j;B++){const ne=K[B];if(ae[ne]!==te[ne]||me[ne]!==ce[ne]||De[ne]!==M[ne])return!1}return!0}e.isSameConformation=E;function k(W,J){return W===t.Atomic?J.atomicConformation:W===t.Spheres?J.coarseConformation.spheres:J.coarseConformation.gaussians}e.getModelConformationOfKind=k;function F(W){return k(W.kind,W.model)}e.getConformation=F;function V(W,J){return W===t.Atomic?J.atomicHierarchy:W===t.Spheres?J.coarseHierarchy.spheres:J.coarseHierarchy.gaussians}e.getModelHierarchyOfKind=V;function de(W){return V(W.kind,W.model)}e.getHierarchy=de})(Ce||(Ce={}));const pw={type_symbol:ye.Schema.Aliased(mt.atom_site.type_symbol),label_atom_id:mt.atom_site.label_atom_id,auth_atom_id:mt.atom_site.auth_atom_id,label_alt_id:mt.atom_site.label_alt_id,label_comp_id:mt.atom_site.label_comp_id,auth_comp_id:mt.atom_site.auth_comp_id,pdbx_formal_charge:mt.atom_site.pdbx_formal_charge},_w={group_PDB:mt.atom_site.group_PDB,label_seq_id:mt.atom_site.label_seq_id,auth_seq_id:mt.atom_site.auth_seq_id,pdbx_PDB_ins_code:mt.atom_site.pdbx_PDB_ins_code},yw={label_asym_id:mt.atom_site.label_asym_id,auth_asym_id:mt.atom_site.auth_asym_id,label_entity_id:mt.atom_site.label_entity_id};var Fd;(function(e){function t(){return{label_entity_id:"",label_asym_id:"",auth_seq_id:0,pdbx_PDB_ins_code:void 0}}e.EmptyResidueKey=t})(Fd||(Fd={}));var eo;(function(e){function t(c,a){return c.residueAtomSegments.index[c.chainAtomSegments.offsets[a]]}e.chainStartResidueIndex=t;function n(c,a){return c.residueAtomSegments.index[c.chainAtomSegments.offsets[a+1]-1]+1}e.chainEndResidueIndexExcl=n;function r(c,a){return n(c,a)-t(c,a)}e.chainResidueCount=r;function i(c,a){return c.residueAtomSegments.offsets[a]}e.residueFirstAtomIndex=i;function o(c,a){return c.chainAtomSegments.index[a]}e.atomChainIndex=o;function s(c,a){return c.chainAtomSegments.index[c.residueAtomSegments.offsets[a]]}e.residueChainIndex=s})(eo||(eo={}));function Ld(e,t,n,r){return{type:e,key:t,elements:n,getIndex:r}}typeof process<"u"&&process.versions!=null&&process.versions.node!=null,function(){const e=new Uint32Array(256);for(let t=0;t<256;t++){let n=t;for(let r=0;r<8;r++)n&1?n=3988292384^n>>>1:n=n>>>1;e[t]=n}return e}();const qt=function(){const e=Uint16Array,t=Uint32Array;return{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}}();(function(){for(let n=0;n<32768;n++){let r=n;r=(r&2863311530)>>>1|(r&1431655765)<<1,r=(r&3435973836)>>>2|(r&858993459)<<2,r=(r&4042322160)>>>4|(r&252645135)<<4,r=(r&4278255360)>>>8|(r&16711935)<<8,qt.rev15[n]=(r>>>16|r<<16)>>>17}function t(n,r,i){for(;r--!==0;)n.push(0,i)}for(let n=0;n<32;n++)qt.ldef[n]=qt.of0[n]<<3|qt.exb[n],qt.ddef[n]=qt.df0[n]<<4|qt.dxb[n];t(qt.fltree,144,8),t(qt.fltree,112,9),t(qt.fltree,24,7),t(qt.fltree,8,8),C2(qt.fltree,9),S2(qt.fltree,9,qt.flmap),I2(qt.fltree,9),t(qt.fdtree,32,5),C2(qt.fdtree,5),S2(qt.fdtree,5,qt.fdmap),I2(qt.fdtree,5),t(qt.itree,19,0),t(qt.ltree,286,0),t(qt.dtree,30,0),t(qt.ttree,320,0)})();function S2(e,t,n){const r=e.length,i=qt.rev15;for(let o=0;o<r;o+=2)if(e[o+1]!==0){const s=o>>1,c=e[o+1],a=s<<4|c,u=t-c;let l=e[o]<<u;const f=l+(1<<u);for(;l!==f;){const d=i[l]>>>15-t;n[d]=a,l++}}}function C2(e,t){const n=e.length,r=qt.bl_count;for(let s=0;s<=t;s++)r[s]=0;for(let s=1;s<n;s+=2)r[e[s]]++;const i=qt.next_code;let o=0;r[0]=0;for(let s=1;s<=t;s++)o=o+r[s-1]<<1,i[s]=o;for(let s=0;s<n;s+=2){const c=e[s+1];c!==0&&(e[s]=i[c],i[c]++)}}function I2(e,t){const n=qt.rev15,r=15-t;for(let i=0;i<e.length;i+=2){const o=e[i]<<t-e[i+1];e[i]=n[o]>>>r}}var w2;(function(e){e[e.None=0]="None",e[e.Gzip=1]="Gzip",e[e.Zip=2]="Zip"})(w2||(w2={}));var ca;(function(e){function t(a,u){return{kind:"url",id:_n.create22(),url:a,...u}}e.Url=t;function n(a){return{kind:"file",id:_n.create22(),name:a.name,file:a}}e.File=n;function r(a){return a?.kind==="url"}e.isUrl=r;function i(a){return a?.kind==="file"}e.isFile=i;function o(a,u,l){return{data:a,dispose:()=>{l.release(u)}}}e.Wrapper=o;function s(a){return typeof a=="string"?a:a.url}e.getUrl=s;function c(a,u,l){return typeof u=="string"?a.tryFindUrl(u,l)||t(u,{body:l}):u}e.getUrlAsset=c})(ca||(ca={}));var Et;(function(e){e.Essential={isEssential:!0};function t(L,q){return q&&(q.label&&(L.label=q.label),q.description&&(L.description=q.description),q.legend&&(L.legend=q.legend),q.fieldLabels&&(L.fieldLabels=q.fieldLabels),q.isHidden&&(L.isHidden=q.isHidden),q.shortLabel&&(L.shortLabel=q.shortLabel),q.twoColumns&&(L.twoColumns=q.twoColumns),q.isEssential&&(L.isEssential=q.isEssential),q.category&&(L.category=q.category),q.hideIf&&(L.hideIf=q.hideIf),q.help&&(L.help=q.help)),L}function n(L){const q={...L};return q.isOptional=!0,q}e.Optional=n;function r(L,q){return t({type:"value",defaultValue:L},q)}e.Value=r;function i(L,q,H){return t({type:"select",defaultValue:oe(L,q),options:q,cycle:H?.cycle},H)}e.Select=i;function o(L,q,H){const Z=t({type:"multi-select",defaultValue:L,options:q},H);return H?.emptyValue&&(Z.emptyValue=H.emptyValue),Z}e.MultiSelect=o;function s(L,q){return t({type:"boolean",defaultValue:L},q)}e.Boolean=s;function c(L="",q){return t({type:"text",defaultValue:L,multiline:q?.multiline,placeholder:q?.placeholder,disableInteractiveUpdates:q?.disableInteractiveUpdates},q)}e.Text=c;function a(L,q){const H=t({type:"color",defaultValue:L},q);return q?.isExpanded&&(H.isExpanded=q.isExpanded),H}e.Color=a;function u(L,q){let H;if(typeof L=="string"){const Z=sy(L);H={kind:Z.type!=="qualitative"?"interpolate":"set",colors:Z.list}}else H=L;return t({type:"color-list",presetKind:q?.presetKind||"all",defaultValue:H,offsets:!!q?.offsets},q)}e.ColorList=u;function l(L,q,H){return t(p({type:"vec3",defaultValue:L},q),H)}e.Vec3=l;function f(L,q){return t({type:"mat4",defaultValue:L},q)}e.Mat4=f;function d(L,q){const H=typeof L=="string"?ca.Url(L):ca.Url(L.url,{body:L.body});return t({type:"url",defaultValue:H},q)}e.Url=d;function m(L){const q=t({type:"file",defaultValue:null},L);return L?.accept&&(q.accept=L.accept),q}e.File=m;function h(L){const q=t({type:"file-list",defaultValue:null},L);return L?.accept&&(q.accept=L.accept),q}e.FileList=h;function p(L,q){return q&&(typeof q.min<"u"&&(L.min=q.min),typeof q.max<"u"&&(L.max=q.max),typeof q.step<"u"&&(L.step=q.step)),L}function _(L,q,H){const Z=t(p({type:"number",defaultValue:L},q),H);return H?.immediateUpdate&&(Z.immediateUpdate=!0),Z}e.Numeric=_;function y(L,q,H){return t(p({type:"interval",defaultValue:L},q),H)}e.Interval=y;function v(L,q){const H=t({type:"line-graph",defaultValue:L},q);return q?.getVolume&&(H.getVolume=q.getVolume),H}e.LineGraph=v;function A(L,q){const H=t({type:"group",defaultValue:q?.customDefault||V(L),params:L},q);return q?.presets&&(H.presets=q.presets),q?.isExpanded&&(H.isExpanded=q.isExpanded),q?.isFlat&&(H.isFlat=q.isFlat),q?.pivot&&(H.pivot=q.pivot),H}e.Group=A;function g(L){return A({},L)}e.EmptyGroup=g;function b(L,q,H,Z){const re=oe(L,q);return t({type:"mapped",defaultValue:{name:re,params:H(re).defaultValue},select:i(re,q,Z),map:H},Z)}e.Mapped=b;function C(L,q,H){const Z=H?.options?H.options:Object.keys(q).map(Re=>[Re,q[Re].label||To(Re)]),re=oe(L,Z);return t({type:"mapped",defaultValue:{name:re,params:q[re].defaultValue},select:i(re,Z,H),map:Re=>q[Re]},H)}e.MappedStatic=C;function I(L,q,H){return t({type:"object-list",element:L,getLabel:q,ctor:S,defaultValue:H?.defaultValue||[]},H)}e.ObjectList=I;function S(){return V(this.element)}function P(){throw new Error("getValue not set. Fix runtime.")}function T(L,q,H){var Z;return t({type:"value-ref",defaultValue:{ref:(Z=H?.defaultRef)!==null&&Z!==void 0?Z:"",getValue:P},getOptions:L,resolveRef:q},H)}e.ValueRef=T;function D(L){var q;return t({type:"data-ref",defaultValue:{ref:(q=L?.defaultRef)!==null&&q!==void 0?q:"",getValue:P}},L)}e.DataRef=D;function w(L,q,H){return t({type:"converted",defaultValue:q(H.defaultValue),converted:H,fromValue:L,toValue:q},H)}e.Converted=w;function E(L,q,H,Z,re){const Re=Object.keys(q).map(qe=>[qe,qe]);return t({type:"conditioned",select:i(H(L),Re,re),defaultValue:L,conditionParams:q,conditionForValue:H,conditionedValue:Z},re)}e.Conditioned=E;function k(L,q){return t({type:"script",defaultValue:L},q)}e.Script=k;function F(L){return 0}e.For=F;function V(L){const q={};for(const H of Object.keys(L))L[H].isOptional||(q[H]=L[H].defaultValue);return q}e.getDefaultValues=V;function de(L,q,H){return()=>L(q,H)}function W(L,q,H){if(q){if(L.type==="value-ref"){const Z=q;Z.ref?Z.getValue=de(L.resolveRef,Z.ref,H):Z.getValue=()=>{throw new Error("Unset ref in ValueRef value.")}}else if(L.type==="data-ref"){const Z=q;Z.ref?Z.getValue=de(H,Z.ref,H):Z.getValue=()=>{throw new Error("Unset ref in ValueRef value.")}}else if(L.type==="group")K(L.params,q,H);else if(L.type==="mapped"){const Z=q,re=L.map(Z.name);W(re,Z.params,H)}else if(L.type==="object-list"){if(!le(L.element))return;for(const Z of q)K(L.element,Z,H)}}}function J(L){if(L.type==="value-ref"||L.type==="data-ref")return!0;if(L.type==="group"){if(le(L.params))return!0}else if(L.type==="mapped"){for(const[q]of L.select.options)if(J(L.map(q)))return!0}else if(L.type==="object-list")return le(L.element);return!1}function le(L){for(const q of Object.keys(L))if(J(L[q]))return!0;return!1}function K(L,q,H){for(const Z of Object.keys(L))W(L[Z],q?.[Z],H)}e.resolveRefs=K;function ae(L,q){for(const H of Object.keys(L))L[H].isOptional||(L[H].defaultValue=q[H])}e.setDefaultValues=ae;function me(L){return td(L)}e.clone=me;function De(L,q){}e.validate=De;function te(L,q,H){if(q===H)return!0;if(typeof q!="object"||typeof H!="object")return!1;for(const Z of Object.keys(L))if(!ce(L[Z],q[Z],H[Z]))return!1;return!0}e.areEqual=te;function ce(L,q,H){if(q===H)return!0;if(L.type==="group")return te(L.params,q,H);if(L.type==="mapped"){const Z=q,re=H;if(Z.name!==re.name)return!1;const Re=L.map(Z.name);return ce(Re,Z.params,re.params)}else if(L.type==="multi-select"){const Z=q,re=H;if(Z.length!==re.length)return!1;if(Z.length<10){for(let Re=0,qe=Z.length;Re<qe;Re++)if(Z[Re]!==re[Re]&&re.indexOf(Z[Re])<0)return!1}else{const Re=new Set(re);for(let qe=0,xe=Z.length;qe<xe;qe++)if(Z[qe]!==re[qe]&&!Re.has(Z[qe]))return!1}return!0}else{if(L.type==="interval")return q[0]===H[0]&&q[1]===H[1];if(L.type==="line-graph"){const Z=q,re=H;if(Z.length!==re.length)return!1;for(let Re=0,qe=Z.length;Re<qe;Re++)if(!Is.areEqual(Z[Re],re[Re]))return!1;return!0}else{if(L.type==="vec3")return O.equals(q,H);if(L.type==="mat4")return Ke.areEqual(q,H,jt);if(L.type==="script"){const Z=q,re=H;return Z.language===re.language&&Z.expression===re.expression}else if(L.type==="object-list"){const Z=q,re=H,Re=Z.length;if(Re!==re.length)return!1;for(let qe=0;qe<Re;qe++)if(!te(L.element,Z[qe],re[qe]))return!1;return!0}else if(typeof q=="object"&&typeof H=="object")return P3(q,H)}}return!1}e.isParamEqual=ce;function M(L,q,H){if(q===void 0)return{...H};if(H===void 0)return{...q};const Z=Object.create(null);for(const re of Object.keys(L))Z[re]=B(L[re],q[re],H[re]);return Z}e.merge=M;function B(L,q,H){if(q===void 0)return typeof H=="object"&&!Array.isArray(H)?{...H}:H;if(H===void 0)return typeof q=="object"&&!Array.isArray(q)?{...q}:q;if(L.type==="group")return M(L.params,q,H);if(L.type==="mapped"){const Z=q,re=H;if(Z.name!==re.name)return{...re};const Re=L.map(re.name);return{name:re.name,params:B(Re,Z.params,re.params)}}else return L.type==="value"?H:typeof q=="object"&&typeof H=="object"?Array.isArray(H)?H:{...q,...H}:H}e.mergeParam=B;function j(L,q){for(const H of L.options)if(H[0]===q)return!0;return!1}function ne(L,q,H){if(q==null)return H?L.defaultValue:void 0;if(L.type==="value")return q;if(L.type==="group"){const Z=Object.create(null);for(const re of Object.keys(L.params)){const Re=L.params[re];q[re]===void 0?H&&(Z[re]=Re.defaultValue):Z[re]=ne(Re,q[re],H)}return Z}else if(L.type==="mapped"){const Z=q;if(typeof Z.name!="string")return L.defaultValue;if(typeof Z.params>"u")return H?L.defaultValue:void 0;if(!j(L.select,Z.name))return L.defaultValue;const re=L.map(Z.name);return{name:Z.name,params:ne(re,Z.params,H)}}else{if(L.type==="select")return j(L,q)?q:L.defaultValue;if(L.type==="multi-select"){if(!Array.isArray(q))return L.defaultValue;const Z=q.filter(function(re){return j(this,re)},L);return q.length>0&&Z.length===0?L.defaultValue:Z}else if(L.type==="object-list")return Array.isArray(q)?q.map(Z=>G(L.element,Z,H?"all":"skip")):L.defaultValue}return q}function G(L,q,H){if(typeof q!="object"||q===null)return H?V(L):q;const Z=Object.create(null);for(const re of Object.keys(L)){const Re=L[re];q[re]===void 0?H==="all"&&(Z[re]=Re.defaultValue):Z[re]=ne(Re,q[re],H!=="skip")}return Z}e.normalizeParams=G;function $(L,q){const H=[];for(const Z of Object.keys(L))if(!q)typeof L[Z]=="string"?H.push([Z,L[Z]]):H.push([Z,q===null?Z:To(Z)]);else{const re=q(Z,L[Z]);H.push(typeof re=="string"?[Z,re]:[Z,re[0],re[1]])}return H}e.objectToOptions=$;function Y(L,q){const H=[];for(const Z of L)q?H.push([Z,q(Z)]):H.push([Z,q===null?Z:To(Z)]);return H}e.arrayToOptions=Y;function ie(L,q){for(const H of L.options)if(H[0]===q)return H[1];return""}e.optionLabel=ie;function oe(L,q){for(const H of q)if(H[0]===L)return L;return q.length>0?q[0][0]:void 0}function pe(L,q){const H={};for(const Z of Object.keys(q)){const re=q[Z];!L[Z]||re===null||re===void 0||L[Z].defaultValue===re||(H[Z]={...L[Z],defaultValue:re})}return{...L,...H}}e.withDefaults=pe})(Et||(Et={}));var Be;(function(e){e.is=fr.has,e.create=fr.create,function(t){t[t._=0]="_",t[t.H=1]="H",t[t.B=2]="B",t[t.E=4]="E",t[t.G=8]="G",t[t.I=16]="I",t[t.S=32]="S",t[t.T=64]="T",t[t.T3=128]="T3",t[t.T4=256]="T4",t[t.T5=512]="T5",t[t.T3S=1024]="T3S",t[t.T4S=2048]="T4S",t[t.T5S=4096]="T5S"}(e.Flag||(e.Flag={}))})(Be||(Be={}));var vr;(function(e){e[e.PARALLEL=0]="PARALLEL",e[e.ANTI_PARALLEL=1]="ANTI_PARALLEL"})(vr||(vr={}));class ua{constructor(t,n,r){this.partner1=Math.min(t,n),this.partner2=Math.max(t,n),this.type=r}}function gw(e){const{unit:t,flags:n,proteinInfo:r}=e,i=t.conformation,{traceElementIndex:o}=t.model.atomicHierarchy.derived.residue,{residueIndices:s,nIndices:c}=r,a=s.length,u=(y,v)=>y===-1?O.setNaN(v):i.position(y,v),l=O(),f=O(),d=O(),m=O(),h=O(),p=O(),_=O();e:for(let y=2;y<a-2;y++){for(let P=0;P<4;P++){const T=y+P-2;if(u(o[T],m),u(c[T+1],h),O.squaredDistance(m,h)>6.25)continue e}const v=s[y-2],A=s[y],g=s[y+2],b=o[v],C=o[A],I=o[g];u(b,l),u(C,f),u(I,d),O.sub(p,l,f),O.sub(_,f,d);const S=li(O.angle(p,_));S&&S>70&&(n[y]|=Be.Flag.S)}}const bw=9,la=-27.888,vw=-.5,P2=-9.9;function Aw(e,t,n,r){const i=O.distance(e,r),o=O.distance(t,r),s=O.distance(t,n),c=O.distance(e,n),a=la/i-la/o,u=la/s-la/c,l=a+u;return l<P2?P2:l}function xw(e,t,n){const{residueIndices:r,cIndices:i,hIndices:o,nIndices:s,oIndices:c}=t,{index:a}=e.model.atomicHierarchy,u=e.conformation,{traceElementIndex:l}=e.model.atomicHierarchy.derived.residue,f=r.length,d=[],m=[],h=[],p=O(),_=O(),y=O(),v=O(),A=O(),g=O(),b=O();for(let C=0,I=r.length;C<I;++C){const S=C,P=r[C],T=c[S],D=i[S],w=l[P];if(T===-1||D===-1||a.findAtomOnResidue(P,"OXT")!==-1)continue;u.invariantPosition(T,p),u.invariantPosition(D,_),u.invariantPosition(w,y);const{indices:E,count:k}=n.find(y[0],y[1],y[2],bw);for(let F=0;F<k;++F){const V=E[F];if(V===S||V-1===S||V+1===S)continue;const de=s[V];if(de===-1)continue;u.invariantPosition(de,v);const W=o[V];if(W===-1){if(V===0)continue;const le=V-1,K=c[le],ae=i[le];if(K===-1||ae===-1)continue;u.invariantPosition(K,b),u.invariantPosition(ae,g),O.sub(A,g,b);const me=O.distance(b,g);O.scaleAndAdd(A,v,A,1/me)}else u.invariantPosition(W,A);const J=Aw(p,_,v,A);J>vw||(d[d.length]=S,m[m.length]=V,h[h.length]=J)}}return Sw(f,d,m,h)}function Sw(e,t,n,r){const i=new pr.DirectedEdgeBuilder(e,t,n),o=new Float32Array(i.slotCount);for(let s=0,c=i.edgeCount;s<c;s++)i.addNextEdge(),i.assignProperty(o,r[s]);return i.createGraph({energies:r})}function Cw(e){const{proteinInfo:t,hbonds:n,flags:r}=e,i=[Be.Flag.T3S,Be.Flag.T4S,Be.Flag.T5S,Be.Flag.T3,Be.Flag.T4,Be.Flag.T5];for(let o=0;o<3;o++)for(let s=0,c=t.residueIndices.length-1;s<c;++s)if(n.getDirectedEdgeIndex(s,s+o+3)!==-1)if(r[s]|=i[o+3]|i[o],e.params.oldDefinition)for(let a=1;a<o+3;++a)r[s+a]|=i[o+3]|Be.Flag.T;else for(let a=0;a<=o+3;++a)r[s+a]|=i[o+3]|Be.Flag.T}function Iw(e){const{proteinInfo:t,flags:n}=e,r=t.residueIndices.length,i=[Be.Flag.T3S,Be.Flag.T4S,Be.Flag.T5S,Be.Flag.T3,Be.Flag.T4,Be.Flag.T5],o=[0,0,0,Be.Flag.G,Be.Flag.H,Be.Flag.I],s=e.params.oldOrdering?[4,3,5]:[3,4,5];for(let c=0;c<s.length;c++){const a=s[c];for(let u=1,l=r-a;u<l;u++){const f=Be.create(n[u]),d=Be.create(n[u-1]),m=Be.create(n[u+1]);if(e.params.oldOrdering){if(a===3&&(Be.is(f,Be.Flag.H)||Be.is(m,Be.Flag.H))||a===5&&(Be.is(f,Be.Flag.H)||Be.is(f,Be.Flag.G)||Be.is(m,Be.Flag.H)||Be.is(m,Be.Flag.G)))continue}else if(a===4&&(Be.is(f,Be.Flag.G)||Be.is(m,Be.Flag.G))||a===5&&(Be.is(f,Be.Flag.H)||Be.is(f,Be.Flag.G)||Be.is(m,Be.Flag.H)||Be.is(m,Be.Flag.G)))continue;if(Be.is(f,i[a])&&Be.is(f,i[a-3])&&Be.is(d,i[a])&&Be.is(d,i[a-3]))if(e.params.oldDefinition)for(let h=0;h<a;h++)n[u+h]|=o[a];else for(let h=-1;h<=a;h++)n[u+h]|=o[a]}}}function ww(e,t){if(t.type!==e.type||t.partner1!==e.firstEnd+1)return!1;if(t.type===vr.PARALLEL){if(t.partner2===e.secondEnd+1)return!0}else if(t.partner2===e.secondStart-1)return!0;return!1}function Pw(e,t){return e.type===t.type&&t.firstStart-e.firstEnd<6&&e.firstStart<t.firstStart&&t.nextLadder===0?e.type===vr.PARALLEL?E2(e,t):E2(t,e):!1}function E2(e,t){return t.secondStart-e.secondEnd>0&&(t.secondStart-e.secondEnd<6&&t.firstStart-e.firstEnd<3||t.secondStart-e.secondEnd<3)}function Ew(e){const{bridges:t,ladders:n}=e;for(let r=0;r<t.length;r++){const i=t[r];let o=!1;for(let s=0;s<n.length;s++){const c=n[s];ww(c,i)&&(o=!0,c.firstEnd++,i.type===vr.PARALLEL?c.secondEnd++:c.secondStart--)}o||(n[n.length]={previousLadder:0,nextLadder:0,firstStart:i.partner1,firstEnd:i.partner1,secondStart:i.partner2,secondEnd:i.partner2,type:i.type})}for(let r=0;r<n.length;r++){const i=n[r];for(let o=r;o<n.length;o++){const s=n[o];Pw(i,s)&&(i.nextLadder=o,s.previousLadder=r)}}}function Bw(e){const{proteinInfo:t,hbonds:n,flags:r,bridges:i}=e,{offset:o,b:s}=n;let c,a;for(let u=0,l=t.residueIndices.length;u<l;++u)for(let f=o[u],d=o[u+1];f<d;f++){const m=s[f];u>m||(c=u+1,a=m,c!==a&&n.getDirectedEdgeIndex(a,c+1)!==-1&&(r[c]|=Be.Flag.B,r[a]|=Be.Flag.B,i[i.length]=new ua(c,a,vr.PARALLEL)),c=u,a=m-1,c!==a&&n.getDirectedEdgeIndex(a-1,c)!==-1&&(r[c]|=Be.Flag.B,r[a]|=Be.Flag.B,i[i.length]=new ua(a,c,vr.PARALLEL)),c=u,a=m,c!==a&&n.getDirectedEdgeIndex(a,c)!==-1&&(r[c]|=Be.Flag.B,r[a]|=Be.Flag.B,i[i.length]=new ua(a,c,vr.ANTI_PARALLEL)),c=u+1,a=m-1,c!==a&&n.getDirectedEdgeIndex(a-1,c+1)!==-1&&(r[c]|=Be.Flag.B,r[a]|=Be.Flag.B,i[i.length]=new ua(a,c,vr.ANTI_PARALLEL)))}i.sort((u,l)=>u.partner1>l.partner1?1:u.partner1<l.partner1?-1:0)}function B2(e){return Be.is(e,Be.Flag.G)||Be.is(e,Be.Flag.H)||Be.is(e,Be.Flag.I)}function Rw(e){const{ladders:t,flags:n}=e;for(let r=0;r<t.length;r++){const i=t[r];for(let s=i.firstStart;s<=i.firstEnd;s++){const c=i.firstStart-s,a=i.secondStart-c;i.firstStart!==i.firstEnd?(n[s]|=Be.Flag.E,n[a]|=Be.Flag.E):(!B2(n[s])&&Be.is(n[s],Be.Flag.E)&&(n[s]|=Be.Flag.B),!B2(n[a])&&Be.is(n[a],Be.Flag.E)&&(n[a]|=Be.Flag.B))}if(i.nextLadder===0)continue;const o=t[i.nextLadder];for(let s=i.firstStart;s<=o.firstEnd;s++)n[s]|=Be.Flag.E;if(i.type===vr.PARALLEL)for(let s=i.secondStart;s<=o.secondEnd;s++)n[s]|=Be.Flag.E;else for(let s=o.secondEnd;s<=i.secondStart;s++)n[s]|=Be.Flag.E}}function Dw(e,t){const{cIndices:n,nIndices:r,residueIndices:i}=t,o=e.conformation,{index:s}=e.model.atomicHierarchy,{traceElementIndex:c}=e.model.atomicHierarchy.derived.residue,a=i.length,u=(b,C)=>b===-1?O.setNaN(C):o.position(b,C);let l=O(),f=O(),d=O(),m=O(),h=O(),p=O();const _=O(),y=O(),v=O();if(a===0)return{phi:new Float32Array(0),psi:new Float32Array(0)};const A=new Float32Array(a-1),g=new Float32Array(a-1);u(-1,l),u(-1,f),u(-1,d),u(n[0],m),u(c[i[0]],h),u(r[0],p),u(n[1],_),u(c[i[1]],y),u(r[1],v);for(let b=0;b<a-1;++b)s.findAtomOnResidue(i[b],"OXT")===-1&&(A[b]=li(O.dihedralAngle(l,p,h,m)),g[b]=li(O.dihedralAngle(p,h,m,v)),l=m,f=h,d=p,m=_,h=y,p=v,u(n[b+1],_),u(c[i[b+1]],y),u(r[b+1],v));return{phi:A,psi:g}}function kw(e,t){const{x:n,y:r,z:i}=e.model.atomicConformation,{traceElementIndex:o}=e.model.atomicHierarchy.derived.residue,s=new Uint32Array(t.length);for(let a=0,u=t.length;a<u;++a)s[a]=o[t[a]];const c={x:n,y:r,z:i,indices:Ee.ofSortedArray(s)};return Ys(c,qd(c))}function Tw(e){const{index:t}=e.model.atomicHierarchy,{proteinElements:n,residueIndex:r}=e,i=n.length,o=new Uint32Array(i),s=new Int32Array(i),c=new Int32Array(i),a=new Int32Array(i),u=new Int32Array(i);for(let l=0;l<i;++l){const f=r[n[l]];o[l]=f,s[l]=t.findAtomOnResidue(f,"C"),c[l]=t.findAtomOnResidue(f,"H"),a[l]=t.findAtomOnResidue(f,"O"),u[l]=t.findAtomOnResidue(f,"N")}return{residueIndices:Ee.ofSortedArray(o),cIndices:s,hIndices:c,oIndices:a,nIndices:u}}const R2={oldDefinition:Et.Boolean(!0,{description:"Whether to use the old DSSP convention for the annotation of turns and helices, causes them to be two residues shorter"}),oldOrdering:Et.Boolean(!0,{description:"Alpha-helices are preferred over 3-10 helices"})},Nw=Et.getDefaultValues(R2);async function D2(e,t){const n=Tw(e),{residueIndices:r}=n,i=kw(e,r),o=xw(e,n,i),s=r.length,c=new Uint32Array(s);Dw(e,n);const a=[],u=[],l=t.oldDefinition?qw:Fw;t.oldOrdering;const f={params:t,unit:e,proteinInfo:n,flags:c,hbonds:o,ladders:a,bridges:u};Cw(f),Iw(f),gw(f),Bw(f),Ew(f),Rw(f);const d=Gw(c,l),m=new Uint32Array(s),h=[],p=[],_=y=>Ee.indexOf(r,y);for(let y=0,v=r.length;y<v;++y){const A=d[y];m[y]=A;const g=l(c[y]);(p.length===0||g!==p[p.length-1].flags)&&(p[p.length]=Ow(Mw(A),c[y],l)),h[y]=p.length-1}return Ld(m,h,p,_)}function Ow(e,t,n){return e==="helix"?{kind:"helix",flags:n(t)}:e==="sheet"?{kind:"sheet",flags:n(t)}:e==="turn"||e==="bend"?{kind:"turn",flags:n(t)}:{kind:"none"}}function Mw(e){return e===ut.SecondaryStructureDssp.H||e===ut.SecondaryStructureDssp.G||e===ut.SecondaryStructureDssp.I?"helix":e===ut.SecondaryStructureDssp.B||e===ut.SecondaryStructureDssp.E?"sheet":e===ut.SecondaryStructureDssp.T?"turn":e===ut.SecondaryStructureDssp.S?"bend":"none"}function qw(e){return Be.is(e,Be.Flag.H)?ut.SecondaryStructureDssp.H:Be.is(e,Be.Flag.E)?ut.SecondaryStructureDssp.E:Be.is(e,Be.Flag.B)?ut.SecondaryStructureDssp.B:Be.is(e,Be.Flag.G)?ut.SecondaryStructureDssp.G:Be.is(e,Be.Flag.I)?ut.SecondaryStructureDssp.I:Be.is(e,Be.Flag.T)?ut.SecondaryStructureDssp.T:Be.is(e,Be.Flag.S)?ut.SecondaryStructureDssp.S:ut.Flag.None}function Uw(e){return Be.is(e,Be.Flag.H)?"H":Be.is(e,Be.Flag.E)?"E":Be.is(e,Be.Flag.B)?"B":Be.is(e,Be.Flag.G)?"G":Be.is(e,Be.Flag.I)?"I":Be.is(e,Be.Flag.T)?"T":Be.is(e,Be.Flag.S)?"S":"-"}function Fw(e){return Be.is(e,Be.Flag.I)?ut.SecondaryStructureDssp.I:Be.is(e,Be.Flag.H)?ut.SecondaryStructureDssp.H:Be.is(e,Be.Flag.E)?ut.SecondaryStructureDssp.E:Be.is(e,Be.Flag.B)?ut.SecondaryStructureDssp.B:Be.is(e,Be.Flag.G)?ut.SecondaryStructureDssp.G:Be.is(e,Be.Flag.T)?ut.SecondaryStructureDssp.T:Be.is(e,Be.Flag.S)?ut.SecondaryStructureDssp.S:ut.Flag.None}function Lw(e){return Be.is(e,Be.Flag.I)?"I":Be.is(e,Be.Flag.H)?"H":Be.is(e,Be.Flag.E)?"E":Be.is(e,Be.Flag.B)?"B":Be.is(e,Be.Flag.G)?"G":Be.is(e,Be.Flag.T)?"T":Be.is(e,Be.Flag.S)?"S":"-"}function Gw(e,t){const n=new Uint32Array(e.length);for(let r=0,i=e.length;r<i;++r){const o=Be.create(e[r]);n[r]=t(o)}return n}var Lo;(function(e){function t(r){const i=r.descriptor.name,o=r.type==="root"?"inheritedPropertyData":"currentPropertyData",s=a=>(i in a[o]||(a[o][i]={props:{...Et.getDefaultValues(r.getParams(a))},data:Fr.create(void 0)}),a[o][i]),c=(a,u,l)=>{const f=s(a);a[o][i]={props:u,data:Fr.withValue(f.data,l)}};return{label:r.label,descriptor:r.descriptor,isHidden:r.isHidden,getParams:a=>{const u=Et.clone(r.getParams(a));return Et.setDefaultValues(u,s(a).props),u},defaultParams:r.defaultParams,isApplicable:r.isApplicable,attach:async(a,u,l={},f)=>{f&&u.customPropertyDescriptors.reference(r.descriptor,!0),r.type==="root"&&(u=u.root);const d=s(u.root).props,m=s(u),h=Et.merge(r.defaultParams,d,l);if(m.data.value&&Et.areEqual(r.defaultParams,m.props,h))return;const{value:p,assets:_}=await r.obtain(a,u,h);u.customPropertyDescriptors.add(r.descriptor),u.customPropertyDescriptors.assets(r.descriptor,_),c(u,h,p)},ref:(a,u)=>a.customPropertyDescriptors.reference(r.descriptor,u),get:a=>s(a).data,set:(a,u={},l)=>{r.type==="root"&&(a=a.root);const f=s(a),d=Et.merge(r.defaultParams,f.props,u);Et.areEqual(r.defaultParams,f.props,d)||(c(a,d,l),a.customPropertyDescriptors.assets(r.descriptor))},props:a=>s(a).props}}e.createProvider=t;function n(r,i,o){const s={value:Et.Value(o,{isHidden:!0})};return t({label:To(r),descriptor:Vr({name:r}),isHidden:!0,type:i,defaultParams:s,getParams:()=>({value:Et.Value(o,{isHidden:!0})}),isApplicable:()=>!0,obtain:async(c,a,u)=>({...Et.getDefaultValues(s),...u})})}e.createSimple=n})(Lo||(Lo={}));var xi;(function(e){e.Descriptor={name:"model_secondary_structure"},e.Provider=_r.create(e.Descriptor);function t(n,r,i){const o=new Map,s=[{kind:"none"}],c=Hw(n,r);jw(n,c,o,s),Vw(r,c,o,n._rowCount,s);const a=i.residues._rowCount,u=f=>f,l={type:new Int32Array(a),key:new Int32Array(a),elements:s};return o.size>0&&Kw(i,c,o,l),Ld(l.type,l.key,l.elements,u)}e.fromStruct=t})(xi||(xi={}));function Hw(e,t){if(e._rowCount>0){if(e.beg_label_seq_id.valueKind(0)!==ye.ValueKinds.Present||e.end_label_seq_id.valueKind(0)!==ye.ValueKinds.Present)return"auth"}else if(t&&(t.beg_label_seq_id.valueKind(0)!==ye.ValueKinds.Present||t.end_label_seq_id.valueKind(0)!==ye.ValueKinds.Present))return"auth";return"label"}function jw(e,t,n,r){if(!e._rowCount)return;const{beg_label_asym_id:i,beg_label_seq_id:o,beg_auth_seq_id:s,pdbx_beg_PDB_ins_code:c}=e,{end_label_seq_id:a,end_auth_seq_id:u,pdbx_end_PDB_ins_code:l}=e,{pdbx_PDB_helix_class:f,conf_type_id:d,details:m}=e,h=t==="label"?o:s,p=t==="label"?a:u;for(let _=0,y=e._rowCount;_<y;_++){const v=ut.create(f.valueKind(_)===ye.ValueKinds.Present?ut.SecondaryStructurePdb[f.value(_)]:d.valueKind(_)===ye.ValueKinds.Present?ut.SecondaryStructureMmcif[d.value(_)]:ut.Flag.NA),A={kind:"helix",flags:v,type_id:d.valueKind(_)===ye.ValueKinds.Present?d.value(_):"helx_p",helix_class:f.value(_),details:m.valueKind(_)===ye.ValueKinds.Present?m.value(_):void 0},g={startSeqId:h.value(_),startInsCode:c.value(_),endSeqId:p.value(_),endInsCode:l.value(_),type:v,key:r.length};r[r.length]=A;const b=i.value(_);if(n.has(b)){const C=n.get(b);C.has(g.startSeqId)?C.get(g.startSeqId).push(g):C.set(g.startSeqId,[g])}else n.set(b,new Map([[g.startSeqId,[g]]]))}}function Vw(e,t,n,r,i){if(!e._rowCount)return;const{beg_label_asym_id:o,beg_label_seq_id:s,beg_auth_seq_id:c,pdbx_beg_PDB_ins_code:a}=e,{end_label_seq_id:u,end_auth_seq_id:l,pdbx_end_PDB_ins_code:f}=e,{sheet_id:d}=e,m=t==="label"?s:c,h=t==="label"?u:l,p=new Map;let _=r+1;for(let y=0,v=e._rowCount;y<v;y++){const A=d.value(y);let g;p.has(A)?g=p.get(A):(g=_++,p.set(A,g));const b=ut.create(ut.Flag.Beta|ut.Flag.BetaSheet),C={kind:"sheet",flags:b,sheet_id:A,symmetry:void 0},I={startSeqId:m.value(y),startInsCode:a.value(y),endSeqId:h.value(y),endInsCode:f.value(y),type:b,key:i.length};i[i.length]=C;const S=o.value(y);if(n.has(S)){const P=n.get(S);P.has(I.startSeqId)?P.get(I.startSeqId).push(I):P.set(I.startSeqId,[I])}else n.set(S,new Map([[I.startSeqId,[I]]]))}}function zw(e,t,n,r,i,o){const{auth_seq_id:s,label_seq_id:c,pdbx_PDB_ins_code:a}=e.residues,{endSeqId:u,endInsCode:l,key:f,type:d}=n,m=t==="label"?c:s;let h=r;for(;h<i;){const p=m.value(h);if(o.type[h]=d,o.key[h]=f,p>u||p===u&&a.value(h)===l)break;h++}}function Kw(e,t,n,r){const{count:i}=e.chainAtomSegments,{label_asym_id:o}=e.chains,{auth_seq_id:s,label_seq_id:c,pdbx_PDB_ins_code:a}=e.residues,u=t==="label"?c:s;for(let l=0;l<i;l++){const f=eo.chainStartResidueIndex(e,l),d=eo.chainEndResidueIndexExcl(e,l),m=o.value(l);if(n.has(m)){const h=n.get(m);for(let p=f;p<d;p++){const _=u.value(p);if(h.has(_)){const y=h.get(_);for(const v of y){const A=a.value(p);v.startInsCode===A&&zw(e,t,v,p,d,r)}}}}}}const $w=[5.45,5.18,6.37],Ww=2.1,Yw=[6.1,10.4,13],Zw=1.42,k2=O(),T2=O();function N2(e,t,n,r,i){const o=e.conformation,{traceElementIndex:s}=e.model.atomicHierarchy.derived.residue;for(let c=Math.max(0,n-2);c<=n;++c)for(let a=2;a<5;++a){if(c+a>=t.length)return!1;const u=t[c],l=t[c+a],f=s[u],d=s[l];if(f===-1||d===-1)return!1;o.invariantPosition(f,k2),o.invariantPosition(d,T2);const m=O.distance(k2,T2);if(Math.abs(m-r[a-2])>=i)return!1}return!0}async function O2(e){const t=e.proteinElements.length,n=new Uint32Array(t),r=[],i=[],{proteinElements:o,residueIndex:s}=e,c=o.length,a=new Uint32Array(c);for(let f=0;f<c;++f){const d=s[o[f]];a[f]=d}const u=Ee.ofSortedArray(a),l=f=>Ee.indexOf(u,f);for(let f=0,d=u.length;f<d;++f){let m=ut.Flag.None;N2(e,u,f,$w,Ww)?m=ut.Flag.Helix:N2(e,u,f,Yw,Zw)&&(m=ut.Flag.Beta),n[f]=m,(i.length===0||m!==Jw(i[i.length-1]))&&(i[i.length]=Xw(Qw(m),m)),r[f]=i.length-1}return Ld(n,r,i,l)}function Xw(e,t){return e==="helix"?{kind:"helix",flags:t}:e==="sheet"?{kind:"sheet",flags:t}:{kind:"none"}}function Qw(e){return e===ut.Flag.Helix?"helix":e===ut.Flag.Beta?"sheet":"none"}function Jw(e){return e.kind==="helix"||e.kind==="sheet"?e.flags:ut.Flag.None}function M2(e){return{type:Et.MappedStatic("auto",{auto:Et.EmptyGroup({label:"Automatic"}),model:Et.EmptyGroup({label:"Model"}),dssp:Et.Group(R2,{label:"DSSP",isFlat:!0}),"zhang-skolnick":Et.EmptyGroup({label:"Zhang-Skolnick"})},{options:[["auto","Automatic"],["model","Model"],["dssp","DSSP"],["zhang-skolnick","Zhang-Skolnick"]]})}}const q2=M2(),U2=Lo.createProvider({label:"Secondary Structure",descriptor:Vr({name:"molstar_computed_secondary_structure"}),type:"root",defaultParams:q2,getParams:M2,isApplicable:e=>!0,obtain:async(e,t,n)=>{const r={...Et.getDefaultValues(q2),...n};switch(r.type.name){case"auto":return{value:await e6(t)};case"dssp":return{value:await t6(t,r.type.params)};case"model":return{value:await r6(t)};case"zhang-skolnick":return{value:await n6(t)}}}});async function e6(e){const t=new Map;for(let n=0,r=e.unitSymmetryGroups.length;n<r;++n){const i=e.unitSymmetryGroups[n].units[0],o=i.model;if(Lt.isFromPdbArchive(o)&&Lt.isExperimental(o)&&!Lt.isCoarseGrained(o)||Lt.hasSecondaryStructure(o)){const s=xi.Provider.get(o);s&&t.set(i.invariantId,s)}else if(Ce.isAtomic(i)&&!Lt.isCoarseGrained(o)){const s=await D2(i,Nw);t.set(i.invariantId,s)}else if(Ce.isAtomic(i)){const s=await O2(i);t.set(i.invariantId,s)}}return t}async function t6(e,t){const n=new Map;for(let r=0,i=e.unitSymmetryGroups.length;r<i;++r){const o=e.unitSymmetryGroups[r].units[0];if(Ce.isAtomic(o)&&!Lt.isCoarseGrained(o.model)){const s=await D2(o,t);n.set(o.invariantId,s)}}return n}async function n6(e){const t=new Map;for(let n=0,r=e.unitSymmetryGroups.length;n<r;++n){const i=e.unitSymmetryGroups[n].units[0];if(Ce.isAtomic(i)){const o=await O2(i);t.set(i.invariantId,o)}}return t}async function r6(e){const t=new Map;for(let n=0,r=e.unitSymmetryGroups.length;n<r;++n){const i=e.unitSymmetryGroups[n].units[0];if(Ce.isAtomic(i)){const o=xi.Provider.get(i.model);o&&t.set(i.invariantId,o)}}return t}function B7(e){return e}function Yt(){throw new Error("Property only available for atomic models.")}function Or(e){throw e?new Error(`Property only available for coarse models (${e}).`):new Error("Property only available for coarse models.")}const Go={key:e=>e.element,x:e=>e.unit.conformation.x(e.element),y:e=>e.unit.conformation.y(e.element),z:e=>e.unit.conformation.z(e.element),id:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicConformation.atomId.value(e.element):Yt(),occupancy:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicConformation.occupancy.value(e.element):Yt(),B_iso_or_equiv:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicConformation.B_iso_or_equiv.value(e.element):Yt(),sourceIndex:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicHierarchy.atomSourceIndex.value(e.element):e.element,type_symbol:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicHierarchy.atoms.type_symbol.value(e.element):Yt(),label_atom_id:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicHierarchy.atoms.label_atom_id.value(e.element):Yt(),auth_atom_id:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicHierarchy.atoms.auth_atom_id.value(e.element):Yt(),label_alt_id:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicHierarchy.atoms.label_alt_id.value(e.element):Yt(),label_comp_id:da,auth_comp_id:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicHierarchy.atoms.auth_comp_id.value(e.element):Yt(),pdbx_formal_charge:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicHierarchy.atoms.pdbx_formal_charge.value(e.element):Yt(),vdw_radius:e=>Ce.isAtomic(e.unit)?m2(e.unit.model.atomicHierarchy.atoms.type_symbol.value(e.element)):Yt()};function da(e){return Ce.isAtomic(e.unit)||Yt(),e.unit.model.atomicHierarchy.atoms.label_comp_id.value(e.element)}function Gd(e){return Ce.isAtomic(e.unit)?e.unit.model.atomicHierarchy.residues.label_seq_id.value(e.unit.residueIndex[e.element]):Yt()}function i6(e){Ce.isAtomic(e.unit)||Yt();const t=e.unit.model.sequence.byEntityKey[Cn(e)];return t&&t.sequence.microHet.has(Gd(e))}function F2(e){Ce.isAtomic(e.unit)||Yt();const t=e.unit.model.sequence.byEntityKey[Cn(e)];return t?t.sequence.microHet.get(Gd(e))||[da(e)]:[da(e)]}const o6={key:e=>Ce.isAtomic(e.unit)?e.unit.residueIndex[e.element]:Yt(),group_PDB:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicHierarchy.residues.group_PDB.value(e.unit.residueIndex[e.element]):Yt(),label_seq_id:Gd,auth_seq_id:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicHierarchy.residues.auth_seq_id.value(e.unit.residueIndex[e.element]):Yt(),pdbx_PDB_ins_code:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicHierarchy.residues.pdbx_PDB_ins_code.value(e.unit.residueIndex[e.element]):Yt(),isNonStandard:e=>Ce.isAtomic(e.unit)?F2(e).some(t=>e.unit.model.properties.chemicalComponentMap.get(t).mon_nstd_flag[0]==="n"):Yt(),hasMicroheterogeneity:i6,microheterogeneityCompIds:F2,secondary_structure_type:e=>{var t;Ce.isAtomic(e.unit)||Yt();const n=(t=U2.get(e.structure).value)===null||t===void 0?void 0:t.get(e.unit.invariantId);return n?n.type[n.getIndex(e.unit.residueIndex[e.element])]:ut.Flag.NA},secondary_structure_key:e=>{var t;Ce.isAtomic(e.unit)||Yt();const n=(t=U2.get(e.structure).value)===null||t===void 0?void 0:t.get(e.unit.invariantId);return n?n.key[n.getIndex(e.unit.residueIndex[e.element])]:-1},chem_comp_type:e=>Ce.isAtomic(e.unit)?e.unit.model.properties.chemicalComponentMap.get(da(e)).type:Yt()},s6={key:e=>Ce.isAtomic(e.unit)?e.unit.chainIndex[e.element]:Yt(),label_asym_id:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicHierarchy.chains.label_asym_id.value(e.unit.chainIndex[e.element]):e.unit.coarseElements.asym_id.value(e.element),auth_asym_id:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicHierarchy.chains.auth_asym_id.value(e.unit.chainIndex[e.element]):Yt(),label_entity_id:e=>Ce.isAtomic(e.unit)?e.unit.model.atomicHierarchy.chains.label_entity_id.value(e.unit.chainIndex[e.element]):e.unit.coarseElements.entity_id.value(e.element)},a6={key:Go.key,entityKey:e=>Ce.isCoarse(e.unit)?e.unit.coarseElements.entityKey[e.element]:Or(),x:Go.x,y:Go.y,z:Go.z,asym_id:e=>Ce.isCoarse(e.unit)?e.unit.coarseElements.asym_id.value(e.element):Or(),entity_id:e=>Ce.isCoarse(e.unit)?e.unit.coarseElements.entity_id.value(e.element):Or(),seq_id_begin:e=>Ce.isCoarse(e.unit)?e.unit.coarseElements.seq_id_begin.value(e.element):Or(),seq_id_end:e=>Ce.isCoarse(e.unit)?e.unit.coarseElements.seq_id_end.value(e.element):Or(),sphere_radius:e=>Ce.isSpheres(e.unit)?e.unit.coarseConformation.radius[e.element]:Or("spheres"),sphere_rmsf:e=>Ce.isSpheres(e.unit)?e.unit.coarseConformation.rmsf[e.element]:Or("spheres"),gaussian_weight:e=>Ce.isGaussians(e.unit)?e.unit.coarseConformation.weight[e.element]:Or("gaussians"),gaussian_covariance_matrix:e=>Ce.isGaussians(e.unit)?e.unit.coarseConformation.covariance_matrix[e.element]:Or("gaussians")};function Cn(e){switch(e.unit.kind){case Ce.Kind.Atomic:return e.unit.model.atomicHierarchy.index.getEntityFromChain(e.unit.chainIndex[e.element]);case Ce.Kind.Spheres:return e.unit.model.coarseHierarchy.spheres.entityKey[e.element];case Ce.Kind.Gaussians:return e.unit.model.coarseHierarchy.gaussians.entityKey[e.element]}}const c6={key:Cn,id:e=>e.unit.model.entities.data.id.value(Cn(e)),type:e=>e.unit.model.entities.data.type.value(Cn(e)),src_method:e=>e.unit.model.entities.data.src_method.value(Cn(e)),pdbx_description:e=>e.unit.model.entities.data.pdbx_description.value(Cn(e)),formula_weight:e=>e.unit.model.entities.data.formula_weight.value(Cn(e)),pdbx_number_of_molecules:e=>e.unit.model.entities.data.pdbx_number_of_molecules.value(Cn(e)),details:e=>e.unit.model.entities.data.details.value(Cn(e)),pdbx_mutation:e=>e.unit.model.entities.data.pdbx_mutation.value(Cn(e)),pdbx_fragment:e=>e.unit.model.entities.data.pdbx_fragment.value(Cn(e)),pdbx_ec:e=>e.unit.model.entities.data.pdbx_ec.value(Cn(e)),pdbx_parent_entity_id:e=>e.unit.model.entities.data.pdbx_parent_entity_id.value(Cn(e)),subtype:e=>e.unit.model.entities.subtype.value(Cn(e)),prd_id:e=>{var t,n;return(n=(t=e.unit.model.entities.prd_id)===null||t===void 0?void 0:t.value(Cn(e)))!==null&&n!==void 0?n:""}},u6=[],l6={id:e=>e.unit.id,chainGroupId:e=>e.unit.chainGroupId,multiChain:e=>Ce.Traits.is(e.unit.traits,Ce.Trait.MultiChain),object_primitive:e=>e.unit.objectPrimitive,operator_name:e=>e.unit.conformation.operator.name,operator_key:e=>e.unit.conformation.operator.key,model_index:e=>e.unit.model.modelNum,model_label:e=>e.unit.model.label,model_entry_id:e=>e.unit.model.entryId,hkl:e=>e.unit.conformation.operator.hkl,spgrOp:e=>e.unit.conformation.operator.spgrOp,model_num:e=>e.unit.model.modelNum,pdbx_struct_assembly_id:e=>{var t;return((t=e.unit.conformation.operator.assembly)===null||t===void 0?void 0:t.id)||Mt.DefaultName},pdbx_struct_oper_list_ids:e=>{var t;return((t=e.unit.conformation.operator.assembly)===null||t===void 0?void 0:t.operList)||u6},struct_ncs_oper_id:e=>e.unit.conformation.operator.ncsId},Xe={atom:Go,residue:o6,chain:s6,entity:c6,unit:l6,coarse:a6};var Si;(function(e){function t(l,f){return rn.create("Build Assembly",async d=>{const m=l.models;if(m.length!==1)throw new Error("Can only build assemblies from structures based on 1 model.");const h=Kd.findAssembly(m[0],f);if(!h)throw new Error(`Assembly '${f}' is not defined.`);const p=Mt.create(h.id,Ke.identity(),{assembly:{id:h.id,operId:0,operList:[]}}),_=wt.Builder({coordinateSystem:p,label:l.label,dynamicBonds:l.dynamicBonds}),y=new vi(l);for(const v of h.operatorGroups){const A=v.selector(y);if(Ye.structureCount(A)===0)continue;const{units:g}=Ye.unionStructure(A);for(const b of v.operators)for(const C of g)_.addWithOperator(C,b)}return _.getStructure()})}e.buildAssembly=t;function n(l,f,d){return rn.create("Build Symmetry Assembly",async m=>{const h=l.models;if(h.length!==1)throw new Error("Can only build symmetry assemblies from structures based on 1 model.");const p=O(),_=wt.Builder({label:l.label,representativeModel:h[0],dynamicBonds:l.dynamicBonds}),y=new vi(l);for(const v of f){const g=d6(v.asymIds)(y);if(Ye.structureCount(g)===0)continue;const{units:b}=Ye.unionStructure(g);for(const{index:C,shift:[I,S,P]}of v.operators){const T=L2(d,C,I,S,P,p);for(const D of b)for(const w of T)_.addWithOperator(D,w)}}return _.getStructure()})}e.buildSymmetryAssembly=n;function r(l,f){return rn.create("Find Symmetry Mates",d=>p6(d,l,f))}e.builderSymmetryMates=r;function i(l,f,d){return rn.create("Build Symmetry",m=>h6(m,l,f,d))}e.buildSymmetryRange=i;function o(l){return rn.create("Build NCS",f=>m6(f,l))}e.buildNcs=o;function s(l,f){return l.invariantId===f.invariantId&&l.model.id===f.model.id&&Ee.areEqual(l.elements,f.elements)}e.areUnitsEquivalent=s;function c(){return Nx(Ce.hashUnit,s)}e.UnitEquivalenceBuilder=c;function a(l){const f=c();for(const m of l.units)f.add(m.id,m);const d=[];for(const m of f.groups)d.push(Ce.SymmetryGroup(m.map(h=>l.unitMap.get(h))));return d}e.computeTransformGroups=a;function u(l,f){if(l.length!==f.length)return!1;for(let d=0,m=l.length;d<m;++d){const h=l[d].units,p=f[d].units;if(h.length!==p.length||l[d].hashCode!==f[d].hashCode)return!1;for(let _=0,y=h.length;_<y;_++)if(h[_].conformation!==p[_].conformation)return!1}return!0}e.areTransformGroupsEquivalent=u})(Si||(Si={}));function d6(e){return Dt.generators.atoms({chainTest:Dt.pred.and(Dt.pred.eq(t=>Xe.unit.operator_name(t.element),Mt.DefaultName),Dt.pred.inSet(t=>Xe.chain.label_asym_id(t.element),e))})}function L2(e,t,n,r,i,o){const{spacegroup:s,ncsOperators:c}=e,a=[],{toFractional:u}=s.cell,l=O.transformMat4(O(),o,u),f=rr.getSymmetryOperatorRef(s,t,n,r,i,l);if(c&&c.length)for(let d=0,m=c.length;d<m;++d){const h=c[d],p=Ke.mul(Ke(),f.matrix,h.matrix),_=Mt.create(`${f.name} ${h.name}`,p,{assembly:f.assembly,ncsId:h.ncsId,hkl:f.hkl,spgrOp:f.spgrOp});a.push(_)}else a.push(f);return a}function G2(e,t,n,r){const{spacegroup:i,ncsOperators:o}=e,s=o&&o.length||0,c=[];!s&&t[0]<=0&&n[0]>=0&&t[1]<=0&&n[1]>=0&&t[2]<=0&&n[2]>=0&&(c[0]=rr.getSymmetryOperator(i,0,0,0,0));for(let a=0;a<i.operators.length;a++)for(let u=t[0];u<=n[0];u++)for(let l=t[1];l<=n[1];l++)for(let f=t[2];f<=n[2];f++)!s&&a===0&&u===0&&l===0&&f===0||c.push(...L2(e,a,u,l,f,r));return c}function f6(e,t){return e._operators_333&&O.equals(t,e._operators_333.ref)||(e._operators_333={ref:O.clone(t),operators:G2(e,O.create(-3,-3,-3),O.create(3,3,3),t)}),e._operators_333.operators}function H2(e,t){const n=wt.Builder({label:e.label,dynamicBonds:e.dynamicBonds}),{units:r}=e;for(const i of t)for(const o of r)n.addWithOperator(o,i);return n.getStructure()}async function m6(e,t){const n=t.models;if(n.length!==1)throw new Error("Can only build NCS from structures based on 1 model.");const r=Nn.Provider.get(n[0]);if(!r)return t;const i=r.ncsOperators;return!i||!i.length?t:H2(t,i)}async function h6(e,t,n,r){const i=t.models;if(i.length!==1)throw new Error("Can only build symmetries from structures based on 1 model.");const o=Nn.Provider.get(i[0]);if(!o)return t;const{spacegroup:s}=o;if(bi.isZero(s.cell))return t;const c=Lt.getCenter(i[0]),a=G2(o,n,r,c);return H2(t,a)}async function p6(e,t,n){const r=t.models;if(r.length!==1)throw new Error("Can only build symmetries from structures based on 1 model.");const i=Nn.Provider.get(r[0]);if(!i)return t;const{spacegroup:o}=i;if(bi.isZero(o.cell))return t;e.shouldUpdate&&await e.update("Initialing...");const s=Lt.getCenter(r[0]),c=f6(i,s),a=t.lookup3d,u=new Set;function l(h,p){return`${h.invariantId}|${p.name}`}const f=wt.Builder({label:t.label,dynamicBonds:t.dynamicBonds}),{units:d}=t,m=O.zero();for(const h of c){for(const p of d){const _=p.lookup3d.boundary.sphere;O.transformMat4(m,_.center,h.matrix);const y=a.findUnitIndices(m[0],m[1],m[2],_.radius+n);for(let v=0,A=y.count;v<A;v++){if(!d[y.indices[v]].lookup3d.check(m[0],m[1],m[2],_.radius+n))continue;const b=l(p,h);u.has(b)||(f.addWithOperator(p,h),u.add(b))}}e.shouldUpdate&&await e.update("Building symmetry...")}return f.getStructure()}class fa{addToUnit(t,n){const r=this.unitMap.get(t);if(r)zt.add(r,n,n)&&this.elementCount++;else{const i=zt.create();zt.add(i,n,n),this.unitMap.set(t,i),this.ids[this.ids.length]=t,this.elementCount++}}has(t,n){const r=this.unitMap.get(t);return r?zt.has(r,n):!1}beginUnit(t){this.parentId=t,this.unitMap.has(t)?this.currentUnit=this.unitMap.get(t):this.currentUnit=this.currentUnit.array.length>0?zt.create():this.currentUnit}addElement(t){zt.add(this.currentUnit,t,t)&&this.elementCount++}commitUnit(){this.currentUnit.array.length===0||this.unitMap.has(this.parentId)||(this.ids[this.ids.length]=this.parentId,this.unitMap.set(this.parentId,this.currentUnit),this.parentId=-1)}getStructure(){if(this.isEmpty)return wt.Empty;const t=[];Jn(this.ids);const n=Si.UnitEquivalenceBuilder();for(let r=0,i=this.ids.length;r<i;r++){const o=this.ids[r],s=this.parent.unitMap.get(o),c=this.unitMap.get(o).array,a=c.length;if(c.length===s.elements.length){t[t.length]=s,n.add(s.id,s);continue}a>1&&Jn(c);let u=s.getChild(Ee.ofSortedArray(c));const l=n.add(u.id,u);u!==l&&(u=l.applyOperator(u.id,u.conformation.operator,!0)),t[t.length]=u}return wt.create(t,{parent:this.parent})}get isEmpty(){return this.elementCount===0}constructor(t){this.parent=t,this.ids=[],this.unitMap=Kr.Mutable(),this.parentId=-1,this.currentUnit=zt.create(),this.elementCount=0}}class Ho{add(t){let n=this.index.get(t.label_asym_id);n||(n=new Map,this.index.set(t.label_asym_id,n));let r=n.get(t.label_seq_id);return r||(r=[],n.set(t.label_seq_id,r)),this._find(t,r)?!1:(r.push(t),!0)}hasLabelAsymId(t){return this.index.has(t)}has(t){var n,r;const i=this._asym_id(t);if(!this.index.has(i))return;const o=this.index.get(i),s=this._seq_id(t);if(!o.has(s))return;const c=o.get(s),a=this._comp_id(t),u=this._alt_id(t),l=this._ins_code(t),f=(n=this._op_name(t))!==null&&n!==void 0?n:"1_555";for(const d of c)if(!(d.label_comp_id!==a||d.label_alt_id!==u||d.ins_code!==l)&&!(this.checkOperator&&((r=d.operator_name)!==null&&r!==void 0?r:"1_555")!==f))return d}static getLabel(t,n=!1){var r;return`${t.label_asym_id} ${t.label_comp_id} ${t.label_seq_id}:${t.ins_code}:${t.label_alt_id}${n?" "+((r=t.operator_name)!==null&&r!==void 0?r:"1_555"):""}`}static getEntryFromLocation(t){var n;return{label_asym_id:Xe.chain.label_asym_id(t),label_comp_id:Xe.atom.label_comp_id(t),label_seq_id:Xe.residue.label_seq_id(t),label_alt_id:Xe.atom.label_alt_id(t),ins_code:Xe.residue.pdbx_PDB_ins_code(t),operator_name:(n=Xe.unit.operator_name(t))!==null&&n!==void 0?n:"1_555"}}_find(t,n){var r,i;for(const o of n)if(!(o.label_comp_id!==t.label_comp_id||o.label_alt_id!==t.label_alt_id||o.ins_code!==t.ins_code)&&!(this.checkOperator&&((r=o.operator_name)!==null&&r!==void 0?r:"1_555")!==((i=t.operator_name)!==null&&i!==void 0?i:"1_555")))return!0;return!1}constructor(t){var n;this.index=new Map,this.checkOperator=!1,this._asym_id=Xe.chain.label_asym_id,this._seq_id=Xe.residue.label_seq_id,this._comp_id=Xe.atom.label_comp_id,this._alt_id=Xe.atom.label_alt_id,this._ins_code=Xe.residue.pdbx_PDB_ins_code,this._op_name=Xe.unit.operator_name,this.checkOperator=(n=t?.checkOperator)!==null&&n!==void 0?n:!1}}function to(e,t,n){const r=t.subsetBuilder(!0);for(const i of n.units){if(i.kind!==Ce.Kind.Atomic){r.setUnit(i.id,i.elements);continue}const{residueAtomSegments:o}=i.model.atomicHierarchy,s=t.unitMap.get(i.id).elements,c=i.elements;r.beginUnit(i.id);const a=Ct.transientSegments(o,c);for(;a.hasNext;){const u=a.move().index;for(let l=o.offsets[u],f=o.offsets[u+1];l<f;l++)Ee.has(s,l)&&r.addElement(l)}r.commitUnit(),e.throwIfTimedOut()}return r.getStructure()}function _6(e){return function(n){const r=e(n);if(Ye.isSingleton(r))return Ye.Singletons(n.inputStructure,to(n,n.inputStructure,r.structure));{const i=new Sd(n.inputStructure);for(const o of r.structures)i.add(to(n,n.inputStructure,o));return i.getSelection()}}}function Hd(e,t,n,r){const i=new fa(t),o=t.lookup3d,s=r.radius;for(const c of n.units){const a=c.conformation,u=c.elements;for(let l=0,f=u.length;l<f;l++){const d=u[l];o.findIntoBuilder(a.x(d),a.y(d),a.z(d),s,i)}e.throwIfTimedOut()}return r.wholeResidues?to(e,t,i.getStructure()):i.getStructure()}function j2(e,t,n,r){const i=new fa(t),o=t.lookup3d,{elementRadius:s,elementRadiusClosure:c,sourceMaxRadius:a,radius:u}=r;e.pushCurrentElement(),e.element.structure=n;for(const l of n.units){e.element.unit=l;const f=l.conformation,d=l.elements;for(let m=0,h=d.length;m<h;m++){const p=d[m];e.element.element=p;const _=s(e);o.findIntoBuilderWithRadius(f.x(p),f.y(p),f.z(p),_,a,u,c,i)}e.throwIfTimedOut()}return e.popCurrentElement(),r.wholeResidues?to(e,t,i.getStructure()):i.getStructure()}function y6(e,t){return n=>(e.element.structure=n.structure,e.element.unit=n.unit,e.element.element=n.element,t(e))}function g6(e,t){let n=0;e.element.structure=e.inputStructure;for(const r of e.inputStructure.units){e.element.unit=r;const i=r.elements;for(let o=0,s=i.length;o<s;o++){const c=i[o];e.element.element=c;const a=t(e);a>n&&(n=a)}}return e.throwIfTimedOut(),n}function b6(e,t){return function(r){const i=e(r);if(t.elementRadius){const o={...t,elementRadius:t.elementRadius,elementRadiusClosure:y6(r,t.elementRadius),sourceMaxRadius:g6(r,t.elementRadius)};if(Ye.isSingleton(i)){const s=j2(r,r.inputStructure,i.structure,o);return Ye.Singletons(r.inputStructure,s)}else{const s=new Sd(r.inputStructure);for(const c of i.structures)s.add(j2(r,r.inputStructure,c,o));return s.getSelection()}}if(Ye.isSingleton(i)){const o=Hd(r,r.inputStructure,i.structure,t);return Ye.Singletons(r.inputStructure,o)}else{const o=new Sd(r.inputStructure);for(const s of i.structures)o.add(Hd(r,r.inputStructure,s,t));return o.getSelection()}}}function v6(e,t){return function(r){const i=e(r);if(Ye.structureCount(i)===0)return i;const o=Ye.UniqueBuilder(r.inputStructure),s=c=>o.add(c);return Ye.forEach(i,(c,a)=>{r.pushInputStructure(c),Ye.forEach(t(r),s),r.popInputStructure(),a%10===0&&r.throwIfTimedOut()}),o.getSelection()}}function A6(e,t){return function(r){const i=e(r);if(Ye.structureCount(i)===0)return i;const o=t(r);if(Ye.structureCount(o)===0)return Ye.Empty(r.inputStructure);const s=Ye.unionStructure(o),c=Ye.UniqueBuilder(r.inputStructure);return Ye.forEach(i,(a,u)=>{const l=p4(s,a);l.elementCount!==0&&c.add(l),u%50===0&&r.throwIfTimedOut()}),c.getSelection()}}function x6(e,t){return function(r){const i=e(r);if(Ye.structureCount(i)===0)return i;const o=t(r);if(Ye.structureCount(o)===0)return i;const s=Ye.unionStructure(o),c=Ye.UniqueBuilder(r.inputStructure);return Ye.forEach(i,(a,u)=>{const l=Uy(a,s);l.elementCount!==0&&c.add(l),u%50===0&&r.throwIfTimedOut()}),c.getSelection()}}function S6(e){return function(n){const r=Ye.LinearBuilder(n.inputStructure);return r.add(Ye.unionStructure(e(n))),r.getSelection()}}function C6(e,t){return function(r){const i=e(r),o=new Map,s=[];r.pushCurrentElement(),Ye.forEach(i,(a,u)=>{r.element.structure=a;for(const l of a.units){r.element.unit=l;const f=l.elements;for(let d=0,m=f.length;d<m;d++){r.element.element=f[d];const h=t(r);let p;o.has(h)?p=o.get(h):(p=zt.create(),o.set(h,p)),zt.add(p,u,u)}}s[u]=r.inputStructure.subsetBuilder(!0),u%10===0&&r.throwIfTimedOut()}),r.element.structure=r.inputStructure;for(const a of r.inputStructure.units){r.element.unit=a;const u=a.elements;for(let l=0,f=u.length;l<f;l++){r.element.element=u[l];const d=t(r);if(!o.has(d))continue;const m=o.get(d).array;for(let h=0,p=m.length;h<p;h++)s[m[h]].addToUnit(a.id,u[l])}}r.popCurrentElement();const c=Ye.UniqueBuilder(r.inputStructure);for(const a of s)c.add(a.getStructure());return c.getSelection()}}function I6({query:e,layerCount:t,wholeResidues:n,bondTest:r,fixedPoint:i}){const o=Math.max(t,0);return function(c){const a=Ye.UniqueBuilder(c.inputStructure),u=e(c);return c.pushCurrentBond(),c.atomicBond.setTestFn(r),Ye.forEach(u,(l,f)=>{let d=l;if(i)for(;;){const m=d.elementCount;if(d=V2(c,n,d),d.elementCount===m)break}else for(let m=0;m<o;m++)d=V2(c,n,d);a.add(d),f%10===0&&c.throwIfTimedOut()}),c.popCurrentBond(),a.getSelection()}}function V2(e,t,n){const r=w6(e,n);return t?to(e,e.inputStructure,r):r}function w6(e,t){const n=e.inputStructure,r=n.interUnitBonds,i=new fa(n),o=e.atomicBond;for(const s of t.units){if(s.kind!==Ce.Kind.Atomic){i.beginUnit(s.id);for(let m=0,h=s.elements.length;m<h;m++)i.addElement(s.elements[m]);i.commitUnit();continue}const c=n.unitMap.get(s.id),{offset:a,b:u,edgeProps:{flags:l,order:f,key:d}}=c.bonds;o.setStructure(n),o.a.unit=c,o.b.unit=c;for(let m=0,h=s.elements.length;m<h;m++){i.addToUnit(s.id,s.elements[m]);const p=Ee.indexOf(c.elements,s.elements[m]);for(let _=a[p],y=a[p+1];_<y;_++){const v=u[_],A=c.elements[v];Ee.has(s.elements,A)||i.has(s.id,A)||(o.aIndex=p,o.a.element=s.elements[m],o.bIndex=v,o.b.element=A,o.type=l[_],o.order=f[_],o.key=d[_],o.test(e,!0)&&i.addToUnit(s.id,A))}}for(const m of r.getConnectedUnits(c.id)){const h=t.unitMap.get(m.unitB),p=n.unitMap.get(m.unitB);for(const _ of m.connectedIndices)if(Ee.has(s.elements,c.elements[_]))for(const y of m.getEdges(_)){const v=p.elements[y.indexB];h&&Ee.has(h.elements,v)||i.has(m.unitB,v)||(o.a.unit=c,o.aIndex=_,o.a.element=c.elements[_],o.b.unit=p,o.bIndex=y.indexB,o.b.element=v,o.type=y.props.flag,o.order=y.props.order,o.key=y.props.key,o.test(e,!0)&&i.addToUnit(m.unitB,v))}}}return i.getStructure()}function P6({query:e,radius:t,includeWater:n}){const r=Xe.entity.type;function i(o){return r(o)==="water"}return function(s){const c=Ye.unionStructure(e(s)),a=to(s,s.inputStructure,Hd(s,s.inputStructure,c,{radius:t})),u=E6(s.inputStructure),l=B6(s.inputStructure),f=lt.create(a),d=new Map,m=new Ho({checkOperator:!0});for(const _ of a.units){if(_.kind!==Ce.Kind.Atomic)continue;f.unit=_;const{elements:y}=_,v=Ct.transientSegments(_.model.atomicHierarchy.chainAtomSegments,y),A=Ct.transientSegments(_.model.atomicHierarchy.residueAtomSegments,y);for(;v.hasNext;){const g=v.move();f.element=y[g.start];const b=Xe.chain.label_asym_id(f),C=Xe.unit.operator_name(f);if(u.has(b)){d.has(b)?Do(d.get(b),C):d.set(b,[C]);continue}const I=Xe.entity.type(f);if(!(I==="water"||I==="polymer"))for(A.setSegment(g);A.hasNext;){const S=A.move();f.element=y[S.start],l.addComponent(Ho.getEntryFromLocation(f),m)}}s.throwIfTimedOut()}const h=s.inputStructure.subsetBuilder(!0);for(const _ of s.inputStructure.units){if(_.kind!==Ce.Kind.Atomic)continue;f.unit=_;const{elements:y}=_,v=Ct.transientSegments(_.model.atomicHierarchy.chainAtomSegments,y),A=Ct.transientSegments(_.model.atomicHierarchy.residueAtomSegments,y);for(h.beginUnit(_.id);v.hasNext;){const g=v.move();f.element=y[g.start];const b=Xe.chain.label_asym_id(f),C=Xe.unit.operator_name(f);if(d.has(b)&&d.get(b).indexOf(C)>=0){h.addElementRange(y,g.start,g.end);continue}if(m.hasLabelAsymId(b))for(A.setSegment(g);A.hasNext;){const I=A.move();f.element=y[I.start],m.has(f)&&h.addElementRange(y,I.start,I.end)}}h.commitUnit(),s.throwIfTimedOut()}const p=Xs(s.inputStructure,[h.getStructure(),c]);if(n){const _=new fa(s.inputStructure),y=s.inputStructure.lookup3d;for(const v of p.units){const A=v.conformation,g=v.elements;for(let b=0,C=g.length;b<C;b++){const I=g[b];y.findIntoBuilderIf(A.x(I),A.y(I),A.z(I),t,_,i),_.addToUnit(v.id,I)}s.throwIfTimedOut()}return Ye.Sequence(s.inputStructure,[_.getStructure()])}else return Ye.Sequence(s.inputStructure,[p])}}function E6(e){var t;const n=e.models[0],r=new Set;if(((t=n.sourceData)===null||t===void 0?void 0:t.kind)!=="mmCIF")return r;const{_rowCount:i,asym_id:o}=n.sourceData.data.db.pdbx_molecule;for(let s=0;s<i;s++)r.add(o.value(s));return r}function B6(e){var t,n,r;const i=e.models[0],o=new R6;if(((t=i.sourceData)===null||t===void 0?void 0:t.kind)!=="mmCIF")return o;const s=i.sourceData.data.db.struct_conn,{conn_type_id:c}=s,{ptnr1_label_asym_id:a,ptnr1_label_comp_id:u,ptnr1_label_seq_id:l,ptnr1_symmetry:f,pdbx_ptnr1_label_alt_id:d,pdbx_ptnr1_PDB_ins_code:m}=s,{ptnr2_label_asym_id:h,ptnr2_label_comp_id:p,ptnr2_label_seq_id:_,ptnr2_symmetry:y,pdbx_ptnr2_label_alt_id:v,pdbx_ptnr2_PDB_ins_code:A}=s;for(let g=0;g<s._rowCount;g++){const b=c.value(g);if(b!=="covale"&&b!=="metalc")continue;const C={label_asym_id:a.value(g),label_comp_id:u.value(g),label_seq_id:l.value(g),label_alt_id:d.value(g),ins_code:m.value(g),operator_name:(n=f.value(g))!==null&&n!==void 0?n:"1_555"},I={label_asym_id:h.value(g),label_comp_id:p.value(g),label_seq_id:_.value(g),label_alt_id:v.value(g),ins_code:A.value(g),operator_name:(r=y.value(g))!==null&&r!==void 0?r:"1_555"};o.addEdge(C,I)}return o}class R6{constructor(){this.vertices=new Map,this.edges=new Map}addVertex(t,n){this.vertices.has(n)||(this.vertices.set(n,t),this.edges.set(n,[]))}addEdge(t,n){const r=Ho.getLabel(t),i=Ho.getLabel(n);this.addVertex(t,r),this.addVertex(n,i),Do(this.edges.get(r),i),Do(this.edges.get(i),r)}addComponent(t,n){const r=Ho.getLabel(t);if(!this.vertices.has(r)){n.add(t);return}const i=new Set,o=new Set,s=[r];for(o.add(r),n.add(t);s.length>0;){const c=s.pop();i.add(c);const a=this.vertices.get(c);for(const u of this.edges.get(c)){if(i.has(u)||(s.push(u),o.has(u)))continue;o.add(u);const l=this.vertices.get(u);a.operator_name===l.operator_name?n.add({...l,operator_name:t.operator_name}):n.add(l)}}}}var D6=Object.freeze({__proto__:null,exceptBy:x6,expandProperty:C6,includeConnected:I6,includeSurroundings:b6,intersectBy:A6,querySelection:v6,surroundingLigands:P6,union:S6,wholeResidues:_6});function k6(e,t,n,r,i,o){return t.elementCount===0||n.elementCount===0?!0:t.elementCount<=n.elementCount?ma.check(e,t,n,r,i,o):ma.check(e,n,t,r,i,o)}function T6(e,t,n,r,i){return t.elementCount===0||n.elementCount===0?!0:t.elementCount<=n.elementCount?ha.check(e,t,n,r,i):ha.check(e,n,t,r,i)}var ma;(function(e){let t;(function(c){c[c.BelowMin=0]="BelowMin",c[c.WithinMax=1]="WithinMax",c[c.Miss=2]="Miss"})(t||(t={}));const n=O();function r(c,a,u,l,f,d,m){const{elements:h,conformation:p}=a,_=n;c.element.unit=a;let y=!1;for(let v=0,A=h.length;v<A;v++){const g=h[v];c.element.element=g;const b=Math.max(0,O.distance(u,p.position(g,_))-l-m(c));if(b<f)return t.BelowMin;b<d&&(y=!0)}return y?t.WithinMax:t.Miss}function i(c,a,u,l,f,d,m){const{units:h}=a;let p=!1;for(let _=0,y=h.length;_<y;_++){const v=r(c,h[_],u,l,f,d,m);if(v===t.BelowMin)return t.BelowMin;v===t.WithinMax&&(p=!0)}return p?t.WithinMax:t.Miss}const o=O();function s(c,a,u,l,f,d){if(a.elementCount===0||u.elementCount===0)return 0;const{units:m}=a;let h=!1;c.element.structure=a;for(let p=0,_=m.length;p<_;p++){const y=m[p],{elements:v,conformation:A}=y;c.element.unit=y;for(let g=0,b=v.length;g<b;g++){const C=v[g];c.element.element=C;const I=i(c,u,A.position(C,o),d(c),l,f,d);if(I===t.BelowMin)return!1;I===t.WithinMax&&(h=!0)}}return h}e.check=s})(ma||(ma={}));var ha;(function(e){const t=O();function n(s,c,a,u,l,f){const{elements:d,conformation:m}=c,h=t;s.element.unit=c;for(let p=0,_=d.length;p<_;p++){const y=d[p];if(s.element.element=y,Math.max(0,O.distance(a,m.position(y,h))-u-f(s))<=l)return!0}return!1}function r(s,c,a,u,l,f){const{units:d}=c;for(let m=0,h=d.length;m<h;m++)if(n(s,d[m],a,u,l,f))return!0;return!1}const i=O();function o(s,c,a,u,l){if(c.elementCount===0||a.elementCount===0)return 0;const{units:f}=c;s.element.structure=c;for(let d=0,m=f.length;d<m;d++){const h=f[d];s.element.unit=h;const{elements:p,conformation:_}=h;for(let y=0,v=p.length;y<v;y++){const A=p[y];if(s.element.element=A,r(s,a,_.position(A,i),l(s),u,l))return!0}}return!1}e.check=o})(ha||(ha={}));function N6(e,t){return n=>{const r=e(n),i=Ye.LinearBuilder(n.inputStructure);return n.pushCurrentElement(),Ye.forEach(r,(o,s)=>{n.currentStructure=o,t(n)&&i.add(o),s%100&&n.throwIfTimedOut()}),n.popCurrentStructure(),i.getSelection()}}function O6(e){return t=>{const n=e(t),r=Ye.LinearBuilder(t.inputStructure);if(n.kind==="singletons"){if(n.structure.elementCount>0){const i=n.structure.units[0],o=wt.create([i.getChild(Ee.ofSingleton(i.elements[0]))],{parent:t.inputStructure});r.add(o)}}else n.structures.length>0&&r.add(n.structures[0]);return r.getSelection()}}function pa(e,t,n){const{units:r}=e.currentStructure,i=e.pushCurrentElement();i.structure=e.currentStructure;for(const o of r){i.unit=o;const s=o.elements,c=t;if(c){for(let a=0,u=s.length;a<u;a++)i.element=s[a],n.add(c(e));e.throwIfTimedOut()}}return e.popCurrentElement(),n}function M6(e,t,n){const r=new Set,i=t(e);return e.pushCurrentElement(),Ye.forEach(i,(o,s)=>{e.currentStructure=o,pa(e,n,r),s%10&&e.throwIfTimedOut()}),e.popCurrentElement(),r}function q6(e,t,n){return r=>{const i=e(r),o=M6(r,t,n),s=Ye.LinearBuilder(r.inputStructure);return r.pushCurrentStructure(),Ye.forEach(i,(c,a)=>{r.currentStructure=c;const u=pa(r,n,new Set);gr.isSuperset(o,u)&&s.add(c),a%10&&r.throwIfTimedOut()}),r.popCurrentStructure(),s.getSelection()}}function U6(e,t){return n=>{const r=Ye.unionStructure(t(n)),i=Ye.LinearBuilder(n.inputStructure);return Ye.forEach(e(n),(o,s)=>{xd(r,o)&&i.add(o),s%10&&n.throwIfTimedOut()}),i.getSelection()}}function F6(e){return t=>{const n={queryCtx:t,selection:e.query(t),target:e.target(t),maxRadius:e.maxRadius,minRadius:e.minRadius?Math.max(0,e.minRadius):0,elementRadius:e.elementRadius,invert:!!e.invert};return n.minRadius===0&&typeof e.minRadius>"u"?L6(n):n.minRadius===0?G6(n):H6(n)}}function L6({queryCtx:e,selection:t,target:n,maxRadius:r,invert:i}){const o=Ye.unionStructure(n).lookup3d,s=Ye.LinearBuilder(e.inputStructure),c=O.zero();return Ye.forEach(t,(a,u)=>{const{units:l}=a;let f=!1;for(let d=0,m=l.length;d<m;d++){const h=l[d],{elements:p,conformation:_}=h;for(let y=0,v=p.length;y<v;y++){const A=p[y];if(_.position(A,c),o.check(c[0],c[1],c[2],r+_.r(A))){f=!0;break}}if(f)break}i&&(f=!f),f&&s.add(a),u%10===0&&e.throwIfTimedOut()}),s.getSelection()}function G6({queryCtx:e,selection:t,target:n,maxRadius:r,invert:i,elementRadius:o}){const s=Ye.unionStructure(n),c=Ye.LinearBuilder(e.inputStructure);return e.pushCurrentElement(),Ye.forEach(t,(a,u)=>{let l=T6(e,s,a,r,o);i&&(l=!l),l&&c.add(a),u%10===0&&e.throwIfTimedOut()}),e.popCurrentElement(),c.getSelection()}function H6({queryCtx:e,selection:t,target:n,minRadius:r,maxRadius:i,invert:o,elementRadius:s}){const c=Ye.unionStructure(n),a=Ye.LinearBuilder(e.inputStructure);return e.pushCurrentElement(),Ye.forEach(t,(u,l)=>{let f=k6(e,c,u,r,i,s);o&&(f=!f),f&&a.add(u),l%10===0&&e.throwIfTimedOut()}),e.popCurrentElement(),a.getSelection()}function j6(e,t){const{queryCtx:n,input:r,target:i,disjunct:o}=e,s=n.atomicBond,c=r.interUnitBonds;s.setStructure(r);for(const a of t.units){if(!Ce.isAtomic(a))continue;const u=r.unitMap.get(a.id),{offset:l,b:f,edgeProps:{flags:d,order:m,key:h}}=u.bonds,p=c.getConnectedUnits(a.id),_=p.length,y=a.elements,v=u.elements;for(let A=0,g=y.length;A<g;A++){const b=Ee.indexOf(v,y[A]);s.a.unit=u,s.b.unit=u;for(let C=l[b],I=l[b+1];C<I;C++)if(s.b.element=u.elements[f[C]],!(o&&Ee.has(a.elements,s.b.element))&&i.hasElement(s.b)&&(s.aIndex=b,s.a.element=y[A],s.bIndex=f[C],s.type=d[C],s.order=m[C],s.key=h[C],s.test(n,!0)))return!0;for(let C=0;C<_;C++){const I=p[C],S=r.unitMap.get(I.unitB),P=S.elements,T=I.getEdges(b);for(let D=0,w=T.length;D<w;D++){const E=T[D];if(s.b.unit=S,s.b.element=P[E.indexB],!!i.hasElement(s.b)&&!(o&&t.hasElement(s.b))&&(s.a.unit=u,s.aIndex=b,s.a.element=y[A],s.bIndex=E.indexB,s.type=E.props.flag,s.order=E.props.order,s.key=E.props.key,s.test(n,!0)))return!0}}}}return!1}function V6({query:e,target:t,disjunct:n,invert:r,bondTest:i}){return o=>{const s=t(o);if(Ye.isEmpty(s))return s;const c=e(o);if(Ye.isEmpty(c))return c;const a={queryCtx:o,input:o.inputStructure,disjunct:n,target:Ye.unionStructure(s)},u=Ye.LinearBuilder(o.inputStructure);return o.pushCurrentBond(),o.atomicBond.setTestFn(i),Ye.forEach(c,(l,f)=>{(j6(a,l)||r)&&u.add(l),f%5===0&&o.throwIfTimedOut()}),o.popCurrentBond(),u.getSelection()}}var z6=Object.freeze({__proto__:null,areIntersectedBy:U6,first:O6,getCurrentStructureProperties:pa,isConnectedTo:V6,pick:N6,withSameAtomProperties:q6,within:F6});function K6(e){return e.length===0?Cd:e.length===1?e[0]:t=>{const n=Ye.UniqueBuilder(t.inputStructure);for(let r=0;r<e.length;r++)Ye.forEach(e[r](t),(i,o)=>{n.add(i),r%100&&t.throwIfTimedOut()});return n.getSelection()}}function $6(e){return e.length===0?Cd:e.length===1?e[0]:t=>{const n=[];for(let c=0;c<e.length;c++)n.push(e[c](t));let r=0,i=Ye.structureCount(n[0]);for(let c=1;c<n.length;c++){const a=Ye.structureCount(n[c]);a<i&&(r=c,i=a)}t.throwIfTimedOut();const o=vd(c=>c.hashCode,wt.areUnitIdsAndIndicesEqual);Ye.forEach(n[r],c=>o.add(c));const s=Ye.UniqueBuilder(t.inputStructure);for(let c=0;c<n.length;c++)c!==r&&(Ye.forEach(n[c],a=>{o.has(a)&&s.add(a)}),t.throwIfTimedOut());return s.getSelection()}}var W6=Object.freeze({__proto__:null,intersect:$6,merge:K6});function Y6(e){return e.currentStructure.elementCount}function Z6(e){return t=>{const n=e(t);return Ye.structureCount(n)}}function X6(e){return t=>pa(t,e,new Set)}var Q6=Object.freeze({__proto__:null,atomCount:Y6,countQuery:Z6,propertySet:X6}),jd;(function(e){function t(d){return!!d&&!!d.has}function n(d,m){return h=>d(h)===m}e.eq=n;function r(d,m){return h=>d(h)<m}e.lt=r;function i(d,m){return h=>d(h)<=m}e.lte=i;function o(d,m){return h=>d(h)>m}e.gt=o;function s(d,m){return h=>d(h)>=m}e.gte=s;function c(d){return!0}function a(d){return!1}function u(d,m){if(t(m))return h=>m.has(d(h));{if(m.length===0)return a;const h=new Set;for(let p=0;p<m.length;p++)h.add(m[p]);return p=>h.has(d(p))}}e.inSet=u;function l(...d){switch(d.length){case 0:return c;case 1:return d[0];case 2:{const m=d[0],h=d[1];return p=>m(p)&&h(p)}case 3:{const m=d[0],h=d[1],p=d[2];return _=>m(_)&&h(_)&&p(_)}case 4:{const m=d[0],h=d[1],p=d[2],_=d[3];return y=>m(y)&&h(y)&&p(y)&&_(y)}case 5:{const m=d[0],h=d[1],p=d[2],_=d[3],y=d[4];return v=>m(v)&&h(v)&&p(v)&&_(v)&&y(v)}case 6:{const m=d[0],h=d[1],p=d[2],_=d[3],y=d[4],v=d[5];return A=>m(A)&&h(A)&&p(A)&&_(A)&&y(A)&&v(A)}default:{const m=d.length;return h=>{for(let p=0;p<m;p++)if(!d[p])return!1;return!0}}}}e.and=l;function f(...d){switch(d.length){case 0:return a;case 1:return d[0];case 2:{const m=d[0],h=d[1];return p=>m(p)||h(p)}case 3:{const m=d[0],h=d[1],p=d[2];return _=>m(_)||h(_)||p(_)}case 4:{const m=d[0],h=d[1],p=d[2],_=d[3];return y=>m(y)||h(y)||p(y)||_(y)}case 5:{const m=d[0],h=d[1],p=d[2],_=d[3],y=d[4];return v=>m(v)||h(v)||p(v)||_(v)||y(v)}case 6:{const m=d[0],h=d[1],p=d[2],_=d[3],y=d[4],v=d[5];return A=>m(A)||h(A)||p(A)||_(A)||y(A)||v(A)}default:{const m=d.length;return h=>{for(let p=0;p<m;p++)if(d[p])return!0;return!1}}}}e.or=f})(jd||(jd={}));const Dt={generators:k4,filters:z6,modifiers:D6,combinators:W6,pred:jd,atomset:Q6};class Vd{getFrameAtIndex(t){return this.frames[t]}constructor(t){this.frames=t,this.frameCount=t.length,this.representative=t[0],this.duration=t.length}}function J6(e,t,n){if(!e._rowCount)return[];const r=nP(n),i=[];for(let o=0;o<e._rowCount;o++)i[i.length]=eP(e,t,o,r);return i}function eP(e,t,n,r){const i=e.id.value(n),o=e.details.value(n),s=[],{assembly_id:c,oper_expression:a,asym_id_list:u}=t;for(let l=0,f=t._rowCount;l<f;l++)c.value(l)===i&&(s[s.length]={assemblyId:i,expression:a.value(l),asymIds:u.value(l)});return zd.create(i,o,tP(s,r))}function tP(e,t){return()=>{const n=[];let r=0;for(let i=0;i<e.length;i++){const o=e[i],s=oP(o.expression),c=rP(s),a=iP(t,c,r,o.assemblyId),u=Dt.generators.atoms({chainTest:Dt.pred.and(Dt.pred.eq(l=>Xe.unit.operator_name(l.element),Mt.DefaultName),Dt.pred.inSet(l=>Xe.chain.label_asym_id(l.element),o.asymIds))});n[n.length]={selector:u,operators:a,asymIds:o.asymIds},r+=a.length}return n}}function nP(e){const{id:t,matrix:n,vector:r,_schema:i}=e,o=new Map,s=O();for(let c=0,a=e._rowCount;c<a;c++){const u=dr.toMat4(Ke(),i.matrix.space,n.value(c));dr.toVec3(s,i.vector.space,r.value(c)),Ke.setTranslation(u,s),Ke.setValue(u,3,3,1),o.set(t.value(c),u)}return o}function rP(e){const t=[],n=[];for(let r=0;r<e.length;r++)n[r]="";return z2(e,t,e.length-1,n),t}function z2(e,t,n,r){if(n<0){t[t.length]=r.slice(0);return}const i=e[n],o=i.length;for(let s=0;s<o;s++)r[n]=i[s],z2(e,t,n-1,r)}function iP(e,t,n,r){const i=[];let o=n;for(const s of t){const c=Ke.identity();for(let a=0;a<s.length;a++)Ke.mul(c,c,e.get(s[a]));o++,i[i.length]=Mt.create(`ASM_${o}`,c,{assembly:{id:r,operId:o,operList:s}})}return i}function oP(e){const t=/\(?([^\(\)]+)\)?]*/g,n=[],r=[];let i;for(;i=t.exec(e);)n[n.length]=i[1];return n.forEach(o=>{const s=[];o.split(",").forEach(c=>{const a=c.indexOf("-");if(a>0){const u=parseInt(c.substring(0,a)),l=parseInt(c.substr(a+1));for(let f=u;f<=l;f++)s[s.length]=f.toString()}else s[s.length]=c.trim()}),r[r.length]=s}),r}var Nn;(function(e){e.Descriptor={name:"model_symmetry"},e.Provider=_r.create(e.Descriptor);function t(r){const i=J6(r.pdbx_struct_assembly,r.pdbx_struct_assembly_gen,r.pdbx_struct_oper_list),o=cP(r.symmetry,r.cell),s=sP(r.atom_sites);return{assemblies:i,spacegroup:o,isNonStandardCrystalFrame:s,ncsOperators:uP(r.struct_ncs_oper)}}e.fromData=t;function n(r,i){const o=bi.create("P 1",r,i),s=rr.create(o);return{assemblies:[],spacegroup:s,isNonStandardCrystalFrame:!1}}e.fromCell=n})(Nn||(Nn={}));function sP(e,t){return e._rowCount===0,!1}function aP(e){const t=e.Int_Tables_number.value(0),n=e["space_group_name_H-M"].value(0);return e.Int_Tables_number.isDefined?e["space_group_name_H-M"].isDefined?n:t:n}function cP(e,t){if(e._rowCount===0||t._rowCount===0)return rr.ZeroP1;const n=t.length_a.value(0),r=t.length_b.value(0),i=t.length_c.value(0);if(n===0||r===0||i===0)return rr.ZeroP1;const o=t.angle_alpha.value(0),s=t.angle_beta.value(0),c=t.angle_gamma.value(0);if(o===0||s===0||c===0)return rr.ZeroP1;const a=aP(e),u=bi.create(a,O.create(n,r,i),O.scale(O(),O.create(o,s,c),Math.PI/180));return rr.create(u)}function uP(e){if(e._rowCount===0)return;const{id:t,matrix:n,vector:r}=e,i=mt.struct_ncs_oper.matrix.space,o=mt.struct_ncs_oper.vector.space,s=[];for(let c=0;c<e._rowCount;c++){const a=dr.toMat3(jn(),i,n.value(c)),u=dr.toVec3(O(),o,r.value(c));if(!Mt.checkIfRotationAndTranslation(a,u)||e.code.value(c)==="given"&&!jn.isIdentity(a)&&!O.isZero(u))continue;const l=t.value(c);s[s.length]=Mt.ofRotationAndOffset(`ncs_${l}`,a,u,l)}return s}class zd{get operatorGroups(){return this._operators?this._operators:(this._operators=this.operatorsProvider(),this._operators)}constructor(t,n,r){this.operatorsProvider=r,this.id=t,this.details=n}}(function(e){function t(n,r,i){return new e(n,r,i)}e.create=t})(zd||(zd={}));var Kd;(function(e){e.Default={assemblies:[],spacegroup:rr.ZeroP1,isNonStandardCrystalFrame:!1};function t(r,i){const o=i.toLocaleLowerCase(),s=Nn.Provider.get(r);return s?Fx(s.assemblies,c=>c.id.toLowerCase()===o):void 0}e.findAssembly=t;function n(r){const{cell:i,name:o,num:s}=r.spacegroup,{size:c,anglesInRadians:a}=i,u=c[0].toFixed(2),l=c[1].toFixed(2),f=c[2].toFixed(2),d=li(a[0]).toFixed(2),m=li(a[1]).toFixed(2),h=li(a[2]).toFixed(2),p=[];return p.push(`Unit Cell <b>${o}</b> #${s}`),p.push(`${u}Ã${l}Ã${f} â«`),p.push(`Î±=${d}Â° Î²=${m}Â° Î³=${h}Â°`),p.join(" | ")}e.getUnitcellLabel=n})(Kd||(Kd={}));const lP={HIS:"H",ARG:"R",LYS:"K",ILE:"I",PHE:"F",LEU:"L",TRP:"W",ALA:"A",MET:"M",PRO:"P",CYS:"C",ASN:"N",VAL:"V",GLY:"G",SER:"S",GLN:"Q",TYR:"Y",ASP:"D",GLU:"E",THR:"T",SEC:"U",PYL:"O",HSD:"H",HSE:"H",HSP:"H",LSN:"K",ASPP:"D",GLUP:"E",HID:"H",HIE:"H",HIP:"H",LYN:"K",ASH:"D",GLH:"E"},dP={DA:"A",DC:"C",DG:"G",DT:"T",DU:"U"},fP={A:"A",C:"C",G:"G",T:"T",U:"U"};function $d(e){return lP[e]||"X"}function K2(e){return fP[e]||"X"}function $2(e){return dP[e]||"X"}var jo;(function(e){let t;(function(u){u.Protein="protein",u.RNA="RNA",u.DNA="DNA",u.Generic="generic"})(t=e.Kind||(e.Kind={}));function n(u){const l=u.code.toArray();return(l instanceof Array?l:Array.from(l)).join("")}e.getSequenceString=n;function r(u){for(let l=0,f=Math.min(u.rowCount,10);l<f;l++){const d=u.value(l)||"";if($d(d)!=="X")return t.Protein;if(K2(d)!=="X")return t.RNA;if($2(d)!=="X")return t.DNA}return t.Generic}function i(u,l){let f;switch(u){case t.Protein:f=$d;break;case t.DNA:f=$2;break;case t.RNA:f=K2;break;case t.Generic:f=()=>"X";break;default:qi()}return f}function o(u,l){if(l.rowCount===0)throw new Error("cannot be empty");const f=r(u);return new s(f,u,l)}e.ofResidueNames=o;class s{index(l){return this.indexMap.get(l)}constructor(l,f,d){this.kind=l,this.microHet=new Map;const m=i(l),h=[],p=[],_=[],y=new Map;let v=0;const A=new Map;for(let b=0,C=d.rowCount;b<C;++b){const I=d.value(b);if(A.has(I))y.has(I)?y.get(I).push(f.value(b)):y.set(I,[p[A.get(I)],f.value(b)]);else{A.set(I,v);const S=f.value(b);p[v]=S,_[v]=I,h[v]=m(S),v+=1}}const g=[];for(let b=0,C=v;b<C;++b){const I=y.get(_[b]);if(I){const S=I.map(P=>{const T=m(P);return T==="X"?P:T});g[b]=`(${S.join("|")})`}else g[b]=h[b]==="X"?p[b]:h[b]}this.length=v,this.code=ye.ofStringArray(h),this.compId=ye.ofStringArray(p),this.seqId=ye.ofIntArray(_),this.label=ye.ofStringArray(g),this.microHet=y,this.indexMap=A}}function c(u,l){const f=t.Generic;return new a(f,u,l)}e.ofSequenceRanges=c;class a{index(l){return l-this.minSeqId}constructor(l,f,d){this.kind=l,this.seqIdStart=f,this.seqIdEnd=d,this.microHet=new Map;let m=0,h=Number.MAX_SAFE_INTEGER;for(let _=0,y=this.seqIdStart.rowCount;_<y;_++){const v=this.seqIdStart.value(_),A=this.seqIdEnd.value(_);v<h&&(h=v),m<A&&(m=A)}const p=m-h+1;this.code=ye.ofConst("X",p,ye.Schema.str),this.label=ye.ofConst("",p,ye.Schema.str),this.seqId=ye.ofLambda({value:_=>_+h+1,rowCount:p,schema:ye.Schema.int}),this.compId=ye.ofConst("",p,ye.Schema.str),this.length=p,this.minSeqId=h}}})(jo||(jo={}));var Wd;(function(e){const t={byEntityKey:{},sequences:[]};function n(...c){const a=[],u={};for(let l=0,f=c.length;l<f;++l)a.push(...c[l].sequences),Object.assign(u,c[l].byEntityKey);return{sequences:a,byEntityKey:u}}function r(c,a,u){const l=i(c,a),f=u.isDefined?o(c,u):t;return n(l,f)}e.fromHierarchy=r;function i(c,a){const{label_comp_id:u}=a.atoms,{label_seq_id:l}=a.residues,{chainAtomSegments:f,residueAtomSegments:d}=a,{count:m,offsets:h}=f,p={},_=[];if(m===1&&h[0]===0&&h[1]===0)return{byEntityKey:p,sequences:_};for(let y=0,v=a.chains._rowCount;y<v;y++){const A=a.index.getEntityFromChain(y);if(p[A]!==void 0||c.data.type.value(A)!=="polymer")continue;const g=y;for(y++;y<v&&A===a.index.getEntityFromChain(y)&&c.data.type.value(A)!=="polymer";)y++;y--;const b=d.index[h[g]],C=d.index[h[y+1]-1]+1,I=ye.window(l,b,C),S=[];for(let T=b;T<C;++T)S.push(u.value(d.offsets[T]));const P=ye.ofStringArray(S);p[A]={entityId:c.data.id.value(A),sequence:jo.ofResidueNames(P,I)},_.push(p[A])}return{byEntityKey:p,sequences:_}}e.fromAtomicHierarchy=i;function o(c,a){const u=s(c,a.spheres),l=s(c,a.gaussians);return n(u,l)}e.fromCoarseHierarchy=o;function s(c,a){const{chainElementSegments:u,seq_id_begin:l,seq_id_end:f}=a,{count:d,offsets:m}=u,h={},p=[];if(d===1&&m[0]===0&&m[1]===0)return{byEntityKey:h,sequences:p};for(let _=0,y=d;_<y;_++){const v=a.getEntityFromChain(_);if(h[v]!==void 0)continue;const A=_;for(_++;_<y&&v===a.getEntityFromChain(_);)_++;_--;const g=m[A],b=m[_+1]-1,C=ye.window(l,g,b),I=ye.window(f,g,b);h[v]={entityId:c.data.id.value(v),sequence:jo.ofSequenceRanges(C,I)},p.push(h[v])}return{byEntityKey:h,sequences:p}}e.fromCoarseElements=s})(Wd||(Wd={}));var W2;(function(e){function t(f,d,m){if(!d)return{rowCount:0};if(m&&m[d.id])return m[d.id];const h=d.getElements(f),p={data:h,rowCount:h.elements.length};return m&&(m[d.id]=p),p}e.getCifDataSource=t;function n(f){return new Y2(f)}e.fromAtomMap=n;function r(f){return new Y2(Yd(f))}e.fromAtomArray=r;const i=f=>f.atomicHierarchy.residueAtomSegments;function o(f){return new _a("residue",f,i,Ce.Kind.Atomic)}e.fromResidueMap=o;function s(f){return new _a("residue",Yd(f),i,Ce.Kind.Atomic)}e.fromResidueArray=s;const c=f=>f.atomicHierarchy.chainAtomSegments;function a(f){return new _a("chain",f,c,Ce.Kind.Atomic)}e.fromChainMap=a;function u(f){return new _a("chain",Yd(f),c,Ce.Kind.Atomic)}e.fromChainArray=u;function l(f){return new mP(f)}e.fromEntityMap=l})(W2||(W2={}));function Yd(e){const t=new Map;for(let n=0,r=e.length;n<r;n++)t.set(n,e[n]);return t}class _a{has(t){return this.map.has(t)}get(t){return this.map.get(t)}getStructureElements(t){const n=t.models;if(n.length!==1)throw new Error("Only works on structures with a single model.");const r=new Set,i=t.unitSymmetryGroups,o=[],s=this.segmentGetter(n[0]);for(const c of i){const a=c.units[0];if(a.kind!==this.kind)continue;const u=Ct.transientSegments(s,a.elements);for(;u.hasNext;){const l=u.move();!this.has(l.index)||r.has(l.index)||(r.add(l.index),o[o.length]=lt.create(t,a,a.elements[l.start]))}}return o.sort((c,a)=>c.element-a.element),o}getElements(t){const n=this.segmentGetter(t.model).index,r=this.getStructureElements(t);return{elements:r,property:i=>this.get(n[r[i].element])}}constructor(t,n,r,i){this.level=t,this.map=n,this.segmentGetter=r,this.id=_n.create22(),this.kind=i}}class Y2{has(t){return this.map.has(t)}get(t){return this.map.get(t)}getStructureElements(t){if(t.models.length!==1)throw new Error("Only works on structures with a single model.");const r=new Set,i=t.unitSymmetryGroups,o=[];for(const s of i){const c=s.units[0];if(c.kind!==this.kind)continue;const a=c.elements;for(let u=0,l=a.length;u<l;u++){const f=a[u];!this.has(f)||r.has(f)||(r.add(a[u]),o[o.length]=lt.create(t,c,f))}}return o.sort((s,c)=>s.element-c.element),o}getElements(t){const n=this.getStructureElements(t);return{elements:n,property:r=>this.get(n[r].element)}}constructor(t){this.map=t,this.id=_n.create22(),this.level="atom",this.kind=Ce.Kind.Atomic}}class mP{has(t){return this.map.has(t)}get(t){return this.map.get(t)}getStructureElements(t){const n=t.models;if(n.length!==1)throw new Error("Only works on structures with a single model.");const r=n[0].atomicHierarchy.index,i=new Set,o=t.unitSymmetryGroups,s=[],c=n[0].atomicHierarchy.chainAtomSegments;for(const a of o){const u=a.units[0];if(u.kind!==this.kind)continue;const l=Ct.transientSegments(c,u.elements);for(;l.hasNext;){const f=l.move(),d=r.getEntityFromChain(f.index);!this.has(d)||i.has(d)||(i.add(d),s[s.length]=lt.create(t,u,u.elements[f.start]))}}return s.sort((a,u)=>a.element-u.element),s}getElements(t){const n=this.getStructureElements(t),r=t.model.atomicHierarchy.chainAtomSegments.index,i=t.model.atomicHierarchy.index;return{elements:n,property:o=>this.get(i.getEntityFromChain(r[n[o].element]))}}constructor(t){this.map=t,this.id=_n.create22(),this.level="entity",this.kind=Ce.Kind.Atomic}}var Ci;(function(e){function t(i,o,s,c){i.indices[i.count]=s,i.units[i.count]=o,i.squaredDistances[i.count]=c,i.count++}e.add=t;function n(){return{count:0,indices:[],units:[],squaredDistances:[]}}e.create=n;function r(i,o){for(let s=0;s<o.count;++s)i.indices[s]=o.indices[s],i.units[s]=o.units[s],i.squaredDistances[s]=o.squaredDistances[s];return i.count=o.count,i}e.copy=r})(Ci||(Ci={}));function hP(){return{result:Ci.create(),closeUnitsResult:Pn.create(),unitGroupResult:Pn.create()}}class pP{findUnitIndices(t,n,r,i){return this.unitLookup.find(t,n,r,i)}find(t,n,r,i,o){return this._find(t,n,r,i,o??this.findContext)}_find(t,n,r,i,o){Pn.reset(o.result);const{units:s}=this.structure,c=this.unitLookup.find(t,n,r,i,o.closeUnitsResult);if(c.count===0)return o.result;for(let a=0,u=c.count;a<u;a++){const l=s[c.indices[a]];O.set(this.pivot,t,n,r),l.conformation.operator.isIdentity||O.transformMat4(this.pivot,this.pivot,l.conformation.operator.inverse);const d=l.lookup3d.find(this.pivot[0],this.pivot[1],this.pivot[2],i,o.unitGroupResult);for(let m=0,h=d.count;m<h;m++)Ci.add(o.result,l,d.indices[m],d.squaredDistances[m])}return o.result}nearest(t,n,r,i=1,o){return this._nearest(t,n,r,i,o??this.findContext)}_nearest(t,n,r,i,o){const s=o.result,c=this.heap;Pn.reset(s),c.clear();const{units:a}=this.structure;let u=0;const l=this.unitLookup.nearest(t,n,r,a.length,m=>(u+=a[m].elements.length)>=i,o.closeUnitsResult);if(l.count===0)return s;let f=0,d=-Number.MAX_VALUE;for(let m=0,h=l.count;m<h;m++){const p=l.squaredDistances[m];if(f>=i&&d<p)break;O.set(this.pivot,t,n,r);const _=a[l.indices[m]];_.conformation.operator.isIdentity||O.transformMat4(this.pivot,this.pivot,_.conformation.operator.inverse);const v=_.lookup3d.nearest(this.pivot[0],this.pivot[1],this.pivot[2],i,void 0,o.unitGroupResult);if(v.count!==0){f+=v.count,d=Math.max(d,v.squaredDistances[v.count-1]);for(let A=0,g=v.count;A<g;A++)c.insert(v.squaredDistances[A],{index:v.indices[A],unit:_})}}if(i===1){const m=c.findMinimum();if(m){const{key:h}=m,{unit:p,index:_}=m.value;Ci.add(s,p,_,h)}}else for(;!c.isEmpty()&&s.count<i;){const m=c.extractMinimum(),{key:h}=m,{unit:p,index:_}=m.value;Ci.add(s,p,_,h)}return s}findIntoBuilder(t,n,r,i,o){const{units:s}=this.structure,c=this.unitLookup.find(t,n,r,i);if(c.count!==0)for(let a=0,u=c.count;a<u;a++){const l=s[c.indices[a]];O.set(this.pivot,t,n,r),l.conformation.operator.isIdentity||O.transformMat4(this.pivot,this.pivot,l.conformation.operator.inverse);const d=l.lookup3d.find(this.pivot[0],this.pivot[1],this.pivot[2],i);if(d.count===0)continue;const m=l.elements;o.beginUnit(l.id);for(let h=0,p=d.count;h<p;h++)o.addElement(m[d.indices[h]]);o.commitUnit()}}findIntoBuilderIf(t,n,r,i,o,s){const{units:c}=this.structure,a=this.unitLookup.find(t,n,r,i);if(a.count===0)return;const u=lt.create(this.structure);for(let l=0,f=a.count;l<f;l++){const d=c[a.indices[l]];O.set(this.pivot,t,n,r),d.conformation.operator.isIdentity||O.transformMat4(this.pivot,this.pivot,d.conformation.operator.inverse);const h=d.lookup3d.find(this.pivot[0],this.pivot[1],this.pivot[2],i);if(h.count===0)continue;const p=d.elements;u.unit=d,o.beginUnit(d.id);for(let _=0,y=h.count;_<y;_++)u.element=p[h.indices[_]],s(u)&&o.addElement(u.element);o.commitUnit()}}findIntoBuilderWithRadius(t,n,r,i,o,s,c,a){const{units:u}=this.structure,l=this.unitLookup.find(t,n,r,s);if(l.count===0)return;const f=lt.create(this.structure),d=i+o+s;for(let m=0,h=l.count;m<h;m++){const p=u[l.indices[m]];O.set(this.pivot,t,n,r),p.conformation.operator.isIdentity||O.transformMat4(this.pivot,this.pivot,p.conformation.operator.inverse);const y=p.lookup3d.find(this.pivot[0],this.pivot[1],this.pivot[2],d);if(y.count===0)continue;const v=p.elements;f.unit=p,a.beginUnit(p.id);for(let A=0,g=y.count;A<g;A++){f.element=v[y.indices[A]];const b=c(f);Math.sqrt(y.squaredDistances[A])-i-b>s||a.addElement(v[y.indices[A]])}a.commitUnit()}}check(t,n,r,i){const{units:o}=this.structure,s=this.unitLookup.find(t,n,r,i);if(s.count===0)return!1;for(let c=0,a=s.count;c<a;c++){const u=o[s.indices[c]];if(O.set(this.pivot,t,n,r),u.conformation.operator.isIdentity||O.transformMat4(this.pivot,this.pivot,u.conformation.operator.inverse),u.lookup3d.check(this.pivot[0],this.pivot[1],this.pivot[2],i))return!0}return!1}approxNearest(t,n,r,i,o){return this._approxNearest(t,n,r,i,o??this.findContext)}_approxNearest(t,n,r,i,o){Pn.reset(o.result);const{units:s}=this.structure,c=this.unitLookup.find(t,n,r,i,o.closeUnitsResult);if(c.count===0)return o.result;let a=Number.MAX_VALUE;for(let u=0,l=c.count;u<l;u++){const f=s[c.indices[u]];O.set(this.pivot,t,n,r),f.conformation.operator.isIdentity||O.transformMat4(this.pivot,this.pivot,f.conformation.operator.inverse);const m=f.lookup3d.approxNearest(this.pivot[0],this.pivot[1],this.pivot[2],i,o.unitGroupResult);for(let h=0,p=m.count;h<p;h++)m.squaredDistances[h]<a&&(Ci.add(o.result,f,m.indices[h],m.squaredDistances[h]),a=m.squaredDistances[h])}return o.result}get boundary(){return this.structure.boundary}constructor(t){this.structure=t,this.pivot=O(),this.heap=new wy,this.findContext=hP();const{units:n,boundary:r}=t,i=n.length,o=new Float32Array(i),s=new Float32Array(i),c=new Float32Array(i),a=new Float32Array(i),u=O();for(let f=0;f<i;f++){const d=n[f],m=d.boundary.sphere;O.transformMat4(u,m.center,d.conformation.operator.matrix),o[f]=u[0],s[f]=u[1],c[f]=u[2],a[f]=m.radius}const l={x:o,y:s,z:c,radius:a,indices:Fe.ofBounds(0,i)};this.unitLookup=Ys(l,r)}}class _P{addToUnit(t,n){const r=this.unitMap.get(t);r?r[r.length]=n:(this.unitMap.set(t,[n]),this.ids[this.ids.length]=t),this.elementCount++}beginUnit(t){this.parentId=t,this.currentUnit=this.currentUnit.length>0?[]:this.currentUnit}addElement(t){this.currentUnit[this.currentUnit.length]=t,this.elementCount++}addElementRange(t,n,r){for(let i=n;i<r;i++)this.currentUnit[this.currentUnit.length]=t[i],this.elementCount++}commitUnit(){this.currentUnit.length!==0&&(this.ids[this.ids.length]=this.parentId,this.unitMap.set(this.parentId,this.currentUnit),this.parentId=-1)}setUnit(t,n){this.ids[this.ids.length]=t,this.unitMap.set(t,n),this.elementCount+=n.length}_getStructure(t){if(this.isEmpty)return wt.Empty;const n=[];Jn(this.ids);const r=Si.UnitEquivalenceBuilder();for(let i=0,o=this.ids.length;i<o;i++){const s=this.ids[i],c=this.parent.unitMap.get(s);let a=this.unitMap.get(s),u=!1;t&&(this.isSorted||Jn(a),a=Ee.deduplicate(Ee.ofSortedArray(this.currentUnit)),u=!0);const l=a.length;if(a.length===c.elements.length){n[n.length]=c,r.add(c.id,c);continue}!this.isSorted&&!u&&l>1&&Jn(a);let f=c.getChild(Ee.ofSortedArray(a));const d=r.add(f.id,f);f!==d&&(f=d.applyOperator(f.id,f.conformation.operator,!0)),n[n.length]=f}return wt.create(n,{parent:this.parent})}getStructure(){return this._getStructure(!1)}getStructureDeduplicate(){return this._getStructure(!0)}setSingletonLocation(t){const n=this.ids[0];t.unit=this.parent.unitMap.get(n),t.element=this.unitMap.get(n)[0]}get isEmpty(){return this.elementCount===0}constructor(t,n){this.parent=t,this.isSorted=n,this.ids=[],this.unitMap=Kr.Mutable(),this.parentId=-1,this.currentUnit=[],this.elementCount=0}}function Z2(e,t){let n=1;for(;t--;)n*=e--;return n}function yP(e,t){return t>e?0:Z2(e,t)/Z2(t,t)}function gP(e){const t=e&-e,n=e+t,i=((n&-n)/t>>1)-1;return n|i}class bP{move(){if(this.hasNext){let t=0,n=0,r=this.index;for(;r;r>>>=1,t++)r&1&&(this.value[n++]=this.array[t]);this.index=gP(this.index),this.hasNext=this.index<this.maxIndex}return this.value}constructor(t,n){this.array=t,this.hasNext=!1,this.index=(1<<n)-1,this.size=yP(t.length,n),this.maxIndex=1<<t.length,this.value=new Array(n),this.hasNext=n>0&&n<=t.length}}function X2(e,t){const n=[],r=new bP(e,t);for(;r.hasNext;)n.push(r.move().slice());return n}const Ii=[],vP={links:Ii,terminalLinks:Ii,elements:Ii,partialElements:Ii,getElementIndices:()=>Ii,getLinkIndices:()=>Ii,getTerminalLinkIndices:()=>Ii},ln=Zi("C"),Vo=Zi("O"),AP=[Zn.elementFingerprint([ln,ln,ln,Vo]),Zn.elementFingerprint([ln,ln,ln,ln,Vo]),Zn.elementFingerprint([ln,ln,ln,ln,ln,Vo]),Zn.elementFingerprint([ln,ln,ln,ln,ln,ln,Vo])];function xP(e,t){let n=-1,r=-1,i=-1,o=-1;const{elements:s}=e,{type_symbol:c,label_atom_id:a}=e.model.atomicHierarchy.atoms,{b:u,offset:l}=e.bonds;for(let f=0,d=t.length;f<d;++f){const m=s[t[f]];if(c.value(m)!==ln)continue;let h=0,p=0;for(let _=l[t[f]],y=l[t[f]+1];_<y;++_){const v=s[u[_]],A=c.value(v);A===Vo?++h:A===ln&&++p}if(h===2){n=m;break}else h===1&&p===1?r=m:a.value(m).startsWith("C1")?i=m:o=m}return n!==-1?n:r!==-1?r:i!==-1?i:o!==-1?o:s[t[0]]}function SP(e,t){const{elements:n}=e,{label_alt_id:r}=e.model.atomicHierarchy.atoms;return r.value(n[t])}function CP(e,t,n,r){const i=t.conformation;return O.normalize(e,O.sub(e,r,i.position(n,e))),e}function Q2(e,t){const{elements:n}=e,{label_atom_id:r}=e.model.atomicHierarchy.atoms;return r.value(n[t])}function IP(e,t){if(!t||!t.length)return;const{unit:n,all:r}=e,i=new Set,o=X2(M_(new Array(t.length)),2);for(let s=0,c=o.length;s<c;++s){const a=o[s],u=r[t[a[0]]],l=r[t[a[1]]];Ee.areIntersecting(u,l)&&Zn.getAltId(n,u)===Zn.getAltId(n,l)&&(i.add(t[a[0]]),i.add(t[a[1]]))}if(i.size){const s=[];for(let c=0,a=t.length;c<a;++c)i.has(t[c])||s.push(t[c]);return s}else return t}function wP(e,t){return t.properties.saccharideComponentMap.get(e)}function PP(e){if(e.models.reduce((d,m)=>d+m.properties.saccharideComponentMap.size,0)===0)return vP;const t=[],n=[],r=[],i=[],o=new Map;function s(d,m,h){return`${d}|${m}|${h}`}function c(d,m){o.has(d)?o.get(d).push(m):o.set(d,[m])}function a(d,m){O.sub(r[d].geometry.direction,r[m].geometry.center,r[d].geometry.center),O.normalize(r[d].geometry.direction,r[d].geometry.direction)}const u=O();function l(d,m,h){const p=h.conformation,_=r[d].geometry;O.sub(_.direction,p.position(h.elements[m],u),_.center),O.normalize(_.direction,_.direction)}for(let d=0,m=e.units.length;d<m;++d){const h=e.units[d];if(!Ce.isAtomic(h))continue;const{model:p,rings:_}=h,{chainAtomSegments:y,residueAtomSegments:v,atoms:A}=p.atomicHierarchy,{label_comp_id:g}=A,b=Ct.transientSegments(y,h.elements),C=Ct.transientSegments(v,h.elements);let I;for(;b.hasNext;)for(C.setSegment(b.move());C.hasNext;){const{index:S}=C.move(),P=wP(g.value(v.offsets[S]),p);if(!P)continue;I||(I=oa.byFingerprintAndResidue(_,AP));const T=IP(_,I.get(S));if(!T||!T.length){i.push({unit:h,residueIndex:S,component:P});continue}const D=[];for(let E=0,k=T.length;E<k;++E){const F=_.all[T[E]],V=xP(h,F),de=Nr.calculateMomentsAxes(_2(h,F)),W=Nr.calculateNormalizedAxes(de),J=O.copy(O(),W.origin),le=O.copy(O(),W.dirC),K=CP(O(),h,V,J);O.orthogonalize(K,le,K);const ae=Zn.getAltId(h,F),me=r.length;D.push(me),c(s(S,h.id,ae),me),ae&&c(s(S,h.id,""),me),r.push({geometry:{center:J,normal:le,direction:K},component:P,ringIndex:T[E],altId:ae,unit:h,residueIndex:S})}const w=X2(M_(new Array(T.length)),2);for(let E=0,k=w.length;E<k;++E){const F=w[E],V=_.all[T[F[0]]],de=_.all[T[F[1]]];if(pr.areVertexSetsConnected(h.bonds,V,de,3)){const W=D[F[0]],J=D[F[1]];r[W].altId===r[J].altId&&(a(W,J),a(J,W),t.push({carbohydrateIndexA:W,carbohydrateIndexB:J}),t.push({carbohydrateIndexA:J,carbohydrateIndexB:W}))}}}}function f(d,m){return o.get(s(d.getResidueIndex(m),d.id,SP(d,m)))||[]}for(let d=0,m=r.length;d<m;++d){const h=r[d],{unit:p}=h;for(let _=d+1;_<m;++_){const y=r[_];if(p!==y.unit||h.residueIndex===y.residueIndex)continue;const v=p.rings.all[h.ringIndex],A=p.rings.all[y.ringIndex];pr.areVertexSetsConnected(p.bonds,v,A,3)&&(a(d,_),a(_,d),t.push({carbohydrateIndexA:d,carbohydrateIndexB:_}),t.push({carbohydrateIndexA:_,carbohydrateIndexB:d}))}}for(let d=0,m=e.units.length;d<m;++d){const h=e.units[d];Ce.isAtomic(h)&&e.interUnitBonds.getConnectedUnits(h.id).forEach(p=>{p.connectedIndices.forEach(_=>{p.getEdges(_).forEach(({props:y,indexB:v})=>{if(!pt.isCovalent(y.flag))return;const A=e.unitMap.get(p.unitA),g=e.unitMap.get(p.unitB),b=f(A,_),C=f(g,v);if(b.length>0&&C.length>0){const I=b.length,S=C.length;for(let P=0,T=Math.max(I,S);P<T;++P){const D=b[Math.min(P,I-1)],w=C[Math.min(P,S-1)],E=Q2(A,_);(E.startsWith("O1")||E.startsWith("C1"))&&a(D,w),t.push({carbohydrateIndexA:D,carbohydrateIndexB:w})}}else if(C.length===0)for(const I of b){const S=Q2(A,_);(S.startsWith("O1")||S.startsWith("C1"))&&l(I,v,g),n.push({carbohydrateIndex:I,elementIndex:v,elementUnit:g,fromCarbohydrate:!0})}else if(b.length===0)for(const I of C)n.push({carbohydrateIndex:I,elementIndex:_,elementUnit:A,fromCarbohydrate:!1})})})})}return{links:t,terminalLinks:n,elements:r,partialElements:i,...EP(r,t,n)}}function EP(e,t,n){function r(f,d){return Un(f.id,d)}function i(f,d,m){const h=[],p=f.get(r(d,m));if(p!==void 0)for(const _ of p)Do(h,_);return h}const o=new Map;for(let f=0,d=e.length;f<d;++f){const{unit:m,ringIndex:h}=e[f],p=m.rings.all[h];for(let _=0,y=p.length;_<y;++_){const v=r(m,m.elements[p[_]]),A=o.get(v);A===void 0?o.set(v,[f]):A.push(f)}}function s(f,d){return i(o,f,d)}const c=new Map;for(let f=0,d=t.length;f<d;++f){const m=t[f],{unit:h,ringIndex:p}=e[m.carbohydrateIndexA],_=h.rings.all[p];for(let y=0,v=_.length;y<v;++y){const A=r(h,h.elements[_[y]]),g=c.get(A);g===void 0?c.set(A,[f]):g.push(f)}}function a(f,d){return i(c,f,d)}const u=new Map;for(let f=0,d=n.length;f<d;++f){const{fromCarbohydrate:m,carbohydrateIndex:h,elementUnit:p,elementIndex:_}=n[f];if(m){const{unit:y,ringIndex:v}=e[h],A=y.rings.all[v];for(let g=0,b=A.length;g<b;++g){const C=r(y,y.elements[A[g]]),I=u.get(C);I===void 0?u.set(C,[f]):I.push(f)}}else{const y=r(p,p.elements[_]),v=u.get(y);v===void 0?u.set(y,[f]):v.push(f)}}function l(f,d){return i(u,f,d)}return{getElementIndices:s,getLinkIndices:a,getTerminalLinkIndices:l}}const ya=Sn(),BP=new Fo("14"),RP=new Fo("98");function DP(e){return e>500?BP:RP}function kP(e){const{units:t}=e,n=DP(t.length);n.reset();for(let r=0,i=t.length;r<i;r++){const o=t[r],s=o.boundary,c=o.conformation.operator;c.isIdentity?n.includeSphere(s.sphere):(Sn.transform(ya,s.sphere,c.matrix),n.includeSphere(ya))}n.finishedIncludeStep();for(let r=0,i=t.length;r<i;r++){const o=t[r],s=o.boundary,c=o.conformation.operator;c.isIdentity?n.radiusSphere(s.sphere):(Sn.transform(ya,s.sphere,c.matrix),n.radiusSphere(ya))}return{box:n.getBox(),sphere:n.getSphere()}}function TP(e){const{units:t,elementCount:n,unitIndexMap:r}=e,i=new Uint32Array(t.length),o=new Uint32Array(n),s=new Uint32Array(n);for(let c=0,a=0,u=t.length;c<u;++c){i[c]=a;const{elements:l}=t[c];for(let f=0,d=l.length;f<d;++f){const m=a+f;o[m]=c,s[m]=l[f]}a+=l.length}return{cumulativeUnitElementCount:i,unitIndices:o,elementIndices:s,getSerialIndex:(c,a)=>i[r.get(c.id)]+Fe.indexOf(c.elements,a)}}function NP(e){let t=0;const n=[];for(const a of e.unitSymmetryGroups){n.push(t);const u=a.units[0];Ce.isAtomic(u)&&(t+=u.bonds.edgeCount*2*a.units.length)}const r=new Uint32Array(t),i=new Uint32Array(t),o=new Uint32Array(t);let s=0,c=0;for(const a of e.unitSymmetryGroups){const u=a.units[0];if(Ce.isAtomic(u)){const l=u.bonds.edgeCount*2;for(let f=0,d=a.units.length;f<d;++f)for(let m=0,h=l;m<h;++m)r[s]=c,i[s]=m,o[s]=f,s+=1}c+=1}return{bondCount:t,unitIndex:r,unitEdgeIndex:i,unitGroupIndex:o,unitGroupOffset:n}}class wt{subsetBuilder(t){return new _P(this,t)}get elementCount(){return this.state.elementCount}get bondCount(){return this.state.bondCount===-1&&(this.state.bondCount=this.interUnitBonds.edgeCount/2+Td.getIntraUnitBondCount(this)),this.state.bondCount}get hasCustomProperties(){return!!this.state.customProps&&this.state.customProps.all.length>0}get customPropertyDescriptors(){return this.state.customProps||(this.state.customProps=new Gs),this.state.customProps}get currentPropertyData(){return this.state.propertyData||(this.state.propertyData=Object.create(null)),this.state.propertyData}get inheritedPropertyData(){return this.parent?this.parent.currentPropertyData:this.currentPropertyData}get polymerResidueCount(){return this.state.polymerResidueCount===-1&&(this.state.polymerResidueCount=HP(this)),this.state.polymerResidueCount}get polymerGapCount(){return this.state.polymerGapCount===-1&&(this.state.polymerGapCount=jP(this)),this.state.polymerGapCount}get polymerUnitCount(){return this.state.polymerUnitCount===-1&&(this.state.polymerUnitCount=VP(this)),this.state.polymerUnitCount}get uniqueElementCount(){return this.state.uniqueElementCount===-1&&(this.state.uniqueElementCount=GP(this)),this.state.uniqueElementCount}get atomicResidueCount(){return this.state.atomicResidueCount===-1&&(this.state.atomicResidueCount=zP(this)),this.state.atomicResidueCount}get isCoarseGrained(){return this.models.some(t=>Lt.isCoarseGrained(t))}get isEmpty(){return this.units.length===0}get hashCode(){return this.state.hashCode!==-1?this.state.hashCode:this.computeHash()}get transformHash(){return this.state.transformHash!==-1?this.state.transformHash:(this.state.transformHash=Vi(this.units.map(t=>t.id)),this.state.transformHash)}computeHash(){let t=23;for(let n=0,r=this.units.length;n<r;n++){const i=this.units[n];t=31*t+i.id|0,t=31*t+Ee.hashCode(i.elements)|0}return t=31*t+this.elementCount|0,t=Ox(t),t===-1&&(t=0),this.state.hashCode=t,t}elementLocations(){return new wt.ElementLocationIterator(this)}get root(){var t;return(t=this.state.parent)!==null&&t!==void 0?t:this}get parent(){return this.state.parent}get coordinateSystem(){return this.state.coordinateSystem}get label(){return this.state.label}get boundary(){return this.state.boundary?this.state.boundary:(this.state.boundary=kP(this),this.state.boundary)}get lookup3d(){return this.state.lookup3d?this.state.lookup3d:(this.state.lookup3d=new pP(this),this.state.lookup3d)}get interUnitBonds(){return this.state.interUnitBonds?this.state.interUnitBonds:(this.parent&&this.state.dynamicBonds===this.parent.state.dynamicBonds&&this.parent.state.interUnitBonds&&this.parent.state.interUnitBonds.edgeCount===0?this.state.interUnitBonds=new Ji(new Map):this.state.interUnitBonds=DI(this,{ignoreWater:!this.dynamicBonds,ignoreIon:!this.dynamicBonds,validUnit:this.state.interBondsValidUnit,validUnitPair:this.state.interBondsValidUnitPair}),this.state.interUnitBonds)}get dynamicBonds(){return this.state.dynamicBonds}get interBondsValidUnit(){return this.state.interBondsValidUnit}get interBondsValidUnitPair(){return this.state.interBondsValidUnitPair}get unitSymmetryGroups(){return this.state.unitSymmetryGroups?this.state.unitSymmetryGroups:(this.state.unitSymmetryGroups=Si.computeTransformGroups(this),this.state.unitSymmetryGroups)}get unitSymmetryGroupsIndexMap(){return this.state.unitSymmetryGroupsIndexMap?this.state.unitSymmetryGroupsIndexMap:(this.state.unitSymmetryGroupsIndexMap=Ce.SymmetryGroup.getUnitSymmetryGroupsIndexMap(this.unitSymmetryGroups),this.state.unitSymmetryGroupsIndexMap)}get carbohydrates(){return this.state.carbohydrates?this.state.carbohydrates:(this.state.carbohydrates=PP(this),this.state.carbohydrates)}get models(){return this.state.models?this.state.models:(this.state.models=MP(this),this.state.models)}get uniqueResidueNames(){return this.state.uniqueResidueNames||(this.state.uniqueResidueNames=qP(this))}get uniqueElementSymbols(){return this.state.uniqueElementSymbols||(this.state.uniqueElementSymbols=UP(this))}get entityIndices(){return this.state.entityIndices||(this.state.entityIndices=FP(this))}get uniqueAtomicResidueIndices(){return this.state.uniqueAtomicResidueIndices||(this.state.uniqueAtomicResidueIndices=LP(this))}get isAtomic(){for(const t of this.units)if(!Ce.isAtomic(t))return!1;return!0}get hasAtomic(){for(const t of this.units)if(Ce.isAtomic(t))return!0;return!1}get isCoarse(){for(const t of this.units)if(!Ce.isCoarse(t))return!1;return!0}get hasCoarse(){for(const t of this.units)if(Ce.isCoarse(t))return!0;return!1}get serialMapping(){return this.state.serialMapping||(this.state.serialMapping=TP(this))}get intraUnitBondMapping(){return this.state.intraUnitBondMapping||(this.state.intraUnitBondMapping=NP(this))}get model(){if(this.state.model)return this.state.model;if(this.state.representativeModel)return this.state.representativeModel;if(this.state.masterModel)return this.state.masterModel;const t=this.models;if(t.length>1)throw new Error("The structure is based on multiple models and has neither a master- nor a representative-model.");return this.state.model=t[0],this.state.model}get masterModel(){return this.state.masterModel}get representativeModel(){return this.state.representativeModel}hasElement(t){return this.unitMap.has(t.unit.id)?Ee.has(this.unitMap.get(t.unit.id).elements,t.element):!1}getModelIndex(t){return this.models.indexOf(t)}remapModel(t){const{dynamicBonds:n,interUnitBonds:r,parent:i}=this.state,o=[];for(const s of this.unitSymmetryGroups){const c=s.units[0].remapModel(t,n);o.push(c);for(let a=1,u=s.units.length;a<u;++a){const l=s.units[a];o.push(l.remapModel(t,n,c.props))}}return wt.create(o,{parent:i?.remapModel(t),label:this.label,interUnitBonds:n?void 0:r,dynamicBonds:n,interBondsValidUnit:this.state.interBondsValidUnit,interBondsValidUnitPair:this.state.interBondsValidUnitPair,coordinateSystem:this.state.coordinateSystem,masterModel:this.state.masterModel,representativeModel:this.state.representativeModel})}asParent(){if(this._proxy)return this._proxy;if(this.parent){const t=this.parent.coordinateSystem.isIdentity?this.parent:wt.transform(this.parent,this.parent.coordinateSystem.inverse),n=this.coordinateSystem.isIdentity?t:wt.transform(t,this.coordinateSystem.matrix);this._proxy=new wt(n.units,n.unitMap,n.unitIndexMap,{...n.state,dynamicBonds:this.dynamicBonds},{child:this,target:this.parent})}else this._proxy=this;return this._proxy}get child(){return this._child}get target(){var t;return(t=this._target)!==null&&t!==void 0?t:this}constructor(t,n,r,i,o){this.units=t,this.unitMap=n,this.unitIndexMap=r,this.state=i,this._child=o?.child,this._target=o?.target,this._proxy=void 0}}function OP(e,t,n){return e[t].id-e[n].id}function MP(e){const{units:t}=e,n=zt.create();for(const r of t)zt.add(n,r.model.id,r.model);return n.array}function qP(e){const{microheterogeneityCompIds:t}=Xe.residue,n=new Set,r=lt.create(e);for(const i of e.unitSymmetryGroups){const o=i.units[0];if(!Ce.isAtomic(o))continue;const s=Ct.transientSegments(o.model.atomicHierarchy.residueAtomSegments,o.elements);for(r.unit=o;s.hasNext;){const c=s.move();r.element=o.elements[c.start];const a=t(r);for(const u of a)n.add(u)}}return n}function UP(e){const t=Xe.atom.type_symbol,n=new Set,r=lt.create(e);for(const i of e.unitSymmetryGroups){const o=i.units[0];if(Ce.isAtomic(o)){r.unit=o;for(let s=0,c=o.elements.length;s<c;++s)r.element=o.elements[s],n.add(t(r))}}return n}function FP(e){const{units:t}=e,n=lt.create(e),r=zt.create();for(const i of t){const o=i.kind===Ce.Kind.Atomic?Xe.entity.key:Xe.coarse.entityKey;n.unit=i;const s=i.elements,c=Ct.transientSegments(i.model.atomicHierarchy.chainAtomSegments,s);for(;c.hasNext;){const a=c.move();n.element=s[a.start];const u=o(n);zt.add(r,u,u)}}return Jn(r.array),r.array}function LP(e){const t=new Map,n=[],r=e.unitSymmetryGroups;for(const o of r){const s=o.units[0];if(!Ce.isAtomic(s))continue;let c;t.has(s.model.id)?c=t.get(s.model.id):(c=zt.create(),n.push(s.model.id),t.set(s.model.id,c));const a=Ct.transientSegments(s.model.atomicHierarchy.residueAtomSegments,s.elements);for(;a.hasNext;){const u=a.move();zt.add(c,u.index,u.index)}}const i=new Map;for(const o of n){const s=t.get(o).array;Jn(s),i.set(o,s)}return i}function GP(e){const{unitSymmetryGroups:t}=e;let n=0;for(let r=0,i=t.length;r<i;r++)n+=t[r].elements.length;return n}function HP(e){const{units:t}=e;let n=0;for(let r=0,i=t.length;r<i;r++)n+=t[r].polymerElements.length;return n}function jP(e){const{units:t}=e;let n=0;for(let r=0,i=t.length;r<i;r++)n+=t[r].gapElements.length/2;return n}function VP(e){const{units:t}=e;let n=0;for(let r=0,i=t.length;r<i;r++)t[r].polymerElements.length>0&&(n+=1);return n}function zP(e){const{units:t}=e;let n=0;for(let r=0,i=t.length;r<i;r++){const o=t[r];if(!Ce.isAtomic(o))continue;const{elements:s,residueIndex:c}=o;let a=-1,u=-1;for(let l=0,f=s.length;l<f;++l)a=c[s[l]],a!==u&&(n+=1,u=a)}return n}(function(e){e.Empty=a([]);function t(te){return{kind:"structure-loci",structure:te}}e.Loci=t;function n(te){const ce=[];for(const M of te.units)ce.push({unit:M,indices:Ae.ofBounds(0,M.elements.length)});return On(te,ce)}e.toStructureElementLoci=n;function r(te,ce){return Ye.toLociWithSourceUnits(Ye.Singletons(te,ce))}e.toSubStructureElementLoci=r;function i(te){return!!te&&te.kind==="structure-loci"}e.isLoci=i;function o(te,ce){return te.structure===ce.structure}e.areLociEqual=o;function s(te){return te.structure.isEmpty}e.isLociEmpty=s;function c(te,ce){return ce===te.structure?te:t(ce)}e.remapLoci=c;function a(te,ce={}){const M=Kr.Mutable(),B=Kr.Mutable();let j=0,ne=!0,G=te.length>0?te[0].id:0;for(let Y=0,ie=te.length;Y<ie;Y++){const oe=te[Y];M.set(oe.id,oe),j+=oe.elements.length,oe.id<G&&(ne=!1),G=oe.id}ne||i_(te,0,te.length,OP,fi);for(let Y=0,ie=te.length;Y<ie;Y++)B.set(te[Y].id,Y);const $={hashCode:-1,transformHash:-1,elementCount:j,bondCount:-1,uniqueElementCount:-1,atomicResidueCount:-1,polymerResidueCount:-1,polymerGapCount:-1,polymerUnitCount:-1,dynamicBonds:!1,coordinateSystem:Mt.Default,label:""};return ce.parent&&($.parent=ce.parent.parent||ce.parent),ce.interUnitBonds&&($.interUnitBonds=ce.interUnitBonds),ce.interBondsValidUnit?$.interBondsValidUnit=ce.interBondsValidUnit:ce.parent&&($.interBondsValidUnit=ce.parent.interBondsValidUnit),ce.interBondsValidUnitPair?$.interBondsValidUnitPair=ce.interBondsValidUnitPair:ce.parent&&($.interBondsValidUnitPair=ce.parent.interBondsValidUnitPair),ce.dynamicBonds?$.dynamicBonds=ce.dynamicBonds:ce.parent&&($.dynamicBonds=ce.parent.dynamicBonds),ce.coordinateSystem?$.coordinateSystem=ce.coordinateSystem:ce.parent&&($.coordinateSystem=ce.parent.coordinateSystem),ce.label?$.label=ce.label:ce.parent&&($.label=ce.parent.label),ce.masterModel?$.masterModel=ce.masterModel:ce.parent&&($.masterModel=ce.parent.masterModel),ce.representativeModel?$.representativeModel=ce.representativeModel:ce.parent&&($.representativeModel=ce.parent.representativeModel),new e(te,M,B,$)}e.create=a;async function u(te,ce){if(te.frameCount===0)return e.Empty;const M=[];let B,j=0;for(let ne=0,G=te.frameCount;ne<G;++ne){const $=await rn.resolveInContext(te.getFrameAtIndex(ne),ce);B||(B=$);const Y=l($);for(let ie=0,oe=Y.units.length;ie<oe;++ie){const pe=Y.units[ie],L=pe.invariantId+j,q=pe.chainGroupId+j,H=Ce.create(M.length,L,q,pe.traits,pe.kind,pe.model,pe.conformation.operator,pe.elements);M.push(H)}j=M.length}return a(M,{representativeModel:B,label:B.label})}e.ofTrajectory=u;function l(te,ce={}){const M=te.atomicHierarchy.chainAtomSegments,{index:B}=te.atomicHierarchy,{auth_asym_id:j}=te.atomicHierarchy.chains,{atomicChainOperatorMappinng:ne}=te,G=new h({label:te.label,...ce});for(let Y=0;Y<M.count;Y++){const ie=ne.get(Y)||Mt.Default,oe=M.offsets[Y];let pe=!1,L=!1;if(f(te,Y))for(L=!0;Y+1<M.count&&f(te,Y+1);){const Z=ne.get(Y),re=ne.get(Y+1);if(Z!==re)break;pe=!0,Y++}else for(;Y+1<M.count&&M.offsets[Y+1]-M.offsets[Y]===1&&M.offsets[Y+2]-M.offsets[Y+1]===1;){const Z=B.getEntityFromChain(Y),re=B.getEntityFromChain(Y+1);if(Z!==re)break;const Re=j.value(Y),qe=j.value(Y+1);if(Re!==qe)break;const xe=ne.get(Y),be=ne.get(Y+1);if(xe!==be)break;pe=!0,Y++}const q=Ee.ofBounds(oe,M.offsets[Y+1]);let H=Ce.Trait.None;pe&&(H|=Ce.Trait.MultiChain),L&&(H|=Ce.Trait.Water),G.addUnit(Ce.Kind.Atomic,te,ie,q,H)}const $=te.coarseHierarchy;return $.isDefined&&($.spheres.count>0&&d(G,te,te.coarseHierarchy.spheres,Ce.Kind.Spheres),$.gaussians.count>0&&d(G,te,te.coarseHierarchy.gaussians,Ce.Kind.Gaussians)),G.getStructure()}e.ofModel=l;function f(te,ce){const M=te.atomicHierarchy.index.getEntityFromChain(ce);return te.entities.data.type.value(M)==="water"}function d(te,ce,M,B){const{chainElementSegments:j}=M;for(let ne=0;ne<j.count;ne++){const G=Ee.ofBounds(j.offsets[ne],j.offsets[ne+1]);te.addUnit(B,ce,Mt.Default,G,Ce.Trait.None)}}function m(te,ce){if(Ke.isIdentity(ce))return te;if(!Ke.isRotationAndTranslation(ce,Mt.RotationTranslationEpsilon))throw new Error("Only rotation/translation combination can be applied.");const M=[];for(const ne of te.units){const G=ne.conformation.operator,$=Mt.create(G.name,ce,G);M.push(ne.applyOperator(ne.id,$))}const B=te.coordinateSystem,j=Mt.compose(Mt.create(B.name,ce,B),B);return a(M,{parent:te,coordinateSystem:j})}e.transform=m;class h{beginChainGroup(){this.chainGroupId++,this.inChainGroup=!0}endChainGroup(){this.inChainGroup=!1}addUnit(ce,M,B,j,ne,G){G===void 0&&(G=this.invariantId());const $=this.inChainGroup?this.chainGroupId:++this.chainGroupId,Y=Ce.create(this.units.length,G,$,ne,ce,M,B,j);return this.add(Y)}copyUnit(ce,M){let B=M?.invariantId;B===void 0&&(B=this.invariantId());const j=this.inChainGroup?this.chainGroupId:++this.chainGroupId,ne=ce.getCopy(this.units.length,B,j,M);return this.add(ne)}add(ce){if(ce.elements.length===1){ce.conformation.position(ce.elements[0],this.p);const M=[ce.invariantId,this.p[0],this.p[1],this.p[2]].join("|");if(this.singleElementUnits.has(M))return this.singleElementUnits.get(M);this.singleElementUnits.set(M,ce)}return this.units.push(ce),ce}addWithOperator(ce,M,B=!1){return this.add(ce.applyOperator(this.units.length,M,B))}getStructure(){return a(this.units,this.props)}get isEmpty(){return this.units.length===0}constructor(ce={}){this.props=ce,this.units=[],this.invariantId=Tl(),this.chainGroupId=-1,this.inChainGroup=!1,this.p=O(),this.singleElementUnits=new Map}}e.StructureBuilder=h;function p(te={}){return new h(te)}e.Builder=p;function _(te){return te.hashCode}e.hashCode=_;function y(te){return Ux(te.units.map(ce=>Ce.conformationId(ce)).join("|"))}e.conformationHash=y;function v(te,ce){if(te===ce)return!0;if(te.elementCount!==ce.elementCount)return!1;const M=te.units.length;if(M!==ce.units.length)return!1;for(let B=0;B<M;B++)if(te.units[B].id!==ce.units[B].id)return!1;return!0}e.areUnitIdsEqual=v;function A(te,ce){if(te===ce)return!0;if(!v(te,ce))return!1;for(let M=0,B=te.units.length;M<B;M++)if(!Ee.areEqual(te.units[M].elements,ce.units[M].elements))return!1;return!0}e.areUnitIdsAndIndicesEqual=A;function g(te,ce){if(te.hashCode!==ce.hashCode)return!1;const M=te.models.length;if(M!==ce.models.length)return!1;for(let B=0;B<M;B++)if(!Lt.areHierarchiesEqual(te.models[B],ce.models[B]))return!1;return!0}e.areHierarchiesEqual=g;function b(te,ce){return te===ce||te.hashCode===ce.hashCode&&Si.areTransformGroupsEquivalent(te.unitSymmetryGroups,ce.unitSymmetryGroups)}e.areEquivalent=b;function C(te,ce){return b(te.root,ce.root)}e.areRootsEquivalent=C;function I(te,ce){return te.root===ce.root}e.areRootsEqual=I;class S{move(){return this.advance(),this.current.element=this.elements[this.idx],this.current}advance(){if(this.idx<this.maxIdx){this.idx++,this.idx===this.maxIdx&&(this.hasNext=this.unitIndex+1<this.structure.units.length);return}if(this.idx=0,this.unitIndex++,this.unitIndex>=this.structure.units.length){this.hasNext=!1;return}this.current.unit=this.structure.units[this.unitIndex],this.elements=this.current.unit.elements,this.maxIdx=this.elements.length-1,this.maxIdx===0&&(this.hasNext=this.unitIndex+1<this.structure.units.length)}constructor(ce){this.structure=ce,this.unitIndex=0,this.maxIdx=0,this.idx=-1,this.current=lt.create(ce),this.hasNext=ce.elementCount>0,this.hasNext&&(this.elements=ce.units[0].elements,this.maxIdx=this.elements.length-1,this.current.unit=ce.units[0])}}e.ElementLocationIterator=S;const P=O();function T(te,ce,M){const{elements:B,conformation:j}=te,ne=P;let G=Number.MAX_VALUE;for(let $=0,Y=B.length;$<Y;$++){const ie=B[$],oe=O.distance(ce,j.position(ie,ne))-M-j.r(ie);oe<G&&(G=oe)}return G}function D(te,ce,M){const{units:B}=te;let j=Number.MAX_VALUE;for(let ne=0,G=B.length;ne<G;ne++){const $=B[ne],Y=T($,ce,M);Y<j&&(j=Y)}return j}e.minDistanceToPoint=D;const w=O();function E(te,ce){if(te.elementCount===0||ce.elementCount===0)return 0;const{units:M}=te;let B=Number.MAX_VALUE;for(let j=0,ne=M.length;j<ne;j++){const G=M[j],{elements:$,conformation:Y}=G;for(let ie=0,oe=$.length;ie<oe;ie++){const pe=$[ie],L=D(ce,Y.position(pe,w),Y.r(pe));L<B&&(B=L)}}return B}e.distance=E;function k(te){return te.elementCount===1?"1 element":`${te.elementCount} elements`}e.elementDescription=k;function F(te,ce,M){return te.masterModel?ce.model===M.model||ce.model===te.masterModel||M.model===te.masterModel:ce.model===M.model}e.validUnitPair=F;function V(te,ce,M){const{maxRadius:B,validUnit:j,validUnitPair:ne}=M;if(!te.units.some(Y=>j(Y)))return;const G=te.lookup3d,$=O();for(const Y of te.units){if(!j(Y))continue;const ie=Y.boundary.sphere;O.transformMat4($,ie.center,Y.conformation.operator.matrix);const oe=G.findUnitIndices($[0],$[1],$[2],ie.radius+B);for(let pe=0;pe<oe.count;pe++){const L=te.units[oe.indices[pe]];Y.id>=L.id||!j(L)||!ne(Y,L)||(L.elements.length>=Y.elements.length?ce(Y,L):ce(L,Y))}}}e.eachUnitPair=V;function de(te,{chain:ce,residue:M,atom:B}){const j=lt.create(te);for(const ne of te.units){if(ne.kind!==Ce.Kind.Atomic)continue;j.unit=ne;const{elements:G}=ne,$=Ct.transientSegments(ne.model.atomicHierarchy.chainAtomSegments,G),Y=Ct.transientSegments(ne.model.atomicHierarchy.residueAtomSegments,G);for(;$.hasNext;){const ie=$.move();if(ce&&(j.element=G[ie.start],ce(j)),!(!M&&!B))for(Y.setSegment(ie);Y.hasNext;){const oe=Y.move();if(M&&(j.element=G[oe.start],M(j)),!!B)for(let pe=oe.start,L=oe.end;pe<L;pe++)j.element=G[pe],B(j)}}}}e.eachAtomicHierarchyElement=de,e.DefaultSizeThresholds={smallResidueCount:10,mediumResidueCount:5e3,largeResidueCount:3e4,highSymmetryUnitCount:10,fiberResidueCount:15};function W(te){return te.unitSymmetryGroups.filter(ce=>ce.units[0].polymerElements.length>0)}function J(te,ce){const M=W(te);return M.length===1&&M[0].units.length>2&&M[0].units[0].polymerElements.length<ce.fiberResidueCount}function le(te,ce){const M=W(te);return M.length>=1&&M[0].units.length>ce.highSymmetryUnitCount}let K;(function(te){te[te.Small=0]="Small",te[te.Medium=1]="Medium",te[te.Large=2]="Large",te[te.Huge=3]="Huge",te[te.Gigantic=4]="Gigantic"})(K=e.Size||(e.Size={}));function ae(te,ce={},M=1){const B={...e.DefaultSizeThresholds,...ce};return te.polymerResidueCount>=B.largeResidueCount*M?le(te,B)?K.Huge:K.Gigantic:J(te,B)||te.polymerResidueCount<B.smallResidueCount*M?K.Small:te.polymerResidueCount<B.mediumResidueCount*M?K.Medium:K.Large}e.getSize=ae,e.Index=Lo.createSimple("index","root"),e.MaxIndex=Lo.createSimple("max_index","root");const me="__PrincipalAxes__";function De(te){if(te.currentPropertyData[me])return te.currentPropertyData[me];const ce=On.getPrincipalAxes(e.toStructureElementLoci(te));return te.currentPropertyData[me]=ce,ce}e.getPrincipalAxes=De})(wt||(wt={}));class KP{constructor(){this.map=new Map}removeSymbol(t){this.map.delete(t.symbol.id)}addSymbol(t){this.map.has(t.symbol.id)&&console.warn(`Symbol '${t.symbol.id}' already added. Call removeSymbol/removeCustomProps re-adding the symbol.`),this.map.set(t.symbol.id,t)}addCustomProp(t){if(t.symbols)for(const n of Object.keys(t.symbols))this.addSymbol(t.symbols[n])}removeCustomProp(t){if(t.symbols)for(const n of Object.keys(t.symbols))this.removeSymbol(t.symbols[n])}getRuntime(t){return this.map.get(t)}}const J2=new KP;class $P{constructor(t){this.table=t,this.constQueryContext=new vi(wt.Empty)}}var eg;(function(e){function t(r){return{kind:"const",value:r}}e.Const=t;function n(r){return{kind:"dynamic",runtime:r}}e.Dynamic=n})(eg||(eg={}));var wi;(function(e){function t(r){return{isConst:!0,fn:function(o){return r}}}e.Const=t;function n(r){return{isConst:!1,fn:r}}e.Dynamic=n})(wi||(wi={}));var zo;(function(e){function t(n,r,i,o){if(typeof n.length=="number")for(let s=0,c=n.length;s<c;s++)i(n[s](r),s,o);else{let s=0;for(const c of Object.keys(n))i(n[c](r),s++,o)}return o}e.forEachEval=t})(zo||(zo={}));var no;(function(e){function t(r,i){return new tg(r,i,!0)}e.Const=t;function n(r,i){return new tg(r,i,!1)}e.Dynamic=n})(no||(no={}));class tg{compile(t,n){let r,i=!1;if(!n)r=void 0,i=!0;else if(br.isArgumentsArray(n)){r=[],i=!0;for(const o of n){const s=Zd(t,o);i=i&&s.isConst,r.push(s.fn)}}else{r=Object.create(null),i=!0;for(const o of Object.keys(n)){const s=Zd(t,n[o]);i=i&&s.isConst,r[o]=s.fn}}return this.isConst?this.isConst&&i?wi.Const(this.fn(t.constQueryContext,r)):wi.Dynamic(ng(this.fn,r)):wi.Dynamic(ng(this.fn,r))}constructor(t,n,r){this.symbol=t,this.fn=n,this.isConst=r}}function ng(e,t){return function(r){return e(r,t)}}function Zd(e,t){if(br.isLiteral(t))return wi.Const(t);if(br.isSymbol(t)){const r=e.table.getRuntime(t.name);return r?r.compile(e):wi.Const(t.name)}if(!br.isSymbol(t.head))throw new Error("Can only apply symbols.");const n=e.table.getRuntime(t.head.name);if(!n)throw new Error(`Symbol '${t.head.name}' is not implemented.`);return n.compile(e,t.args)}function WP(e){const t=new $P(J2);return Zd(t,e).fn}const YP=en.diff;function On(e,t){return{kind:"element-loci",structure:e,elements:t}}(function(e){function t(G){return!!G&&G.kind==="element-loci"}e.is=t;function n(G,$){if(G.structure!==$.structure||G.elements.length!==$.elements.length)return!1;for(let Y=0,ie=G.elements.length;Y<ie;++Y){const oe=G.elements[Y],pe=$.elements[Y];if(oe.unit.id!==pe.unit.id||!Fe.areEqual(oe.indices,pe.indices))return!1}return!0}e.areEqual=n;function r(G){for(const $ of G.elements)if(Fe.size($.indices)>0)return!1;return!0}e.isEmpty=r;function i(G){return o(G)===G.structure.elementCount}e.isWholeStructure=i;function o(G){let $=0;for(const{indices:Y}of G.elements)typeof Y=="number"?$+=YP(Y):$+=Y.length;return $}e.size=o;function s(G){return e(G,G.units.map($=>({unit:$,indices:Fe.ofBounds(0,$.elements.length)})))}e.all=s;function c(G){return e(G,[])}e.none=c;function a(G,$,Y){let ie;typeof $=="function"?ie=$(xt):ie=$;const oe=WP(ie)(Y??new vi(G));return Ye.toLociWithSourceUnits(oe)}e.fromExpression=a;function u(G,$,Y){const ie=$(Y??new vi(G));return Ye.toLociWithSourceUnits(ie)}e.fromQuery=u;function l(G,$,Y){return Hy.toLoci(G,$,Y)}e.fromSchema=l;function f(G,$){if(r(G))return;const Y=G.elements[0].unit,ie=Y.elements[Fe.getAt(G.elements[0].indices,0)];return $?($.structure=G.structure,$.unit=G.elements[0].unit,$.element=ie,$):lt.create(G.structure,Y,ie)}e.getFirstLocation=f;function d(G){return r(G)?G:e(G.structure,[{unit:G.elements[0].unit,indices:Fe.ofSingleton(Fe.start(G.elements[0].indices))}])}e.firstElement=d;function m(G){return r(G)?G:S(d(G))}e.firstResidue=m;function h(G){return r(G)?G:E(d(G))}e.firstChain=h;function p(G){const $=[];for(const Y of G.elements){const{unit:ie,indices:oe}=Y,pe=new Int32Array(Fe.size(oe));Fe.forEach(oe,(L,q)=>pe[q]=ie.elements[L]),$.push(ie.getChild(Ee.ofSortedArray(pe)))}return wt.create($,{parent:G.structure.parent})}e.toStructure=p;function _(G,$,Y){if(e.isEmpty(G))return;const ie=Y||lt.create(G.structure);ie.structure=G.structure;for(const oe of G.elements){const{unit:pe,indices:L}=oe;ie.unit=pe;const{elements:q}=oe.unit;for(let H=0,Z=Fe.size(L);H<Z;H++)ie.element=q[Fe.getAt(L,H)],$(ie)}}e.forEachLocation=_;function y(G,$){if($===G.structure)return G;const Y=[];return G.elements.forEach(ie=>{if(!$.unitMap.has(ie.unit.id))return;const oe=$.unitMap.get(ie.unit.id),pe=Fe.indexedIntersect(ie.indices,ie.unit.elements,oe.elements);Fe.size(pe)>0&&Y.push({unit:oe,indices:pe})}),e($,Y)}e.remap=y;function v(G,$){if(G.elements.length>$.elements.length)return v($,G);if(e.isEmpty(G))return $;const Y=new Map;for(const oe of G.elements)Y.set(oe.unit.id,oe.indices);const ie=[];for(const oe of $.elements)Y.has(oe.unit.id)?(ie[ie.length]={unit:oe.unit,indices:Fe.union(Y.get(oe.unit.id),oe.indices)},Y.delete(oe.unit.id)):ie[ie.length]=oe;return Y.forEach((oe,pe)=>{ie[ie.length]={unit:G.structure.unitMap.get(pe),indices:oe}}),e(G.structure,ie)}e.union=v;function A(G,$){const Y=new Map;for(const oe of $.elements)Y.set(oe.unit.id,oe.indices);const ie=[];for(const oe of G.elements)if(Y.has(oe.unit.id)){const pe=Fe.subtract(oe.indices,Y.get(oe.unit.id));if(Fe.size(pe)===0)continue;ie[ie.length]={unit:oe.unit,indices:pe}}else ie[ie.length]=oe;return e(G.structure,ie)}e.subtract=A;function g(G,$){const Y=new Map;for(const oe of G.elements)Y.set(oe.unit.id,oe.indices);const ie=[];for(const oe of $.elements){if(!Y.has(oe.unit.id))continue;const pe=Fe.intersect(Y.get(oe.unit.id),oe.indices);Fe.size(pe)!==0&&(ie[ie.length]={unit:oe.unit,indices:pe})}return e(G.structure,ie)}e.intersect=g;function b(G,$){if(G.elements.length>$.elements.length)return b($,G);if(e.isEmpty(G))return e.isEmpty($);const Y=new Map;for(const ie of G.elements)Y.set(ie.unit.id,ie.indices);for(const ie of $.elements)if(Y.has(ie.unit.id)&&Fe.areIntersecting(Y.get(ie.unit.id),ie.indices))return!0;return!1}e.areIntersecting=b;function C(G,$){if(e.isEmpty(G))return e.isEmpty($);const Y=new Map;for(const oe of G.elements)Y.set(oe.unit.id,oe.indices);let ie=!1;for(const oe of $.elements){if(!Y.has(oe.unit.id))return!1;if(Fe.isSubset(Y.get(oe.unit.id),oe.indices))ie=!0;else return!1}return ie}e.isSubset=C;function I(G){return G.length>3&&Ee.isRange(G)?Ae.ofRange(G[0],G[G.length-1]):Ee.ofSortedArray(G)}function S(G,$){const Y=[],ie=new Set;for(const oe of G.elements){if(T(oe)){Y[Y.length]=oe;continue}if(oe.unit.kind===Ce.Kind.Atomic){const pe=oe.unit.elements,L=oe.unit.model.atomicHierarchy,{label_alt_id:q}=oe.unit.model.atomicHierarchy.atoms,{index:H,offsets:Z}=L.residueAtomSegments,re=[],Re=oe.indices,qe=Fe.size(Re);let xe=0;for(;xe<qe;){ie.clear();const be=pe[Fe.getAt(Re,xe)],x=H[be];for(ie.add(q.value(be)),xe++;xe<qe;){const Q=pe[Fe.getAt(Re,xe)];if(H[Q]!==x)break;ie.add(q.value(Q)),xe++}const R=ie.has("");for(let Q=Z[x],_e=Z[x+1];Q<_e;Q++){const ue=Fe.indexOf(pe,Q);if(ue>=0){const he=q.value(Q);(!$||R||!he||ie.has(he))&&(re[re.length]=ue)}}}Y[Y.length]={unit:oe.unit,indices:I(re)}}else Y[Y.length]=oe}return e(G.structure,Y)}e.extendToWholeResidues=S;function P(G){switch(G.kind){case Ce.Kind.Atomic:return G.model.atomicHierarchy.chainAtomSegments;case Ce.Kind.Spheres:return G.model.coarseHierarchy.spheres.chainElementSegments;case Ce.Kind.Gaussians:return G.model.coarseHierarchy.gaussians.chainElementSegments}}function T(G){return G.unit.elements.length===Fe.size(G.indices)}function D(G,$,Y){const{index:ie}=P(G),oe=G.elements;let pe=0;for(let q=0,H=oe.length;q<H;q++){const Z=oe[q],re=ie[Z];$.has(re)&&pe++}if(pe===G.elements.length){Y[Y.length]={unit:G,indices:Ae.ofBounds(0,pe)};return}const L=new Int32Array(pe);pe=0;for(let q=0,H=oe.length;q<H;q++){const Z=oe[q],re=ie[Z];$.has(re)&&(L[pe++]=q)}L.length>0&&(Y[Y.length]={unit:G,indices:I(L)})}function w(G,$,Y,ie,oe){const{index:pe}=P(G.elements[0].unit),L=new Set;for(let q=$;q<Y;q++){const H=G.elements[q],Z=H.indices,re=H.unit.elements;for(let Re=0,qe=Fe.size(Z);Re<qe;Re++)L.add(pe[re[Fe.getAt(Z,Re)]])}if(ie){const q=G.elements[0].unit;for(const H of G.structure.units)Ce.areSameChainOperatorGroup(H,q)&&D(H,L,oe)}else for(let q=$;q<Y;q++)D(G.elements[q].unit,L,oe)}function E(G){const $=[];for(let Y=0,ie=G.elements.length;Y<ie;Y++){const oe=G.elements[Y];if(Ce.Traits.is(oe.unit.traits,Ce.Trait.Partitioned)){const pe=Y;for(;Y<ie&&Ce.areSameChainOperatorGroup(G.elements[Y].unit,oe.unit);)Y++;const L=Y;Y--,w(G,pe,L,!0,$)}else T(oe)?$[$.length]=oe:w(G,Y,Y+1,!1,$)}return e(G.structure,$)}e.extendToWholeChains=E;function k(G){return`${G.unit.model.id}|${Xe.entity.id(G)}`}function F(G){const $=[],Y=lt.create(G.structure),ie=new Set,{units:oe}=G.structure;for(let pe=0,L=G.elements.length;pe<L;pe++){const q=G.elements[pe];Y.unit=q.unit,Y.element=q.unit.elements[0],ie.add(k(Y))}for(let pe=0,L=oe.length;pe<L;++pe){const q=oe[pe];if(Y.unit=q,Y.element=q.elements[0],ie.has(k(Y))){const H=Fe.ofBounds(0,q.elements.length);$[$.length]={unit:q,indices:H}}}return e(G.structure,$)}e.extendToWholeEntities=F;function V(G){const $=[],Y=new Set,{units:ie}=G.structure;for(let oe=0,pe=G.elements.length;oe<pe;oe++){const L=G.elements[oe];Y.add(L.unit.model.id)}for(let oe=0,pe=ie.length;oe<pe;++oe){const L=ie[oe];if(Y.has(L.model.id)){const q=Fe.ofBounds(0,L.elements.length);$[$.length]={unit:L,indices:q}}}return e(G.structure,$)}e.extendToWholeModels=V;function de(G,$){const Y=[];for(let ie=0,oe=Fe.size($);ie<oe;++ie)Y.push(G[Fe.getAt($,ie)]);return Ee.ofSortedArray(Y)}function W(G,$){return Ee.isRange(G)&&Ee.areEqual(G,$)?Ae.ofLength(G.length):I(Ee.indicesOf(G,$))}function J(G){const $=[],Y=new Map;for(let ie=0,oe=G.elements.length;ie<oe;ie++){const pe=G.elements[ie],{model:L}=pe.unit,q=de(pe.unit.elements,pe.indices);Y.has(L)?Y.set(L,Ee.union(q,Y.get(L))):Y.set(L,q)}for(let ie=0,oe=G.structure.units.length;ie<oe;++ie){const pe=G.structure.units[ie],L=Y.get(pe.model);if(!L)continue;const q=W(pe.elements,L);Fe.size(q)&&($[$.length]={unit:pe,indices:q})}return e(G.structure,$)}e.extendToAllInstances=J;function le(G){const $=[],Y=new Set,{units:ie}=G.structure;for(let oe=0,pe=G.elements.length;oe<pe;oe++){const L=G.elements[oe];Y.add(L.unit.conformation.operator.name)}for(let oe=0,pe=ie.length;oe<pe;++oe){const L=ie[oe];if(Y.has(L.conformation.operator.name)){const q=Fe.ofBounds(0,L.elements.length);$[$.length]={unit:L,indices:q}}}return e(G.structure,$)}e.extendToWholeOperators=le;const K=new Fo("98"),ae=O();function me(G,$,Y){K.reset();for(const ie of G.elements){const{indices:oe}=ie,{elements:pe,conformation:L}=ie.unit;for(let q=0,H=Fe.size(oe);q<H;q++){const Z=pe[Fe.getAt(oe,q)];L.position(Z,ae),$&&O.transformMat4(ae,ae,$),K.includePositionRadius(ae,L.r(Z))}}K.finishedIncludeStep();for(const ie of G.elements){const{indices:oe}=ie,{elements:pe,conformation:L}=ie.unit;for(let q=0,H=Fe.size(oe);q<H;q++){const Z=pe[Fe.getAt(oe,q)];L.position(Z,ae),$&&O.transformMat4(ae,ae,$),K.radiusPositionRadius(ae,L.r(Z))}}return Y?(Y.box&&K.getBox(Y.box),Y.sphere&&K.getSphere(Y.sphere),Y):{box:K.getBox(),sphere:K.getSphere()}}e.getBoundary=me;const De=O();function te(G,$,Y=0){let ie=Y;for(const oe of G.elements){const{indices:pe}=oe,{elements:L,conformation:q}=oe.unit,H=Fe.size(pe);for(let Z=0;Z<H;Z++){const re=L[Fe.getAt(pe,Z)];q.position(re,De),O.toArray(De,$,ie+Z*3)}ie+=H*3}return $}e.toPositionsArray=te;function ce(G){const $=o(G),Y=te(G,new Float32Array(3*$));return Nr.ofPositions(Y)}e.getPrincipalAxes=ce;function M(G){let $=0;G.forEach(oe=>{$+=o(oe)});const Y=new Float32Array(3*$);let ie=0;return G.forEach(oe=>{te(oe,Y,ie),ie+=o(oe)*3}),Nr.ofPositions(Y)}e.getPrincipalAxesMany=M;function B(G,$){return Ce.isAtomic(G)?G.model.atomicHierarchy.atomSourceIndex.value($):$}function j(G){if(e.isEmpty(G))return xt.struct.generator.empty();const $=G.structure.models,Y=new Map;for(const q of G.elements){const{indices:H}=q,{elements:Z}=q.unit,re=q.unit.conformation.operator.name;let Re;Y.has(re)?Re=Y.get(re).xs:(Re=zt.create(),Y.set(re,{modelLabel:q.unit.model.label,modelIndex:q.unit.model.modelNum,xs:Re}));for(let qe=0,xe=Fe.size(H);qe<xe;qe++){const be=B(q.unit,Z[Fe.getAt(H,qe)]);zt.add(Re,be,be)}}const ie=[],oe=Y.keys();for(;;){const q=oe.next();if(q.done)break;const H=Y.get(q.value);ie.push(ne(q.value,H.xs.array,$.length>1,H.modelLabel,H.modelIndex))}const pe=new Map;for(let q=0,H=ie.length;q<H;++q){const Z=ie[q],Re=`${ks(Vi(Z.atom.ranges),Vi(Z.atom.set))}|${Z.entity?Z.entity.modelLabel+Z.entity.modelIndex:""}`;pe.has(Re)?pe.get(Re).chain.opName.push(...Z.chain.opName):pe.set(Re,Z)}const L=[];return pe.forEach(q=>{const{ranges:H,set:Z}=q.atom,{opName:re}=q.chain,Re=xt.struct.atomProperty.core.operatorName(),qe=xt.struct.atomProperty.core.sourceIndex(),xe=[];Z.length>0&&(xe[xe.length]=xt.core.set.has([xt.core.type.set(Z),qe]));for(let be=0,x=H.length/2;be<x;be++)xe[xe.length]=xt.core.rel.inRange([qe,H[2*be],H[2*be+1]]);if(q.entity){const{modelLabel:be,modelIndex:x}=q.entity;L.push(xt.struct.generator.atomGroups({"atom-test":xe.length>1?xt.core.logic.or(xe):xe[0],"chain-test":re.length>1?xt.core.set.has([xt.core.type.set(re),Re]):xt.core.rel.eq([Re,re[0]]),"entity-test":xt.core.logic.and([xt.core.rel.eq([xt.struct.atomProperty.core.modelLabel(),be]),xt.core.rel.eq([xt.struct.atomProperty.core.modelIndex(),x])])}))}else L.push(xt.struct.generator.atomGroups({"atom-test":xe.length>1?xt.core.logic.or(xe):xe[0],"chain-test":re.length>1?xt.core.set.has([xt.core.type.set(re),Re]):xt.core.rel.eq([Re,re[0]])}))}),xt.struct.modifier.union([L.length===1?L[0]:xt.struct.combinator.merge(L.map(q=>xt.struct.modifier.union([q])))])}e.toExpression=j;function ne(G,$,Y,ie,oe){Jn($);const pe=[],L=[];let q=0;const H=$.length;for(;q<H;){const Z=q;for(q++;q<H&&$[q-1]+1===$[q];)q++;const re=q;if(re-Z>12)pe[pe.length]=$[Z],pe[pe.length]=$[re-1];else for(let Re=Z;Re<re;Re++)L[L.length]=$[Re]}return Y?{atom:{set:L,ranges:pe},chain:{opName:[G]},entity:{modelLabel:ie,modelIndex:oe}}:{atom:{set:L,ranges:pe},chain:{opName:[G]}}}})(On||(On={}));var rg;(function(e){function t(){return{elementCount:0,conformationCount:0,residueCount:0,chainCount:0,unitCount:0,structureCount:0,firstElementLoc:lt.create(void 0),firstConformationLoc:lt.create(void 0),firstResidueLoc:lt.create(void 0),firstChainLoc:lt.create(void 0),firstUnitLoc:lt.create(void 0),firstStructureLoc:lt.create(void 0)}}e.create=t;function n(a,u,l){const f=a.get(u)||0;a.set(u,f+l)}function r(a,u,l){const{indices:f,unit:d}=l,{elements:m}=d,h=Fe.size(f),p=new Map,_=new Map;if(h>0&&lt.set(a.firstElementLoc,u,d,m[Fe.start(f)]),h===m.length)a.unitCount+=1,a.unitCount===1&&lt.set(a.firstUnitLoc,u,d,m[Fe.start(f)]);else if(h===1){if(Ce.Traits.is(d.traits,Ce.Trait.MultiChain))return;a.elementCount+=1,a.elementCount===1&&lt.set(a.firstElementLoc,u,d,m[Fe.start(f)])}else if(Ce.isAtomic(d)){const{index:y,offsets:v}=d.model.atomicHierarchy.residueAtomSegments,{label_alt_id:A}=d.model.atomicHierarchy.atoms;let g=0;for(;g<h;){p.clear();let b=0;const C=m[Fe.getAt(f,g)],I=y[C];for(n(p,A.value(C),1),++g,++b;g<h;){const S=m[Fe.getAt(f,g)];if(y[S]!==I)break;n(p,A.value(S),1),++g,++b}if(v[I+1]-v[I]===b)a.residueCount+=1,a.residueCount===1&&lt.set(a.firstResidueLoc,u,d,v[I]);else{_.clear();for(let S=v[I],P=v[I+1];S<P;++S)n(_,A.value(S),1);_.get("")===p.get("")&&p.forEach((S,P)=>{if(_.get(P)===S){if(P!==""&&(a.conformationCount+=1,a.conformationCount===1)){for(let T=v[I],D=v[I+1];T<D;++T)if(P===A.value(T)){lt.set(a.firstConformationLoc,u,d,T);break}}b-=S}}),a.elementCount+=b}}}else a.elementCount+=h,a.elementCount===1&&lt.set(a.firstElementLoc,u,d,m[Fe.start(f)])}function i(a,u,l){const{indices:f,unit:d}=l,m=Fe.size(f);if(m===0)return;const{elements:h}=d;if(!Ce.Traits.is(d.traits,Ce.Trait.MultiChain)){m===h.length&&(a.chainCount+=1,a.chainCount===1&&lt.set(a.firstChainLoc,u,d,h[Fe.start(f)]));return}const p=Ce.isAtomic(d)?d.model.atomicHierarchy.chainAtomSegments:Ce.isSpheres(d)?d.model.coarseHierarchy.spheres.chainElementSegments:Ce.isGaussians(d)?d.model.coarseHierarchy.gaussians.chainElementSegments:void 0;if(!p){console.warn("StructureElement loci stats: unknown unit type");return}const{index:_,offsets:y}=p;let v=0;for(;v<m;){let A=0;const g=h[Fe.getAt(f,v)],b=_[g];for(++v,++A;v<m;){const C=h[Fe.getAt(f,v)];if(_[C]!==b)break;++v,++A}y[b+1]-y[b]===A?(a.chainCount+=1,a.chainCount===1&&lt.set(a.firstChainLoc,u,d,y[b])):m===1&&(a.elementCount+=1,a.elementCount===1&&lt.set(a.firstElementLoc,u,d,g))}}function o(a,u,l,f,d){let m=l[f];const h=Ce.isAtomic(m.unit)?m.unit.model.atomicHierarchy.chainAtomSegments:Ce.isSpheres(m.unit)?m.unit.model.coarseHierarchy.spheres.chainElementSegments:Ce.isGaussians(m.unit)?m.unit.model.coarseHierarchy.gaussians.chainElementSegments:void 0;if(!h){console.warn("StructureElement loci stats: unknown unit type");return}const{index:p,offsets:_}=h,y=new Map;for(let A=f;A<d;A++){m=l[A];const{indices:g,unit:b}=m,C=Fe.size(g);if(C===0)continue;const{elements:I}=b;if(!Ce.Traits.is(b.traits,Ce.Trait.MultiChain)){const P=I[Fe.start(g)];n(y,p[P],I.length);continue}let S=0;for(;S<C;){let P=0;const T=I[Fe.getAt(g,S)],D=p[T];for(++S,++P;S<C;){const w=I[Fe.getAt(g,S)];if(p[w]!==D)break;++S,++P}n(y,D,P)}}let v=-1;if(y.forEach((A,g)=>{_[g+1]-_[g]===A&&(a.chainCount+=1,a.chainCount===1&&(v=g))}),!(v<0))for(let A=f;A<d;A++){m=l[A];const{indices:g,unit:b}=m,C=Fe.size(g);if(C===0)continue;const{elements:I}=b,S=0;for(;S<C;){const P=I[Fe.getAt(g,S)];if(p[P]===v){lt.set(a.firstChainLoc,u,b,P);return}}}}function s(a){const u=t();if(On.isEmpty(a))return u;let l=!1;if(On.isWholeStructure(a)){if(u.structureCount+=1,u.structureCount===1){const{unit:f,indices:d}=a.elements[0];lt.set(u.firstStructureLoc,a.structure,f,f.elements[Fe.min(d)])}}else for(const f of a.elements)r(u,a.structure,f),Ce.Traits.is(f.unit.traits,Ce.Trait.Partitioned)?l=!0:i(u,a.structure,f);if(l)for(let f=0,d=a.elements.length;f<d;f++){const m=a.elements[f];if(!Ce.Traits.is(m.unit.traits,Ce.Trait.Partitioned))continue;const h=f;for(;f<d&&Ce.areSameChainOperatorGroup(a.elements[f].unit,m.unit);)f++;const p=f;f--,p-h===1?i(u,a.structure,m):o(u,a.structure,a.elements,h,p)}return u}e.ofLoci=s;function c(a,u,l){return u.elementCount===1&&l.elementCount===0?lt.copy(a.firstElementLoc,u.firstElementLoc):u.elementCount===0&&l.elementCount===1&&lt.copy(a.firstElementLoc,l.firstElementLoc),u.conformationCount===1&&l.conformationCount===0?lt.copy(a.firstConformationLoc,u.firstConformationLoc):u.conformationCount===0&&l.conformationCount===1&&lt.copy(a.firstConformationLoc,l.firstConformationLoc),u.residueCount===1&&l.residueCount===0?lt.copy(a.firstResidueLoc,u.firstResidueLoc):u.residueCount===0&&l.residueCount===1&&lt.copy(a.firstResidueLoc,l.firstResidueLoc),u.chainCount===1&&l.chainCount===0?lt.copy(a.firstChainLoc,u.firstChainLoc):u.chainCount===0&&l.chainCount===1&&lt.copy(a.firstChainLoc,l.firstChainLoc),u.unitCount===1&&l.unitCount===0?lt.copy(a.firstUnitLoc,u.firstUnitLoc):u.unitCount===0&&l.unitCount===1&&lt.copy(a.firstUnitLoc,l.firstUnitLoc),u.structureCount===1&&l.structureCount===0?lt.copy(a.firstStructureLoc,u.firstStructureLoc):u.structureCount===0&&l.structureCount===1&&lt.copy(a.firstStructureLoc,l.firstStructureLoc),a.elementCount=u.elementCount+l.elementCount,a.conformationCount=u.conformationCount+l.conformationCount,a.residueCount=u.residueCount+l.residueCount,a.chainCount=u.chainCount+l.chainCount,a.unitCount=u.unitCount+l.unitCount,a.structureCount=u.structureCount+l.structureCount,a}e.add=c})(rg||(rg={}));function ZP(e){return Ce.isAtomic(e.unit)?e.unit.residueIndex[e.element]:-1}function XP(e){return Ce.isAtomic(e.unit)?e.unit.chainIndex[e.element]:-1}function QP(e){return Xe.entity.key(e)}var Pi;(function(e){function t(r){const i=r.descriptor.name,o=r.type==="static"?"_staticPropertyData":"_dynamicPropertyData",s=a=>(i in a[o]||(a[o][i]={props:{...Et.getDefaultValues(r.getParams(a))},data:Fr.create(void 0)}),a[o][i]),c=(a,u,l)=>{const f=s(a);a[o][i]={props:u,data:Fr.withValue(f.data,l)}};return{label:r.label,descriptor:r.descriptor,isHidden:r.isHidden,getParams:a=>{const u=Et.clone(r.getParams(a));return Et.setDefaultValues(u,s(a).props),u},defaultParams:r.defaultParams,isApplicable:r.isApplicable,attach:async(a,u,l={},f)=>{f&&u.customProperties.reference(r.descriptor,!0);const d=s(u),m=Et.merge(r.defaultParams,d.props,l);if(d.data.value&&Et.areEqual(r.defaultParams,d.props,m))return;const{value:h,assets:p}=await r.obtain(a,u,m);u.customProperties.add(r.descriptor),u.customProperties.assets(r.descriptor,p),c(u,m,h)},ref:(a,u)=>a.customProperties.reference(r.descriptor,u),get:a=>{var u;return(u=s(a))===null||u===void 0?void 0:u.data},set:(a,u={},l)=>{const f=s(a),d=Et.merge(r.defaultParams,f.props,u);Et.areEqual(r.defaultParams,f.props,d)||(c(a,d,l),a.customProperties.assets(r.descriptor))},props:a=>s(a).props}}e.createProvider=t;function n(r,i,o){const s={value:Et.Value(o,{isHidden:!0})};return t({label:To(r),descriptor:Vr({name:r}),isHidden:!0,type:i,defaultParams:s,getParams:()=>({value:Et.Value(o,{isHidden:!0})}),isApplicable:()=>!0,obtain:async(c,a,u)=>({...Et.getDefaultValues(s),...u})})}e.createSimple=n})(Pi||(Pi={}));var ig;(function(e){e.Provider=Pi.createProvider({label:"SIFTS Mapping",descriptor:Vr({name:"sifts_sequence_mapping"}),type:"static",defaultParams:{},getParams:()=>({}),isApplicable:o=>t(o),obtain:async(o,s)=>({value:i(s)})});function t(o){if(!kt.is(o.sourceData))return!1;const{pdbx_sifts_xref_db_name:s,pdbx_sifts_xref_db_acc:c,pdbx_sifts_xref_db_num:a,pdbx_sifts_xref_db_res:u}=o.sourceData.data.db.atom_site;return s.isDefined&&c.isDefined&&a.isDefined&&u.isDefined}e.isAvailable=t;function n(o){const s=o.unit.model,c=e.Provider.get(s).value;if(!c)return"";const a=s.atomicHierarchy.residueAtomSegments.index[o.element];return c.accession[a]}e.getKey=n;function r(o){const s=o.unit.model,c=e.Provider.get(s).value;if(!c)return;const a=s.atomicHierarchy.residueAtomSegments.index[o.element],u=c.dbName[a];if(u)return`${u} ${c.accession[a]} ${c.num[a]} ${c.residue[a]}`}e.getLabel=r;function i(o){if(!kt.is(o.sourceData))return;const{pdbx_sifts_xref_db_name:s,pdbx_sifts_xref_db_acc:c,pdbx_sifts_xref_db_num:a,pdbx_sifts_xref_db_res:u}=o.sourceData.data.db.atom_site;if(!s.isDefined||!c.isDefined||!a.isDefined||!u.isDefined)return;const{atomSourceIndex:l}=o.atomicHierarchy,{count:f,offsets:d}=o.atomicHierarchy.residueAtomSegments,m=new Array(f),h=new Array(f),p=new Array(f),_=new Array(f);for(let y=0;y<f;y++){const v=l.value(d[y]);if(s.valueKind(v)!==ye.ValueKinds.Present){m[y]="",h[y]="",p[y]="",_[y]="";continue}m[y]=s.value(v),h[y]=c.value(v),p[y]=a.value(v),_[y]=u.value(v)}return{dbName:m,accession:h,num:p,residue:_}}})(ig||(ig={})),an.Field,an.Encodings,an.Field,an.Category,an.Category;const JP={molstar_bond_site:{atom_id_1:ye.Schema.int,atom_id_2:ye.Schema.int,value_order:ye.Schema.Aliased(ye.Schema.lstr),type_id:ye.Schema.Aliased(ye.Schema.lstr)}};an.fields().int("atom_id_1",(e,t)=>t[e].atom_id_1).int("atom_id_2",(e,t)=>t[e].atom_id_2).str("value_order",(e,t)=>{var n;return(n=t[e].value_order)!==null&&n!==void 0?n:""},{valueKind:(e,t)=>t[e].value_order===void 0?ye.ValueKinds.NotPresent:ye.ValueKinds.Present}).str("type_id",(e,t)=>{var n;return(n=t[e].type_id)!==null&&n!==void 0?n:""},{valueKind:(e,t)=>t[e].type_id===void 0?ye.ValueKinds.NotPresent:ye.ValueKinds.Present}).getFields(),an.Category;var og;(function(e){function t(n){const r=Array.isArray(n)?n:[n];return{structures:r,firstModel:r[0].model,cache:Object.create(null)}}e.create=t})(og||(og={}));var sg;(function(e){e.AtomSitePositionsFieldNames=new Set(["id","Cartn_x","Cartn_y","Cartn_z"])})(sg||(sg={}));const eE={molstar_atom_site_operator_mapping:{label_asym_id:ye.Schema.Str(),auth_asym_id:ye.Schema.Str(),operator_name:ye.Schema.Str(),suffix:ye.Schema.Str(),assembly_id:ye.Schema.Str(),assembly_operator_id:ye.Schema.Int(),symmetry_operator_index:ye.Schema.Int(),symmetry_hkl:ye.Schema.Vector(3),ncs_id:ye.Schema.Int()}},ag=(e,t)=>typeof t[e].operator.assembly>"u"?ye.ValueKinds.NotPresent:ye.ValueKinds.Present,Xd=(e,t)=>t[e].operator.spgrOp===-1?ye.ValueKinds.NotPresent:ye.ValueKinds.Present;an.fields().str("label_asym_id",(e,t)=>t[e].label_asym_id).str("auth_asym_id",(e,t)=>t[e].auth_asym_id).str("operator_name",(e,t)=>t[e].operator.name).str("suffix",(e,t)=>t[e].operator.suffix).str("assembly_id",(e,t)=>{var n;return((n=t[e].operator.assembly)===null||n===void 0?void 0:n.id)||""},{valueKind:ag}).int("assembly_operator_id",(e,t)=>{var n;return((n=t[e].operator.assembly)===null||n===void 0?void 0:n.operId)||0},{valueKind:ag}).int("symmetry_operator_index",(e,t)=>t[e].operator.spgrOp,{valueKind:Xd}).vec("symmetry_hkl",[(e,t)=>t[e].operator.hkl[0],(e,t)=>t[e].operator.hkl[1],(e,t)=>t[e].operator.hkl[2]],{valueKind:Xd}).int("ncs_id",(e,t)=>t[e].operator.ncsId,{valueKind:Xd}).getFields();function tE(e,t,n,r){const{label_comp_id:i,type_symbol:o,_rowCount:s}=e.atoms,{_rowCount:c}=e.residues,{offsets:a}=t.residueAtomSegments,u=new Uint8Array(s);for(let y=0;y<s;++y)u[y]=h2(o.value(y));const l=new Int32Array(c),f=new Int32Array(c),d=new Int32Array(c),m=new Uint8Array(c),h=new Uint8Array(c),p=new Map,_=new Map;for(let y=0;y<c;++y){const v=i.value(a[y]),A=r;let g,b;if(p.has(v))g=p.get(v),b=_.get(v);else{let T;A.has(v)?T=A.get(v).type:(q3||console.info("chemComp not found",v),T=Sy(v)),g=md(T,v),b=hC(T,g),p.set(v,g),_.set(v,b)}m[y]=g,h[y]=b;const C=ti(b,"trace");let I=n.findAtomsOnResidue(y,C);if(I===-1){const T=ti(b,"coarseBackbone");I=n.findAtomsOnResidue(y,T),I===-1&&hd(g)&&(I=n.findElementOnResidue(y,Zi("C")))}l[y]=I;const S=ti(b,"directionFrom");f[y]=n.findAtomsOnResidue(y,S);const P=ti(b,"directionTo");d[y]=n.findAtomsOnResidue(y,P)}return{atom:{atomicNumber:u},residue:{traceElementIndex:l,directionFromElementIndex:f,directionToElementIndex:d,moleculeType:m,polymerType:h}}}function ro(e,t){return t?t.length===1?Un(t.charCodeAt(0),e):t.length===2?Un(t.charCodeAt(0),Un(t.charCodeAt(1),e)):`${e} ${t}`:e}function nE(e,t,n,r){if(e.has(t)){const i=e.get(t);i.has(n)||i.set(n,r)}else{const i=new Map;e.set(t,i),i.set(n,r)}}function rE(e){throw new Error(`Missing entity entry for entity id '${e}'.`)}function iE(e,t,n){return{entities:e,segments:n,label_seq_id:Ee.ofSortedArray(t.residues.label_seq_id.toArray({array:Int32Array})),label_atom_id:t.atoms.label_atom_id,auth_atom_id:t.atoms.auth_atom_id,label_alt_id:t.atoms.label_alt_id,type_symbol:t.atoms.type_symbol,chain_index_entity_index:new Int32Array(t.chains._rowCount),entity_index_label_asym_id:new Map,chain_index_label_seq_id:new Map,auth_asym_id_auth_seq_id:new Map,chain_index_auth_seq_id:new Map,label_asym_id:new Map}}const Ko=Fd.EmptyResidueKey();let oE=class{getEntityFromChain(t){return this.map.chain_index_entity_index[t]}findEntity(t){const n=this.map.label_asym_id.get(t);return n!==void 0?n:-1}findChainLabel(t){const n=this.entityIndex(t.label_entity_id);if(n<0||!this.map.entity_index_label_asym_id.has(n))return-1;const r=this.map.entity_index_label_asym_id.get(n);return r&&r.has(t.label_asym_id)?r.get(t.label_asym_id):-1}findChainAuth(t){if(!this.map.auth_asym_id_auth_seq_id.has(t.auth_asym_id))return-1;const n=this.map.auth_asym_id_auth_seq_id.get(t.auth_asym_id);return n.has(t.auth_seq_id)?n.get(t.auth_seq_id):-1}findResidue(t,n,r,i){let o;arguments.length===1?o=t:(Ko.label_entity_id=t,Ko.label_asym_id=n,Ko.auth_seq_id=r,Ko.pdbx_PDB_ins_code=i,o=Ko);const s=this.findChainLabel(o);if(s<0)return-1;const c=this.map.chain_index_auth_seq_id.get(s),a=ro(o.auth_seq_id,o.pdbx_PDB_ins_code||"");return c.has(a)?c.get(a):-1}findResidueLabel(t){const n=this.findChainLabel(t);if(n<0)return-1;const r=this.map.chain_index_label_seq_id.get(n),i=ro(t.label_seq_id,t.pdbx_PDB_ins_code||"");return r.has(i)?r.get(i):-1}findResidueAuth(t){const n=this.findChainAuth(t);if(n<0)return-1;const r=this.map.chain_index_auth_seq_id.get(n),i=ro(t.auth_seq_id,t.pdbx_PDB_ins_code||"");return r.has(i)?r.get(i):-1}findResidueInsertion(t){const n=this.findChainLabel(t);if(n<0)return-1;const r=this.map.chain_index_label_seq_id.get(n),i=ro(t.label_seq_id,t.pdbx_PDB_ins_code||"");if(r.has(i))return r.get(i);const o=Ee.findPredecessorIndex(this.map.label_seq_id,t.label_seq_id),s=eo.chainStartResidueIndex(this.map.segments,n);if(o<s)return s;const c=eo.chainEndResidueIndexExcl(this.map.segments,n)-1;return o>=c?c:o}findAtom(t){const n=this.findResidue(t);return n<0?-1:typeof t.label_alt_id>"u"?Qd(this.residueOffsets[n],this.residueOffsets[n+1],this.map.label_atom_id,t.label_atom_id):Jd(this.residueOffsets[n],this.residueOffsets[n+1],this.map.label_atom_id,this.map.label_alt_id,t.label_atom_id,t.label_alt_id)}findAtomAuth(t){const n=this.findResidueAuth(t);return n<0?-1:typeof t.label_alt_id>"u"?Qd(this.residueOffsets[n],this.residueOffsets[n+1],this.map.auth_atom_id,t.auth_atom_id):Jd(this.residueOffsets[n],this.residueOffsets[n+1],this.map.auth_atom_id,this.map.label_alt_id,t.auth_atom_id,t.label_alt_id)}findAtomOnResidue(t,n,r){return typeof r>"u"?Qd(this.residueOffsets[t],this.residueOffsets[t+1],this.map.label_atom_id,n):Jd(this.residueOffsets[t],this.residueOffsets[t+1],this.map.label_atom_id,this.map.label_alt_id,n,r)}findAtomsOnResidue(t,n){return sE(this.residueOffsets[t],this.residueOffsets[t+1],this.map.label_atom_id,n)}findElementOnResidue(t,n){return aE(this.residueOffsets[t],this.residueOffsets[t+1],this.map.type_symbol,n)}constructor(t){this.map=t,this.entityIndex=t.entities.getEntityIndex,this.residueOffsets=this.map.segments.residueAtomSegments.offsets}};function Qd(e,t,n,r){for(let i=e;i<t;i++)if(n.value(i)===r)return i;return-1}function sE(e,t,n,r){for(let i=e;i<t;i++)if(r.has(n.value(i)))return i;return-1}function Jd(e,t,n,r,i,o){for(let s=e;s<t;s++)if(n.value(s)===i&&r.value(s)===o)return s;return-1}function aE(e,t,n,r){for(let i=e;i<t;i++)if(n.value(i)===r)return i;return-1}function cE(e,t,n){const r=iE(t,e,n),{label_seq_id:i,auth_seq_id:o,pdbx_PDB_ins_code:s}=e.residues,{label_entity_id:c,label_asym_id:a,auth_asym_id:u}=e.chains,l=Ae.ofBounds(0,e.atoms._rowCount),f=Ct.transientSegments(n.chainAtomSegments,l);for(;f.hasNext;){const d=f.move(),m=d.index,h=t.getEntityIndex(c.value(m));h<0&&rE(c.value(m)),r.chain_index_entity_index[m]=h;const p=u.value(m);let _=r.auth_asym_id_auth_seq_id.get(p);_||(_=new Map,r.auth_asym_id_auth_seq_id.set(p,_));const y=a.value(m);r.label_asym_id.has(y)||r.label_asym_id.set(y,h),nE(r.entity_index_label_asym_id,h,y,m);const v=new Map,A=new Map;r.chain_index_label_seq_id.set(m,v),r.chain_index_auth_seq_id.set(m,A);const g=Ct.transientSegments(n.residueAtomSegments,l,d);for(;g.hasNext;){const C=g.move().index,I=o.value(C),S=s.value(C);v.set(ro(i.value(C),S),C),A.set(ro(I,S),C),_.set(I,m)}}return new oE(r)}function uE(e){if(e._rowCount===0)return{residues:[],chains:[]};const t=0,n=e._rowCount,r=[t],i=[t],{label_entity_id:o,label_asym_id:s,label_seq_id:c,auth_seq_id:a,pdbx_PDB_ins_code:u}=e;for(let l=t+1;l<n;l++){const f=!o.areValuesEqual(l-1,l)||!s.areValuesEqual(l-1,l);(f||!c.areValuesEqual(l-1,l)||!a.areValuesEqual(l-1,l)||!u.areValuesEqual(l-1,l))&&(r[r.length]=l),f&&(i[i.length]=l)}return{residues:r,chains:i}}function lE(e,t,n){const r=Ot.ofColumns(pw,{type_symbol:ye.ofArray({array:ye.mapToArray(e.type_symbol,Zi),schema:ye.Schema.Aliased(ye.Schema.str)}),label_atom_id:e.label_atom_id,auth_atom_id:e.auth_atom_id,label_alt_id:e.label_alt_id,label_comp_id:e.label_comp_id,auth_comp_id:e.auth_comp_id,pdbx_formal_charge:e.pdbx_formal_charge}),i=Ot.view(e,_w,n.residues),o=Ot.view(e,yw,n.chains);if(!i.label_seq_id.isDefined){const s=new Int32Array(i.label_seq_id.rowCount),{residues:c,chains:a}=n;let u=0,l=0;for(let f=0,d=s.length;f<d;++f)c[f]>=a[u+1]&&(u+=1,l=0),s[f]=++l;i.label_seq_id=ye.ofIntArray(s)}return Ot.columnToArray(i,"label_seq_id",Int32Array),Ot.columnToArray(i,"auth_seq_id",Int32Array),{atoms:r,residues:i,chains:o,atomSourceIndex:t}}function dE(e){return{id:_n.create22(),atomId:e.id,occupancy:e.occupancy.isDefined?e.occupancy:ye.ofConst(1,e._rowCount,ye.Schema.float),B_iso_or_equiv:e.B_iso_or_equiv,xyzDefined:e.Cartn_x.isDefined&&e.Cartn_y.isDefined&&e.Cartn_z.isDefined,x:e.Cartn_x.toArray({array:Float32Array}),y:e.Cartn_y.toArray({array:Float32Array}),z:e.Cartn_z.toArray({array:Float32Array})}}function fE(e,t){return Ot.areEqual(e.chains,t.chains)&&Ot.areEqual(e.residues,t.residues)&&Ot.areEqual(e.atoms,t.atoms)}function mE(e,t){const n=new Map;if(!kt.is(t))return n;const{molstar_atom_site_operator_mapping:r}=Fn(eE,t.data.frame);if(r._rowCount===0)return n;const i=new Map,o=new Map;for(let l=0;l<r._rowCount;l++){const f=r.assembly_operator_id.valueKind(l)===ye.ValueKinds.Present?{id:r.assembly_id.value(l),operList:[],operId:r.assembly_operator_id.value(l)}:void 0,d=Mt.create(r.operator_name.value(l),Ke.identity(),{assembly:f,spgrOp:r.symmetry_operator_index.valueKind(l)===ye.ValueKinds.Present?r.symmetry_operator_index.value(l):void 0,hkl:O.ofArray(r.symmetry_hkl.value(l)),ncsId:r.ncs_id.value(l)}),m=r.suffix.value(l),h=r.label_asym_id.value(l);i.set(`${h}${m}`,{name:h,operator:d});const p=r.auth_asym_id.value(l);o.set(`${p}${m}`,p)}const{label_asym_id:s,auth_asym_id:c}=e.chains,a=new Array(s.rowCount),u=new Array(s.rowCount);for(let l=0;l<s.rowCount;l++){const f=s.value(l),d=c.value(l);if(!i.has(f)){a[l]=f,u[l]=d;continue}const{name:m,operator:h}=i.get(f);n.set(l,h),a[l]=m,u[l]=o.get(d)||d}return e.chains.label_asym_id=ye.ofArray({array:a,valueKind:e.chains.label_asym_id.valueKind,schema:e.chains.label_asym_id.schema}),e.chains.auth_asym_id=ye.ofArray({array:u,valueKind:e.chains.auth_asym_id.valueKind,schema:e.chains.auth_asym_id.schema}),n}function hE(e,t,n,r,i,o){const s=uE(e),c=lE(e,t,s),a=mE(c,i);if(o&&fE(o.atomicHierarchy,c))return{sameAsPrevious:!0,hierarchy:o.atomicHierarchy,chainOperatorMapping:a};const u={residueAtomSegments:Ct.ofOffsets(s.residues,Ae.ofBounds(0,e._rowCount)),chainAtomSegments:Ct.ofOffsets(s.chains,Ae.ofBounds(0,e._rowCount))},l=cE(c,n,u),f=tE(c,u,l,r);return{sameAsPrevious:!1,hierarchy:{...c,...u,index:l,derived:f},chainOperatorMapping:a}}function cg(e,t,n,r,i,o){const{sameAsPrevious:s,hierarchy:c,chainOperatorMapping:a}=hE(e,t,n,r,i,o),u=dE(e);return{sameAsPrevious:s,hierarchy:c,conformation:u,chainOperatorMapping:a}}function pE(e){return new gE(e)}class _E{findElement(t,n){return n.kind=void 0,n.index=-1,!1}findSphereElement(t){return-1}findGaussianElement(t){return-1}}const yE=new _E;class gE{get sphereMapping(){return this._sphereMapping||(this._sphereMapping=ug(this.data.spheres)),this._sphereMapping}get gaussianMapping(){return this._gaussianMapping||(this._gaussianMapping=ug(this.data.gaussians)),this._gaussianMapping}findSphereElement(t){var n;let i=this.sphereMapping[t.label_entity_id];return!i||(i=i[t.label_asym_id],!i)?-1:(n=i[t.label_seq_id])!==null&&n!==void 0?n:-1}findGaussianElement(t){var n;let i=this.gaussianMapping[t.label_entity_id];return!i||(i=i[t.label_asym_id],!i)?-1:(n=i[t.label_seq_id])!==null&&n!==void 0?n:-1}findElement(t,n){const r=this.findSphereElement(t);if(r>=0)return n.kind="spheres",n.index=r,!0;const i=this.findGaussianElement(t);return i>=0?(n.kind="gaussians",n.index=i,!0):!1}constructor(t){this.data=t,this._sphereMapping=void 0,this._gaussianMapping=void 0}}function ug({count:e,entity_id:t,asym_id:n,seq_id_begin:r,seq_id_end:i}){const o={};for(let s=0;s<e;s++){const c=t.value(s),a=n.value(s);o[c]||(o[c]={}),o[c][a]||(o[c][a]={});const u=o[c][a],l=r.value(s),f=i.value(s);for(let d=l;d<=f;d++)u[d]=s}return o}const lg={chainKey:[],entityKey:[],findSequenceKey:()=>-1,findChainKey:()=>-1,getEntityFromChain:()=>-1,count:0,entity_id:ye.Undefined(0,ye.Schema.str),asym_id:ye.Undefined(0,ye.Schema.str),seq_id_begin:ye.Undefined(0,ye.Schema.int),seq_id_end:ye.Undefined(0,ye.Schema.int),chainElementSegments:Ct.create([]),polymerRanges:Ft.ofSortedRanges([]),gapRanges:Ft.ofSortedRanges([])};var ef;(function(e){e.Empty={isDefined:!1,spheres:lg,gaussians:lg,index:yE}})(ef||(ef={}));function bE(e,t,n){if(e.has(t))return e.get(t);const r=n.index++;return e.set(t,r),r}function vE(e,t){if(e.has(t))return e.get(t);const n=new Map;return e.set(t,n),n}function AE(e,t,n){const r=e.getEntityIndex;return{findChainKey:(s,c)=>{const a=r(s);if(a<0)return-1;const u=t.get(a);return u.has(c)?u.get(c):-1},findSequenceKey:(s,c,a)=>{const u=r(s);if(u<0)return-1;const l=t.get(u);if(l===void 0)return-1;const f=l.get(c);if(f===void 0)return-1;const d=n.get(f),{elementIndices:m,seqRanges:h}=d,p=Ft.firstIntersectionIndex(h,Fe.ofSingleton(a));return p!==-1?m[p]:-1}}}function xE(e){throw new Error(`Missing entity entry for entity id '${e}'.`)}function dg(e,t){const{entity_id:n,asym_id:r,seq_id_begin:i,seq_id_end:o,count:s,chainElementSegments:c}=e,a=new Map,u=new Map,l={index:0},f=new Int32Array(s),d=new Int32Array(s),m=new Int32Array(c.count);for(let y=0;y<s;y++)d[y]=t.getEntityIndex(n.value(y)),d[y]<0&&xE(n.value(y));for(let y=0;y<c.count;y++){const v=c.offsets[y],A=c.offsets[y+1],g=d[v];m[y]=g;const b=vE(u,g),C=bE(b,r.value(v),l);for(let T=v;T<A;T++)f[T]=C;const I=[],S=[];for(let T=v;T<A;T++){const D=i.value(T),w=o.value(T);I.push(T),S.push(D,w)}const P={elementIndices:I,seqRanges:Ft.ofSortedRanges(S)};a.set(C,P)}const{findChainKey:h,findSequenceKey:p}=AE(t,u,a);return{chainKey:f,entityKey:d,findSequenceKey:p,findChainKey:h,getEntityFromChain:y=>m[y]}}function fg(e,t){const n=[],r=[],i=Ct.transientSegments(e.chainElementSegments,Ae.ofBounds(0,e.count)),{seq_id_begin:o,seq_id_end:s}=e;for(;i.hasNext;){const{start:c,end:a}=i.move();let u=-1,l=-1;for(let f=c;f<a;++f){const d=s.value(f);f===c?(u=f,l=s.value(f)):o.value(f)-l>1&&(n.push(u,f-1),r.push(f-1,f),u=f),f===a-1&&n.push(u,f),l=d}}return{polymerRanges:Ft.ofSortedRanges(n),gapRanges:Ft.ofSortedRanges(r)}}mt.atom_site.label_comp_id,mt.atom_site.label_seq_id,mt.atom_site.pdbx_PDB_ins_code,mt.atom_site.label_asym_id,mt.atom_site.label_entity_id,mt.atom_site.auth_atom_id,mt.atom_site.auth_seq_id,mt.atom_site.auth_asym_id,{...mt.chem_comp_bond,molstar_protonation_variant:ye.Schema.Str()};const SE={...mt.chem_comp,type:ye.Schema.Aliased(ye.Schema.str)};function CE(e,t){const{ihm_model_group:n,ihm_model_group_link:r}=t,i=Ot.pickRow(r,o=>r.model_id.value(o)===e);if(i){const o=Ot.pickRow(n,s=>n.id.value(s)===i.group_id);if(o)return o.name}return""}function mg(e){for(let t=0,n=e.rowCount;t<n;t++)if(e.valueKind(t)===ye.ValueKinds.Present)return!0;return!1}function $o(e,t,n){(!e[t].isDefined||!mg(e[t]))&&(e[t]=e[n]),(!e[n].isDefined||!mg(e[n]))&&(e[n]=e[t])}function IE(e){const t=Ot.ofColumns(e._schema,e);return $o(t,"label_atom_id","auth_atom_id"),$o(t,"label_comp_id","auth_comp_id"),$o(t,"label_seq_id","auth_seq_id"),$o(t,"label_asym_id","auth_asym_id"),$o(t,"label_entity_id","label_asym_id"),t}const ni={entry:mt.entry,struct:mt.struct,struct_asym:mt.struct_asym,ihm_model_list:mt.ihm_model_list,ihm_model_group:mt.ihm_model_group,ihm_model_group_link:mt.ihm_model_group_link,entity:mt.entity,entity_poly:mt.entity_poly,entity_poly_seq:mt.entity_poly_seq,pdbx_entity_branch:mt.pdbx_entity_branch,chem_comp:SE,pdbx_chem_comp_identifier:mt.pdbx_chem_comp_identifier,atom_site:mt.atom_site,ihm_sphere_obj_site:mt.ihm_sphere_obj_site,ihm_gaussian_obj_site:mt.ihm_gaussian_obj_site,pdbx_unobs_or_zero_occ_residues:mt.pdbx_unobs_or_zero_occ_residues,pdbx_molecule:mt.pdbx_molecule};function hg(e,t=!1){const n=Object.create(null);for(const r of Object.keys(ni))r in e?n[r]=e[r]:n[r]=Ot.ofUndefinedColumns(ni[r],0);return t&&(n.atom_site=IE(n.atom_site)),n}const pg={hierarchy:ef.Empty,conformation:void 0};function wE(e,t){const{ihm_sphere_obj_site:n,ihm_gaussian_obj_site:r}=e;if(n._rowCount===0&&r._rowCount===0)return pg;const i=_g(n),o=PE(n),s=dg(i,e.entities),c=fg(i),a=_g(r),u=EE(r),l=dg(a,e.entities),f=fg(a);return{hierarchy:{isDefined:!0,spheres:{...i,...s,...c},gaussians:{...a,...l,...f},index:pE({spheres:i,gaussians:a})},conformation:{id:_n.create22(),spheres:o,gaussians:u}}}function PE(e){return{x:e.Cartn_x.toArray({array:Float32Array}),y:e.Cartn_y.toArray({array:Float32Array}),z:e.Cartn_z.toArray({array:Float32Array}),radius:e.object_radius.toArray({array:Float32Array}),rmsf:e.rmsf.toArray({array:Float32Array})}}function EE(e){const t=ni.ihm_gaussian_obj_site.covariance_matrix.space,n=[],{covariance_matrix:r}=e;for(let i=0,o=r.rowCount;i<o;i++)n[i]=dr.toMat3(jn(),t,r.value(i));return{x:e.mean_Cartn_x.toArray({array:Float32Array}),y:e.mean_Cartn_y.toArray({array:Float32Array}),z:e.mean_Cartn_z.toArray({array:Float32Array}),weight:e.weight.toArray({array:Float32Array}),covariance_matrix:n}}function BE(e,t,n){const r=[0];for(let i=1,o=e.rowCount;i<o;i++)!e.areValuesEqual(i-1,i)&&(r[r.length]=i);return{chainElementSegments:Ct.ofOffsets(r,Ae.ofBounds(0,e.rowCount))}}function _g(e){const{entity_id:t,seq_id_begin:n,seq_id_end:r,asym_id:i}=e;return{count:t.rowCount,entity_id:t,asym_id:i,seq_id_begin:n,seq_id_end:r,...BE(i)}}function yg(e,t,n,r){if(!e.entity_poly_seq||!e.entity_poly_seq._rowCount)return Wd.fromHierarchy(t,n,r);const{entity_id:i,num:o,mon_id:s}=e.entity_poly_seq,c={},a=[],u=i.rowCount;let l=0;for(;l<u;){const f=l;for(;l<u-1&&i.areValuesEqual(l,l+1);)l++;l++;const d=i.value(f),m=ye.window(s,f,l),h=ye.window(o,f,l),p=t.getEntityIndex(d);c[p]={entityId:d,sequence:jo.ofResidueNames(m,h)},a.push(c[p])}return{byEntityKey:c,sequences:a}}async function gg(e,t,n,r){const i=zl(n,r-1),{label_entity_id:o,label_asym_id:s,label_seq_id:c}=t,a=Vl(i,o.value);e.shouldUpdate&&await e.update();for(let u=0,l=a.length-1;u<l;u++){const f=Vl(i,s.value,{start:a[u],end:a[u+1]});for(let d=0,m=f.length-1;d<m;d++){const h=f[d];c.valueKind(h)===ye.ValueKinds.Present&&(Vl(i,c.value,{sort:!0,start:h,end:f[d+1]}),e.shouldUpdate&&await e.update())}e.shouldUpdate&&await e.update()}return wS(i)&&i.length===t._rowCount?{atom_site:t,sourceIndex:ye.ofIntArray(i)}:{atom_site:Ot.view(t,t._schema,i),sourceIndex:ye.ofIntArray(i)}}function bg(e,t,n,r,i){const{polymerType:o,traceElementIndex:s,directionFromElementIndex:c,directionToElementIndex:a}=i.residue,u=o[e],l=o[t];if(u===un.NA||l===un.NA||s[e]===-1||s[t]===-1)return!1;let f=r.findAtomsOnResidue(e,ti(u,"backboneStart")),d=r.findAtomsOnResidue(t,ti(l,"backboneEnd"));(f===-1||d===-1)&&(f=r.findAtomsOnResidue(e,ti(u,"coarseBackbone")),d=r.findAtomsOnResidue(t,ti(l,"coarseBackbone")));const{x:m,y:h,z:p}=n,_=O.create(m[f],h[f],p[f]),y=O.create(m[d],h[d],p[d]),v=c[e]===-1||a[e]===-1||c[t]===-1||a[t]===-1;return O.distance(_,y)<(v?10:3)}function vg(e,t,n,r){const i=[],o=[],s=new Map,c=Ct.transientSegments(e.chainAtomSegments,Ae.ofBounds(0,e.atoms._rowCount)),a=Ct.transientSegments(e.residueAtomSegments,Ae.ofBounds(0,e.atoms._rowCount)),{index:u,derived:l}=e,{label_seq_id:f}=e.residues,{label_entity_id:d}=e.chains,{moleculeType:m,traceElementIndex:h}=l.residue;let p,_,y,v;for(;c.hasNext;){const A=c.move();a.setSegment(A),p=-1,_=-1,y=-1,v=-1;const g=t.getEntityIndex(d.value(A.index)),b=r.byEntityKey[g],C=b?b.sequence.seqId.value(b.sequence.seqId.rowCount-1):-1,I=e.residueAtomSegments.index[A.start],S=e.residueAtomSegments.index[A.end-1],P=f.value(I),T=f.value(S);for(P===1&&T===C&&n.xyzDefined&&bg(I,S,n,u,l)&&(s.set(I,S),s.set(S,I));a.hasNext;){const D=a.move(),w=D.index,E=f.value(w);if(hd(m[w])&&h[w]!==-1)if(v!==-1)if(E!==p+1)i.push(v,y-1),o.push(_,D.end-1),v=D.start;else if(!a.hasNext)i.push(v,D.end-1);else{const k=e.residueAtomSegments.index[D.start],F=e.residueAtomSegments.index[y-1];n.xyzDefined&&!bg(k,F,n,e.index,l)&&(i.push(v,y-1),o.push(_,D.end-1),v=D.start)}else v=D.start;else v!==-1&&(i.push(v,y-1),v=-1);_=D.start,y=D.end,p=E}}return{polymerRanges:Ft.ofSortedRanges(i),gapRanges:Ft.ofSortedRanges(o),cyclicPolymerMap:s}}function RE(e){const t=new Map,n=(i,o,s)=>`${i}|${o}|${s}`,r=e.pdbx_unobs_or_zero_occ_residues;for(let i=0,o=r._rowCount;i<o;++i){const s=n(r.PDB_model_num.value(i),r.label_asym_id.value(i),r.label_seq_id.value(i));t.set(s,{polymer_flag:r.polymer_flag.value(i),occupancy_flag:r.occupancy_flag.value(i)})}return{has:(i,o,s)=>t.has(n(i,o,s)),get:(i,o,s)=>t.get(n(i,o,s)),size:t.size}}function DE(e){const t=new Map;if(e.chem_comp._rowCount>0){const{id:n}=e.chem_comp;for(let r=0,i=n.rowCount;r<i;++r)t.set(n.value(r),Ot.getRow(e.chem_comp,r))}else Ag(e).forEach(r=>{t.set(r,pC(r))});return t}function kE(e){const t=new Map;if(e.pdbx_chem_comp_identifier._rowCount>0){const{comp_id:n,type:r,identifier:i}=e.pdbx_chem_comp_identifier;for(let o=0,s=n.rowCount;o<s;++o)if(r.value(o)==="SNFG CARBOHYDRATE SYMBOL"||r.value(o)==="SNFG CARB SYMBOL"){const c=i.value(o),a=nC.get(c);a?t.set(n.value(o),a):console.warn(`Unknown SNFG name '${c}'`)}}if(e.chem_comp._rowCount>0){const{id:n,type:r}=e.chem_comp;for(let i=0,o=n.rowCount;i<o;++i){const s=n.value(i);if(t.has(s))continue;const c=r.value(i);$r.has(s)?t.set(s,$r.get(s)):md(c,s)===Nt.Saccharide&&t.set(s,ud)}}else{const n=Ag(e);$r.forEach((r,i)=>{!t.has(i)&&n.has(i)&&t.set(i,r)})}return t}const Ag=Py(e=>{const t=new Set,{label_comp_id:n,auth_comp_id:r}=e.atom_site,i=n.isDefined?n:r;for(let o=0,s=i.rowCount;o<s;++o)t.add(i.value(o));return t});function xg(e,t){const n=new Map,{auth_asym_id:r,label_asym_id:i,label_entity_id:o}=e.chains;for(let s=0,c=e.chains._rowCount;s<c;s++){const a=i.value(s);n.set(a,{id:a,auth_id:r.value(s),entity_id:o.value(s)})}if(t?.struct_asym._rowCount){const{id:s,entity_id:c}=t.struct_asym;for(let a=0,u=s.rowCount;a<u;++a){const l=s.value(a);n.has(l)||n.set(l,{id:l,auth_id:"",entity_id:c.value(a)})}}return n}const TE=ye.Schema.Aliased(ye.Schema.Str());function Sg(e){let t;if(e.entity.id.isDefined)t=e.entity;else{const c=new Set,a=[],u=[],{label_entity_id:l,label_comp_id:f}=e.atom_site;for(let h=0,p=e.atom_site._rowCount;h<p;h++){const _=l.value(h);c.has(_)||(a.push(_),u.push(_C(f.value(h))),c.add(_))}const{entity_id:d}=e.ihm_sphere_obj_site;for(let h=0,p=e.ihm_sphere_obj_site._rowCount;h<p;h++){const _=d.value(h);c.has(_)||(a.push(_),u.push("polymer"),c.add(_))}const{entity_id:m}=e.ihm_gaussian_obj_site;for(let h=0,p=e.ihm_gaussian_obj_site._rowCount;h<p;h++){const _=m.value(h);c.has(_)||(a.push(_),u.push("polymer"),c.add(_))}t=Ot.ofPartialColumns(ni.entity,{id:ye.ofArray({array:a,schema:ni.entity.id}),type:ye.ofArray({array:u,schema:ni.entity.type})},a.length)}const n=ye.createIndexer(t.id),r=new Array(t._rowCount);r.fill("other");const i=new Set;let o=!1;if(e.entity_poly&&e.entity_poly.type.isDefined){const{entity_id:c,type:a,_rowCount:u}=e.entity_poly;for(let l=0;l<u;++l){const f=c.value(l);r[n(f)]=a.value(l),i.add(f)}}else o=!0;if(e.pdbx_entity_branch&&e.pdbx_entity_branch.entity_id.isDefined){const{entity_id:c,type:a,_rowCount:u}=e.pdbx_entity_branch;for(let l=0;l<u;++l){const f=c.value(l);r[n(f)]=a.value(l),i.add(f)}}else o=!0;if(i.size<r.length&&(o=!0),o){const c=new Map;if(e.chem_comp){const{id:a,type:u}=e.chem_comp;for(let l=0,f=e.chem_comp._rowCount;l<f;l++)c.set(a.value(l),u.value(l))}if(e.atom_site){const{label_entity_id:a,label_comp_id:u}=e.atom_site;for(let l=0,f=e.atom_site._rowCount;l<f;l++){const d=a.value(l);if(!i.has(d)){const m=u.value(l),h=c.get(m)||"other";r[n(d)]=yC(m,h),i.add(d)}}}}const s=ye.ofArray({array:r,schema:TE});return{data:t,subtype:s,getEntityIndex:n}}function Cg(e,t,n){var r;if(!e.pdbx_molecule||!e.pdbx_molecule.prd_id.isDefined)return t;const i=new Array(t.data._rowCount);i.fill("");const{asym_id:o,prd_id:s,_rowCount:c}=e.pdbx_molecule;for(let u=0;u<c;++u){const l=o.value(u),f=(r=n.get(l))===null||r===void 0?void 0:r.entity_id;f!==void 0&&(i[t.getEntityIndex(f)]=s.value(u))}const a=ye.ofArray({array:i,schema:ye.Schema.str});return{...t,prd_id:a}}async function tf(e,t,n){const r=NE(e),i=e.ihm_model_list._rowCount>0?await UE(n,e,r,t):await qE(n,e,r,t);for(let o=0;o<i.length;o++)Lt.TrajectoryInfo.set(i[o],{index:o,size:i.length});return new Vd(i)}function NE(e,t){return{missingResidues:RE(e),chemicalComponentMap:DE(e),saccharideComponentMap:kE(e)}}function OE(e,t,n,r,i,o,s){const c=cg(t,n,r,i.chemicalComponentMap,o,s),a=t.pdbx_PDB_model_num.value(0);if(s&&c.sameAsPrevious)return{...s,id:_n.create22(),modelNum:a,atomicConformation:c.conformation,_dynamicPropertyData:Object.create(null)};const u=pg,l=yg(e,r,c.hierarchy,u.hierarchy),f=vg(c.hierarchy,r,c.conformation,l),d=xg(c.hierarchy),m=e.entry.id.valueKind(0)===ye.ValueKinds.Present?e.entry.id.value(0):o.name,h=[];return m&&h.push(m),e.struct.title.valueKind(0)===ye.ValueKinds.Present&&h.push(e.struct.title.value(0)),{id:_n.create22(),entryId:m,label:h.join(" | "),entry:m,sourceData:o,modelNum:a,parent:void 0,entities:Cg(e,r,d),sequence:l,atomicHierarchy:c.hierarchy,atomicConformation:c.conformation,atomicRanges:f,atomicChainOperatorMappinng:c.chainOperatorMapping,coarseHierarchy:u.hierarchy,coarseConformation:u.conformation,properties:{...i,structAsymMap:d},customProperties:new Gs,_staticPropertyData:Object.create(null),_dynamicPropertyData:Object.create(null)}}function ME(e,t,n,r){const i=cg(t.atom_site,t.atom_site_sourceIndex,t.entities,n.chemicalComponentMap,r),o=wE(t,n.chemicalComponentMap),s=yg(e,t.entities,i.hierarchy,o.hierarchy),c=vg(i.hierarchy,t.entities,i.conformation,s),a=e.entry.id.valueKind(0)===ye.ValueKinds.Present?e.entry.id.value(0):r.name,u=[];a&&u.push(a),e.struct.title.valueKind(0)===ye.ValueKinds.Present&&u.push(e.struct.title.value(0)),t.model_name&&u.push(t.model_name),t.model_group_name&&u.push(t.model_group_name);const l=xg(i.hierarchy,e);return{id:_n.create22(),entryId:a,label:u.join(" | "),entry:a,sourceData:r,modelNum:t.model_id,parent:void 0,entities:Cg(e,t.entities,l),sequence:s,atomicHierarchy:i.hierarchy,atomicConformation:i.conformation,atomicRanges:c,atomicChainOperatorMappinng:i.chainOperatorMapping,coarseHierarchy:o.hierarchy,coarseConformation:o.conformation,properties:{...n,structAsymMap:l},customProperties:new Gs,_staticPropertyData:Object.create(null),_dynamicPropertyData:Object.create(null)}}function Ig(e,t){const n=e.rowCount;if(!e.isDefined)return n;let r=t+1;for(;r<n&&e.areValuesEqual(t,r);)r++;return r}async function qE(e,t,n,r){const i=[];if(t.atom_site){const o=t.atom_site.id.rowCount,s=Sg(t);let c=0;for(;c<o;){const a=Ig(t.atom_site.pdbx_PDB_model_num,c),{atom_site:u,sourceIndex:l}=await gg(e,t.atom_site,c,a),f=OE(t,u,l,s,n,r,i.length>0?i[i.length-1]:void 0);i.push(f),c=a}}return i}function nf(e,t){const n=new Map,r=e._rowCount;let i=0;for(;i<r;){const o=Ig(t,i),s=t.value(i);n.set(s,{table:Ot.window(e,e._schema,i,o),start:i,end:o}),i=o}return n}async function UE(e,t,n,r){const i=Sg(t),o=t.atom_site.ihm_model_id.isDefined?t.atom_site.ihm_model_id:t.atom_site.pdbx_PDB_model_num,s=nf(t.atom_site,o),c=nf(t.ihm_sphere_obj_site,t.ihm_sphere_obj_site.model_id),a=nf(t.ihm_gaussian_obj_site,t.ihm_gaussian_obj_site.model_id),u=[];if(t.ihm_model_list){const{model_id:l,model_name:f}=t.ihm_model_list;for(let d=0;d<t.ihm_model_list._rowCount;d++){const m=l.value(d);let h,p;if(s.has(m)){const v=s.get(m),{atom_site:A,sourceIndex:g}=await gg(e,t.atom_site,v.start,v.end);h=A,p=g}else h=Ot.window(t.atom_site,t.atom_site._schema,0,0),p=ye.ofIntArray([]);const _={model_id:m,model_name:f.value(d),model_group_name:CE(m,t),entities:i,atom_site:h,atom_site_sourceIndex:p,ihm_sphere_obj_site:c.has(m)?c.get(m).table:Ot.window(t.ihm_sphere_obj_site,t.ihm_sphere_obj_site._schema,0,0),ihm_gaussian_obj_site:a.has(m)?a.get(m).table:Ot.window(t.ihm_gaussian_obj_site,t.ihm_gaussian_obj_site._schema,0,0)},y=ME(t,_,n,r);u.push(y)}}return u}var Lt;(function(e){function t(K,ae){const me=[],{frames:De}=ae,te=n(K),ce=y(K),M=K.atomicHierarchy.atoms._rowCount;for(let B=0,j=De.length;B<j;++B){const ne=De[B];if(ne.elementCount!==M)throw new Error(`Frame element count mismatch, got ${ne.elementCount} but expected ${M}.`);const G={...K,id:_n.create22(),modelNum:B,atomicConformation:o(K,ne),customProperties:new Gs,_staticPropertyData:Object.create(null),_dynamicPropertyData:Object.create(null)};if(ne.cell){const $=Nn.fromCell(ne.cell.size,ne.cell.anglesInRadians);Nn.Provider.set(G,$)}e.TrajectoryInfo.set(G,{index:B,size:De.length}),e.CoarseGrained.set(G,ce),me.push(G)}return{trajectory:me,srcIndexArray:te}}function n(K){const ae=K.atomicHierarchy.atomSourceIndex;let me;return"__srcIndexArray__"in K._staticPropertyData?me=K._dynamicPropertyData.__srcIndexArray__:(me=ye.isIdentity(ae)?void 0:ae.toArray({array:Int32Array}),K._dynamicPropertyData.__srcIndexArray__=me),me}function r(K,ae){return new Vd(t(K,ae).trajectory)}e.trajectoryFromModelAndCoordinates=r;function i(K,ae){return rn.create("Create Trajectory",async me=>{const De=await tf(K.basic,K.sourceData,me);if(De.frameCount===0)throw new Error("found no model");const te=De.representative,{trajectory:ce}=t(te,ae),M={pairs:K.bonds,count:te.atomicHierarchy.atoms._rowCount},B=xn.fromData(M),j=y(te);let ne=0;for(const G of ce)xn.Provider.set(G,B),e.TrajectoryInfo.set(G,{index:ne++,size:ce.length}),e.CoarseGrained.set(G,j);return new Vd(ce)})}e.trajectoryFromTopologyAndCoordinates=i;function o(K,ae){return nd.getAtomicConformation(ae,{atomId:K.atomicConformation.atomId,occupancy:K.atomicConformation.occupancy,B_iso_or_equiv:K.atomicConformation.B_iso_or_equiv},n(K))}e.getAtomicConformationFromFrame=o;const s="__Center__";function c(K){if(K._dynamicPropertyData[s])return K._dynamicPropertyData[s];const ae=PS(K.atomicConformation,K.coarseConformation);return K._dynamicPropertyData[s]=ae,ae}e.getCenter=c;function a(K){const ae=new Int32Array(K.rowCount);let me=!1;for(let De=0,te=K.rowCount;De<te;De++){const ce=K.value(De);ce!==De&&(me=!1),ae[ce]=De}return{isIdentity:me,invertedIndex:ae}}const u="__InvertedAtomSrcIndex__";function l(K){if(K._staticPropertyData[u])return K._staticPropertyData[u];const ae=a(K.atomicHierarchy.atomSourceIndex);return K._staticPropertyData[u]=ae,ae}e.getInvertedAtomSourceIndex=l;const f="__TrajectoryInfo__";e.TrajectoryInfo={get(K){return K._dynamicPropertyData[f]||{index:0,size:1}},set(K,ae){return K._dynamicPropertyData[f]=ae}};const d="__AsymIdCount__";e.AsymIdCount={get(K){if(K._dynamicPropertyData[d])return K._dynamicPropertyData[d];const ae=ES(K);return K._dynamicPropertyData[d]=ae,ae}},e.AsymIdOffset=Pi.createSimple("asym_id_offset","static"),e.Index=Pi.createSimple("index","static"),e.MaxIndex=Pi.createSimple("max_index","static");function m(K){return K.parent||K}e.getRoot=m;function h(K,ae){return K.atomicHierarchy===ae.atomicHierarchy&&K.coarseHierarchy===ae.coarseHierarchy}e.areHierarchiesEqual=h;const p="__CoordinatesHistory__";e.CoordinatesHistory={get(K){return K._staticPropertyData[p]},set(K,ae){return K._staticPropertyData[p]=ae}};const _="__CoarseGrained__";e.CoarseGrained={get(K){return K._staticPropertyData[_]},set(K,ae){return K._staticPropertyData[_]=ae}};function y(K){let ae=e.CoarseGrained.get(K);if(ae===void 0){let me=0,De=0;const{polymerType:te,directionToElementIndex:ce}=K.atomicHierarchy.derived.residue;for(let G=0;G<te.length;++G)te[G]!==un.NA&&(me+=1,ce[G]!==-1&&(De+=1));let M=!1,B=!1;const{label_atom_id:j,_rowCount:ne}=K.atomicHierarchy.atoms;for(let G=0;G<ne;++G){const $=j.value(G);if(!M&&$==="BB"&&(M=!0),!B&&$==="SC1"&&(B=!0),M&&B)break}ae=!1,ne>0&&me>0&&(M&&B||ne/me<3||De===0)&&(ae=!0),e.CoarseGrained.set(K,ae)}return ae}e.isCoarseGrained=y;function v(K){return K.properties.saccharideComponentMap.size>0}e.hasCarbohydrate=v;function A(K){const{subtype:ae}=K.entities;for(let me=0,De=ae.rowCount;me<De;++me)if(ae.value(me).startsWith("polypeptide"))return!0;return!1}e.hasProtein=A;function g(K){const{subtype:ae}=K.entities;for(let me=0,De=ae.rowCount;me<De;++me){const te=ae.value(me);if(te.endsWith("ribonucleotide hybrid")||te.endsWith("ribonucleotide"))return!0}return!1}e.hasNucleic=g;function b(K){if(!kt.is(K.sourceData))return!1;const{db:ae}=K.sourceData.data;for(let me=0,De=ae.database_2.database_id.rowCount;me<De;++me)if(ae.database_2.database_id.value(me)==="pdb")return!0;return!1}e.isFromPdbArchive=b;function C(K){return kt.is(K.sourceData)?K.entryId.match(/^[1-9][a-z0-9]{3,3}$/i)!==null||K.entryId.match(/^pdb_[0-9]{4,4}[1-9][a-z0-9]{3,3}$/i)!==null:!1}e.hasPdbId=C;function I(K){if(kt.is(K.sourceData)){const{db:ae}=K.sourceData.data;return ae.struct_conf.id.isDefined||ae.struct_sheet_range.id.isDefined}else return xi.Provider.isApplicable(K)}e.hasSecondaryStructure=I;const S=O.create(1.5707963,1.5707963,1.5707963),P=O.create(1,1,1);function T(K){var ae;const me=(ae=Nn.Provider.get(K))===null||ae===void 0?void 0:ae.spacegroup;return!!me&&!(me.num===1&&O.equals(me.cell.anglesInRadians,S)&&O.equals(me.cell.size,P))}e.hasCrystalSymmetry=T;function D(K){if(!kt.is(K.sourceData))return!1;const{db:ae}=K.sourceData.data;for(let me=0;me<ae.exptl.method.rowCount;me++)if(ae.exptl.method.value(me).toUpperCase().indexOf("DIFFRACTION")>=0)return!0;return!1}e.isFromXray=D;function w(K){if(!kt.is(K.sourceData))return!1;const{db:ae}=K.sourceData.data;for(let me=0;me<ae.exptl.method.rowCount;me++)if(ae.exptl.method.value(me).toUpperCase().indexOf("MICROSCOPY")>=0)return!0;return!1}e.isFromEm=w;function E(K){if(!kt.is(K.sourceData))return!1;const{db:ae}=K.sourceData.data;for(let me=0;me<ae.exptl.method.rowCount;me++)if(ae.exptl.method.value(me).toUpperCase().indexOf("NMR")>=0)return!0;return!1}e.isFromNmr=E;function k(K){if(!kt.is(K.sourceData))return!1;const{db:ae}=K.sourceData.data;for(let me=0;me<ae.struct.pdbx_structure_determination_methodology.rowCount;me++)if(ae.struct.pdbx_structure_determination_methodology.value(me).toLowerCase()==="experimental")return!0;return!1}e.isExperimental=k;function F(K){if(!kt.is(K.sourceData))return!1;const{db:ae}=K.sourceData.data;for(let me=0;me<ae.struct.pdbx_structure_determination_methodology.rowCount;me++)if(ae.struct.pdbx_structure_determination_methodology.value(me).toLowerCase()==="integrative")return!0;return!1}e.isIntegrative=F;function V(K){if(!kt.is(K.sourceData))return!1;const{db:ae}=K.sourceData.data;for(let me=0;me<ae.struct.pdbx_structure_determination_methodology.rowCount;me++)if(ae.struct.pdbx_structure_determination_methodology.value(me).toLowerCase()==="computational")return!0;return!1}e.isComputational=V;function de(K){if(!kt.is(K.sourceData)||!D(K))return!1;const{db:ae}=K.sourceData.data,{status_code_sf:me}=ae.pdbx_database_status;return me.isDefined&&me.value(0)==="REL"}e.hasXrayMap=de;function W(K){if(!kt.is(K.sourceData))return!1;const{db:ae}=K.sourceData.data,{db_name:me,content_type:De}=ae.pdbx_database_related;for(let te=0,ce=ae.pdbx_database_related._rowCount;te<ce;++te)if(me.value(te).toUpperCase()==="EMDB"&&De.value(te)==="associated EM volume")return!0;return!1}e.hasEmMap=W;function J(K){return kt.is(K.sourceData)?de(K)||W(K):!1}e.hasDensityMap=J;function le(K){if(!kt.is(K.sourceData)||e.isIntegrative(K))return!1;const{db:ae}=K.sourceData.data;return J(K)||C(K)&&(!ae.exptl.method.isDefined||D(K)&&(!ae.pdbx_database_status.status_code_sf.isDefined||ae.pdbx_database_status.status_code_sf.valueKind(0)===ye.ValueKinds.Unknown)||w(K)&&!ae.pdbx_database_related.db_name.isDefined)}e.probablyHasDensityMap=le})(Lt||(Lt={}));const FE={U:mt.atom_site_anisotrop.U,U_esd:mt.atom_site_anisotrop.U_esd};var Wo;(function(e){e.Schema=FE,e.Descriptor={name:"atom_site_anisotrop",cifExport:{prefix:"",categories:[{name:"atom_site_anisotrop",instance(r){return!e.Provider.get(r.firstModel)||!kt.is(r.firstModel.sourceData)?an.Category.Empty:an.Category.ofTable(r.firstModel.sourceData.data.db.atom_site_anisotrop)}}]}},e.Provider=_r.create(e.Descriptor);function t(r,i){const o=new Int32Array(r.rowCount);o.fill(-1);for(let c=0,a=r.rowCount;c<a;c++)o[r.value(c)]=c;const s=new Int32Array(r.rowCount);s.fill(-1);for(let c=0,a=i.rowCount;c<a;++c){const u=o[i.value(c)];u!==-1&&(s[u]=c)}return s}e.getElementToAnsiotrop=t;function n(r,i){const o={};for(let c=0,a=r.rowCount;c<a;c++)o[r.value(c)]=c;const s=new Int32Array(r.rowCount);s.fill(-1);for(let c=0,a=i.rowCount;c<a;++c){const u=o[i.value(c)];u!==void 0&&(s[u]=c)}return s}e.getElementToAnsiotropFromLabel=n})(Wo||(Wo={}));var Yo;(function(e){const t="molstar_global_model_transform_info";e.Schema={[t]:{matrix:ye.Schema.Matrix(4,4,ye.Schema.float)}},e.Descriptor=Vr({name:t,cifExport:{categories:[{name:t,instance(c){const a=r(c.firstModel);if(!a)return an.Category.Empty;const u=Ot.ofRows(e.Schema.molstar_global_model_transform_info,[{matrix:a}]);return an.Category.ofTable(u)}}],prefix:"molstar"}}),e.Provider=_r.create(e.Descriptor);function n(c,a){c.customProperties.has(e.Descriptor)||c.customProperties.add(e.Descriptor),e.Provider.set(c,a)}e.attach=n;function r(c){return e.Provider.get(c)}e.get=r;function i(c){if(!kt.is(c.sourceData))return;const a=c.sourceData.data.frame.categories[t];if(!a)return;const u=nS(e.Schema[t],a);if(u._rowCount!==0)return u.matrix.value(0)}e.fromMmCif=i;function o(c){if(!kt.is(c.sourceData))return!1;const a=c.sourceData.data.frame.categories[t];return!!a&&a.rowCount>0}e.hasData=o;function s(c,a){c.writeCategory({name:t,instance(){const u=Ot.ofRows(e.Schema.molstar_global_model_transform_info,[{matrix:a}]);return an.Category.ofTable(u)}})}e.writeMmCif=s})(Yo||(Yo={}));class LE{constructor(){this.count=0,this.ids=[],this.types=[],this.descriptions=[],this.compoundsMap=new Map,this.namesMap=new Map,this.heteroMap=new Map,this.chainMap=new Map}set(t,n){this.count+=1,this.ids.push(`${this.count}`),this.types.push(t),this.descriptions.push([n])}getEntityId(t,n,r,i){return n===Nt.Water?(this.waterId===void 0&&(this.set("water",i?.customName||"Water"),this.waterId=`${this.count}`),this.waterId):hd(n)?this.compoundsMap.has(r)?this.compoundsMap.get(r):(this.chainMap.has(r)||(this.set("polymer",i?.customName||`Polymer ${this.chainMap.size+1}`),this.chainMap.set(r,`${this.count}`)),this.chainMap.get(r)):(this.heteroMap.has(t)||(this.set("non-polymer",i?.customName||this.namesMap.get(t)||t),this.heteroMap.set(t,`${this.count}`)),this.heteroMap.get(t))}getEntityTable(){return Ot.ofPartialColumns(ni.entity,{id:ye.ofStringArray(this.ids),type:ye.ofStringAliasArray(this.types),pdbx_description:ye.ofStringListArray(this.descriptions)},this.count)}setCompounds(t){for(let n=0,r=t.length;n<r;++n){const{chains:i,description:o}=t[n];this.set("polymer",o);for(let s=0,c=i.length;s<c;++s)this.compoundsMap.set(i[s],`${this.count}`)}}setNames(t){t.forEach(n=>this.namesMap.set(n[0],n[1]))}}const GE=[new Set(["CA"]),new Set(["C"]),new Set(["N"])],HE=[new Set(["P","O3'","O3*"]),new Set(["C4'","C4*"]),new Set(["O2'","O2*","F2'","F2*"])],jE=[new Set(["P","O3'","O3*"]),new Set(["C3'","C3*"]),new Set(["O2'","O2*","F2'","F2*"])],VE=new Set(["FMN","NCN","FNS","FMA","ATP","ADP","AMP","GTP","GDP","GMP","LIG"]),wg=function(){const e=new Map;return[{id:"HIS",name:"HISTIDINE",type:"l-peptide linking"},{id:"ARG",name:"ARGININE",type:"l-peptide linking"},{id:"LYS",name:"LYSINE",type:"l-peptide linking"},{id:"ILE",name:"ISOLEUCINE",type:"l-peptide linking"},{id:"PHE",name:"PHENYLALANINE",type:"l-peptide linking"},{id:"LEU",name:"LEUCINE",type:"l-peptide linking"},{id:"TRP",name:"TRYPTOPHAN",type:"l-peptide linking"},{id:"ALA",name:"ALANINE",type:"l-peptide linking"},{id:"MET",name:"METHIONINE",type:"l-peptide linking"},{id:"CYS",name:"CYSTEINE",type:"l-peptide linking"},{id:"ASN",name:"ASPARAGINE",type:"l-peptide linking"},{id:"VAL",name:"VALINE",type:"l-peptide linking"},{id:"GLY",name:"GLYCINE",type:"peptide linking"},{id:"SER",name:"SERINE",type:"l-peptide linking"},{id:"GLN",name:"GLUTAMINE",type:"l-peptide linking"},{id:"TYR",name:"TYROSINE",type:"l-peptide linking"},{id:"ASP",name:"ASPARTIC ACID",type:"l-peptide linking"},{id:"GLU",name:"GLUTAMIC ACID",type:"l-peptide linking"},{id:"THR",name:"THREONINE",type:"l-peptide linking"},{id:"PRO",name:"PROLINE",type:"l-peptide linking"},{id:"SEC",name:"SELENOCYSTEINE",type:"l-peptide linking"},{id:"PYL",name:"PYRROLYSINE",type:"l-peptide linking"},{id:"MSE",name:"SELENOMETHIONINE",type:"l-peptide linking"},{id:"SEP",name:"PHOSPHOSERINE",type:"l-peptide linking"},{id:"TPO",name:"PHOSPHOTHREONINE",type:"l-peptide linking"},{id:"PTR",name:"O-PHOSPHOTYROSINE",type:"l-peptide linking"},{id:"PCA",name:"PYROGLUTAMIC ACID",type:"l-peptide linking"},{id:"A",name:"ADENOSINE-5'-MONOPHOSPHATE",type:"rna linking"},{id:"C",name:"CYTIDINE-5'-MONOPHOSPHATE",type:"rna linking"},{id:"T",name:"THYMIDINE-5'-MONOPHOSPHATE",type:"rna linking"},{id:"G",name:"GUANOSINE-5'-MONOPHOSPHATE",type:"rna linking"},{id:"I",name:"INOSINIC ACID",type:"rna linking"},{id:"U",name:"URIDINE-5'-MONOPHOSPHATE",type:"rna linking"},{id:"DA",name:"2'-DEOXYADENOSINE-5'-MONOPHOSPHATE",type:"dna linking"},{id:"DC",name:"2'-DEOXYCYTIDINE-5'-MONOPHOSPHATE",type:"dna linking"},{id:"DT",name:"THYMIDINE-5'-MONOPHOSPHATE",type:"dna linking"},{id:"DG",name:"2'-DEOXYGUANOSINE-5'-MONOPHOSPHATE",type:"dna linking"},{id:"DI",name:"2'-DEOXYINOSINE-5'-MONOPHOSPHATE",type:"dna linking"},{id:"DU",name:"2'-DEOXYURIDINE-5'-MONOPHOSPHATE",type:"dna linking"}].forEach(n=>e.set(n.id,n)),e}(),Pg=function(){const e=new Map;return[{id:"ZN2",name:"ZINC ION",type:"ion"},{id:"SOD",name:"SODIUM ION",type:"ion"},{id:"CES",name:"CESIUM ION",type:"ion"},{id:"CLA",name:"CHLORIDE ION",type:"ion"},{id:"CAL",name:"CALCIUM ION",type:"ion"},{id:"POT",name:"POTASSIUM ION",type:"ion"}].forEach(n=>e.set(n.id,n)),e}();class zE{set(t){this.comps.set(t.id,t),this.ids.push(t.id),this.names.push(t.name),this.types.push(t.type),this.mon_nstd_flags.push(fd.has(t.id)?"y":"n")}getAtomIds(t){const n=new Set,r=this.seqId.value(t);for(;t<this.seqId.rowCount&&this.seqId.value(t)===r;)n.add(this.atomId.value(t)),t+=1;return n}hasAtomIds(t,n){for(let r=0,i=n.length;r<i;++r)if(!gr.areIntersecting(t,n[r]))return!1;return!0}getType(t){return this.hasAtomIds(t,GE)?"peptide linking":this.hasAtomIds(t,HE)?"rna linking":this.hasAtomIds(t,jE)?"dna linking":"other"}has(t){return this.comps.has(t)}get(t){return this.comps.get(t)}add(t,n){if(!this.has(t))if(wg.has(t))this.set(wg.get(t));else if(ld.has(t))this.set({id:t,name:"WATER",type:"non-polymer"});else if(VE.has(t.toUpperCase()))this.set({id:t,name:this.namesMap.get(t)||t,type:"non-polymer"});else if($r.has(t.toUpperCase()))this.set({id:t,name:this.namesMap.get(t)||t,type:"saccharide"});else{const r=this.getAtomIds(n);if(r.size===1&&Pg.has(t))this.set(Pg.get(t));else{const i=this.getType(r);this.set({id:t,name:this.namesMap.get(t)||t,type:i})}}return this.get(t)}getChemCompTable(){return Ot.ofPartialColumns(ni.chem_comp,{id:ye.ofStringArray(this.ids),name:ye.ofStringArray(this.names),type:ye.ofStringAliasArray(this.types),mon_nstd_flag:ye.ofStringAliasArray(this.mon_nstd_flags)},this.ids.length)}setNames(t){t.forEach(n=>this.namesMap.set(n[0],n[1]))}constructor(t,n){this.seqId=t,this.atomId=n,this.namesMap=new Map,this.comps=new Map,this.ids=[],this.names=[],this.types=[],this.mon_nstd_flags=[]}}function KE(e){if(kt.is(e.sourceData))return Nn.fromData(e.sourceData.data.db)}Nn.Provider.formatRegistry.add("mmCIF",KE);function $E(e){if(!kt.is(e.sourceData))return;const{struct_conf:t,struct_sheet_range:n}=e.sourceData.data.db;return xi.fromStruct(t,n,e.atomicHierarchy)}xi.Provider.formatRegistry.add("mmCIF",$E);function WE(e){if(!kt.is(e.sourceData))return;const{atom_site_anisotrop:t}=e.sourceData.data.db,n=Ot.ofColumns(Wo.Schema,t),r=Wo.getElementToAnsiotrop(e.atomicConformation.atomId,t.id);return{data:n,elementToAnsiotrop:r}}function YE(e){return kt.is(e.sourceData)?e.sourceData.data.db.atom_site_anisotrop.U.isDefined:!1}Wo.Provider.formatRegistry.add("mmCIF",WE,YE);function ZE(e){if(!kt.is(e.sourceData))return;const{chem_comp_bond:t}=e.sourceData.data.db;if(t._rowCount!==0)return{data:t,entries:Uo.getEntriesFromChemCompBond(t)}}Uo.Provider.formatRegistry.add("mmCIF",ZE);function XE(e){if(!kt.is(e.sourceData))return;const{struct_conn:t}=e.sourceData.data.db;if(t._rowCount===0)return;const n=ir.getEntriesFromStructConn(t,e),r=new Set;for(const i of n)i.partnerA.residueIndex!==i.partnerB.residueIndex&&r.add(ji(i.partnerA.residueIndex,i.partnerB.residueIndex));return{data:t,byAtomIndex:ir.getAtomIndexFromEntries(n),residueCantorPairs:r,entries:n}}ir.Provider.formatRegistry.add("mmCIF",XE);function QE(e){if(!kt.is(e.sourceData))return;const{molstar_bond_site:t}=Fn(JP,e.sourceData.data.frame);if(t._rowCount===0)return;const n=new Map,{atomId:r}=e.atomicConformation;for(let m=0;m<r.rowCount;m++)n.set(r.value(m),m);const i=[],o=[],s=[],c=[],{atom_id_1:a,atom_id_2:u,value_order:l,type_id:f}=t;for(let m=0;m<t._rowCount;m++){i.push(n.get(a.value(m))),o.push(n.get(u.value(m)));let h=pt.Flag.None,p=1;switch(l.value(m)){case"sing":p=1;break;case"doub":p=2;break;case"trip":p=3;break;case"quad":p=4;break;case"arom":p=1,h=pt.Flag.Aromatic;break}switch(f.value(m)){case"covale":h|=pt.Flag.Covalent;break;case"disulf":h|=pt.Flag.Covalent|pt.Flag.Disulfide;break;case"hydrog":h|=pt.Flag.HydrogenBond;break;case"metalc":h|=pt.Flag.MetallicCoordination;break}s.push(p),c.push(h)}return xn.fromData({pairs:{indexA:ye.ofIntArray(i),indexB:ye.ofIntArray(o),order:ye.ofIntArray(s),flag:ye.ofArray({array:c,schema:ye.Schema.int})},count:e.atomicHierarchy.atoms._rowCount},{maxDistance:1/0})}xn.Provider.formatRegistry.add("mmCIF",QE),Yo.Provider.formatRegistry.add("mmCIF",Yo.fromMmCif,Yo.hasData);var kt;(function(e){function t(r){return r?.kind==="mmCIF"}e.is=t;function n(r,i,o,s){return i||(i=ed.schema.mmCIF(r)),{kind:"mmCIF",name:i._name,data:{db:i,file:s,frame:r,source:o}}}e.fromFrame=n})(kt||(kt={}));function JE(e,t){const n=kt.fromFrame(e,void 0,void 0,t),r=hg(n.data.db,!0);return rn.create("Create mmCIF Model",i=>tf(r,n,i))}var Eg;(function(e){const t="__CcdCoordinateType__";e.CoordinateType={get(i){return i._staticPropertyData[t]},set(i,o){return i._staticPropertyData[t]=o}};function n(i){return i?.kind==="CCD"}e.is=n;function r(i,o){return o||(o=ed.schema.CCD(i)),{kind:"CCD",name:o._name,data:{db:o,frame:i}}}e.fromFrame=r})(Eg||(Eg={}));function e8(e,t){const n=(o,s)=>(t.substr(o,s)||"").trim(),r={entry_id:Oe.ofString(e),length_a:Oe.ofString(n(6,9)),length_b:Oe.ofString(n(15,9)),length_c:Oe.ofString(n(24,9)),angle_alpha:Oe.ofString(n(33,7)),angle_beta:Oe.ofString(n(40,7)),angle_gamma:Oe.ofString(n(47,7)),Z_PDB:Oe.ofString(n(66,4)),pdbx_unique_axis:Oe.ofString("?")},i={entry_id:Oe.ofString(e),"space_group_name_H-M":Oe.ofString(n(55,11)),Int_Tables_number:Oe.ofString("?"),cell_setting:Oe.ofString("?"),space_group_name_Hall:Oe.ofString("?")};return[cn.ofFields("cell",r),cn.ofFields("symmetry",i)]}function Bg(e,t){return{id:e,details:t,groups:[]}}function t8(e,t,n){const r=[];let i,o,s,c=1,a=1;const u=p=>e.data.substring(e.indices[2*p],e.indices[2*p+1]);for(let p=t;p<n;p++){let _=u(p);if(_.substr(11,12)==="BIOMOLECULE:"){const y=_.substr(23).trim();let v=`Biomolecule ${y}`;_=u(p+1),_.substr(11,30)!=="APPLY THE FOLLOWING TO CHAINS:"&&(p++,v=_.substr(11).trim()),i=Bg(y,v),r.push(i)}else if(_.substr(13,5)==="BIOMT"){const y=_.split(/\s+/),v=parseInt(_[18])-1;v===0&&(s=Ke.identity(),o.operators.push({id:c++,matrix:s})),Ke.setValue(s,v,0,parseFloat(y[4])),Ke.setValue(s,v,1,parseFloat(y[5])),Ke.setValue(s,v,2,parseFloat(y[6])),Ke.setValue(s,v,3,parseFloat(y[7]))}else if(_.substr(11,30)==="APPLY THE FOLLOWING TO CHAINS:"||_.substr(11,30)==="                   AND CHAINS:"){_.substr(11,5)==="APPLY"&&(o={chains:[],operators:[]},i.groups.push(o));const y=_.substr(41,30).split(",");for(let v=0,A=y.length;v<A;++v){const g=y[v].trim();g&&o.chains.push(g)}}else if(_.substr(11,33)==="APPLYING THE FOLLOWING TO CHAINS:"){i=Bg(`${a}`,`Biomolecule ${a}`),r.push(i),a+=1,o={chains:[],operators:[]},i.groups.push(o),p++,_=u(p);const y=_.substr(11,69).split(",");for(let v=0,A=y.length;v<A;++v){const g=y[v].trim();g&&o.chains.push(g)}}}if(r.length===0)return[];const l={id:Oe.ofStrings(r.map(p=>p.id)),details:Oe.ofStrings(r.map(p=>p.details))},f=[];for(const p of r)for(const _ of p.groups)f.push({assembly_id:p.id,oper_expression:_.operators.map(y=>y.id).join(","),asym_id_list:_.chains.join(",")});const d={assembly_id:Oe.ofStrings(f.map(p=>p.assembly_id)),oper_expression:Oe.ofStrings(f.map(p=>p.oper_expression)),asym_id_list:Oe.ofStrings(f.map(p=>p.asym_id_list))},m=[];for(const p of r)for(const _ of p.groups)for(const y of _.operators){const v={id:""+y.id,type:"?",name:"?",symmetry_operation:"?"};for(let A=0;A<3;A++){for(let g=0;g<3;g++)v[`matrix[${A+1}][${g+1}]`]=""+Ke.getValue(y.matrix,A,g);v[`vector[${A+1}]`]=""+Ke.getValue(y.matrix,A,3)}m.push(v)}const h={id:Oe.ofStrings(m.map(p=>p.id)),type:Oe.ofStrings(m.map(p=>p.type)),name:Oe.ofStrings(m.map(p=>p.name)),symmetry_operation:Oe.ofStrings(m.map(p=>p.symmetry_operation))};for(let p=0;p<3;p++){for(let y=0;y<3;y++){const v=`matrix[${p+1}][${y+1}]`;h[v]=Oe.ofStrings(m.map(A=>A[v]))}const _=`vector[${p+1}]`;h[_]=Oe.ofStrings(m.map(y=>y[_]))}return[cn.ofFields("pdbx_struct_assembly",l),cn.ofFields("pdbx_struct_assembly_gen",d),cn.ofFields("pdbx_struct_oper_list",h)]}function n8(e,t,n){const r=[];let i;const o=u=>e.data.substring(e.indices[2*u],e.indices[2*u+1]);for(let u=t;u<n;u++){const l=o(u),f=l.split(/\s+/),d=parseInt(l[5])-1;d===0&&(i=Ke.identity(),r.push(i)),Ke.setValue(i,d,0,parseFloat(f[2])),Ke.setValue(i,d,1,parseFloat(f[3])),Ke.setValue(i,d,2,parseFloat(f[4])),Ke.setValue(i,d,3,parseFloat(f[5]))}if(r.length===0)return[];const s=[];let c=1;for(const u of r){const l={id:"ncsop"+c++,code:".",details:"."};for(let f=0;f<3;f++){for(let d=0;d<3;d++)l[`matrix[${f+1}][${d+1}]`]=""+Ke.getValue(u,f,d);l[`vector[${f+1}]`]=""+Ke.getValue(u,f,3)}s.push(l)}const a={id:Oe.ofStrings(s.map(u=>u.id)),code:Oe.ofStrings(s.map(u=>u.code)),details:Oe.ofStrings(s.map(u=>u.details))};for(let u=0;u<3;u++){for(let f=0;f<3;f++){const d=`matrix[${u+1}][${f+1}]`;a[d]=Oe.ofStrings(s.map(m=>m[d]))}const l=`vector[${u+1}]`;a[l]=Oe.ofStrings(s.map(f=>f[l]))}return[cn.ofFields("struct_ncs_oper",a)]}const r8={1:"helx_rh_al_p",2:"helx_rh_om_p",3:"helx_rh_pi_p",4:"helx_rh_ga_p",5:"helx_rh_3t_p",6:"helx_lh_al_p",7:"helx_lh_om_p",8:"helx_lh_ga_p",9:"helx_rh_27_p",10:"helx_rh_pp_p"};function i8(e){return r8[e]||"helx_p"}function o8(e,t,n){const r=[],i=l=>e.data.substring(e.indices[2*l],e.indices[2*l+1]);for(let l=t;l<n;l++){const f=i(l);r.push({serNum:f.substr(7,3).trim(),helixID:f.substr(11,3).trim(),initResName:f.substr(15,3).trim(),initChainID:f.substr(19,1).trim(),initSeqNum:f.substr(21,4).trim(),initICode:f.substr(25,1).trim(),endResName:f.substr(27,3).trim(),endChainID:f.substr(31,3).trim(),endSeqNum:f.substr(33,4).trim(),endICode:f.substr(37,1).trim(),helixClass:f.substr(38,2).trim(),comment:f.substr(40,30).trim(),length:f.substr(71,5).trim()})}const o=Oe.ofStrings(r.map(l=>l.initChainID)),s=Oe.ofStrings(r.map(l=>l.initResName)),c=Oe.ofStrings(r.map(l=>l.endChainID)),a=Oe.ofStrings(r.map(l=>l.endResName)),u={beg_label_asym_id:o,beg_label_comp_id:s,beg_label_seq_id:Oe.ofUndefined(r.length,ye.Schema.int),beg_auth_asym_id:o,beg_auth_comp_id:s,beg_auth_seq_id:Oe.ofStrings(r.map(l=>l.initSeqNum)),conf_type_id:Oe.ofStrings(r.map(l=>i8(l.helixClass))),details:Oe.ofStrings(r.map(l=>l.comment)),end_label_asym_id:c,end_label_comp_id:a,end_label_seq_id:Oe.ofUndefined(r.length,ye.Schema.int),end_auth_asym_id:c,end_auth_comp_id:a,end_auth_seq_id:Oe.ofStrings(r.map(l=>l.endSeqNum)),id:Oe.ofStrings(r.map(l=>l.serNum)),pdbx_beg_PDB_ins_code:Oe.ofStrings(r.map(l=>l.initICode)),pdbx_end_PDB_ins_code:Oe.ofStrings(r.map(l=>l.endICode)),pdbx_PDB_helix_class:Oe.ofStrings(r.map(l=>l.helixClass)),pdbx_PDB_helix_length:Oe.ofStrings(r.map(l=>l.length)),pdbx_PDB_helix_id:Oe.ofStrings(r.map(l=>l.helixID))};return cn.ofFields("struct_conf",u)}function s8(e,t,n){const r=[],i=d=>e.data.substring(e.indices[2*d],e.indices[2*d+1]);for(let d=t;d<n;d++){const m=i(d);r.push({strand:m.substr(7,3).trim(),sheetID:m.substr(11,3).trim(),numStrands:m.substr(14,2).trim(),initResName:m.substr(17,3).trim(),initChainID:m.substr(21,1).trim(),initSeqNum:m.substr(22,4).trim(),initICode:m.substr(26,1).trim(),endResName:m.substr(28,3).trim(),endChainID:m.substr(32,1).trim(),endSeqNum:m.substr(33,4).trim(),endICode:m.substr(37,1).trim(),sense:m.substr(38,2).trim(),curAtom:m.substr(41,4).trim(),curResName:m.substr(45,3).trim(),curChainId:m.substr(49,1).trim(),curResSeq:m.substr(50,4).trim(),curICode:m.substr(54,1).trim(),prevAtom:m.substr(56,4).trim(),prevResName:m.substr(60,3).trim(),prevChainId:m.substr(64,1).trim(),prevResSeq:m.substr(65,4).trim(),prevICode:m.substr(69,1).trim()})}const o=Oe.ofStrings(r.map(d=>d.initChainID)),s=Oe.ofStrings(r.map(d=>d.initResName)),c=Oe.ofStrings(r.map(d=>d.initSeqNum)),a=Oe.ofStrings(r.map(d=>d.endChainID)),u=Oe.ofStrings(r.map(d=>d.endResName)),l=Oe.ofStrings(r.map(d=>d.endSeqNum)),f={beg_label_asym_id:o,beg_label_comp_id:s,beg_label_seq_id:c,beg_auth_asym_id:o,beg_auth_comp_id:s,beg_auth_seq_id:c,end_label_asym_id:a,end_label_comp_id:a,end_label_seq_id:l,end_auth_asym_id:a,end_auth_comp_id:u,end_auth_seq_id:l,id:Oe.ofStrings(r.map(d=>d.strand)),sheet_id:Oe.ofStrings(r.map(d=>d.sheetID)),pdbx_beg_PDB_ins_code:Oe.ofStrings(r.map(d=>d.initICode)),pdbx_end_PDB_ins_code:Oe.ofStrings(r.map(d=>d.endICode))};return cn.ofFields("struct_sheet_range",f)}const a8={MOL_ID:"",MOLECULE:"",CHAIN:"",FRAGMENT:"",SYNONYM:"",EC:"",ENGINEERED:"",MUTATION:"",OTHER_DETAILS:""};function c8(e,t,n){const r=a=>e.data.substring(e.indices[2*a],e.indices[2*a+1]);let i,o={chains:[],description:""};const s=[];for(let a=t;a<n;a++){const l=r(a).substr(10,70).trim(),f=l.indexOf(":"),d=l.substring(0,f);let m;d in a8?(i=d,m=l.substring(f+2)):m=l,m=m.replace(/;$/,""),i==="MOL_ID"?(o={chains:[],description:""},s.push(o)):i==="MOLECULE"?(o.description&&(o.description+=" "),o.description+=m):i==="CHAIN"&&Array.prototype.push.apply(o.chains,m.split(/\s*,\s*/))}const c=[];for(const a of s)for(const u of a.chains)c.push({description:a.description,chains:[u]});return c}function u8(e,t,n){const r=o=>e.data.substring(e.indices[2*o],e.indices[2*o+1]),i=new Map;for(let o=t;o<n;o++){const s=r(o),c=s.substr(11,3).trim(),a=s.substr(15).trim();i.has(c)?i.set(c,`${i.get(c)} ${a}`):i.set(c,a)}return i}function ga(e,t,n,r){let i=n,o=r-1,s=t.charCodeAt(i);for(;(s===32||s>=48&&s<=57)&&i<=o;)s=t.charCodeAt(++i);for(s=t.charCodeAt(o);(s===32||s>=48&&s<=57)&&o>=i;)s=t.charCodeAt(--o);if(++o,i===o||i+1===o)return bt.add(e,i,o);if(s=t.charCodeAt(i),i+2===o){const c=t.charCodeAt(i+1);if((s===78||s===110)&&(c===65||c===97)||(s===67||s===99)&&(c===76||c===108)||(s===70||s===102)&&(c===69||c===101)||(s===83||s===115)&&(c===73||c===105)||(s===66||s===98)&&(c===82||c===114)||(s===65||s===97)&&(c===83||c===115))return bt.add(e,i,i+2)}if(s===67||s===99||s===72||s===104||s===78||s===110||s===79||s===111||s===80||s===112||s===83||s===115)return bt.add(e,i,i+1);bt.add(e,i,i)}function l8(e,t){const n=()=>[],r=()=>bt.create(e,2*t);return{index:0,group_PDB:r(),id:n(),auth_atom_id:r(),label_alt_id:r(),auth_comp_id:r(),auth_asym_id:r(),auth_seq_id:r(),pdbx_PDB_ins_code:r(),Cartn_x:r(),Cartn_y:r(),Cartn_z:r(),occupancy:r(),B_iso_or_equiv:r(),type_symbol:r(),pdbx_PDB_model_num:n(),label_entity_id:n(),partial_charge:r()}}class d8{constructor(t,n,r,i){this.asymIds=t,this.modelNums=n,this.terIndices=r,this.hasAssemblies=i,this.asymIdCounts=new Map,this.currModelNum=void 0,this.currAsymId="",this.currLabelAsymId=""}clear(){this.asymIdCounts.clear(),this.currModelNum=void 0}get(t){const n=this.asymIds.value(t);if(this.hasAssemblies)return n;const r=this.modelNums[t];if(r!==this.currModelNum?(this.asymIdCounts.clear(),this.currModelNum=r,this.currLabelAsymId=n):this.currAsymId!==n&&(this.currAsymId=n,this.currLabelAsymId=n),this.asymIdCounts.has(n)){if(this.terIndices.has(t)){const i=this.asymIdCounts.get(n)+1;this.asymIdCounts.set(n,i),this.currLabelAsymId=`${n}_${i}`}}else this.asymIdCounts.set(n,0);return this.currLabelAsymId}}function f8(e,t,n){t.clear();const r=Oe.ofStrings(e.pdbx_PDB_model_num),i=Oe.ofTokens(e.auth_asym_id),o=Oe.ofTokens(e.auth_seq_id),s=Oe.ofTokens(e.pdbx_PDB_ins_code),c=Oe.ofTokens(e.auth_atom_id),a=Oe.ofTokens(e.auth_comp_id),u=Oe.ofStrings(e.id);let l=r.str(0),f=i.str(0),d=o.int(0),m=s.str(0),h=d;const p=new Map,_=new Map,y=[],v=[],A=[];let g=!1;for(let S=0,P=u.rowCount;S<P;++S)if(s.str(S)!==""){g=!0;break}for(let S=0,P=u.rowCount;S<P;++S){const T=r.str(S),D=i.str(S),w=o.int(S),E=s.str(S);let k=c.str(S);if(T!==l?(p.clear(),_.clear(),l=T,f=D,d=w,m=E,h=w):f!==D?(_.clear(),f=D,d=w,m=E,h=w):d!==w?(_.clear(),d===h?h=w:h+=1,d=w,m=E):m!==E&&(_.clear(),m=E,h+=1),y[S]=t.get(S),_.has(k)){const F=_.get(k)+1;_.set(k,F),k=`${k}_${F}`}else _.set(k,0);v[S]=k,g&&(A[S]=h)}const b=ye.ofStringArray(y),C=ye.ofStringArray(v),I=g?Oe.ofColumn(ye.ofIntArray(A)):Oe.ofUndefined(e.index,ye.Schema.int);return{auth_asym_id:i,auth_atom_id:c,auth_comp_id:a,auth_seq_id:o,B_iso_or_equiv:Oe.ofTokens(e.B_iso_or_equiv),Cartn_x:Oe.ofTokens(e.Cartn_x),Cartn_y:Oe.ofTokens(e.Cartn_y),Cartn_z:Oe.ofTokens(e.Cartn_z),group_PDB:Oe.ofTokens(e.group_PDB),id:u,label_alt_id:Oe.ofTokens(e.label_alt_id),label_asym_id:Oe.ofColumn(b),label_atom_id:Oe.ofColumn(C),label_comp_id:a,label_seq_id:I,label_entity_id:Oe.ofStrings(e.label_entity_id),occupancy:B3(e.occupancy)?Oe.ofUndefined(e.index,ye.Schema.float):Oe.ofTokens(e.occupancy),type_symbol:Oe.ofTokens(e.type_symbol),pdbx_PDB_ins_code:Oe.ofTokens(e.pdbx_PDB_ins_code),pdbx_PDB_model_num:r,partial_charge:Oe.ofTokens(e.partial_charge)}}function Rg(e,t,n,r,i,o){const{data:s}=n,c=i-r;bt.addToken(e.group_PDB,Qt.trim(n,r,r+6)),Qt.trim(n,r+6,r+11),e.id[e.index]=n.data.substring(n.tokenStart,n.tokenEnd),bt.addToken(e.auth_atom_id,Qt.trim(n,r+12,r+16)),s.charCodeAt(r+16)===32?bt.add(e.label_alt_id,0,0):bt.add(e.label_alt_id,r+16,r+17),bt.addToken(e.auth_comp_id,Qt.trim(n,r+17,r+20)),bt.add(e.auth_asym_id,r+21,r+22),bt.addToken(e.auth_seq_id,Qt.trim(n,r+22,r+26)),s.charCodeAt(r+26)===32?bt.add(e.pdbx_PDB_ins_code,0,0):bt.add(e.pdbx_PDB_ins_code,r+26,r+27),bt.addToken(e.Cartn_x,Qt.trim(n,r+30,r+38)),bt.addToken(e.Cartn_y,Qt.trim(n,r+38,r+46)),bt.addToken(e.Cartn_z,Qt.trim(n,r+46,r+54)),bt.addToken(e.occupancy,Qt.trim(n,r+54,r+60)),c>=66?bt.addToken(e.B_iso_or_equiv,Qt.trim(n,r+60,r+66)):bt.add(e.B_iso_or_equiv,0,0),o&&bt.addToken(e.partial_charge,Qt.trim(n,r+70,r+76)),c>=78&&!o?(Qt.trim(n,r+76,r+78),n.tokenStart<n.tokenEnd?bt.addToken(e.type_symbol,n):ga(e.type_symbol,s,r+12,r+16)):ga(e.type_symbol,s,r+12,r+16),e.pdbx_PDB_model_num[e.index]=t,e.index++}function m8(e,t){const n=()=>[],r=()=>new Float32Array(t),i=()=>bt.create(e,2*t);return{index:0,count:t,id:n(),type_symbol:i(),pdbx_label_atom_id:i(),pdbx_label_alt_id:i(),pdbx_label_comp_id:i(),pdbx_label_asym_id:i(),pdbx_label_seq_id:i(),pdbx_PDB_ins_code:i(),"U[1][1]":r(),"U[2][2]":r(),"U[3][3]":r(),"U[1][2]":r(),"U[1][3]":r(),"U[2][3]":r(),pdbx_auth_seq_id:i(),pdbx_auth_comp_id:i(),pdbx_auth_asym_id:i(),pdbx_auth_atom_id:i()}}function h8(e){const t=Oe.ofTokens(e.pdbx_auth_seq_id),n=Oe.ofTokens(e.pdbx_auth_comp_id),r=Oe.ofTokens(e.pdbx_auth_asym_id),i=Oe.ofTokens(e.pdbx_auth_atom_id),o={id:Oe.ofStrings(e.id),type_symbol:Oe.ofTokens(e.type_symbol),pdbx_label_atom_id:i,pdbx_label_alt_id:Oe.ofTokens(e.pdbx_label_alt_id),pdbx_label_comp_id:n,pdbx_label_asym_id:r,pdbx_label_seq_id:t,pdbx_PDB_ins_code:Oe.ofTokens(e.pdbx_PDB_ins_code),pdbx_auth_seq_id:t,pdbx_auth_comp_id:n,pdbx_auth_asym_id:r,pdbx_auth_atom_id:i};return o["U[1][1]"]=Oe.ofNumbers(e["U[1][1]"]),o["U[2][2]"]=Oe.ofNumbers(e["U[2][2]"]),o["U[3][3]"]=Oe.ofNumbers(e["U[3][3]"]),o["U[1][2]"]=Oe.ofNumbers(e["U[1][2]"]),o["U[1][3]"]=Oe.ofNumbers(e["U[1][3]"]),o["U[2][3]"]=Oe.ofNumbers(e["U[2][3]"]),o}function p8(e,t,n,r,i){const{data:o}=n,s=i-r;Qt.trim(n,r+6,r+11),e.id[e.index]=o.substring(n.tokenStart,n.tokenEnd),bt.addToken(e.pdbx_auth_atom_id,Qt.trim(n,r+12,r+16)),o.charCodeAt(r+16)===32?bt.add(e.pdbx_label_alt_id,0,0):bt.add(e.pdbx_label_alt_id,r+16,r+17),bt.addToken(e.pdbx_auth_comp_id,Qt.trim(n,r+17,r+20)),bt.add(e.pdbx_auth_asym_id,r+21,r+22),bt.addToken(e.pdbx_auth_seq_id,Qt.trim(n,r+22,r+26)),o.charCodeAt(r+26)===32?bt.add(e.pdbx_PDB_ins_code,0,0):bt.add(e.pdbx_PDB_ins_code,r+26,r+27),e["U[1][1]"][e.index]=Ui(o,r+28,r+35)/1e4,e["U[2][2]"][e.index]=Ui(o,r+35,r+42)/1e4,e["U[3][3]"][e.index]=Ui(o,r+42,r+49)/1e4,e["U[1][2]"][e.index]=Ui(o,r+49,r+56)/1e4,e["U[1][3]"][e.index]=Ui(o,r+56,r+63)/1e4,e["U[2][3]"][e.index]=Ui(o,r+63,r+70)/1e4,s>=78?(Qt.trim(n,r+76,r+78),n.tokenStart<n.tokenEnd?bt.addToken(e.type_symbol,n):ga(e.type_symbol,o,r+12,r+16)):ga(e.type_symbol,o,r+12,r+16),e.index++}function _8(e,t,n,r){const i={};for(let I=0,S=r.id.rowCount;I<S;++I)i[r.id.str(I)]=I;const o=I=>e.data.substring(e.indices[2*I],e.indices[2*I+1]),s=[],c=[],a=[],u=[],l=[],f=[],d=[],m=[],h=[],p=[],_=[],y=[],v=[],A=[],g=[11,16,21,26];let b=1;for(let I=t;I<n;I++){const S=o(I),P=i[parseInt(S.substr(6,5))],T={};if(P!==void 0)for(let D=0;D<4;++D){const w=parseInt(S.substr(g[D],5));if(Number.isNaN(w))continue;const E=i[w];E!==void 0&&(P>E||T[E]===void 0&&(s.push(`covale${b}`),c.push("covale"),a.push(r.label_asym_id.str(P)),u.push(r.label_seq_id.int(P)),l.push(r.auth_seq_id.int(P)),f.push(r.label_atom_id.str(P)),d.push(r.label_alt_id.str(P)),m.push(r.pdbx_PDB_ins_code.str(P)),h.push(r.label_asym_id.str(E)),p.push(r.label_seq_id.int(E)),_.push(r.auth_seq_id.int(E)),y.push(r.label_atom_id.str(E)),v.push(r.label_alt_id.str(E)),A.push(r.pdbx_PDB_ins_code.str(E)),b+=1))}}const C={id:Oe.ofStrings(s),conn_type_id:Oe.ofStrings(c),ptnr1_label_asym_id:Oe.ofStrings(a),ptnr1_label_seq_id:Oe.ofNumbers(u),ptnr1_auth_seq_id:Oe.ofNumbers(l),ptnr1_label_atom_id:Oe.ofStrings(f),pdbx_ptnr1_label_alt_id:Oe.ofStrings(d),pdbx_ptnr1_PDB_ins_code:Oe.ofStrings(m),ptnr2_label_asym_id:Oe.ofStrings(h),ptnr2_label_seq_id:Oe.ofNumbers(p),ptnr2_auth_seq_id:Oe.ofNumbers(_),ptnr2_label_atom_id:Oe.ofStrings(y),pdbx_ptnr2_label_alt_id:Oe.ofStrings(v),pdbx_ptnr2_PDB_ins_code:Oe.ofStrings(A)};return cn.ofFields("struct_conn",C)}function y8(e,t,n,r){const i=e.substring(t,n);r.id_code=i.substring(62,66).trim()||void 0,r.dep_date=i.substring(50,59).trim()||void 0,r.classification=i.substring(10,50).trim()||void 0}async function g8(e){const{lines:t}=e,{data:n,indices:r}=t,i=Qt(n),o=!!e.isPdbqt;let s=0,c=0;for(let D=0,w=t.count;D<w;D++){const E=r[2*D],k=r[2*D+1];switch(n.charAt(E)){case"A":Wt(n,E,k,"ATOM  ")?s++:Wt(n,E,k,"ANISOU")&&c++;break;case"H":Wt(n,E,k,"HETATM")&&s++;break}}const a={},u=l8(n,s),l=m8(n,c),f=new LE,d=[],m=[];let h=0,p="",_,y=!1;const v=new Set;for(let D=0,w=t.count;D<w;D++){let E=r[2*D],k=r[2*D+1];switch(n.charAt(E)){case"A":Wt(n,E,k,"ATOM  ")?(h||(h++,p=""+h),Rg(u,p,i,E,k,o)):Wt(n,E,k,"ANISOU")&&p8(l,p,i,E,k);break;case"C":if(Wt(n,E,k,"CRYST1"))d.push(...e8(e.id||"?",n.substring(E,k)));else if(Wt(n,E,k,"CONECT")){let F=D+1;for(;E=r[2*F],k=r[2*F+1],!!Wt(n,E,k,"CONECT");)F++;_?U3&&console.log("only single CONECT block allowed, ignoring others"):_=[D,F],D=F-1}else if(Wt(n,E,k,"COMPND")){let F=D+1;for(;E=r[2*F],k=r[2*F+1],!!Wt(n,E,k,"COMPND");)F++;f.setCompounds(c8(t,D,F)),D=F-1}break;case"H":if(Wt(n,E,k,"HEADER"))y8(n,E,k,a);else if(Wt(n,E,k,"HETATM"))h||(h++,p=""+h),Rg(u,p,i,E,k,o);else if(Wt(n,E,k,"HELIX")){let F=D+1;for(;E=r[2*F],k=r[2*F+1],!!Wt(n,E,k,"HELIX");)F++;d.push(o8(t,D,F)),D=F-1}else if(Wt(n,E,k,"HETNAM")){let F=D+1;for(;E=r[2*F],k=r[2*F+1],!!Wt(n,E,k,"HETNAM");)F++;m.push(...Array.from(u8(t,D,F).entries())),D=F-1}break;case"M":if(Wt(n,E,k,"MODEL ")&&(h++,p=""+h),Wt(n,E,k,"MTRIX")){let F=D+1;for(;E=r[2*F],k=r[2*F+1],!!Wt(n,E,k,"MTRIX");)F++;d.push(...n8(t,D,F)),D=F-1}break;case"O":break;case"R":if(Wt(n,E,k,"REMARK 350")){let F=D+1;for(;E=r[2*F],k=r[2*F+1],!!Wt(n,E,k,"REMARK 350");)F++;d.push(...t8(t,D,F)),D=F-1,y=!0}break;case"S":if(Wt(n,E,k,"SHEET")){let F=D+1;for(;E=r[2*F],k=r[2*F+1],!!Wt(n,E,k,"SHEET");)F++;d.push(s8(t,D,F)),D=F-1}break;case"T":Wt(n,E,k,"TER")&&v.add(u.index)}}if(a.id_code){const D={id:Oe.ofString(a.id_code)};d.push(cn.ofFields("entry",D))}if(a.classification){const D={pdbx_keywords:Oe.ofString(a.classification)};d.push(cn.ofFields("struct_keywords",D))}if(a.dep_date){const D={recvd_initial_deposition_date:Oe.ofString(a.dep_date)};d.push(cn.ofFields("pdbx_database_status",D))}const A=ye.ofIntTokens(u.auth_seq_id),g=ye.ofStringTokens(u.auth_atom_id),b=ye.ofStringTokens(u.auth_comp_id),C=ye.ofStringTokens(u.auth_asym_id),I=new d8(C,u.pdbx_PDB_model_num,v,y),S=new zE(A,g);S.setNames(m),f.setNames(m);for(let D=0,w=b.rowCount;D<w;++D){const E=b.value(D),k=md(S.add(E,D).type,E),F=I.get(D);u.label_entity_id[D]=f.getEntityId(E,k,F)}const P=f8(u,I);o||delete P.partial_charge,_&&d.push(_8(t,_[0],_[1],P));const T={entity:cn.ofTable("entity",f.getEntityTable()),chem_comp:cn.ofTable("chem_comp",S.getChemCompTable()),atom_site:cn.ofFields("atom_site",P),atom_site_anisotrop:cn.ofFields("atom_site_anisotrop",h8(l))};for(const D of d)T[D.name]=D;return{header:e.id||"PDB",categoryNames:Object.keys(T),categories:T}}var rf;(function(e){e.Descriptor={name:"atom_partial_charge"},e.Provider=_r.create(e.Descriptor)})(rf||(rf={}));var of;(function(e){function t(r){return r?.kind==="pdb"}e.is=t;function n(r){return{kind:"pdb",name:r.id||"",data:r}}e.create=n})(of||(of={}));function b8(e){return rn.create("Parse PDB",async t=>{var n;await t.update("Converting to mmCIF");const r=await g8(e),i=kt.fromFrame(r,void 0,of.create(e)),o=hg(i.data.db,!0),s=await tf(o,i,t),c=(n=r.categories.atom_site)===null||n===void 0?void 0:n.getField("partial_charge");if(c&&s.frameCount===1){const a=s.representative,u=a.atomicHierarchy.atomSourceIndex,f=ye.isIdentity(u)?void 0:u.toArray({array:Int32Array}),d=c.toFloatArray(),m=f?ye.ofFloatArray(ye.mapToArray(u,h=>d[h],Float32Array)):ye.ofFloatArray(d);rf.Provider.set(a,{data:m,type:"GASTEIGER"})}return s})}var Dg={},v8=function(e,t,n,r,i){var o=new Worker(Dg[t]||(Dg[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return o.onmessage=function(s){var c=s.data,a=c.$e$;if(a){var u=new Error(a[0]);u.code=a[1],u.stack=a[2],i(u,null)}else i(null,c)},o.postMessage(n,r),o},In=Uint8Array,Ei=Uint16Array,kg=Int32Array,sf=new In([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),af=new In([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Tg=new In([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ng=function(e,t){for(var n=new Ei(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new kg(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},Og=Ng(sf,2),cf=Og.b,A8=Og.r;cf[28]=258,A8[258]=28;for(var x8=Ng(af,0),Mg=x8.b,ba=new Ei(32768),Kt=0;Kt<32768;++Kt){var ri=(Kt&43690)>>1|(Kt&21845)<<1;ri=(ri&52428)>>2|(ri&13107)<<2,ri=(ri&61680)>>4|(ri&3855)<<4,ba[Kt]=((ri&65280)>>8|(ri&255)<<8)>>1}for(var io=function(e,t,n){for(var r=e.length,i=0,o=new Ei(t);i<r;++i)e[i]&&++o[e[i]-1];var s=new Ei(t);for(i=1;i<t;++i)s[i]=s[i-1]+o[i-1]<<1;var c;if(n){c=new Ei(1<<t);var a=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],l=t-e[i],f=s[e[i]-1]++<<l,d=f|(1<<l)-1;f<=d;++f)c[ba[f]>>a]=u}else for(c=new Ei(r),i=0;i<r;++i)e[i]&&(c[i]=ba[s[e[i]-1]++]>>15-e[i]);return c},Zo=new In(288),Kt=0;Kt<144;++Kt)Zo[Kt]=8;for(var Kt=144;Kt<256;++Kt)Zo[Kt]=9;for(var Kt=256;Kt<280;++Kt)Zo[Kt]=7;for(var Kt=280;Kt<288;++Kt)Zo[Kt]=8;for(var qg=new In(32),Kt=0;Kt<32;++Kt)qg[Kt]=5;var Ug=io(Zo,9,1),Fg=io(qg,5,1),va=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Xn=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},Aa=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},Lg=function(e){return(e+7)/8|0},xa=function(e,t,n){return(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length),new In(e.subarray(t,n))},Gg=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],pn=function(e,t,n){var r=new Error(t||Gg[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,pn),!n)throw r;return r},uf=function(e,t,n,r){var i=e.length,o=r?r.length:0;if(!i||t.f&&!t.l)return n||new In(0);var s=!n,c=s||t.i!=2,a=t.i;s&&(n=new In(i*3));var u=function(G){var $=n.length;if(G>$){var Y=new In(Math.max($*2,G));Y.set(n),n=Y}},l=t.f||0,f=t.p||0,d=t.b||0,m=t.l,h=t.d,p=t.m,_=t.n,y=i*8;do{if(!m){l=Xn(e,f,1);var v=Xn(e,f+1,3);if(f+=3,v)if(v==1)m=Ug,h=Fg,p=9,_=5;else if(v==2){var C=Xn(e,f,31)+257,I=Xn(e,f+10,15)+4,S=C+Xn(e,f+5,31)+1;f+=14;for(var P=new In(S),T=new In(19),D=0;D<I;++D)T[Tg[D]]=Xn(e,f+D*3,7);f+=I*3;for(var w=va(T),E=(1<<w)-1,k=io(T,w,1),D=0;D<S;){var F=k[Xn(e,f,E)];f+=F&15;var A=F>>4;if(A<16)P[D++]=A;else{var V=0,de=0;for(A==16?(de=3+Xn(e,f,3),f+=2,V=P[D-1]):A==17?(de=3+Xn(e,f,7),f+=3):A==18&&(de=11+Xn(e,f,127),f+=7);de--;)P[D++]=V}}var W=P.subarray(0,C),J=P.subarray(C);p=va(W),_=va(J),m=io(W,p,1),h=io(J,_,1)}else pn(1);else{var A=Lg(f)+4,g=e[A-4]|e[A-3]<<8,b=A+g;if(b>i){a&&pn(0);break}c&&u(d+g),n.set(e.subarray(A,b),d),t.b=d+=g,t.p=f=b*8,t.f=l;continue}if(f>y){a&&pn(0);break}}c&&u(d+131072);for(var le=(1<<p)-1,K=(1<<_)-1,ae=f;;ae=f){var V=m[Aa(e,f)&le],me=V>>4;if(f+=V&15,f>y){a&&pn(0);break}if(V||pn(2),me<256)n[d++]=me;else if(me==256){ae=f,m=null;break}else{var De=me-254;if(me>264){var D=me-257,te=sf[D];De=Xn(e,f,(1<<te)-1)+cf[D],f+=te}var ce=h[Aa(e,f)&K],M=ce>>4;ce||pn(3),f+=ce&15;var J=Mg[M];if(M>3){var te=af[M];J+=Aa(e,f)&(1<<te)-1,f+=te}if(f>y){a&&pn(0);break}c&&u(d+131072);var B=d+De;if(d<J){var j=o-J,ne=Math.min(J,B);for(j+d<0&&pn(3);d<ne;++d)n[d]=r[j+d]}for(;d<B;++d)n[d]=n[d-J]}}t.l=m,t.p=ae,t.b=d,t.f=l,m&&(l=1,t.m=p,t.d=h,t.n=_)}while(!l);return d!=n.length&&s?xa(n,0,d):n.subarray(0,d)},S8=new In(0),C8=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},Hg=function(e,t,n){for(var r=e(),i=e.toString(),o=i.slice(i.indexOf("[")+1,i.lastIndexOf("]")).replace(/\s+/g,"").split(","),s=0;s<r.length;++s){var c=r[s],a=o[s];if(typeof c=="function"){t+=";"+a+"=";var u=c.toString();if(c.prototype)if(u.indexOf("[native code]")!=-1){var l=u.indexOf(" ",8)+1;t+=u.slice(l,u.indexOf("(",l))}else{t+=u;for(var f in c.prototype)t+=";"+a+".prototype."+f+"="+c.prototype[f].toString()}else t+=u}else n[a]=c}return t},Sa=[],I8=function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},w8=function(e,t,n,r){if(!Sa[n]){for(var i="",o={},s=e.length-1,c=0;c<s;++c)i=Hg(e[c],i,o);Sa[n]={c:Hg(e[s],i,o),e:o}}var a=C8({},Sa[n].e);return v8(Sa[n].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,a,I8(a),r)},jg=function(){return[In,Ei,kg,sf,af,Tg,cf,Mg,Ug,Fg,ba,Gg,io,va,Xn,Aa,Lg,xa,pn,uf,ff,lf,Vg]},P8=function(){return[Kg,$g]},lf=function(e){return postMessage(e,[e.buffer])},Vg=function(e){return e&&{out:e.size&&new In(e.size),dictionary:e.dictionary}},zg=function(e,t,n,r,i,o){var s=w8(n,r,i,function(c,a){s.terminate(),o(c,a)});return s.postMessage([e,t],t.consume?[e.buffer]:[]),function(){s.terminate()}},Ar=function(e,t){return e[t]|e[t+1]<<8},or=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},df=function(e,t){return or(e,t)+or(e,t+4)*4294967296},Kg=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&pn(6,"invalid gzip data");var t=e[3],n=10;t&4&&(n+=(e[10]|e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(t&2)},$g=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0};function E8(e,t,n){return n||(n=t,t={}),typeof n!="function"&&pn(7),zg(e,t,[jg],function(r){return lf(ff(r.data[0],Vg(r.data[1])))},1,n)}function ff(e,t){return uf(e,{i:2},t&&t.out,t&&t.dictionary)}function B8(e,t,n){return n||(n=t,t={}),typeof n!="function"&&pn(7),zg(e,t,[jg,P8,function(){return[Wg]}],function(r){return lf(Wg(r.data[0],r.data[1]))},3,n)}function Wg(e,t){var n=Kg(e);return n+8>e.length&&pn(6,"invalid gzip data"),uf(e.subarray(n,-8),{i:2},t&&t.out||new In($g(e)),t&&t.dictionary)}var mf=typeof TextDecoder<"u"&&new TextDecoder,R8=0;try{mf.decode(S8,{stream:!0}),R8=1}catch{}var D8=function(e){for(var t="",n=0;;){var r=e[n++],i=(r>127)+(r>223)+(r>239);if(n+i>e.length)return{s:t,r:xa(e,n-1)};i?i==3?(r=((r&15)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,t+=String.fromCharCode(55296|r>>10,56320|r&1023)):i&1?t+=String.fromCharCode((r&31)<<6|e[n++]&63):t+=String.fromCharCode((r&15)<<12|(e[n++]&63)<<6|e[n++]&63):t+=String.fromCharCode(r)}};function k8(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}else{if(mf)return mf.decode(e);var i=D8(e),o=i.s,n=i.r;return n.length&&pn(8),o}}var T8=function(e,t){return t+30+Ar(e,t+26)+Ar(e,t+28)},N8=function(e,t,n){var r=Ar(e,t+28),i=k8(e.subarray(t+46,t+46+r),!(Ar(e,t+8)&2048)),o=t+46+r,s=or(e,t+20),c=n&&s==4294967295?O8(e,o):[s,or(e,t+24),or(e,t+42)],a=c[0],u=c[1],l=c[2];return[Ar(e,t+10),a,u,i,o+Ar(e,t+30)+Ar(e,t+32),l]},O8=function(e,t){for(;Ar(e,t)!=1;t+=4+Ar(e,t+2));return[df(e,t+12),df(e,t+4),df(e,t+20)]},Yg=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(e){e()};function M8(e,t,n){n||(n=t,t={}),typeof n!="function"&&pn(7);var r=[],i=function(){for(var _=0;_<r.length;++_)r[_]()},o={},s=function(_,y){Yg(function(){n(_,y)})};Yg(function(){s=n});for(var c=e.length-22;or(e,c)!=101010256;--c)if(!c||e.length-c>65558)return s(pn(13,0,1),null),i;var a=Ar(e,c+8);if(a){var u=a,l=or(e,c+16),f=l==4294967295||u==65535;if(f){var d=or(e,c-12);f=or(e,d)==101075792,f&&(u=a=or(e,d+32),l=or(e,d+48))}for(var m=t&&t.filter,h=function(_){var y=N8(e,l,f),v=y[0],A=y[1],g=y[2],b=y[3],C=y[4],I=y[5],S=T8(e,I);l=C;var P=function(D,w){D?(i(),s(D,null)):(w&&(o[b]=w),--a||s(null,o))};if(!m||m({name:b,size:A,originalSize:g,compression:v}))if(!v)P(null,xa(e,S,S+A));else if(v==8){var T=e.subarray(S,S+A);if(g<524288||A>.8*g)try{P(null,ff(T,{out:new In(g)}))}catch(D){P(D,null)}else r.push(E8(T,{size:g},P))}else P(pn(14,"unknown compression type "+v,1),null);else P(null,null)},p=0;p<u;++p)h(p)}else s(null,{});return i}const Zg=[["mmCIF",{stringExtensions:["cif","mmcif","mcif"],binaryExtensions:["bcif"]}],["PDB",{stringExtensions:["pdb","ent"]}]];Zg.flatMap(([e,{stringExtensions:t,binaryExtensions:n}])=>[t??[],n??[]].join()).flatMap(e=>[e,`${e}.gz`]);function Xg(e){const t=e.endsWith(".gz");t&&(e=e.replace(/\.gz$/,""));for(const[n,{stringExtensions:r,binaryExtensions:i}]of Zg){if(i?.some(o=>e.endsWith(o)))return{isCompressed:t,type:n,isBinary:!0};if(r?.some(o=>e.endsWith(o)))return{isCompressed:t,type:n,isBinary:!1}}}const st=no.Const,rt=no.Dynamic,q8=[st(Se.core.type.bool,function(t,n){return!!n[0](t)}),st(Se.core.type.num,function(t,n){return+n[0](t)}),st(Se.core.type.str,function(t,n){return""+n[0](t)}),st(Se.core.type.list,function(t,n){return zo.forEachEval(n,t,(r,i,o)=>o[i]=r,[])}),st(Se.core.type.set,function(t,n){return zo.forEachEval(n,t,function(i,o,s){return s.add(i)},new Set)}),st(Se.core.type.regex,function(t,n){return new RegExp(n[0](t),n[1]&&n[1](t)||"")}),st(Se.core.type.bitflags,function(t,n){return+n[0](t)}),st(Se.core.type.compositeKey,function(t,n){return zo.forEachEval(n,t,(r,i,o)=>o[i]=""+r,[]).join("-")}),st(Se.core.logic.not,(e,t)=>!t[0](e)),st(Se.core.logic.and,(e,t)=>{if(typeof t.length=="number"){for(let n=0,r=t.length;n<r;n++)if(!t[n](e))return!1}else for(const n of Object.keys(t))if(!t[n](e))return!1;return!0}),st(Se.core.logic.or,(e,t)=>{if(typeof t.length=="number"){for(let n=0,r=t.length;n<r;n++)if(t[n](e))return!0}else for(const n of Object.keys(t))if(t[n](e))return!0;return!1}),st(Se.core.rel.eq,(e,t)=>t[0](e)===t[1](e)),st(Se.core.rel.neq,(e,t)=>t[0](e)!==t[1](e)),st(Se.core.rel.lt,(e,t)=>t[0](e)<t[1](e)),st(Se.core.rel.lte,(e,t)=>t[0](e)<=t[1](e)),st(Se.core.rel.gr,(e,t)=>t[0](e)>t[1](e)),st(Se.core.rel.gre,(e,t)=>t[0](e)>=t[1](e)),st(Se.core.rel.inRange,(e,t)=>{const n=t[0](e);return n>=t[1](e)&&n<=t[2](e)}),st(Se.core.math.add,(e,t)=>{let n=0;if(typeof t.length=="number")for(let r=0,i=t.length;r<i;r++)n+=t[r](e);else for(const r of Object.keys(t))n+=t[r](e);return n}),st(Se.core.math.sub,(e,t)=>{let n=0;if(typeof t.length=="number"){if(t.length===1)return-t[0](e);n=t[0](e)||0;for(let r=1,i=t.length;r<i;r++)n-=t[r](e)}else{const r=Object.keys(t);if(r.length===1)return-t[r[0]](e);n=t[r[0]](e)||0;for(let i=1,o=r.length;i<o;i++)n-=t[r[i]](e)}return n}),st(Se.core.math.mult,(e,t)=>{let n=1;if(typeof t.length=="number")for(let r=0,i=t.length;r<i;r++)n*=t[r](e);else for(const r of Object.keys(t))n*=t[r](e);return n}),st(Se.core.math.div,(e,t)=>t[0](e)/t[1](e)),st(Se.core.math.pow,(e,t)=>Math.pow(t[0](e),t[1](e))),st(Se.core.math.mod,(e,t)=>t[0](e)%t[1](e)),st(Se.core.math.min,(e,t)=>{let n=Number.POSITIVE_INFINITY;if(typeof t.length=="number")for(let r=0,i=t.length;r<i;r++)n=Math.min(t[r](e),n);else for(const r of Object.keys(t))n=Math.min(t[r](e),n);return n}),st(Se.core.math.max,(e,t)=>{let n=Number.NEGATIVE_INFINITY;if(typeof t.length=="number")for(let r=0,i=t.length;r<i;r++)n=Math.max(t[r](e),n);else for(const r of Object.keys(t))n=Math.max(t[r](e),n);return n}),st(Se.core.math.cantorPairing,(e,t)=>Un(t[0](e),t[1](e))),st(Se.core.math.sortedCantorPairing,(e,t)=>ji(t[0](e),t[1](e))),st(Se.core.math.invertCantorPairing,(e,t)=>w_([0,0],t[0](e))),st(Se.core.math.floor,(e,t)=>Math.floor(t[0](e))),st(Se.core.math.ceil,(e,t)=>Math.ceil(t[0](e))),st(Se.core.math.roundInt,(e,t)=>Math.round(t[0](e))),st(Se.core.math.trunc,(e,t)=>Math.trunc(t[0](e))),st(Se.core.math.abs,(e,t)=>Math.abs(t[0](e))),st(Se.core.math.sign,(e,t)=>Math.sign(t[0](e))),st(Se.core.math.sqrt,(e,t)=>Math.sqrt(t[0](e))),st(Se.core.math.cbrt,(e,t)=>Math.cbrt(t[0](e))),st(Se.core.math.sin,(e,t)=>Math.sin(t[0](e))),st(Se.core.math.cos,(e,t)=>Math.cos(t[0](e))),st(Se.core.math.tan,(e,t)=>Math.tan(t[0](e))),st(Se.core.math.asin,(e,t)=>Math.asin(t[0](e))),st(Se.core.math.acos,(e,t)=>Math.acos(t[0](e))),st(Se.core.math.atan,(e,t)=>Math.atan(t[0](e))),st(Se.core.math.sinh,(e,t)=>Math.sinh(t[0](e))),st(Se.core.math.cosh,(e,t)=>Math.cosh(t[0](e))),st(Se.core.math.tanh,(e,t)=>Math.tanh(t[0](e))),st(Se.core.math.exp,(e,t)=>Math.exp(t[0](e))),st(Se.core.math.log,(e,t)=>Math.log(t[0](e))),st(Se.core.math.log10,(e,t)=>Math.log10(t[0](e))),st(Se.core.math.atan2,(e,t)=>Math.atan2(t[0](e),t[1](e))),st(Se.core.str.match,(e,t)=>t[0](e).test(t[1](e))),st(Se.core.str.concat,(e,t)=>{const n=[];if(typeof t.length=="number")for(let r=0,i=t.length;r<i;r++)n.push(t[r](e).toString());else for(const r of Object.keys(t))n.push(t[r](e).toString());return n.join("")}),st(Se.core.list.getAt,(e,t)=>t[0](e)[t[1](e)]),st(Se.core.list.equal,(e,t)=>IS(t[0](e),t[1](e))),st(Se.core.set.has,function(t,n){return n[0](t).has(n[1](t))}),st(Se.core.set.isSubset,function(t,n){return gr.isSuperset(n[1](t),n[0](t))}),st(Se.core.flags.hasAny,(e,t)=>{const n=t[1](e),r=t[0](e);return n?(r&n)!==0:!!r}),st(Se.core.flags.hasAll,(e,t)=>{const n=t[1](e),r=t[0](e);return n?(r&n)===n:!r}),st(Se.structureQuery.type.elementSymbol,(e,t)=>Zi(t[0](e))),st(Se.structureQuery.type.atomName,(e,t)=>X5(t[0](e))),st(Se.structureQuery.type.bondFlags,(e,t)=>{let n=pt.Flag.None;if(typeof t.length=="number")for(let r=0,i=t.length;r<i;r++)n=Qg(n,t[r](e));else for(const r of Object.keys(t))n=Qg(n,t[r](e));return n}),st(Se.structureQuery.type.ringFingerprint,(e,t)=>Zn.elementFingerprint(U8(e,t))),st(Se.structureQuery.type.secondaryStructureFlags,(e,t)=>{let n=ut.Flag.None;if(typeof t.length=="number")for(let r=0,i=t.length;r<i;r++)n=Jg(n,t[r](e));else for(const r of Object.keys(t))n=Jg(n,t[r](e));return n}),rt(Se.structureQuery.filter.pick,(e,t)=>Dt.filters.pick(t[0],t.test)(e)),rt(Se.structureQuery.filter.first,(e,t)=>Dt.filters.first(t[0])(e)),rt(Se.structureQuery.filter.withSameAtomProperties,(e,t)=>Dt.filters.withSameAtomProperties(t[0],t.source,t.property)(e)),rt(Se.structureQuery.filter.intersectedBy,(e,t)=>Dt.filters.areIntersectedBy(t[0],t.by)(e)),rt(Se.structureQuery.filter.within,(e,t)=>{var n,r,i;return Dt.filters.within({query:t[0],target:t.target,minRadius:(n=t["min-radius"])===null||n===void 0?void 0:n.call(t,e),maxRadius:(r=t["max-radius"])===null||r===void 0?void 0:r.call(t,e),elementRadius:t["atom-radius"],invert:(i=t.invert)===null||i===void 0?void 0:i.call(t,e)})(e)}),rt(Se.structureQuery.filter.isConnectedTo,(e,t)=>{var n,r;return Dt.filters.isConnectedTo({query:t[0],target:t.target,disjunct:(n=t.disjunct)===null||n===void 0?void 0:n.call(t,e),invert:(r=t.invert)===null||r===void 0?void 0:r.call(t,e),bondTest:t["bond-test"]})(e)}),rt(Se.structureQuery.generator.atomGroups,function(t,n){return Dt.generators.atoms({entityTest:n["entity-test"],chainTest:n["chain-test"],residueTest:n["residue-test"],atomTest:n["atom-test"],groupBy:n["group-by"]})(t)}),rt(Se.structureQuery.generator.all,function(t){return Dt.generators.all(t)}),rt(Se.structureQuery.generator.empty,function(t){return Dt.generators.none(t)}),rt(Se.structureQuery.generator.bondedAtomicPairs,function(t,n){return Dt.generators.bondedAtomicPairs(n&&n[0])(t)}),rt(Se.structureQuery.generator.rings,function(t,n){var r,i;return Dt.generators.rings((r=n?.fingerprint)===null||r===void 0?void 0:r.call(n,t),(i=n?.["only-aromatic"])===null||i===void 0?void 0:i.call(n,t))(t)}),rt(Se.structureQuery.generator.queryInSelection,function(t,n){var r;return Dt.generators.querySelection(n[0],n.query,(r=n["in-complement"])===null||r===void 0?void 0:r.call(n,t))(t)}),rt(Se.structureQuery.modifier.includeSurroundings,function(t,n){return Dt.modifiers.includeSurroundings(n[0],{radius:n.radius(t),wholeResidues:!!(n["as-whole-residues"]&&n["as-whole-residues"](t)),elementRadius:n["atom-radius"]})(t)}),rt(Se.structureQuery.modifier.surroundingLigands,function(t,n){return Dt.modifiers.surroundingLigands({query:n[0],radius:n.radius(t),includeWater:!!(n["include-water"]&&n["include-water"](t))})(t)}),rt(Se.structureQuery.modifier.wholeResidues,function(t,n){return Dt.modifiers.wholeResidues(n[0])(t)}),rt(Se.structureQuery.modifier.union,function(t,n){return Dt.modifiers.union(n[0])(t)}),rt(Se.structureQuery.modifier.expandProperty,function(t,n){return Dt.modifiers.expandProperty(n[0],n.property)(t)}),rt(Se.structureQuery.modifier.exceptBy,function(t,n){return Dt.modifiers.exceptBy(n[0],n.by)(t)}),rt(Se.structureQuery.modifier.includeConnected,function(t,n){var r,i;return Dt.modifiers.includeConnected({query:n[0],bondTest:n["bond-test"],wholeResidues:!!(n["as-whole-residues"]&&n["as-whole-residues"](t)),layerCount:n["layer-count"]&&n["layer-count"](t)||1,fixedPoint:(i=(r=n["fixed-point"])===null||r===void 0?void 0:r.call(n,t))!==null&&i!==void 0?i:!1})(t)}),rt(Se.structureQuery.modifier.intersectBy,function(t,n){return Dt.modifiers.intersectBy(n[0],n.by)(t)}),rt(Se.structureQuery.combinator.merge,(e,t)=>Dt.combinators.merge(t)(e)),rt(Se.structureQuery.atomProperty.core.elementSymbol,Bt(Xe.atom.type_symbol)),rt(Se.structureQuery.atomProperty.core.vdw,(e,t)=>m2(Xe.atom.type_symbol(t&&t[0]&&t[0](e)||e.element))),rt(Se.structureQuery.atomProperty.core.mass,(e,t)=>zI(Xe.atom.type_symbol(t&&t[0]&&t[0](e)||e.element))),rt(Se.structureQuery.atomProperty.core.atomicNumber,(e,t)=>h2(Xe.atom.type_symbol(t&&t[0]&&t[0](e)||e.element))),rt(Se.structureQuery.atomProperty.core.x,Bt(Xe.atom.x)),rt(Se.structureQuery.atomProperty.core.y,Bt(Xe.atom.y)),rt(Se.structureQuery.atomProperty.core.z,Bt(Xe.atom.z)),rt(Se.structureQuery.atomProperty.core.sourceIndex,Bt(Xe.atom.sourceIndex)),rt(Se.structureQuery.atomProperty.core.operatorName,Bt(Xe.unit.operator_name)),rt(Se.structureQuery.atomProperty.core.operatorKey,Bt(Xe.unit.operator_key)),rt(Se.structureQuery.atomProperty.core.modelIndex,Bt(Xe.unit.model_index)),rt(Se.structureQuery.atomProperty.core.modelLabel,Bt(Xe.unit.model_label)),rt(Se.structureQuery.atomProperty.core.atomKey,(e,t)=>{const n=t&&t[0]&&t[0](e)||e.element;return Un(n.unit.id,n.element)}),rt(Se.structureQuery.atomProperty.macromolecular.residueKey,(e,t)=>ZP(t&&t[0]&&t[0](e)||e.element)),rt(Se.structureQuery.atomProperty.macromolecular.chainKey,(e,t)=>XP(t&&t[0]&&t[0](e)||e.element)),rt(Se.structureQuery.atomProperty.macromolecular.entityKey,(e,t)=>QP(t&&t[0]&&t[0](e)||e.element)),rt(Se.structureQuery.atomProperty.macromolecular.id,Bt(Xe.atom.id)),rt(Se.structureQuery.atomProperty.macromolecular.isHet,(e,t)=>Xe.residue.group_PDB(t&&t[0]&&t[0](e)||e.element)!=="ATOM"),rt(Se.structureQuery.atomProperty.macromolecular.label_atom_id,Bt(Xe.atom.label_atom_id)),rt(Se.structureQuery.atomProperty.macromolecular.label_alt_id,Bt(Xe.atom.label_alt_id)),rt(Se.structureQuery.atomProperty.macromolecular.label_comp_id,Bt(Xe.atom.label_comp_id)),rt(Se.structureQuery.atomProperty.macromolecular.label_seq_id,Bt(Xe.residue.label_seq_id)),rt(Se.structureQuery.atomProperty.macromolecular.label_asym_id,Bt(Xe.chain.label_asym_id)),rt(Se.structureQuery.atomProperty.macromolecular.label_entity_id,Bt(Xe.entity.id)),rt(Se.structureQuery.atomProperty.macromolecular.auth_atom_id,Bt(Xe.atom.auth_atom_id)),rt(Se.structureQuery.atomProperty.macromolecular.auth_comp_id,Bt(Xe.atom.auth_comp_id)),rt(Se.structureQuery.atomProperty.macromolecular.auth_seq_id,Bt(Xe.residue.auth_seq_id)),rt(Se.structureQuery.atomProperty.macromolecular.auth_asym_id,Bt(Xe.chain.auth_asym_id)),rt(Se.structureQuery.atomProperty.macromolecular.pdbx_PDB_ins_code,Bt(Xe.residue.pdbx_PDB_ins_code)),rt(Se.structureQuery.atomProperty.macromolecular.pdbx_formal_charge,Bt(Xe.atom.pdbx_formal_charge)),rt(Se.structureQuery.atomProperty.macromolecular.occupancy,Bt(Xe.atom.occupancy)),rt(Se.structureQuery.atomProperty.macromolecular.B_iso_or_equiv,Bt(Xe.atom.B_iso_or_equiv)),rt(Se.structureQuery.atomProperty.macromolecular.entityType,Bt(Xe.entity.type)),rt(Se.structureQuery.atomProperty.macromolecular.entitySubtype,Bt(Xe.entity.subtype)),rt(Se.structureQuery.atomProperty.macromolecular.entityPrdId,Bt(Xe.entity.prd_id)),rt(Se.structureQuery.atomProperty.macromolecular.entityDescription,Bt(Xe.entity.pdbx_description)),rt(Se.structureQuery.atomProperty.macromolecular.objectPrimitive,Bt(Xe.unit.object_primitive)),rt(Se.structureQuery.atomProperty.macromolecular.isNonStandard,Bt(Xe.residue.isNonStandard)),rt(Se.structureQuery.atomProperty.macromolecular.secondaryStructureKey,Bt(Xe.residue.secondary_structure_key)),rt(Se.structureQuery.atomProperty.macromolecular.secondaryStructureFlags,Bt(Xe.residue.secondary_structure_type)),rt(Se.structureQuery.atomProperty.macromolecular.chemCompType,Bt(Xe.residue.chem_comp_type)),rt(Se.structureQuery.atomProperty.ihm.hasSeqId,function(t,n){const r=t.element,i=n&&n[0]&&n[0](t);return r.unit.kind===Ce.Kind.Atomic?i===Xe.residue.label_seq_id(r):i>=Xe.coarse.seq_id_begin(r)&&i<=Xe.coarse.seq_id_end(r)}),rt(Se.structureQuery.atomProperty.ihm.overlapsSeqIdRange,function(t,n){var r,i;const o=t.element,s=(r=n&&n.beg&&n.beg(t))!==null&&r!==void 0?r:-Number.MAX_VALUE,c=(i=n&&n.end&&n.end(t))!==null&&i!==void 0?i:Number.MAX_VALUE;if(o.unit.kind===Ce.Kind.Atomic){const l=Xe.residue.label_seq_id(o);return l>=s&&l<=c}const a=Xe.coarse.seq_id_begin(o),u=Xe.coarse.seq_id_end(o);return a>=s&&a<=c||u>=s&&u<=c||a<=s&&u>=c}),rt(Se.structureQuery.atomSet.atomCount,function(t,n){return Dt.atomset.atomCount(t)}),rt(Se.structureQuery.atomSet.countQuery,function(t,n){return Dt.atomset.countQuery(n[0])(t)}),rt(Se.structureQuery.atomSet.propertySet,function(t,n){return Dt.atomset.propertySet(n[0])(t)}),rt(Se.structureQuery.bondProperty.order,(e,t)=>e.atomicBond.order),rt(Se.structureQuery.bondProperty.flags,(e,t)=>e.atomicBond.type),rt(Se.structureQuery.bondProperty.key,(e,t)=>e.atomicBond.key),rt(Se.structureQuery.bondProperty.atomA,(e,t)=>e.atomicBond.a),rt(Se.structureQuery.bondProperty.atomB,(e,t)=>e.atomicBond.b),rt(Se.structureQuery.bondProperty.length,(e,t)=>e.atomicBond.length),rt(Se.internal.generator.bundleElement,function(t,n){return v4(n.groupedUnits(t),n.ranges(t),n.set(t))}),rt(Se.internal.generator.bundle,function(t,n){return A4(n.elements(t))(t)}),rt(Se.internal.generator.current,function(t,n){return t.tryGetCurrentSelection()})];function Bt(e){return(t,n)=>e(n&&n[0]&&n[0](t)||t.element)}function Qg(e,t){return e|(pt.isName(t)?pt.fromName(t):pt.Flag.None)}function Jg(e,t){switch(t.toLowerCase()){case"helix":return e|ut.Flag.Helix;case"alpha":return e|ut.Flag.Helix|ut.Flag.HelixAlpha;case"pi":return e|ut.Flag.Helix|ut.Flag.HelixPi;case"310":return e|ut.Flag.Helix|ut.Flag.Helix3Ten;case"beta":return e|ut.Flag.Beta;case"strand":return e|ut.Flag.Beta|ut.Flag.BetaStrand;case"sheet":return e|ut.Flag.Beta|ut.Flag.BetaSheet;case"turn":return e|ut.Flag.Turn;case"bend":return e|ut.Flag.Bend;case"coil":return e|ut.Flag.NA;default:return e}}function U8(e,t){const n=[];if(!t)return n;if(typeof t.length=="number")for(let r=0,i=t.length;r<i;r++)n.push(t[r](e));else{const r=Object.keys(t);for(let i=1,o=r.length;i<o;i++)n.push(t[r[i]](e))}return n}(function(){for(const e of q8)J2.addSymbol(e)})();var oo;(function(e){const t={value:{local:[],localMap:new Map,localMetrics:new Map}};function n(a,u){if(!a||!kt.is(a.sourceData))return!1;const{db:l}=a.sourceData.data,f=l.ma_qa_metric.id.isDefined&&l.ma_qa_metric_local.ordinal_id.isDefined;if(u&&f){const d=u.toLowerCase();for(let m=0,h=l.ma_qa_metric._rowCount;m<h;m++){if(l.ma_qa_metric.mode.value(m)!=="local")continue;if(l.ma_qa_metric.name.value(m).toLowerCase().includes(d))return!0}return!1}else return f}e.isApplicable=n;function r(a,u){var l,f;if(!a)return Et.Select(void 0,[],{label:"Metric",isHidden:!0});const d=(l=pf.get(a).value)===null||l===void 0?void 0:l.local;if(!d)return Et.Select(void 0,[],{label:"Metric",isHidden:!0});const m=d.filter(h=>h.kind===u).map(h=>[h.id,`${h.name} (${h.type})`]);return Et.Select((f=m[0])===null||f===void 0?void 0:f[0],m,{label:"Metric "})}e.getLocalOptions=r;async function i(a,u,l){var f,d;if(!u||!kt.is(u.sourceData))return t;const{ma_qa_metric:m,ma_qa_metric_local:h}=u.sourceData.data.db,{model_id:p,label_asym_id:_,label_seq_id:y,metric_id:v,metric_value:A}=h,{index:g}=u.atomicHierarchy,b=[],C=new Map,I=new Map,S=new Map;for(let T=0,D=m._rowCount;T<D;T++){if(m.mode.value(T)!=="local")continue;const w=m.id.value(T),E=m.name.value(T),k=m.type.value(T),F=new Map,V=k.toLowerCase().includes("plddt"),de=k.replace(/\s/g,"").includes("[0,1]");let W;de?W=[0,1]:V&&(W=[0,100]);let J;const le=E.toLowerCase();le.includes("plddt")?J="pLDDT":le.includes("qmean")&&(J="qmean"),!J&&V&&(J="pLDDT"),!J&&de&&(J="qmean");const K={id:w,kind:J,type:k,name:E,domain:W,valueRange:[Number.MAX_VALUE,-Number.MAX_VALUE],values:F};if(C.set(w,K),b.push(K),I.has(E)){console.warn(`local ma_qa_metric with name '${E}' already added`);continue}I.set(E,F),S.set(w,E)}const P={label_entity_id:"",label_asym_id:"",label_seq_id:0,pdbx_PDB_ins_code:void 0};for(let T=0,D=h._rowCount;T<D;T++){if(p.value(T)!==u.modelNum)continue;const w=_.value(T),E=g.findEntity(w);P.label_entity_id=u.entities.data.id.value(E),P.label_asym_id=w,P.label_seq_id=y.value(T);const k=g.findResidueLabel(P);if(k>=0){const F=C.get(v.value(T));if(!F)continue;const V=A.value(T),de=F.valueRange;V<de[0]&&(de[0]=V),V>de[1]&&(de[1]=V),F.values.set(k,V)}}return{value:{local:Array.from(C.values()),localMap:C,pLDDT:(f=b.find(T=>T.kind==="pLDDT"))===null||f===void 0?void 0:f.values,qmean:(d=b.find(T=>T.kind==="qmean"))===null||d===void 0?void 0:d.values,localMetrics:I}}}e.obtain=i;const o={ma_qa_metric:mt.ma_qa_metric,ma_qa_metric_local_pairwise:mt.ma_qa_metric_local_pairwise};function s(a){const{ma_qa_metric:u,ma_qa_metric_local_pairwise:l}=Fn(o,a),f=[];if(l._rowCount===0)return f;for(let d=0,m=u._rowCount;d<m;d++){if(u.mode.value(d)!=="local-pairwise")continue;const h=u.id.value(d),p=u.name.value(d);p.toLowerCase().includes("pae")&&f.push({id:h,name:p})}return f}e.findModelArchiveCIFPAEMetrics=s;function c(a,u,l){const f=Fn(o,u);if(!f.ma_qa_metric_local_pairwise._rowCount)return;const{ma_qa_metric:d,ma_qa_metric_local_pairwise:m}=f,{model_id:h,label_asym_id_1:p,label_seq_id_1:_,label_asym_id_2:y,label_seq_id_2:v,metric_id:A,metric_value:g}=f.ma_qa_metric_local_pairwise,{index:b}=a.atomicHierarchy;let C;for(let D=0,w=d._rowCount;D<w;D++){if(d.mode.value(D)!=="local-pairwise")continue;const E=d.id.value(D);if(E!==l)continue;const k=d.name.value(D);C={id:E,name:k,residueRange:[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER],valueRange:[Number.MAX_VALUE,-Number.MAX_VALUE],values:{}}}if(!C)return;const{values:I,residueRange:S,valueRange:P}=C,T={label_entity_id:"",label_asym_id:"",label_seq_id:0,pdbx_PDB_ins_code:void 0};for(let D=0,w=m._rowCount;D<w;D++){if(h.value(D)!==a.modelNum||A.value(D)!==l)continue;let E=p.value(D),k=b.findEntity(E);T.label_entity_id=a.entities.data.id.value(k),T.label_asym_id=E,T.label_seq_id=_.value(D);const F=b.findResidueLabel(T);if(F<0)continue;E=y.value(D),k=b.findEntity(E),T.label_entity_id=a.entities.data.id.value(k),T.label_asym_id=E,T.label_seq_id=v.value(D);const V=b.findResidueLabel(T);if(F<0)continue;let de=I[F];de||(de={},I[F]=de);const W=g.value(D);de[V]=W,F<S[0]&&(S[0]=F),V<S[0]&&(S[0]=V),F>S[1]&&(S[1]=F),V>S[1]&&(S[1]=V),W<P[0]&&(P[0]=W),W>P[1]&&(P[1]=W)}return C}e.pairwiseMetricFromModelArchiveCIF=c,e.symbols={pLDDT:no.Dynamic(Dy("ma","quality-assessment.pLDDT",se.Num),a=>{var u,l;const{unit:f,element:d}=a.element;if(!Ce.isAtomic(f))return-1;const m=pf.get(f.model).value;return(l=(u=m?.pLDDT)===null||u===void 0?void 0:u.get(f.model.atomicHierarchy.residueAtomSegments.index[d]))!==null&&l!==void 0?l:-1}),qmean:no.Dynamic(Dy("ma","quality-assessment.qmean",se.Num),a=>{var u,l;const{unit:f,element:d}=a.element;if(!Ce.isAtomic(f))return-1;const m=pf.get(f.model).value;return(l=(u=m?.qmean)===null||u===void 0?void 0:u.get(f.model.atomicHierarchy.residueAtomSegments.index[d]))!==null&&l!==void 0?l:-1})}})(oo||(oo={}));const hf={},pf=Pi.createProvider({label:"QualityAssessment",descriptor:Vr({name:"ma_quality_assessment",symbols:oo.symbols}),type:"static",defaultParams:hf,getParams:e=>hf,isApplicable:e=>oo.isApplicable(e),obtain:async(e,t,n)=>{const r={...Et.getDefaultValues(hf),...n};return await oo.obtain(e,t,r)}}),F8=(...e)=>{const t=e[0].length;if(e.some(n=>n.length!==t))throw new Error("Arrays not equal in length");return Array.from(Array(t)).map((n,r)=>e.map(i=>i[r]))};function L8(e){let t,n;for(const r of e)r!==void 0&&((t===void 0||r<t)&&(t=r),(n===void 0||r>n)&&(n=r));if(!(t===void 0||n===void 0))return[t,n]}function eb(e,t){let n;if("pae"in e)n=e.pae;else if("predicted_aligned_error"in e)n=e.predicted_aligned_error;else return Array.isArray(e)?eb(e[0],t):void 0;const r=Object.fromEntries(t.map(({id:i})=>[i,{}]));if(t.flatMap(({id:i,residues:o})=>Object.values(o).map(({position:s})=>[i,s])).forEach(([i,o],s)=>{r[i][o]=s}),"token_chain_ids"in e&&"token_res_ids"in e&&F8(e.token_chain_ids,e.token_res_ids).some(([i,o],s)=>i in r?r[i]?.[o]!==s:o!==1))throw new Error("Chain ID and residues in json don't match structure");return{chainIdToResidueIdToIndex:r,pae:n}}const tb=e=>{const t=[];let n=NaN,r;for(const{name:i,position:o}of Object.values(e).toSorted((s,c)=>s.position-c.position)){const s=$d(i);if(Number.isNaN(n)&&(n=o),r!==void 0){const c=o-r-1;c>0&&t.push("-".repeat(c))}r=o,t.push(s)}return{sequence:t.join(""),startPosition:n}},G8=e=>{if(!e.atomicConformation.B_iso_or_equiv.isDefined)return;const t=new Map;for(const n of Array.from(e.atomicConformation.B_iso_or_equiv.toArray())){const r=t.get(n)??0;t.set(n,r+1)}if(!(t.size<=1)&&!(Math.max(...t.values())/e.atomicConformation.B_iso_or_equiv.rowCount>.99))return(Lt.isExperimental(e)||Lt.isFromXray(e)||Lt.isFromNmr(e)||Lt.isFromEm(e))&&!Lt.isComputational(e)&&!oo.isApplicable(e,"pLDDT")||t.keys().some(n=>n<1||n>100)?"bfactor":"plddt"};async function*nb(e,t){for(let n=0;n<e.frameCount;n++){const r=await rn.resolveInContext(e.getFrameAtIndex(n));if(!Lt.hasProtein(r)||t.modelNums!==void 0&&!t.modelNums.includes(r.modelNum))continue;const{traceElementIndex:i}=r.atomicHierarchy.derived.residue,o=G8(r),s=Nn.Provider.get(r)?.assemblies??[],c=s.length>0?s?.map(({id:u})=>u):[void 0],a=wt.ofModel(r);for(const u of c){if(t.assemblyIds!==void 0&&(u===void 0||!t.assemblyIds.includes(u)))continue;const l=u!==void 0?await rn.resolveInContext(Si.buildAssembly(a,u)):a,f=new Map,{moleculeType:d}=r.atomicHierarchy.derived.residue;wt.eachAtomicHierarchyElement(l,{chain:h=>{f.set(lt.chainIndex(h),{label_asym_id:Xe.chain.label_asym_id(h),auth_asym_id:Xe.chain.auth_asym_id(h),label_entity_id:Xe.chain.label_entity_id(h),residuesByIndex:new Map})},residue:h=>{const p=f.get(lt.chainIndex(h));if(p===void 0)throw new Error("Chain not called before residue");const _=lt.residueIndex(h);if(p.residuesByIndex.has(_))throw new Error("Residue called twice for the same index");if(!pd(d[_]))return;const y=(()=>{const v=i[_];if(v===-1)return;const A=lt.clone(h);return A.element=v,A})();p.residuesByIndex.set(_,{label_seq_id:Xe.residue.label_seq_id(h),auth_seq_id:Xe.residue.auth_seq_id(h),label_comp_id:Xe.atom.label_comp_id(h),traceAtom:y?{id:Xe.atom.id(y),label_comp_id:Xe.atom.label_comp_id(y),label_atom_id:Xe.atom.label_atom_id(y),x:Xe.atom.x(y),y:Xe.atom.y(y),z:Xe.atom.z(y),B_iso_or_equiv:Xe.atom.B_iso_or_equiv(y)}:void 0})}});const m=f.values().filter(({residuesByIndex:h})=>h.size>0).flatMap(({label_entity_id:h,label_asym_id:p,residuesByIndex:_})=>{const y=r.entities.getEntityIndex(h);if(r.sequence.byEntityKey[y]?.sequence?.kind!=="protein")return[];const A=Object.fromEntries(_.values().map(({auth_seq_id:g,label_comp_id:b,traceAtom:C})=>[g,{position:g,name:b,atoms:C?{[C.label_atom_id]:{id:C.id,name:C.label_atom_id,x:C.x,y:C.y,z:C.z,score:o!==void 0?C.B_iso_or_equiv:void 0}}:{}}]));return[{id:p,residues:A,...tb(A)}]}).toArray();yield{metadata:{entryId:r.entryId,modelNum:r.modelNum,assemblyId:u,suffix:[e.frameCount>1&&(t.modelNums===void 0||t.modelNums.length>1)?r.modelNum.toString():void 0,c.length>1&&(t.assemblyIds===void 0||t.assemblyIds.length>1)?u:void 0].filter(h=>h!==void 0)},scoreType:o,scoreRange:o!==void 0?L8(f.values().flatMap(({residuesByIndex:h})=>h.values()).map(({traceAtom:h})=>h?.B_iso_or_equiv)):void 0,chains:m,pae:t.scoresData?eb(t.scoresData,m):void 0}}}}async function*H8(e,t){const n=await rn.resolveInContext(ed.parse(e));if(n.isError)throw new Error(n.message);for(const r of n.result.blocks){const i=await JE(r).run();for await(const o of nb(i,t)){const s=r.categories.pdbx_struct_mod_residue?.getField("auth_asym_id")?.str,c=r.categories.pdbx_struct_mod_residue?.getField("auth_seq_id")?.int,a=r.categories.pdbx_struct_mod_residue?.getField("parent_comp_id")?.str;if(s&&c&&a){for(let u=0;u<r.categories.pdbx_struct_mod_residue.rowCount;u++){const l=s(u),f=o.chains.find(({id:m})=>m===l);if(f===void 0)continue;const d=f.residues[c(u)];d!==void 0&&(d.name=a(u))}for(const u of o.chains)u.sequence=tb(u.residues).sequence}yield{...o,metadata:{...o.metadata,blockName:r.header}}}}}async function*j8(e,t){const n=await rn.resolveInContext(xS(e));if(n.isError)throw new Error(n.message);const r=await b8(n.result).run();return yield*nb(r,t)}const V8=e=>new Promise((t,n)=>B8(e,(r,i)=>{r!==null?n(r):t(i)}));async function*z8(e){const t=await new Promise((n,r)=>M8(e,{filter:i=>!i.name.endsWith(".zip")&&(/_full_data_\d+\.json$/.test(i.name)||Xg(i.name)!==void 0)},async(i,o)=>i?r(i):n(o)));for(const[n,r]of Object.entries(t)){if(n.endsWith(".json"))continue;let i;const o=n.replace(/_model_(\d+)\.cif$/,"_full_data_$1.json");o in t&&(i=JSON.parse(new TextDecoder().decode(t[o]))),yield*rb(r,n,{scoresData:i})}}async function*rb(e,t,n){if(t.endsWith(".zip"))return yield*z8(e);let r=n.format??Xg(t);if(!r){const{extension:o}=/[^\/\\]*?(?<extension>\.[^\/\\]+)$/m.exec(t)?.groups??{};if(o)throw new Error(`Unsupported format: ${o}`);r={type:"mmCIF",isBinary:!1,isCompressed:!1}}let i=e;switch(r.isCompressed&&(i=await V8(i)),r.isBinary||(i=new TextDecoder().decode(i)),r.type){case"mmCIF":return yield*H8(i,n);case"PDB":if(typeof i!="string")throw new Error("PDB data is expected to be textual");return yield*j8(i,n)}}var Xo={exports:{}},K8={},$8=Object.freeze({__proto__:null,default:K8}),so=ab($8);/**
 * workerpool.js
 * https://github.com/josdejong/workerpool
 *
 * Offload tasks to a pool of workers on node.js and in the browser.
 *
 * @version 9.3.3
 * @date    2025-06-27
 *
 * @license
 * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */var W8=Xo.exports,ib;function Y8(){return ib||(ib=1,function(e,t){(function(n,r){r(t)})(W8,function(n){var r={},i={exports:{}};(function(H){var Z=function(qe){return typeof qe<"u"&&qe.versions!=null&&qe.versions.node!=null&&qe+""=="[object process]"};H.exports.isNode=Z,H.exports.platform=typeof process<"u"&&Z(process)?"node":"browser";var re=H.exports.platform==="node"&&so;H.exports.isMainThread=H.exports.platform==="node"?(!re||re.isMainThread)&&!process.connected:typeof Window<"u",H.exports.cpus=H.exports.platform==="browser"?self.navigator.hardwareConcurrency:so.cpus().length})(i);var o=i.exports,s={},c;function a(){if(c)return s;c=1;function H(qe,xe){var be=this;if(!(this instanceof H))throw new SyntaxError("Constructor must be called with the new operator");if(typeof qe!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var x=[],R=[];this.resolved=!1,this.rejected=!1,this.pending=!0,this[Symbol.toStringTag]="Promise";var Q=function(fe,ve){x.push(fe),R.push(ve)};this.then=function(he,fe){return new H(function(ve,Ie){var Pe=he?Z(he,ve,Ie):ve,Te=fe?Z(fe,ve,Ie):Ie;Q(Pe,Te)},be)};var _e=function(fe){return be.resolved=!0,be.rejected=!1,be.pending=!1,x.forEach(function(ve){ve(fe)}),Q=function(Ie,Pe){Ie(fe)},_e=ue=function(){},be},ue=function(fe){return be.resolved=!1,be.rejected=!0,be.pending=!1,R.forEach(function(ve){ve(fe)}),Q=function(Ie,Pe){Pe(fe)},_e=ue=function(){},be};this.cancel=function(){return xe?xe.cancel():ue(new re),be},this.timeout=function(he){if(xe)xe.timeout(he);else{var fe=setTimeout(function(){ue(new Re("Promise timed out after "+he+" ms"))},he);be.always(function(){clearTimeout(fe)})}return be},qe(function(he){_e(he)},function(he){ue(he)})}function Z(qe,xe,be){return function(x){try{var R=qe(x);R&&typeof R.then=="function"&&typeof R.catch=="function"?R.then(xe,be):xe(R)}catch(Q){be(Q)}}}H.prototype.catch=function(qe){return this.then(null,qe)},H.prototype.always=function(qe){return this.then(qe,qe)},H.prototype.finally=function(qe){var xe=this,be=function(){return new H(function(R){return R()}).then(qe).then(function(){return xe})};return this.then(be,be)},H.all=function(qe){return new H(function(xe,be){var x=qe.length,R=[];x?qe.forEach(function(Q,_e){Q.then(function(ue){R[_e]=ue,x--,x==0&&xe(R)},function(ue){x=0,be(ue)})}):xe(R)})},H.defer=function(){var qe={};return qe.promise=new H(function(xe,be){qe.resolve=xe,qe.reject=be}),qe};function re(qe){this.message=qe||"promise cancelled",this.stack=new Error().stack}re.prototype=new Error,re.prototype.constructor=Error,re.prototype.name="CancellationError",H.CancellationError=re;function Re(qe){this.message=qe||"timeout exceeded",this.stack=new Error().stack}return Re.prototype=new Error,Re.prototype.constructor=Error,Re.prototype.name="TimeoutError",H.TimeoutError=Re,s.Promise=H,s}function u(H,Z){(Z==null||Z>H.length)&&(Z=H.length);for(var re=0,Re=Array(Z);re<Z;re++)Re[re]=H[re];return Re}function l(H,Z){var re=typeof Symbol<"u"&&H[Symbol.iterator]||H["@@iterator"];if(!re){if(Array.isArray(H)||(re=y(H))||Z){re&&(H=re);var Re=0,qe=function(){};return{s:qe,n:function(){return Re>=H.length?{done:!0}:{done:!1,value:H[Re++]}},e:function(R){throw R},f:qe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xe,be=!0,x=!1;return{s:function(){re=re.call(H)},n:function(){var R=re.next();return be=R.done,R},e:function(R){x=!0,xe=R},f:function(){try{be||re.return==null||re.return()}finally{if(x)throw xe}}}}function f(H,Z,re){return(Z=p(Z))in H?Object.defineProperty(H,Z,{value:re,enumerable:!0,configurable:!0,writable:!0}):H[Z]=re,H}function d(H,Z){var re=Object.keys(H);if(Object.getOwnPropertySymbols){var Re=Object.getOwnPropertySymbols(H);Z&&(Re=Re.filter(function(qe){return Object.getOwnPropertyDescriptor(H,qe).enumerable})),re.push.apply(re,Re)}return re}function m(H){for(var Z=1;Z<arguments.length;Z++){var re=arguments[Z]!=null?arguments[Z]:{};Z%2?d(Object(re),!0).forEach(function(Re){f(H,Re,re[Re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(re)):d(Object(re)).forEach(function(Re){Object.defineProperty(H,Re,Object.getOwnPropertyDescriptor(re,Re))})}return H}function h(H,Z){if(typeof H!="object"||!H)return H;var re=H[Symbol.toPrimitive];if(re!==void 0){var Re=re.call(H,Z);if(typeof Re!="object")return Re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Z==="string"?String:Number)(H)}function p(H){var Z=h(H,"string");return typeof Z=="symbol"?Z:Z+""}function _(H){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},_(H)}function y(H,Z){if(H){if(typeof H=="string")return u(H,Z);var re={}.toString.call(H).slice(8,-1);return re==="Object"&&H.constructor&&(re=H.constructor.name),re==="Map"||re==="Set"?Array.from(H):re==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(re)?u(H,Z):void 0}}var v={exports:{}},A={},g;function b(){return g||(g=1,A.validateOptions=function(Z,re,Re){if(Z){var qe=Z?Object.keys(Z):[],xe=qe.find(function(x){return!re.includes(x)});if(xe)throw new Error('Object "'+Re+'" contains an unknown option "'+xe+'"');var be=re.find(function(x){return Object.prototype[x]&&!qe.includes(x)});if(be)throw new Error('Object "'+Re+'" contains an inherited option "'+be+'" which is not defined in the object itself but in its prototype. Only plain objects are allowed. Please remove the option from the prototype or override it with a value "undefined".');return Z}},A.workerOptsNames=["credentials","name","type"],A.forkOptsNames=["cwd","detached","env","execPath","execArgv","gid","serialization","signal","killSignal","silent","stdio","uid","windowsVerbatimArguments","timeout"],A.workerThreadOptsNames=["argv","env","eval","execArgv","stdin","stdout","stderr","workerData","trackUnmanagedFds","transferList","resourceLimits","name"]),A}var C,I;function S(){return I||(I=1,C=`!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).worker=n()}(this,(function(){"use strict";function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t={};var r=function(e,n){this.message=e,this.transfer=n},o={};function i(e,n){var t=this;if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if("function"!=typeof e)throw new SyntaxError("Function parameter handler(resolve, reject) missing");var r=[],o=[];this.resolved=!1,this.rejected=!1,this.pending=!0,this[Symbol.toStringTag]="Promise";var a=function(e,n){r.push(e),o.push(n)};this.then=function(e,n){return new i((function(t,r){var o=e?u(e,t,r):t,i=n?u(n,t,r):r;a(o,i)}),t)};var f=function(e){return t.resolved=!0,t.rejected=!1,t.pending=!1,r.forEach((function(n){n(e)})),a=function(n,t){n(e)},f=d=function(){},t},d=function(e){return t.resolved=!1,t.rejected=!0,t.pending=!1,o.forEach((function(n){n(e)})),a=function(n,t){t(e)},f=d=function(){},t};this.cancel=function(){return n?n.cancel():d(new s),t},this.timeout=function(e){if(n)n.timeout(e);else{var r=setTimeout((function(){d(new c("Promise timed out after "+e+" ms"))}),e);t.always((function(){clearTimeout(r)}))}return t},e((function(e){f(e)}),(function(e){d(e)}))}function u(e,n,t){return function(r){try{var o=e(r);o&&"function"==typeof o.then&&"function"==typeof o.catch?o.then(n,t):n(o)}catch(e){t(e)}}}function s(e){this.message=e||"promise cancelled",this.stack=(new Error).stack}function c(e){this.message=e||"timeout exceeded",this.stack=(new Error).stack}return i.prototype.catch=function(e){return this.then(null,e)},i.prototype.always=function(e){return this.then(e,e)},i.prototype.finally=function(e){var n=this,t=function(){return new i((function(e){return e()})).then(e).then((function(){return n}))};return this.then(t,t)},i.all=function(e){return new i((function(n,t){var r=e.length,o=[];r?e.forEach((function(e,i){e.then((function(e){o[i]=e,0==--r&&n(o)}),(function(e){r=0,t(e)}))})):n(o)}))},i.defer=function(){var e={};return e.promise=new i((function(n,t){e.resolve=n,e.reject=t})),e},s.prototype=new Error,s.prototype.constructor=Error,s.prototype.name="CancellationError",i.CancellationError=s,c.prototype=new Error,c.prototype.constructor=Error,c.prototype.name="TimeoutError",i.TimeoutError=c,o.Promise=i,function(n){var t=r,i=o.Promise,u="__workerpool-cleanup__",s={exit:function(){}},c={addAbortListener:function(e){s.abortListeners.push(e)},emit:s.emit};if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)s.on=function(e,n){addEventListener(e,(function(e){n(e.data)}))},s.send=function(e,n){n?postMessage(e,n):postMessage(e)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");var a;try{a=require("worker_threads")}catch(n){if("object"!==e(n)||null===n||"MODULE_NOT_FOUND"!==n.code)throw n}if(a&&null!==a.parentPort){var f=a.parentPort;s.send=f.postMessage.bind(f),s.on=f.on.bind(f),s.exit=process.exit.bind(process)}else s.on=process.on.bind(process),s.send=function(e){process.send(e)},s.on("disconnect",(function(){process.exit(1)})),s.exit=process.exit.bind(process)}function d(e){return Object.getOwnPropertyNames(e).reduce((function(n,t){return Object.defineProperty(n,t,{value:e[t],enumerable:!0})}),{})}function l(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}s.methods={},s.methods.run=function(e,n){var t=new Function("return ("+e+").apply(this, arguments);");return t.worker=c,t.apply(t,n)},s.methods.methods=function(){return Object.keys(s.methods)},s.terminationHandler=void 0,s.abortListenerTimeout=1e3,s.abortListeners=[],s.terminateAndExit=function(e){var n=function(){s.exit(e)};if(!s.terminationHandler)return n();var t=s.terminationHandler(e);return l(t)?(t.then(n,n),t):(n(),new i((function(e,n){n(new Error("Worker terminating"))})))},s.cleanup=function(e){if(!s.abortListeners.length)return s.send({id:e,method:u,error:d(new Error("Worker terminating"))}),new i((function(e){e()}));var n,t=s.abortListeners.map((function(e){return e()})),r=new i((function(e,t){n=setTimeout((function(){t(new Error("Timeout occured waiting for abort handler, killing worker"))}),s.abortListenerTimeout)})),o=i.all(t).then((function(){clearTimeout(n),s.abortListeners.length||(s.abortListeners=[])}),(function(){clearTimeout(n),s.exit()}));return new i((function(e,n){o.then(e,n),r.then(e,n)})).then((function(){s.send({id:e,method:u,error:null})}),(function(n){s.send({id:e,method:u,error:n?d(n):null})}))};var p=null;s.on("message",(function(e){if("__workerpool-terminate__"===e)return s.terminateAndExit(0);if(e.method===u)return s.cleanup(e.id);try{var n=s.methods[e.method];if(!n)throw new Error('Unknown method "'+e.method+'"');p=e.id;var r=n.apply(n,e.params);l(r)?r.then((function(n){n instanceof t?s.send({id:e.id,result:n.message,error:null},n.transfer):s.send({id:e.id,result:n,error:null}),p=null})).catch((function(n){s.send({id:e.id,result:null,error:d(n)}),p=null})):(r instanceof t?s.send({id:e.id,result:r.message,error:null},r.transfer):s.send({id:e.id,result:r,error:null}),p=null)}catch(n){s.send({id:e.id,result:null,error:d(n)})}})),s.register=function(e,n){if(e)for(var t in e)e.hasOwnProperty(t)&&(s.methods[t]=e[t],s.methods[t].worker=c);n&&(s.terminationHandler=n.onTerminate,s.abortListenerTimeout=n.abortListenerTimeout||1e3),s.send("ready")},s.emit=function(e){if(p){if(e instanceof t)return void s.send({id:p,isEvent:!0,payload:e.message},e.transfer);s.send({id:p,isEvent:!0,payload:e})}},n.add=s.register,n.emit=s.emit}(t),n(t)}));
//# sourceMappingURL=worker.min.js.map
`),C}var P;function T(){if(P)return v.exports;P=1;var H=a(),Z=H.Promise,re=o,Re=b(),qe=Re.validateOptions,xe=Re.forkOptsNames,be=Re.workerThreadOptsNames,x=Re.workerOptsNames,R="__workerpool-terminate__",Q="__workerpool-cleanup__";function _e(){var Ge=he();if(!Ge)throw new Error("WorkerPool: workerType = 'thread' is not supported, Node >= 11.7.0 required");return Ge}function ue(){if(typeof Worker!="function"&&((typeof Worker>"u"?"undefined":_(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function he(){try{return so}catch(Ge){if(_(Ge)==="object"&&Ge!==null&&Ge.code==="MODULE_NOT_FOUND")return null;throw Ge}}function fe(){if(re.platform==="browser"){if(typeof Blob>"u")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var Ge=new Blob([S()],{type:"text/javascript"});return window.URL.createObjectURL(Ge)}else return __dirname+"/worker.js"}function ve(Ge,et){if(et.workerType==="web")return ue(),Ie(Ge,et.workerOpts,Worker);if(et.workerType==="thread")return Ne=_e(),Pe(Ge,Ne,et);if(et.workerType==="process"||!et.workerType)return Te(Ge,Me(et),so);if(re.platform==="browser")return ue(),Ie(Ge,et.workerOpts,Worker);var Ne=he();return Ne?Pe(Ge,Ne,et):Te(Ge,Me(et),so)}function Ie(Ge,et,Ne){qe(et,x,"workerOpts");var ze=new Ne(Ge,et);return ze.isBrowserWorker=!0,ze.on=function(Qe,tt){this.addEventListener(Qe,function(U){tt(U.data)})},ze.send=function(Qe,tt){this.postMessage(Qe,tt)},ze}function Pe(Ge,et,Ne){var ze,Qe;qe(Ne?.workerThreadOpts,be,"workerThreadOpts");var tt=new et.Worker(Ge,m({stdout:(ze=Ne?.emitStdStreams)!==null&&ze!==void 0?ze:!1,stderr:(Qe=Ne?.emitStdStreams)!==null&&Qe!==void 0?Qe:!1},Ne?.workerThreadOpts));return tt.isWorkerThread=!0,tt.send=function(U,z){this.postMessage(U,z)},tt.kill=function(){return this.terminate(),!0},tt.disconnect=function(){this.terminate()},Ne!=null&&Ne.emitStdStreams&&(tt.stdout.on("data",function(U){return tt.emit("stdout",U)}),tt.stderr.on("data",function(U){return tt.emit("stderr",U)})),tt}function Te(Ge,et,Ne){qe(et.forkOpts,xe,"forkOpts");var ze=Ne.fork(Ge,et.forkArgs,et.forkOpts),Qe=ze.send;return ze.send=function(tt){return Qe.call(ze,tt)},et.emitStdStreams&&(ze.stdout.on("data",function(tt){return ze.emit("stdout",tt)}),ze.stderr.on("data",function(tt){return ze.emit("stderr",tt)})),ze.isChildProcess=!0,ze}function Me(Ge){Ge=Ge||{};var et=process.execArgv.join(" "),Ne=et.indexOf("--inspect")!==-1,ze=et.indexOf("--debug-brk")!==-1,Qe=[];return Ne&&(Qe.push("--inspect="+Ge.debugPort),ze&&Qe.push("--debug-brk")),process.execArgv.forEach(function(tt){tt.indexOf("--max-old-space-size")>-1&&Qe.push(tt)}),Object.assign({},Ge,{forkArgs:Ge.forkArgs,forkOpts:Object.assign({},Ge.forkOpts,{execArgv:(Ge.forkOpts&&Ge.forkOpts.execArgv||[]).concat(Qe),stdio:Ge.emitStdStreams?"pipe":void 0})})}function Ve(Ge){for(var et=new Error(""),Ne=Object.keys(Ge),ze=0;ze<Ne.length;ze++)et[Ne[ze]]=Ge[Ne[ze]];return et}function Ue(Ge,et){Object.values(Ge.processing).forEach(function(Ne){var ze;return Ne==null||(ze=Ne.options)===null||ze===void 0?void 0:ze.on(et)}),Object.values(Ge.tracking).forEach(function(Ne){var ze;return Ne==null||(ze=Ne.options)===null||ze===void 0?void 0:ze.on(et)})}function Je(Ge,et){var Ne=this,ze=et||{};this.script=Ge||fe(),this.worker=ve(this.script,ze),this.debugPort=ze.debugPort,this.forkOpts=ze.forkOpts,this.forkArgs=ze.forkArgs,this.workerOpts=ze.workerOpts,this.workerThreadOpts=ze.workerThreadOpts,this.workerTerminateTimeout=ze.workerTerminateTimeout,Ge||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("stdout",function(z){Ue(Ne,{stdout:z.toString()})}),this.worker.on("stderr",function(z){Ue(Ne,{stderr:z.toString()})}),this.worker.on("message",function(z){if(!Ne.terminated)if(typeof z=="string"&&z==="ready")Ne.worker.ready=!0,tt();else{var X=z.id,ge=Ne.processing[X];if(ge!==void 0)z.isEvent?ge.options&&typeof ge.options.on=="function"&&ge.options.on(z.payload):(delete Ne.processing[X],Ne.terminating===!0&&Ne.terminate(),z.error?ge.resolver.reject(Ve(z.error)):ge.resolver.resolve(z.result));else{var ge=Ne.tracking[X];ge!==void 0&&z.isEvent&&ge.options&&typeof ge.options.on=="function"&&ge.options.on(z.payload)}if(z.method===Q){var He=Ne.tracking[z.id];He!==void 0&&(z.error?(clearTimeout(He.timeoutId),He.resolver.reject(Ve(z.error))):(Ne.tracking&&clearTimeout(He.timeoutId),He.resolver.reject(new ot(He.error)))),delete Ne.tracking[X]}}});function Qe(z){Ne.terminated=!0;for(var X in Ne.processing)Ne.processing[X]!==void 0&&Ne.processing[X].resolver.reject(z);Ne.processing=Object.create(null)}function tt(){var z=l(Ne.requestQueue.splice(0)),X;try{for(z.s();!(X=z.n()).done;){var ge=X.value;Ne.worker.send(ge.message,ge.transfer)}}catch(He){z.e(He)}finally{z.f()}}var U=this.worker;this.worker.on("error",Qe),this.worker.on("exit",function(z,X){var ge=`Workerpool Worker terminated Unexpectedly
`;ge+="    exitCode: `"+z+"`\n",ge+="    signalCode: `"+X+"`\n",ge+="    workerpool.script: `"+Ne.script+"`\n",ge+="    spawnArgs: `"+U.spawnargs+"`\n",ge+="    spawnfile: `"+U.spawnfile+"`\n",ge+="    stdout: `"+U.stdout+"`\n",ge+="    stderr: `"+U.stderr+"`\n",Qe(new Error(ge))}),this.processing=Object.create(null),this.tracking=Object.create(null),this.terminating=!1,this.terminated=!1,this.cleaning=!1,this.terminationHandler=null,this.lastId=0}Je.prototype.methods=function(){return this.exec("methods")},Je.prototype.exec=function(Ge,et,Ne,ze){Ne||(Ne=Z.defer());var Qe=++this.lastId;this.processing[Qe]={id:Qe,resolver:Ne,options:ze};var tt={message:{id:Qe,method:Ge,params:et},transfer:ze&&ze.transfer};this.terminated?Ne.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(tt.message,tt.transfer):this.requestQueue.push(tt);var U=this;return Ne.promise.catch(function(z){if(z instanceof Z.CancellationError||z instanceof Z.TimeoutError)return U.tracking[Qe]={id:Qe,resolver:Z.defer(),options:ze,error:z},delete U.processing[Qe],U.tracking[Qe].resolver.promise=U.tracking[Qe].resolver.promise.catch(function(X){if(delete U.tracking[Qe],X instanceof ot)throw X.error;var ge=U.terminateAndNotify(!0).then(function(){throw X},function(He){throw He});return ge}),U.worker.send({id:Qe,method:Q}),U.tracking[Qe].timeoutId=setTimeout(function(){U.tracking[Qe].resolver.reject(z)},U.workerTerminateTimeout),U.tracking[Qe].resolver.promise;throw z})},Je.prototype.busy=function(){return this.cleaning||Object.keys(this.processing).length>0},Je.prototype.terminate=function(Ge,et){var Ne=this;if(Ge){for(var ze in this.processing)this.processing[ze]!==void 0&&this.processing[ze].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}for(var Qe=0,tt=Object.values(Ne.tracking);Qe<tt.length;Qe++){var U=tt[Qe];clearTimeout(U.timeoutId),U.resolver.reject(new Error("Worker Terminating"))}if(Ne.tracking=Object.create(null),typeof et=="function"&&(this.terminationHandler=et),this.busy())this.terminating=!0;else{var z=function(He){if(Ne.terminated=!0,Ne.cleaning=!1,Ne.worker!=null&&Ne.worker.removeAllListeners&&Ne.worker.removeAllListeners("message"),Ne.worker=null,Ne.terminating=!1,Ne.terminationHandler)Ne.terminationHandler(He,Ne);else if(He)throw He};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){z(new Error("worker already killed!"));return}var X=setTimeout(function(){Ne.worker&&Ne.worker.kill()},this.workerTerminateTimeout);this.worker.once("exit",function(){clearTimeout(X),Ne.worker&&(Ne.worker.killed=!0),z()}),this.worker.ready?this.worker.send(R):this.requestQueue.push({message:R}),this.cleaning=!0;return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");z()}},Je.prototype.terminateAndNotify=function(Ge,et){var Ne=Z.defer();return et&&Ne.promise.timeout(et),this.terminate(Ge,function(ze,Qe){ze?Ne.reject(ze):Ne.resolve(Qe)}),Ne.promise};function ot(Ge){this.error=Ge,this.stack=new Error().stack}return v.exports=Je,v.exports._tryRequireWorkerThreads=he,v.exports._setupProcessWorker=Te,v.exports._setupBrowserWorker=Ie,v.exports._setupWorkerThreadWorker=Pe,v.exports.ensureWorkerThreads=_e,v.exports}var D,w;function E(){if(w)return D;w=1;var H=65535;D=Z;function Z(){this.ports=Object.create(null),this.length=0}return Z.prototype.nextAvailableStartingAt=function(re){for(;this.ports[re]===!0;)re++;if(re>=H)throw new Error("WorkerPool debug port limit reached: "+re+">= "+H);return this.ports[re]=!0,this.length++,re},Z.prototype.releasePort=function(re){delete this.ports[re],this.length--},D}var k,F;function V(){if(F)return k;F=1;var H=a(),Z=H.Promise,re=T(),Re=o,qe=E(),xe=new qe;function be(ue,he){typeof ue=="string"?this.script=ue||null:(this.script=null,he=ue),this.workers=[],this.tasks=[],he=he||{},this.forkArgs=Object.freeze(he.forkArgs||[]),this.forkOpts=Object.freeze(he.forkOpts||{}),this.workerOpts=Object.freeze(he.workerOpts||{}),this.workerThreadOpts=Object.freeze(he.workerThreadOpts||{}),this.debugPortStart=he.debugPortStart||43210,this.nodeWorker=he.nodeWorker,this.workerType=he.workerType||he.nodeWorker||"auto",this.maxQueueSize=he.maxQueueSize||1/0,this.workerTerminateTimeout=he.workerTerminateTimeout||1e3,this.onCreateWorker=he.onCreateWorker||function(){return null},this.onTerminateWorker=he.onTerminateWorker||function(){return null},this.emitStdStreams=he.emitStdStreams||!1,he&&"maxWorkers"in he?(x(he.maxWorkers),this.maxWorkers=he.maxWorkers):this.maxWorkers=Math.max((Re.cpus||4)-1,1),he&&"minWorkers"in he&&(he.minWorkers==="max"?this.minWorkers=this.maxWorkers:(R(he.minWorkers),this.minWorkers=he.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&re.ensureWorkerThreads()}be.prototype.exec=function(ue,he,fe){if(he&&!Array.isArray(he))throw new TypeError('Array expected as argument "params"');if(typeof ue=="string"){var ve=Z.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var Ie=this.tasks,Pe={method:ue,params:he,resolver:ve,timeout:null,options:fe};Ie.push(Pe);var Te=ve.promise.timeout;return ve.promise.timeout=function(Ve){return Ie.indexOf(Pe)!==-1?(Pe.timeout=Ve,ve.promise):Te.call(ve.promise,Ve)},this._next(),ve.promise}else{if(typeof ue=="function")return this.exec("run",[String(ue),he],fe);throw new TypeError('Function or string expected as argument "method"')}},be.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var ue=this;return this.exec("methods").then(function(he){var fe={};return he.forEach(function(ve){fe[ve]=function(){return ue.exec(ve,Array.prototype.slice.call(arguments))}}),fe})},be.prototype._next=function(){if(this.tasks.length>0){var ue=this._getWorker();if(ue){var he=this,fe=this.tasks.shift();if(fe.resolver.promise.pending){var ve=ue.exec(fe.method,fe.params,fe.resolver,fe.options).then(he._boundNext).catch(function(){if(ue.terminated)return he._removeWorker(ue)}).then(function(){he._next()});typeof fe.timeout=="number"&&ve.timeout(fe.timeout)}else he._next()}}},be.prototype._getWorker=function(){for(var ue=this.workers,he=0;he<ue.length;he++){var fe=ue[he];if(fe.busy()===!1)return fe}return ue.length<this.maxWorkers?(fe=this._createWorkerHandler(),ue.push(fe),fe):null},be.prototype._removeWorker=function(ue){var he=this;return xe.releasePort(ue.debugPort),this._removeWorkerFromList(ue),this._ensureMinWorkers(),new Z(function(fe,ve){ue.terminate(!1,function(Ie){he.onTerminateWorker({forkArgs:ue.forkArgs,forkOpts:ue.forkOpts,workerThreadOpts:ue.workerThreadOpts,script:ue.script}),Ie?ve(Ie):fe(ue)})})},be.prototype._removeWorkerFromList=function(ue){var he=this.workers.indexOf(ue);he!==-1&&this.workers.splice(he,1)},be.prototype.terminate=function(ue,he){var fe=this;this.tasks.forEach(function(Me){Me.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var ve=function(Ve){xe.releasePort(Ve.debugPort),this._removeWorkerFromList(Ve)},Ie=ve.bind(this),Pe=[],Te=this.workers.slice();return Te.forEach(function(Me){var Ve=Me.terminateAndNotify(ue,he).then(Ie).always(function(){fe.onTerminateWorker({forkArgs:Me.forkArgs,forkOpts:Me.forkOpts,workerThreadOpts:Me.workerThreadOpts,script:Me.script})});Pe.push(Ve)}),Z.all(Pe)},be.prototype.stats=function(){var ue=this.workers.length,he=this.workers.filter(function(fe){return fe.busy()}).length;return{totalWorkers:ue,busyWorkers:he,idleWorkers:ue-he,pendingTasks:this.tasks.length,activeTasks:he}},be.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var ue=this.workers.length;ue<this.minWorkers;ue++)this.workers.push(this._createWorkerHandler())},be.prototype._createWorkerHandler=function(){var ue=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,workerOpts:this.workerOpts,workerThreadOpts:this.workerThreadOpts,script:this.script})||{};return new re(ue.script||this.script,{forkArgs:ue.forkArgs||this.forkArgs,forkOpts:ue.forkOpts||this.forkOpts,workerOpts:ue.workerOpts||this.workerOpts,workerThreadOpts:ue.workerThreadOpts||this.workerThreadOpts,debugPort:xe.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,workerTerminateTimeout:this.workerTerminateTimeout,emitStdStreams:this.emitStdStreams})};function x(ue){if(!Q(ue)||!_e(ue)||ue<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function R(ue){if(!Q(ue)||!_e(ue)||ue<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function Q(ue){return typeof ue=="number"}function _e(ue){return Math.round(ue)==ue}return k=be,k}var de={},W,J;function le(){if(J)return W;J=1;function H(Z,re){this.message=Z,this.transfer=re}return W=H,W}var K;function ae(){return K||(K=1,function(H){var Z=le(),re=a().Promise,Re="__workerpool-terminate__",qe="__workerpool-cleanup__",xe=1e3,be={exit:function(){}},x={addAbortListener:function(ve){be.abortListeners.push(ve)},emit:be.emit};if(typeof self<"u"&&typeof postMessage=="function"&&typeof addEventListener=="function")be.on=function(fe,ve){addEventListener(fe,function(Ie){ve(Ie.data)})},be.send=function(fe,ve){ve?postMessage(fe,ve):postMessage(fe)};else if(typeof process<"u"){var R;try{R=so}catch(fe){if(!(_(fe)==="object"&&fe!==null&&fe.code==="MODULE_NOT_FOUND"))throw fe}if(R&&R.parentPort!==null){var Q=R.parentPort;be.send=Q.postMessage.bind(Q),be.on=Q.on.bind(Q),be.exit=process.exit.bind(process)}else be.on=process.on.bind(process),be.send=function(fe){process.send(fe)},be.on("disconnect",function(){process.exit(1)}),be.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function _e(fe){return Object.getOwnPropertyNames(fe).reduce(function(ve,Ie){return Object.defineProperty(ve,Ie,{value:fe[Ie],enumerable:!0})},{})}function ue(fe){return fe&&typeof fe.then=="function"&&typeof fe.catch=="function"}be.methods={},be.methods.run=function(ve,Ie){var Pe=new Function("return ("+ve+").apply(this, arguments);");return Pe.worker=x,Pe.apply(Pe,Ie)},be.methods.methods=function(){return Object.keys(be.methods)},be.terminationHandler=void 0,be.abortListenerTimeout=xe,be.abortListeners=[],be.terminateAndExit=function(fe){var ve=function(){be.exit(fe)};if(!be.terminationHandler)return ve();var Ie=be.terminationHandler(fe);return ue(Ie)?(Ie.then(ve,ve),Ie):(ve(),new re(function(Pe,Te){Te(new Error("Worker terminating"))}))},be.cleanup=function(fe){if(!be.abortListeners.length)return be.send({id:fe,method:qe,error:_e(new Error("Worker terminating"))}),new re(function(Ue){Ue()});var ve=function(){be.exit()},Ie=function(){be.abortListeners.length||(be.abortListeners=[])},Pe=be.abortListeners.map(function(Ue){return Ue()}),Te,Me=new re(function(Ue,Je){Te=setTimeout(function(){Je(new Error("Timeout occured waiting for abort handler, killing worker"))},be.abortListenerTimeout)}),Ve=re.all(Pe).then(function(){clearTimeout(Te),Ie()},function(){clearTimeout(Te),ve()});return new re(function(Ue,Je){Ve.then(Ue,Je),Me.then(Ue,Je)}).then(function(){be.send({id:fe,method:qe,error:null})},function(Ue){be.send({id:fe,method:qe,error:Ue?_e(Ue):null})})};var he=null;be.on("message",function(fe){if(fe===Re)return be.terminateAndExit(0);if(fe.method===qe)return be.cleanup(fe.id);try{var ve=be.methods[fe.method];if(ve){he=fe.id;var Ie=ve.apply(ve,fe.params);ue(Ie)?Ie.then(function(Pe){Pe instanceof Z?be.send({id:fe.id,result:Pe.message,error:null},Pe.transfer):be.send({id:fe.id,result:Pe,error:null}),he=null}).catch(function(Pe){be.send({id:fe.id,result:null,error:_e(Pe)}),he=null}):(Ie instanceof Z?be.send({id:fe.id,result:Ie.message,error:null},Ie.transfer):be.send({id:fe.id,result:Ie,error:null}),he=null)}else throw new Error('Unknown method "'+fe.method+'"')}catch(Pe){be.send({id:fe.id,result:null,error:_e(Pe)})}}),be.register=function(fe,ve){if(fe)for(var Ie in fe)fe.hasOwnProperty(Ie)&&(be.methods[Ie]=fe[Ie],be.methods[Ie].worker=x);ve&&(be.terminationHandler=ve.onTerminate,be.abortListenerTimeout=ve.abortListenerTimeout||xe),be.send("ready")},be.emit=function(fe){if(he){if(fe instanceof Z){be.send({id:he,isEvent:!0,payload:fe.message},fe.transfer);return}be.send({id:he,isEvent:!0,payload:fe})}},H.add=be.register,H.emit=be.emit}(de)),de}var me=o.platform,De=o.isMainThread,te=o.cpus;function ce(H,Z){var re=V();return new re(H,Z)}var M=r.pool=ce;function B(H,Z){var re=ae();re.add(H,Z)}var j=r.worker=B;function ne(H){var Z=ae();Z.emit(H)}var G=r.workerEmit=ne,$=a(),Y=$.Promise,ie=r.Promise=Y,oe=r.Transfer=le(),pe=r.platform=me,L=r.isMainThread=De,q=r.cpus=te;n.Promise=ie,n.Transfer=oe,n.cpus=q,n.default=r,n.isMainThread=L,n.platform=pe,n.pool=M,n.worker=j,n.workerEmit=G,Object.defineProperty(n,"__esModule",{value:!0})})}(Xo,Xo.exports)),Xo.exports}var Z8=Y8(),_f=sb(Z8);const X8={withFunction(e){return _f.worker({default:e}),null},withEmit(){return{withFunction(e){const t=n=>_f.workerEmit(n);return _f.worker({default:e(t)}),null}}}},Q8=async(e,t)=>{let n,r,i;switch(e.type){case"file":{n=await Ev(e.file),i=e.file.name;break}case"url":{const o=await Xt.get(e.url,{responseType:"arraybuffer",signal:t});n=new Uint8Array(o.data),i=e.url;const s=o.headers["Content-Disposition"];if(typeof s=="string"){const c=s.split("filename=")[1].split(";")[0].trim();c.length>0&&(i=c)}e.scoresDataUrl&&(r=(await Xt.get(e.scoresDataUrl,{responseType:"json",signal:t})).data);break}}return{data:n,fileName:i,scoresData:r}};X8.withEmit().withFunction(e=>async(t,n)=>{e("fetching");const{data:r,fileName:i,scoresData:o}=await Q8(t);return e("parsing"),Array.fromAsync(rb(r,i,{scoresData:o,...n}))})})();
