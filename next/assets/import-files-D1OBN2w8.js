import{bT as er,bU as _t,e as ke,bV as tr,bW as rr,bX as nr,b0 as ir,a_ as sr,aB as or,bY as Ft}from"./index-DD997Ml2.js";var kt={},ar=function(e,t,r,n,o){var c=new Worker(kt[t]||(kt[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return c.onmessage=function(u){var p=u.data,d=p.$e$;if(d){var a=new Error(d[0]);a.code=d[1],a.stack=d[2],o(a,null)}else o(null,p)},c.postMessage(r,n),c},te=Uint8Array,ue=Uint16Array,Qe=Int32Array,Le=new te([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ze=new te([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ke=new te([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Lt=function(e,t){for(var r=new ue(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var o=new Qe(r[30]),n=1;n<30;++n)for(var c=r[n];c<r[n+1];++c)o[c]=c-r[n]<<5|n;return{b:r,r:o}},zt=Lt(Le,2),pt=zt.b,ot=zt.r;pt[28]=258,ot[258]=28;var jt=Lt(ze,0),Nt=jt.b,St=jt.r,Je=new ue(32768);for(var Y=0;Y<32768;++Y){var be=(Y&43690)>>1|(Y&21845)<<1;be=(be&52428)>>2|(be&13107)<<2,be=(be&61680)>>4|(be&3855)<<4,Je[Y]=((be&65280)>>8|(be&255)<<8)>>1}var pe=function(e,t,r){for(var n=e.length,o=0,c=new ue(t);o<n;++o)e[o]&&++c[e[o]-1];var u=new ue(t);for(o=1;o<t;++o)u[o]=u[o-1]+c[o-1]<<1;var p;if(r){p=new ue(1<<t);var d=15-t;for(o=0;o<n;++o)if(e[o])for(var a=o<<4|e[o],f=t-e[o],h=u[e[o]-1]++<<f,w=h|(1<<f)-1;h<=w;++h)p[Je[h]>>d]=a}else for(p=new ue(n),o=0;o<n;++o)e[o]&&(p[o]=Je[u[e[o]-1]++]>>15-e[o]);return p},Ee=new te(288);for(var Y=0;Y<144;++Y)Ee[Y]=8;for(var Y=144;Y<256;++Y)Ee[Y]=9;for(var Y=256;Y<280;++Y)Ee[Y]=7;for(var Y=280;Y<288;++Y)Ee[Y]=8;var De=new te(32);for(var Y=0;Y<32;++Y)De[Y]=5;var cr=pe(Ee,9,0),$t=pe(Ee,9,1),fr=pe(De,5,0),qt=pe(De,5,1),He=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},le=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},Be=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},Ye=function(e){return(e+7)/8|0},Te=function(e,t,r){return(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length),new te(e.subarray(t,r))},Ut=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ne=function(e,t,r){var n=new Error(t||Ut[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,ne),!r)throw n;return n},Xe=function(e,t,r,n){var o=e.length,c=n?n.length:0;if(!o||t.f&&!t.l)return r||new te(0);var u=!r,p=u||t.i!=2,d=t.i;u&&(r=new te(o*3));var a=function(I){var K=r.length;if(I>K){var Z=new te(Math.max(K*2,I));Z.set(r),r=Z}},f=t.f||0,h=t.p||0,w=t.b||0,F=t.l,U=t.d,z=t.m,v=t.n,g=o*8;do{if(!F){f=le(e,h,1);var _=le(e,h+1,3);if(h+=3,_)if(_==1)F=$t,U=qt,z=9,v=5;else if(_==2){var W=le(e,h,31)+257,P=le(e,h+10,15)+4,s=W+le(e,h+5,31)+1;h+=14;for(var i=new te(s),l=new te(19),m=0;m<P;++m)l[Ke[m]]=le(e,h+m*3,7);h+=P*3;for(var y=He(l),C=(1<<y)-1,$=pe(l,y,1),m=0;m<s;){var J=$[le(e,h,C)];h+=J&15;var E=J>>4;if(E<16)i[m++]=E;else{var B=0,b=0;for(E==16?(b=3+le(e,h,3),h+=2,B=i[m-1]):E==17?(b=3+le(e,h,7),h+=3):E==18&&(b=11+le(e,h,127),h+=7);b--;)i[m++]=B}}var L=i.subarray(0,W),S=i.subarray(W);z=He(L),v=He(S),F=pe(L,z,1),U=pe(S,v,1)}else ne(1);else{var E=Ye(h)+4,T=e[E-4]|e[E-3]<<8,M=E+T;if(M>o){d&&ne(0);break}p&&a(w+T),r.set(e.subarray(E,M),w),t.b=w+=T,t.p=h=M*8,t.f=f;continue}if(h>g){d&&ne(0);break}}p&&a(w+131072);for(var ee=(1<<z)-1,x=(1<<v)-1,R=h;;R=h){var B=F[Be(e,h)&ee],k=B>>4;if(h+=B&15,h>g){d&&ne(0);break}if(B||ne(2),k<256)r[w++]=k;else if(k==256){R=h,F=null;break}else{var q=k-254;if(k>264){var m=k-257,O=Le[m];q=le(e,h,(1<<O)-1)+pt[m],h+=O}var V=U[Be(e,h)&x],re=V>>4;V||ne(3),h+=V&15;var S=Nt[re];if(re>3){var O=ze[re];S+=Be(e,h)&(1<<O)-1,h+=O}if(h>g){d&&ne(0);break}p&&a(w+131072);var A=w+q;if(w<S){var j=c-S,G=Math.min(S,A);for(j+w<0&&ne(3);w<G;++w)r[w]=n[j+w]}for(;w<A;++w)r[w]=r[w-S]}}t.l=F,t.p=R,t.b=w,t.f=f,F&&(f=1,t.m=z,t.d=U,t.n=v)}while(!f);return w!=r.length&&u?Te(r,0,w):r.subarray(0,w)},_e=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Oe=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},rt=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var o=r.length,c=r.slice();if(!o)return{t:Ht,l:0};if(o==1){var u=new te(r[0].s+1);return u[r[0].s]=1,{t:u,l:1}}r.sort(function(M,W){return M.f-W.f}),r.push({s:-1,f:25001});var p=r[0],d=r[1],a=0,f=1,h=2;for(r[0]={s:-1,f:p.f+d.f,l:p,r:d};f!=o-1;)p=r[r[a].f<r[h].f?a++:h++],d=r[a!=f&&r[a].f<r[h].f?a++:h++],r[f++]={s:-1,f:p.f+d.f,l:p,r:d};for(var w=c[0].s,n=1;n<o;++n)c[n].s>w&&(w=c[n].s);var F=new ue(w+1),U=at(r[f-1],F,0);if(U>t){var n=0,z=0,v=U-t,g=1<<v;for(c.sort(function(W,P){return F[P.s]-F[W.s]||W.f-P.f});n<o;++n){var _=c[n].s;if(F[_]>t)z+=g-(1<<U-F[_]),F[_]=t;else break}for(z>>=v;z>0;){var E=c[n].s;F[E]<t?z-=1<<t-F[E]++-1:++n}for(;n>=0&&z;--n){var T=c[n].s;F[T]==t&&(--F[T],++z)}U=t}return{t:new te(F),l:U}},at=function(e,t,r){return e.s==-1?Math.max(at(e.l,t,r+1),at(e.r,t,r+1)):t[e.s]=r},bt=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new ue(++t),n=0,o=e[0],c=1,u=function(d){r[n++]=d},p=1;p<=t;++p)if(e[p]==o&&p!=t)++c;else{if(!o&&c>2){for(;c>138;c-=138)u(32754);c>2&&(u(c>10?c-11<<5|28690:c-3<<5|12305),c=0)}else if(c>3){for(u(o),--c;c>6;c-=6)u(8304);c>2&&(u(c-3<<5|8208),c=0)}for(;c--;)u(o);c=1,o=e[p]}return{c:r.subarray(0,n),n:t}},Ae=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Wt=function(e,t,r){var n=r.length,o=Ye(t+2);e[o]=n&255,e[o+1]=n>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var c=0;c<n;++c)e[o+c+4]=r[c];return(o+4+n)*8},Et=function(e,t,r,n,o,c,u,p,d,a,f){_e(t,f++,r),++o[256];for(var h=rt(o,15),w=h.t,F=h.l,U=rt(c,15),z=U.t,v=U.l,g=bt(w),_=g.c,E=g.n,T=bt(z),M=T.c,W=T.n,P=new ue(19),s=0;s<_.length;++s)++P[_[s]&31];for(var s=0;s<M.length;++s)++P[M[s]&31];for(var i=rt(P,7),l=i.t,m=i.l,y=19;y>4&&!l[Ke[y-1]];--y);var C=a+5<<3,$=Ae(o,Ee)+Ae(c,De)+u,J=Ae(o,w)+Ae(c,z)+u+14+3*y+Ae(P,l)+2*P[16]+3*P[17]+7*P[18];if(d>=0&&C<=$&&C<=J)return Wt(t,f,e.subarray(d,d+a));var B,b,L,S;if(_e(t,f,1+(J<$)),f+=2,J<$){B=pe(w,F,0),b=w,L=pe(z,v,0),S=z;var ee=pe(l,m,0);_e(t,f,E-257),_e(t,f+5,W-1),_e(t,f+10,y-4),f+=14;for(var s=0;s<y;++s)_e(t,f+3*s,l[Ke[s]]);f+=3*y;for(var x=[_,M],R=0;R<2;++R)for(var k=x[R],s=0;s<k.length;++s){var q=k[s]&31;_e(t,f,ee[q]),f+=l[q],q>15&&(_e(t,f,k[s]>>5&127),f+=k[s]>>12)}}else B=cr,b=Ee,L=fr,S=De;for(var s=0;s<p;++s){var O=n[s];if(O>255){var q=O>>18&31;Oe(t,f,B[q+257]),f+=b[q+257],q>7&&(_e(t,f,O>>23&31),f+=Le[q]);var V=O&31;Oe(t,f,L[V]),f+=S[V],V>3&&(Oe(t,f,O>>5&8191),f+=ze[V])}else Oe(t,f,B[O]),f+=b[O]}return Oe(t,f,B[256]),f+b[256]},ur=new Qe([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ht=new te(0),lr=function(e,t,r,n,o,c){var u=c.z||e.length,p=new te(n+u+5*(1+Math.ceil(u/7e3))+o),d=p.subarray(n,p.length-o),a=c.l,f=(c.r||0)&7;if(t){f&&(d[0]=c.r>>3);for(var h=ur[t-1],w=h>>13,F=h&8191,U=(1<<r)-1,z=c.p||new ue(32768),v=c.h||new ue(U+1),g=Math.ceil(r/3),_=2*g,E=function(H){return(e[H]^e[H+1]<<g^e[H+2]<<_)&U},T=new Qe(25e3),M=new ue(288),W=new ue(32),P=0,s=0,i=c.i||0,l=0,m=c.w||0,y=0;i+2<u;++i){var C=E(i),$=i&32767,J=v[C];if(z[$]=J,v[C]=$,m<=i){var B=u-i;if((P>7e3||l>24576)&&(B>423||!a)){f=Et(e,d,0,T,M,W,s,l,y,i-y,f),l=P=s=0,y=i;for(var b=0;b<286;++b)M[b]=0;for(var b=0;b<30;++b)W[b]=0}var L=2,S=0,ee=F,x=$-J&32767;if(B>2&&C==E(i-x))for(var R=Math.min(w,B)-1,k=Math.min(32767,i),q=Math.min(258,B);x<=k&&--ee&&$!=J;){if(e[i+L]==e[i+L-x]){for(var O=0;O<q&&e[i+O]==e[i+O-x];++O);if(O>L){if(L=O,S=x,O>R)break;for(var V=Math.min(x,O-2),re=0,b=0;b<V;++b){var A=i-x+b&32767,j=z[A],G=A-j&32767;G>re&&(re=G,J=A)}}}$=J,J=z[$],x+=$-J&32767}if(S){T[l++]=268435456|ot[L]<<18|St[S];var I=ot[L]&31,K=St[S]&31;s+=Le[I]+ze[K],++M[257+I],++W[K],m=i+L,++P}else T[l++]=e[i],++M[e[i]]}}for(i=Math.max(i,m);i<u;++i)T[l++]=e[i],++M[e[i]];f=Et(e,d,a,T,M,W,s,l,y,i-y,f),a||(c.r=f&7|d[f/8|0]<<3,f-=7,c.h=v,c.p=z,c.i=i,c.w=m)}else{for(var i=c.w||0;i<u+a;i+=65535){var Z=i+65535;Z>=u&&(d[f/8|0]=a,Z=u),f=Wt(d,f+1,e.subarray(i,Z))}c.i=u}return Te(p,0,n+Ye(f)+o)},hr=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var r=t,n=9;--n;)r=(r&1&&-306674912)^r>>>1;e[t]=r}return e}(),dr=function(){var e=-1;return{p:function(t){for(var r=e,n=0;n<t.length;++n)r=hr[r&255^t[n]]^r>>>8;e=r},d:function(){return~e}}},pr=function(e,t,r,n,o){if(!o&&(o={l:1},t.dictionary)){var c=t.dictionary.subarray(-32768),u=new te(c.length+e.length);u.set(c),u.set(e,c.length),e=u,o.w=c.length}return lr(e,t.level==null?6:t.level,t.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,o)},vr=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},Pt=function(e,t,r){for(var n=e(),o=e.toString(),c=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/\s+/g,"").split(","),u=0;u<n.length;++u){var p=n[u],d=c[u];if(typeof p=="function"){t+=";"+d+"=";var a=p.toString();if(p.prototype)if(a.indexOf("[native code]")!=-1){var f=a.indexOf(" ",8)+1;t+=a.slice(f,a.indexOf("(",f))}else{t+=a;for(var h in p.prototype)t+=";"+d+".prototype."+h+"="+p.prototype[h].toString()}else t+=a}else r[d]=p}return t},$e=[],mr=function(e){var t=[];for(var r in e)e[r].buffer&&t.push((e[r]=new e[r].constructor(e[r])).buffer);return t},gr=function(e,t,r,n){if(!$e[r]){for(var o="",c={},u=e.length-1,p=0;p<u;++p)o=Pt(e[p],o,c);$e[r]={c:Pt(e[u],o,c),e:c}}var d=vr({},$e[r].e);return ar($e[r].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,d,mr(d),n)},yr=function(){return[te,ue,Qe,Le,ze,Ke,pt,Nt,$t,qt,Je,Ut,pe,He,le,Be,Ye,Te,ne,Xe,et,Bt,Vt]},Bt=function(e){return postMessage(e,[e.buffer])},Vt=function(e){return e&&{out:e.size&&new te(e.size),dictionary:e.dictionary}},wr=function(e,t,r,n,o,c){var u=gr(r,n,o,function(p,d){u.terminate(),c(p,d)});return u.postMessage([e,t],t.consume?[e.buffer]:[]),function(){u.terminate()}},ye=function(e,t){return e[t]|e[t+1]<<8},de=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},nt=function(e,t){return de(e,t)+de(e,t+4)*4294967296},ct=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},_r=function(e,t){var r=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:t.level==9?2:0,e[9]=3,t.mtime!=0&&ct(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){e[3]=8;for(var n=0;n<=r.length;++n)e[n+10]=r.charCodeAt(n)}},kr=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&ne(6,"invalid gzip data");var t=e[3],r=10;t&4&&(r+=(e[10]|e[11]<<8)+2);for(var n=(t>>3&1)+(t>>4&1);n>0;n-=!e[r++]);return r+(t&2)},Sr=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},br=function(e){return 10+(e.filename?e.filename.length+1:0)},Er=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&ne(6,"invalid zlib data"),(e[1]>>5&1)==1&&ne(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Pr(e,t,r){return r||(r=t,t={}),typeof r!="function"&&ne(7),wr(e,t,[yr],function(n){return Bt(et(n.data[0],Vt(n.data[1])))},1,r)}function et(e,t){return Xe(e,{i:2},t&&t.out,t&&t.dictionary)}function In(e,t){t||(t={});var r=dr(),n=e.length;r.p(e);var o=pr(e,t,br(t),8),c=o.length;return _r(o,t),ct(o,c-8,r.d()),ct(o,c-4,n),o}function xr(e,t){var r=kr(e);return r+8>e.length&&ne(6,"invalid gzip data"),Xe(e.subarray(r,-8),{i:2},new te(Sr(e)),t)}function Ir(e,t){return Xe(e.subarray(Er(e),-4),{i:2},t,t)}function Tr(e,t){return e[0]==31&&e[1]==139&&e[2]==8?xr(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?et(e,t):Ir(e,t)}var xt=typeof TextEncoder<"u"&&new TextEncoder,ft=typeof TextDecoder<"u"&&new TextDecoder,Cr=0;try{ft.decode(Ht,{stream:!0}),Cr=1}catch{}var Rr=function(e){for(var t="",r=0;;){var n=e[r++],o=(n>127)+(n>223)+(n>239);if(r+o>e.length)return{s:t,r:Te(e,r-1)};o?o==3?(n=((n&15)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,t+=String.fromCharCode(55296|n>>10,56320|n&1023)):o&1?t+=String.fromCharCode((n&31)<<6|e[r++]&63):t+=String.fromCharCode((n&15)<<12|(e[r++]&63)<<6|e[r++]&63):t+=String.fromCharCode(n)}};function Tn(e,t){var r;if(xt)return xt.encode(e);for(var n=e.length,o=new te(e.length+(e.length>>1)),c=0,u=function(a){o[c++]=a},r=0;r<n;++r){if(c+5>o.length){var p=new te(c+8+(n-r<<1));p.set(o),o=p}var d=e.charCodeAt(r);d<128||t?u(d):d<2048?(u(192|d>>6),u(128|d&63)):d>55295&&d<57344?(d=65536+(d&1047552)|e.charCodeAt(++r)&1023,u(240|d>>18),u(128|d>>12&63),u(128|d>>6&63),u(128|d&63)):(u(224|d>>12),u(128|d>>6&63),u(128|d&63))}return Te(o,0,c)}function Kt(e,t){if(t){for(var r="",n=0;n<e.length;n+=16384)r+=String.fromCharCode.apply(null,e.subarray(n,n+16384));return r}else{if(ft)return ft.decode(e);var o=Rr(e),c=o.s,r=o.r;return r.length&&ne(8),c}}var Or=function(e,t){return t+30+ye(e,t+26)+ye(e,t+28)},Ar=function(e,t,r){var n=ye(e,t+28),o=Kt(e.subarray(t+46,t+46+n),!(ye(e,t+8)&2048)),c=t+46+n,u=de(e,t+20),p=r&&u==4294967295?Mr(e,c):[u,de(e,t+24),de(e,t+42)],d=p[0],a=p[1],f=p[2];return[ye(e,t+10),d,a,o,c+ye(e,t+30)+ye(e,t+32),f]},Mr=function(e,t){for(;ye(e,t)!=1;t+=4+ye(e,t+2));return[nt(e,t+12),nt(e,t+4),nt(e,t+20)]},It=typeof queueMicrotask=="function"?queueMicrotask:typeof setTimeout=="function"?setTimeout:function(e){e()};function Dr(e,t,r){r||(r=t,t={}),typeof r!="function"&&ne(7);var n=[],o=function(){for(var v=0;v<n.length;++v)n[v]()},c={},u=function(v,g){It(function(){r(v,g)})};It(function(){u=r});for(var p=e.length-22;de(e,p)!=101010256;--p)if(!p||e.length-p>65558)return u(ne(13,0,1),null),o;var d=ye(e,p+8);if(d){var a=d,f=de(e,p+16),h=f==4294967295||a==65535;if(h){var w=de(e,p-12);h=de(e,w)==101075792,h&&(a=d=de(e,w+32),f=de(e,w+48))}for(var F=t&&t.filter,U=function(v){var g=Ar(e,f,h),_=g[0],E=g[1],T=g[2],M=g[3],W=g[4],P=g[5],s=Or(e,P);f=W;var i=function(m,y){m?(o(),u(m,null)):(y&&(c[M]=y),--d||u(null,c))};if(!F||F({name:M,size:E,originalSize:T,compression:_}))if(!_)i(null,Te(e,s,s+E));else if(_==8){var l=e.subarray(s,s+E);if(T<524288||E>.8*T)try{i(null,et(l,{out:new te(T)}))}catch(m){i(m,null)}else n.push(Pr(l,{size:T},i))}else i(ne(14,"unknown compression type "+_,1),null);else i(null,null)},z=0;z<a;++z)U(z)}else u(null,{});return o}const Ge={},vt=e=>typeof e=="object"&&e!==null,Fr=e=>vt(e)&&!je.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)&&!(e instanceof Promise),Jt=(e,t)=>{const r=ut.get(e);if(r?.[0]===t)return r[1];const n=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return _t(n,!0),ut.set(e,[t,n]),Reflect.ownKeys(e).forEach(o=>{if(Object.getOwnPropertyDescriptor(n,o))return;const c=Reflect.get(e,o),{enumerable:u}=Reflect.getOwnPropertyDescriptor(e,o),p={value:c,enumerable:u,configurable:!0};if(je.has(c))_t(c,!1);else if(Pe.has(c)){const[d,a]=Pe.get(c);p.value=Jt(d,a())}Object.defineProperty(n,o,p)}),Object.preventExtensions(n)},Lr=(e,t,r,n)=>({deleteProperty(o,c){const u=Reflect.get(o,c);r(c);const p=Reflect.deleteProperty(o,c);return p&&n(["delete",[c],u]),p},set(o,c,u,p){const d=!e()&&Reflect.has(o,c),a=Reflect.get(o,c,p);if(d&&(Tt(a,u)||Fe.has(u)&&Tt(a,Fe.get(u))))return!0;r(c),vt(u)&&(u=er(u)||u);const f=!Pe.has(u)&&jr(u)?Ne(u):u;return t(c,f),Reflect.set(o,c,f,p),n(["set",[c],u,a]),!0}}),Pe=new WeakMap,je=new WeakSet,ut=new WeakMap,Me=[1,1],Fe=new WeakMap;let Tt=Object.is,zr=(e,t)=>new Proxy(e,t),jr=Fr,Nr=Jt,$r=Lr;function Ne(e={}){if(!vt(e))throw new Error("object required");const t=Fe.get(e);if(t)return t;let r=Me[0];const n=new Set,o=(v,g=++Me[0])=>{r!==g&&(r=g,n.forEach(_=>_(v,g)))};let c=Me[1];const u=(v=++Me[1])=>(c!==v&&!n.size&&(c=v,d.forEach(([g])=>{const _=g[1](v);_>r&&(r=_)})),r),p=v=>(g,_)=>{const E=[...g];E[1]=[v,...E[1]],o(E,_)},d=new Map,a=(v,g)=>{const _=!je.has(g)&&Pe.get(g);if(_){if((Ge?"production":void 0)!=="production"&&d.has(v))throw new Error("prop listener already exists");if(n.size){const E=_[2](p(v));d.set(v,[_,E])}else d.set(v,[_])}},f=v=>{var g;const _=d.get(v);_&&(d.delete(v),(g=_[1])==null||g.call(_))},h=v=>(n.add(v),n.size===1&&d.forEach(([_,E],T)=>{if((Ge?"production":void 0)!=="production"&&E)throw new Error("remove already exists");const M=_[2](p(T));d.set(T,[_,M])}),()=>{n.delete(v),n.size===0&&d.forEach(([_,E],T)=>{E&&(E(),d.set(T,[_]))})});let w=!0;const F=$r(()=>w,a,f,o),U=zr(e,F);Fe.set(e,U);const z=[e,u,h];return Pe.set(U,z),Reflect.ownKeys(e).forEach(v=>{const g=Object.getOwnPropertyDescriptor(e,v);"value"in g&&g.writable&&(U[v]=e[v])}),w=!1,U}function qr(e,t,r){const n=Pe.get(e);(Ge?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let o;const c=[],u=n[2];let p=!1;const a=u(f=>{c.push(f),o||(o=Promise.resolve().then(()=>{o=void 0,p&&t(c.splice(0))}))});return p=!0,()=>{p=!1,a()}}function lt(e){const t=Pe.get(e);(Ge?"production":void 0)!=="production"&&!t&&console.warn("Please use proxy object");const[r,n]=t;return Nr(r,n())}function Ur(e){return je.add(e),e}function mt(){return{proxyStateMap:Pe,refSet:je,snapCache:ut,versionHolder:Me,proxyCache:Fe}}const Wr={},Hr=(e,t)=>{const r=ke.useRef(void 0);ke.useEffect(()=>{r.current=nr(e,t)}),ke.useDebugValue(r.current)},Br=Hr,Vr=new WeakMap;function Kr(e,t){const n=ke.useMemo(()=>e&&new WeakMap,[e]),o=ke.useRef(void 0);let c=!0;const u=ke.useSyncExternalStore(ke.useCallback(d=>{const a=qr(e,d);return d(),a},[e,void 0]),()=>{const d=lt(e);try{if(!c&&o.current&&!tr(o.current,d,n,new WeakMap))return o.current}catch{}return d},()=>lt(e));c=!1,ke.useLayoutEffect(()=>{o.current=u}),(Wr?"production":void 0)!=="production"&&Br(u,n);const p=ke.useMemo(()=>new WeakMap,[]);return rr(u,n,p,Vr)}const{proxyStateMap:Gt,snapCache:Jr}=mt(),qe=e=>Gt.has(e),Gr=e=>Symbol.toStringTag in e&&e[Symbol.toStringTag]==="Map"&&Gt.has(e);function Ze(e){const t=[];let r=0;const n=new Map,o=new WeakMap,c=()=>{const a=Jr.get(p),f=a?.[1];if(f&&!o.has(f)){const h=new Map(n);o.set(f,h)}},u=a=>o.get(a)||n;if(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError(`proxyMap:
	initial state must be iterable
		tip: structure should be [[key, value]]`);for(const[a,f]of e)n.set(a,r),t[r++]=f}const p={data:t,index:r,epoch:0,get size(){return qe(this)||c(),u(this).size},get(a){const h=u(this).get(a);if(h===void 0){this.epoch;return}return this.data[h]},has(a){const f=u(this);return this.epoch,f.has(a)},set(a,f){if(!qe(this))throw new Error("Cannot perform mutations on a snapshot");const h=n.get(a);return h===void 0?(n.set(a,this.index),this.data[this.index++]=f):this.data[h]=f,this.epoch++,this},delete(a){if(!qe(this))throw new Error("Cannot perform mutations on a snapshot");const f=n.get(a);return f===void 0?!1:(delete this.data[f],n.delete(a),this.epoch++,!0)},clear(){if(!qe(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,n.clear()},forEach(a){this.epoch,u(this).forEach((h,w)=>{a(this.data[h],w,this)})},*entries(){this.epoch;const a=u(this);for(const[f,h]of a)yield[f,this.data[h]]},*keys(){this.epoch;const a=u(this);for(const f of a.keys())yield f},*values(){this.epoch;const a=u(this);for(const f of a.values())yield this.data[f]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},d=Ne(p);return Object.defineProperties(d,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(d),d}const{proxyStateMap:Zt,snapCache:Zr}=mt(),Ue=e=>typeof e=="object"?Ne({x:e}).x:e,We=e=>Zt.has(e),Qr=e=>Symbol.toStringTag in e&&e[Symbol.toStringTag]==="Set"&&Zt.has(e);function se(e){const t=[],r=new Map;let n=0;const o=new WeakMap,c=()=>{const a=Zr.get(p),f=a?.[1];if(f&&!o.has(f)){const h=new Map(r);o.set(f,h)}},u=a=>o.get(a)||r;if(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("not iterable");for(const a of e)if(!r.has(a)){const f=Ue(a);r.set(f,n),t[n++]=f}}const p={data:t,index:n,epoch:0,get size(){return We(this)||c(),r.size},has(a){const f=u(this),h=Ue(a);return this.epoch,f.has(h)},add(a){if(!We(this))throw new Error("Cannot perform mutations on a snapshot");const f=Ue(a);return r.has(f)||(r.set(f,this.index),this.data[this.index++]=f,this.epoch++),this},delete(a){if(!We(this))throw new Error("Cannot perform mutations on a snapshot");const f=Ue(a),h=r.get(f);return h===void 0?!1:(delete this.data[h],r.delete(f),this.epoch++,!0)},clear(){if(!We(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(a){this.epoch,u(this).forEach(h=>{a(this.data[h],this.data[h],this)})},*values(){this.epoch;const a=u(this);for(const f of a.values())yield this.data[f]},keys(){return this.epoch,this.values()},*entries(){this.epoch;const a=u(this);for(const f of a.values()){const h=this.data[f];yield[h,h]}},toJSON(){return new Set(this.values())},[Symbol.iterator](){return this.values()},get[Symbol.toStringTag](){return"Set"},intersection(a){this.epoch;const f=se(a),h=se();for(const w of this.values())f.has(w)&&h.add(w);return se(h)},union(a){this.epoch;const f=se(),h=se(a);for(const w of this.values())f.add(w);for(const w of h)f.add(w);return se(f)},difference(a){this.epoch;const f=se(),h=se(a);for(const w of this.values())h.has(w)||f.add(w);return se(f)},symmetricDifference(a){this.epoch;const f=se(),h=se(a);for(const w of this.values())h.has(w)||f.add(w);for(const w of h.values())this.has(w)||f.add(w);return se(f)},isSubsetOf(a){this.epoch;const f=se(a);return this.size<=a.size&&[...this.values()].every(h=>f.has(h))},isSupersetOf(a){this.epoch;const f=se(a);return this.size>=a.size&&[...f].every(h=>this.has(h))},isDisjointFrom(a){this.epoch;const f=se(a);return[...this.values()].every(h=>!f.has(h))}},d=Ne(p);return Object.defineProperties(d,{size:{enumerable:!1},data:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(d),d}const Yr=e=>typeof e=="object"&&e!==null;let it;const Xr=()=>(it||(it=mt().refSet),it);function gt(e,t=Xr){if(!Yr(e)||t().has(e))return e;if(Qr(e))return se([...e]);if(Gr(e))return Ze([...e.entries()]);const r=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return Reflect.ownKeys(e).forEach(n=>{r[n]=gt(e[n],t)}),r}const Qt=()=>({experiments:[],experimentIdToThresholds:{},referenceProteinsById:{},proteinIdToReferenceProtein:Ze(),structures:[],aminoAcidsMustMatch:!1,experimentIdToVisibleCrosslinkIds:{},experimentIdToGroupedStructureIds:{},groupDuplicatedCrosslinks:!0,proteinIdToXLMapPosition:{},xlMapSettings:{showBackgroundGrid:!0,showProteinsFromOtherExperiments:!0,showProteinsWithoutCrosslinks:!0,colorCrosslinksBy:"type"}}),ae=Ne(Qt()),en=(e,t=ae)=>{t.experiments.push(...e);for(const{id:r,crosslinks:n}of e)t.experimentIdToThresholds[r]={lower:22,upper:37},t.experimentIdToVisibleCrosslinkIds[r]=se(n.map(({id:o})=>o)),t.experimentIdToGroupedStructureIds[r]=ir([t.structures.map(({id:o})=>o)])},Cn=e=>{const t=ae.experiments.find(r=>r.id===e)?.proteins.map(({id:r})=>r);if(sr(t)){for(const r of t)ae.proteinIdToReferenceProtein.delete(r);for(const r of ae.structures.flatMap(({chainIdToProteinIdToMapping:n})=>Object.values(n)))for(const n of t)r.delete(n)}ae.experiments=ae.experiments.filter(r=>r.id!==e),ae.experimentIdToThresholds=Object.fromEntries(Object.entries(ae.experimentIdToThresholds).filter(([r])=>r!==e)),ae.experimentIdToVisibleCrosslinkIds=Object.fromEntries(Object.entries(ae.experimentIdToVisibleCrosslinkIds).filter(([r])=>r!==e)),ae.experimentIdToGroupedStructureIds=Object.fromEntries(Object.entries(ae.experimentIdToGroupedStructureIds).filter(([r])=>r!==e))},Rn=(e,{lower:t,upper:r})=>{ae.experimentIdToThresholds[e]={lower:t,upper:r}},On=(e,t,r)=>{const n=ae.experiments.find(({id:c})=>c===e);if(!n)throw new Error(`Experiment ${e} not found`);const o=n.proteins.find(({id:c})=>c===t);if(!o)throw new Error(`Protein ${t} not found in experiment ${e}`);"name"in r&&r.name!==void 0&&(o.name=r.name),"sequence"in r&&(o.sequence=r.sequence),"domains"in r&&(o.domains=gt(r.domains))},tn=(e,t)=>{if(!t)return;const r=gt(t);Object.keys(r).forEach(n=>{const o=r[n];o&&(e[n]=o)})},An=e=>{tn(ae,e)},rn=e=>{const t=Qt();return en(e,t),t},Mn=()=>{const{experiments:e,referenceProteinsById:t,structures:r}=Kr(ae);return e.length===0&&Object.keys(t).length===0&&r.length===0},Dn=()=>{const{proteinIdToReferenceProtein:e,experimentIdToVisibleCrosslinkIds:t,structures:r,...n}=lt(ae);return{proteinIdToReferenceProtein:Array.from(e.entries()),experimentIdToVisibleCrosslinkIds:Object.fromEntries(Object.entries(t).map(([o,c])=>[o,Array.from(c)])),structures:r.map(o=>({...o,chainIdToProteinIdToMapping:Object.fromEntries(Object.entries(o.chainIdToProteinIdToMapping).map(([c,u])=>[c,Object.fromEntries(u.entries().map(([p,d])=>[p,d.entries().map(([a,f])=>f!==void 0?[a,f]:[a]).toArray()]))]))})),...n}},nn=({proteinIdToReferenceProtein:e,experimentIdToVisibleCrosslinkIds:t,structures:r,...n})=>({proteinIdToReferenceProtein:Ze(e),experimentIdToVisibleCrosslinkIds:Object.fromEntries(Object.entries(t).map(([o,c])=>[o,se(c)])),structures:r.map(o=>({...o,chainIdToProteinIdToMapping:Object.fromEntries(Object.entries(o.chainIdToProteinIdToMapping).map(([c,u])=>[c,Ze(Object.entries(u).map(([p,d])=>[p,Ur(new Map(d.map(a=>a.length===1?[a[0],void 0]:a)))]))]))})),...n});var Ve={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var sn=Ve.exports,Ct;function on(){return Ct||(Ct=1,function(e,t){((r,n)=>{e.exports=n()})(sn,function r(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},o,c=!n.document&&!!n.postMessage,u=n.IS_PAPA_WORKER||!1,p={},d=0,a={};function f(s){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(i){var l=M(i);l.chunkSize=parseInt(l.chunkSize),i.step||i.chunk||(l.chunkSize=null),this._handle=new z(l),(this._handle.streamer=this)._config=l}).call(this,s),this.parseChunk=function(i,l){var m=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<m){let C=this._config.newline;C||(y=this._config.quoteChar||'"',C=this._handle.guessLineEndings(i,y)),i=[...i.split(C).slice(m)].join(C)}this.isFirstChunk&&P(this._config.beforeFirstChunk)&&(y=this._config.beforeFirstChunk(i))!==void 0&&(i=y),this.isFirstChunk=!1,this._halted=!1;var m=this._partialLine+i,y=(this._partialLine="",this._handle.parse(m,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(i=y.meta.cursor,m=(this._finished||(this._partialLine=m.substring(i-this._baseIndex),this._baseIndex=i),y&&y.data&&(this._rowCount+=y.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),u)n.postMessage({results:y,workerId:a.WORKER_ID,finished:m});else if(P(this._config.chunk)&&!l){if(this._config.chunk(y,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=y=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(y.data),this._completeResults.errors=this._completeResults.errors.concat(y.errors),this._completeResults.meta=y.meta),this._completed||!m||!P(this._config.complete)||y&&y.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),m||y&&y.meta.paused||this._nextChunk(),y}this._halted=!0},this._sendError=function(i){P(this._config.error)?this._config.error(i):u&&this._config.error&&n.postMessage({workerId:a.WORKER_ID,error:i,finished:!1})}}function h(s){var i;(s=s||{}).chunkSize||(s.chunkSize=a.RemoteChunkSize),f.call(this,s),this._nextChunk=c?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(l){this._input=l,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(i=new XMLHttpRequest,this._config.withCredentials&&(i.withCredentials=this._config.withCredentials),c||(i.onload=W(this._chunkLoaded,this),i.onerror=W(this._chunkError,this)),i.open(this._config.downloadRequestBody?"POST":"GET",this._input,!c),this._config.downloadRequestHeaders){var l,m=this._config.downloadRequestHeaders;for(l in m)i.setRequestHeader(l,m[l])}var y;this._config.chunkSize&&(y=this._start+this._config.chunkSize-1,i.setRequestHeader("Range","bytes="+this._start+"-"+y));try{i.send(this._config.downloadRequestBody)}catch(C){this._chunkError(C.message)}c&&i.status===0&&this._chunkError()}},this._chunkLoaded=function(){i.readyState===4&&(i.status<200||400<=i.status?this._chunkError():(this._start+=this._config.chunkSize||i.responseText.length,this._finished=!this._config.chunkSize||this._start>=(l=>(l=l.getResponseHeader("Content-Range"))!==null?parseInt(l.substring(l.lastIndexOf("/")+1)):-1)(i),this.parseChunk(i.responseText)))},this._chunkError=function(l){l=i.statusText||l,this._sendError(new Error(l))}}function w(s){(s=s||{}).chunkSize||(s.chunkSize=a.LocalChunkSize),f.call(this,s);var i,l,m=typeof FileReader<"u";this.stream=function(y){this._input=y,l=y.slice||y.webkitSlice||y.mozSlice,m?((i=new FileReader).onload=W(this._chunkLoaded,this),i.onerror=W(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var y=this._input,C=(this._config.chunkSize&&(C=Math.min(this._start+this._config.chunkSize,this._input.size),y=l.call(y,this._start,C)),i.readAsText(y,this._config.encoding));m||this._chunkLoaded({target:{result:C}})},this._chunkLoaded=function(y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(y.target.result)},this._chunkError=function(){this._sendError(i.error)}}function F(s){var i;f.call(this,s=s||{}),this.stream=function(l){return i=l,this._nextChunk()},this._nextChunk=function(){var l,m;if(!this._finished)return l=this._config.chunkSize,i=l?(m=i.substring(0,l),i.substring(l)):(m=i,""),this._finished=!i,this.parseChunk(m)}}function U(s){f.call(this,s=s||{});var i=[],l=!0,m=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(y){this._input=y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){m&&i.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),i.length?this.parseChunk(i.shift()):l=!0},this._streamData=W(function(y){try{i.push(typeof y=="string"?y:y.toString(this._config.encoding)),l&&(l=!1,this._checkIsFinished(),this.parseChunk(i.shift()))}catch(C){this._streamError(C)}},this),this._streamError=W(function(y){this._streamCleanUp(),this._sendError(y)},this),this._streamEnd=W(function(){this._streamCleanUp(),m=!0,this._streamData("")},this),this._streamCleanUp=W(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function z(s){var i,l,m,y,C=Math.pow(2,53),$=-C,J=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,B=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,b=this,L=0,S=0,ee=!1,x=!1,R=[],k={data:[],errors:[],meta:{}};function q(A){return s.skipEmptyLines==="greedy"?A.join("").trim()==="":A.length===1&&A[0].length===0}function O(){if(k&&m&&(re("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),m=!1),s.skipEmptyLines&&(k.data=k.data.filter(function(I){return!q(I)})),V()){let I=function(K,Z){P(s.transformHeader)&&(K=s.transformHeader(K,Z)),R.push(K)};if(k)if(Array.isArray(k.data[0])){for(var A=0;V()&&A<k.data.length;A++)k.data[A].forEach(I);k.data.splice(0,1)}else k.data.forEach(I)}function j(I,K){for(var Z=s.header?{}:[],H=0;H<I.length;H++){var Q=H,N=I[H],N=((he,D)=>(X=>(s.dynamicTypingFunction&&s.dynamicTyping[X]===void 0&&(s.dynamicTyping[X]=s.dynamicTypingFunction(X)),(s.dynamicTyping[X]||s.dynamicTyping)===!0))(he)?D==="true"||D==="TRUE"||D!=="false"&&D!=="FALSE"&&((X=>{if(J.test(X)&&(X=parseFloat(X),$<X&&X<C))return 1})(D)?parseFloat(D):B.test(D)?new Date(D):D===""?null:D):D)(Q=s.header?H>=R.length?"__parsed_extra":R[H]:Q,N=s.transform?s.transform(N,Q):N);Q==="__parsed_extra"?(Z[Q]=Z[Q]||[],Z[Q].push(N)):Z[Q]=N}return s.header&&(H>R.length?re("FieldMismatch","TooManyFields","Too many fields: expected "+R.length+" fields but parsed "+H,S+K):H<R.length&&re("FieldMismatch","TooFewFields","Too few fields: expected "+R.length+" fields but parsed "+H,S+K)),Z}var G;k&&(s.header||s.dynamicTyping||s.transform)&&(G=1,!k.data.length||Array.isArray(k.data[0])?(k.data=k.data.map(j),G=k.data.length):k.data=j(k.data,0),s.header&&k.meta&&(k.meta.fields=R),S+=G)}function V(){return s.header&&R.length===0}function re(A,j,G,I){A={type:A,code:j,message:G},I!==void 0&&(A.row=I),k.errors.push(A)}P(s.step)&&(y=s.step,s.step=function(A){k=A,V()?O():(O(),k.data.length!==0&&(L+=A.data.length,s.preview&&L>s.preview?l.abort():(k.data=k.data[0],y(k,b))))}),this.parse=function(A,j,G){var I=s.quoteChar||'"',I=(s.newline||(s.newline=this.guessLineEndings(A,I)),m=!1,s.delimiter?P(s.delimiter)&&(s.delimiter=s.delimiter(A),k.meta.delimiter=s.delimiter):((I=((K,Z,H,Q,N)=>{var he,D,X,Se;N=N||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var xe=0;xe<N.length;xe++){for(var ve,Ce=N[xe],ce=0,me=0,ie=0,fe=(X=void 0,new g({comments:Q,delimiter:Ce,newline:Z,preview:10}).parse(K)),we=0;we<fe.data.length;we++)H&&q(fe.data[we])?ie++:(ve=fe.data[we].length,me+=ve,X===void 0?X=ve:0<ve&&(ce+=Math.abs(ve-X),X=ve));0<fe.data.length&&(me/=fe.data.length-ie),(D===void 0||ce<=D)&&(Se===void 0||Se<me)&&1.99<me&&(D=ce,he=Ce,Se=me)}return{successful:!!(s.delimiter=he),bestDelimiter:he}})(A,s.newline,s.skipEmptyLines,s.comments,s.delimitersToGuess)).successful?s.delimiter=I.bestDelimiter:(m=!0,s.delimiter=a.DefaultDelimiter),k.meta.delimiter=s.delimiter),M(s));return s.preview&&s.header&&I.preview++,i=A,l=new g(I),k=l.parse(i,j,G),O(),ee?{meta:{paused:!0}}:k||{meta:{paused:!1}}},this.paused=function(){return ee},this.pause=function(){ee=!0,l.abort(),i=P(s.chunk)?"":i.substring(l.getCharIndex())},this.resume=function(){b.streamer._halted?(ee=!1,b.streamer.parseChunk(i,!0)):setTimeout(b.resume,3)},this.aborted=function(){return x},this.abort=function(){x=!0,l.abort(),k.meta.aborted=!0,P(s.complete)&&s.complete(k),i=""},this.guessLineEndings=function(K,I){K=K.substring(0,1048576);var I=new RegExp(v(I)+"([^]*?)"+v(I),"gm"),G=(K=K.replace(I,"")).split("\r"),I=K.split(`
`),K=1<I.length&&I[0].length<G[0].length;if(G.length===1||K)return`
`;for(var Z=0,H=0;H<G.length;H++)G[H][0]===`
`&&Z++;return Z>=G.length/2?`\r
`:"\r"}}function v(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(s){var i=(s=s||{}).delimiter,l=s.newline,m=s.comments,y=s.step,C=s.preview,$=s.fastMode,J=null,B=!1,b=s.quoteChar==null?'"':s.quoteChar,L=b;if(s.escapeChar!==void 0&&(L=s.escapeChar),(typeof i!="string"||-1<a.BAD_DELIMITERS.indexOf(i))&&(i=","),m===i)throw new Error("Comment character same as delimiter");m===!0?m="#":(typeof m!="string"||-1<a.BAD_DELIMITERS.indexOf(m))&&(m=!1),l!==`
`&&l!=="\r"&&l!==`\r
`&&(l=`
`);var S=0,ee=!1;this.parse=function(x,R,k){if(typeof x!="string")throw new Error("Input must be a string");var q=x.length,O=i.length,V=l.length,re=m.length,A=P(y),j=[],G=[],I=[],K=S=0;if(!x)return ce();if($||$!==!1&&x.indexOf(b)===-1){for(var Z=x.split(l),H=0;H<Z.length;H++){if(I=Z[H],S+=I.length,H!==Z.length-1)S+=l.length;else if(k)return ce();if(!m||I.substring(0,re)!==m){if(A){if(j=[],Se(I.split(i)),me(),ee)return ce()}else Se(I.split(i));if(C&&C<=H)return j=j.slice(0,C),ce(!0)}}return ce()}for(var Q=x.indexOf(i,S),N=x.indexOf(l,S),he=new RegExp(v(L)+v(b),"g"),D=x.indexOf(b,S);;)if(x[S]===b)for(D=S,S++;;){if((D=x.indexOf(b,D+1))===-1)return k||G.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:j.length,index:S}),ve();if(D===q-1)return ve(x.substring(S,D).replace(he,b));if(b===L&&x[D+1]===L)D++;else if(b===L||D===0||x[D-1]!==L){Q!==-1&&Q<D+1&&(Q=x.indexOf(i,D+1));var X=xe((N=N!==-1&&N<D+1?x.indexOf(l,D+1):N)===-1?Q:Math.min(Q,N));if(x.substr(D+1+X,O)===i){I.push(x.substring(S,D).replace(he,b)),x[S=D+1+X+O]!==b&&(D=x.indexOf(b,S)),Q=x.indexOf(i,S),N=x.indexOf(l,S);break}if(X=xe(N),x.substring(D+1+X,D+1+X+V)===l){if(I.push(x.substring(S,D).replace(he,b)),Ce(D+1+X+V),Q=x.indexOf(i,S),D=x.indexOf(b,S),A&&(me(),ee))return ce();if(C&&j.length>=C)return ce(!0);break}G.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:j.length,index:S}),D++}}else if(m&&I.length===0&&x.substring(S,S+re)===m){if(N===-1)return ce();S=N+V,N=x.indexOf(l,S),Q=x.indexOf(i,S)}else if(Q!==-1&&(Q<N||N===-1))I.push(x.substring(S,Q)),S=Q+O,Q=x.indexOf(i,S);else{if(N===-1)break;if(I.push(x.substring(S,N)),Ce(N+V),A&&(me(),ee))return ce();if(C&&j.length>=C)return ce(!0)}return ve();function Se(ie){j.push(ie),K=S}function xe(ie){var fe=0;return fe=ie!==-1&&(ie=x.substring(D+1,ie))&&ie.trim()===""?ie.length:fe}function ve(ie){return k||(ie===void 0&&(ie=x.substring(S)),I.push(ie),S=q,Se(I),A&&me()),ce()}function Ce(ie){S=ie,Se(I),I=[],N=x.indexOf(l,S)}function ce(ie){if(s.header&&!R&&j.length&&!B){var fe=j[0],we=Object.create(null),tt=new Set(fe);let yt=!1;for(let Ie=0;Ie<fe.length;Ie++){let ge=fe[Ie];if(we[ge=P(s.transformHeader)?s.transformHeader(ge,Ie):ge]){let Re,wt=we[ge];for(;Re=ge+"_"+wt,wt++,tt.has(Re););tt.add(Re),fe[Ie]=Re,we[ge]++,yt=!0,(J=J===null?{}:J)[Re]=ge}else we[ge]=1,fe[Ie]=ge;tt.add(ge)}yt&&console.warn("Duplicate headers found and renamed."),B=!0}return{data:j,errors:G,meta:{delimiter:i,linebreak:l,aborted:ee,truncated:!!ie,cursor:K+(R||0),renamedHeaders:J}}}function me(){y(ce()),j=[],G=[]}},this.abort=function(){ee=!0},this.getCharIndex=function(){return S}}function _(s){var i=s.data,l=p[i.workerId],m=!1;if(i.error)l.userError(i.error,i.file);else if(i.results&&i.results.data){var y={abort:function(){m=!0,E(i.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:T,resume:T};if(P(l.userStep)){for(var C=0;C<i.results.data.length&&(l.userStep({data:i.results.data[C],errors:i.results.errors,meta:i.results.meta},y),!m);C++);delete i.results}else P(l.userChunk)&&(l.userChunk(i.results,y,i.file),delete i.results)}i.finished&&!m&&E(i.workerId,i.results)}function E(s,i){var l=p[s];P(l.userComplete)&&l.userComplete(i),l.terminate(),delete p[s]}function T(){throw new Error("Not implemented.")}function M(s){if(typeof s!="object"||s===null)return s;var i,l=Array.isArray(s)?[]:{};for(i in s)l[i]=M(s[i]);return l}function W(s,i){return function(){s.apply(i,arguments)}}function P(s){return typeof s=="function"}return a.parse=function(s,i){var l=(i=i||{}).dynamicTyping||!1;if(P(l)&&(i.dynamicTypingFunction=l,l={}),i.dynamicTyping=l,i.transform=!!P(i.transform)&&i.transform,!i.worker||!a.WORKERS_SUPPORTED)return l=null,a.NODE_STREAM_INPUT,typeof s=="string"?(s=(m=>m.charCodeAt(0)!==65279?m:m.slice(1))(s),l=new(i.download?h:F)(i)):s.readable===!0&&P(s.read)&&P(s.on)?l=new U(i):(n.File&&s instanceof File||s instanceof Object)&&(l=new w(i)),l.stream(s);(l=(()=>{var m;return!!a.WORKERS_SUPPORTED&&(m=(()=>{var y=n.URL||n.webkitURL||null,C=r.toString();return a.BLOB_URL||(a.BLOB_URL=y.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",C,")();"],{type:"text/javascript"})))})(),(m=new n.Worker(m)).onmessage=_,m.id=d++,p[m.id]=m)})()).userStep=i.step,l.userChunk=i.chunk,l.userComplete=i.complete,l.userError=i.error,i.step=P(i.step),i.chunk=P(i.chunk),i.complete=P(i.complete),i.error=P(i.error),delete i.worker,l.postMessage({input:s,config:i,workerId:l.id})},a.unparse=function(s,i){var l=!1,m=!0,y=",",C=`\r
`,$='"',J=$+$,B=!1,b=null,L=!1,S=((()=>{if(typeof i=="object"){if(typeof i.delimiter!="string"||a.BAD_DELIMITERS.filter(function(R){return i.delimiter.indexOf(R)!==-1}).length||(y=i.delimiter),typeof i.quotes!="boolean"&&typeof i.quotes!="function"&&!Array.isArray(i.quotes)||(l=i.quotes),typeof i.skipEmptyLines!="boolean"&&typeof i.skipEmptyLines!="string"||(B=i.skipEmptyLines),typeof i.newline=="string"&&(C=i.newline),typeof i.quoteChar=="string"&&($=i.quoteChar),typeof i.header=="boolean"&&(m=i.header),Array.isArray(i.columns)){if(i.columns.length===0)throw new Error("Option columns is empty");b=i.columns}i.escapeChar!==void 0&&(J=i.escapeChar+$),i.escapeFormulae instanceof RegExp?L=i.escapeFormulae:typeof i.escapeFormulae=="boolean"&&i.escapeFormulae&&(L=/^[=+\-@\t\r].*$/)}})(),new RegExp(v($),"g"));if(typeof s=="string"&&(s=JSON.parse(s)),Array.isArray(s)){if(!s.length||Array.isArray(s[0]))return ee(null,s,B);if(typeof s[0]=="object")return ee(b||Object.keys(s[0]),s,B)}else if(typeof s=="object")return typeof s.data=="string"&&(s.data=JSON.parse(s.data)),Array.isArray(s.data)&&(s.fields||(s.fields=s.meta&&s.meta.fields||b),s.fields||(s.fields=Array.isArray(s.data[0])?s.fields:typeof s.data[0]=="object"?Object.keys(s.data[0]):[]),Array.isArray(s.data[0])||typeof s.data[0]=="object"||(s.data=[s.data])),ee(s.fields||[],s.data||[],B);throw new Error("Unable to serialize unrecognized input");function ee(R,k,q){var O="",V=(typeof R=="string"&&(R=JSON.parse(R)),typeof k=="string"&&(k=JSON.parse(k)),Array.isArray(R)&&0<R.length),re=!Array.isArray(k[0]);if(V&&m){for(var A=0;A<R.length;A++)0<A&&(O+=y),O+=x(R[A],A);0<k.length&&(O+=C)}for(var j=0;j<k.length;j++){var G=(V?R:k[j]).length,I=!1,K=V?Object.keys(k[j]).length===0:k[j].length===0;if(q&&!V&&(I=q==="greedy"?k[j].join("").trim()==="":k[j].length===1&&k[j][0].length===0),q==="greedy"&&V){for(var Z=[],H=0;H<G;H++){var Q=re?R[H]:H;Z.push(k[j][Q])}I=Z.join("").trim()===""}if(!I){for(var N=0;N<G;N++){0<N&&!K&&(O+=y);var he=V&&re?R[N]:N;O+=x(k[j][he],N)}j<k.length-1&&(!q||0<G&&!K)&&(O+=C)}}return O}function x(R,k){var q,O;return R==null?"":R.constructor===Date?JSON.stringify(R).slice(1,25):(O=!1,L&&typeof R=="string"&&L.test(R)&&(R="'"+R,O=!0),q=R.toString().replace(S,J),(O=O||l===!0||typeof l=="function"&&l(R,k)||Array.isArray(l)&&l[k]||((V,re)=>{for(var A=0;A<re.length;A++)if(-1<V.indexOf(re[A]))return!0;return!1})(q,a.BAD_DELIMITERS)||-1<q.indexOf(y)||q.charAt(0)===" "||q.charAt(q.length-1)===" ")?$+q+$:q)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!c&&!!n.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=g,a.ParserHandle=z,a.NetworkStreamer=h,a.FileStreamer=w,a.StringStreamer=F,a.ReadableStreamStreamer=U,n.jQuery&&((o=n.jQuery).fn.parse=function(s){var i=s.config||{},l=[];return this.each(function(C){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var $=0;$<this.files.length;$++)l.push({file:this.files[$],inputElem:this,instanceConfig:o.extend({},i)})}),m(),this;function m(){if(l.length===0)P(s.complete)&&s.complete();else{var C,$,J,B,b=l[0];if(P(s.before)){var L=s.before(b.file,b.inputElem);if(typeof L=="object"){if(L.action==="abort")return C="AbortError",$=b.file,J=b.inputElem,B=L.reason,void(P(s.error)&&s.error({name:C},$,J,B));if(L.action==="skip")return void y();typeof L.config=="object"&&(b.instanceConfig=o.extend(b.instanceConfig,L.config))}else if(L==="skip")return void y()}var S=b.instanceConfig.complete;b.instanceConfig.complete=function(ee){P(S)&&S(ee,b.file,b.inputElem),y()},a.parse(b.file,b.instanceConfig)}}function y(){l.splice(0,1),m()}}),u&&(n.onmessage=function(s){s=s.data,a.WORKER_ID===void 0&&s&&(a.WORKER_ID=s.workerId),typeof s.input=="string"?n.postMessage({workerId:a.WORKER_ID,results:a.parse(s.input,s.config),finished:!0}):(n.File&&s.input instanceof File||s.input instanceof Object)&&(s=a.parse(s.input,s.config))&&n.postMessage({workerId:a.WORKER_ID,results:s,finished:!0})}),(h.prototype=Object.create(f.prototype)).constructor=h,(w.prototype=Object.create(f.prototype)).constructor=w,(F.prototype=Object.create(F.prototype)).constructor=F,(U.prototype=Object.create(f.prototype)).constructor=U,a})}(Ve)),Ve.exports}var an=on();const cn=or(an),fn=({from:e,to:t})=>`${e.proteinId}-${e.linkPosition}-${t.proteinId}-${t.linkPosition}`,un=(e,{position:t,sequence:r})=>`${e}-${t}-${r}`,ln=(e,t)=>e.proteinName!==t.proteinName?e.proteinName.localeCompare(t.proteinName):(e.linkPosition==="ntd"?0:e.linkPosition)-(t.linkPosition==="ntd"?0:t.linkPosition),hn=(e,t)=>Math.min(e.position+e.sequence.length,t.position+t.sequence.length)>Math.max(e.position,t.position),Rt=(e,t)=>{let r=e.replaceAll(/[\[\]\{\}]/g,"");for(const[n,o]of Object.entries(t))r=r.replaceAll(o,n);if(!/^[GAVLITSMCPFYWHKRDENQ]*$/.test(r))throw new Error(`Sequence contains invalid amino acid codes: ${r}`);return r.toUpperCase()};function dn(e){return e.Protein1!==void 0&&e.Protein2!==void 0?[e.Protein1,e.Protein2]:e.Protein!==void 0?[e.Protein,e.Protein]:["Protein","Protein"]}function pn(e,t){if(e.PepPos1!==void 0&&e.PepSeq1!==void 0&&e.PepPos2!==void 0&&e.PepSeq2!==void 0)return[{position:Number.parseInt(e.PepPos1),sequence:Rt(e.PepSeq1,t)},{position:Number.parseInt(e.PepPos2),sequence:Rt(e.PepSeq2,t)}]}function ht(e,t){const r=e.position+t-1;return r===0?{linkPosition:"ntd"}:{linkPositionInPeptide:t,linkPosition:r,aminoAcid:e.sequence[t-1]}}function dt(e){const{aminoAcid:t,position:r}=/^(?<aminoAcid>[ACDEFGHIKLMNPQRSTVWY\{])(?<position>\d+)$/.exec(e)?.groups??{};if(!t||!r)throw new Error(`Residue field is formatted incorrectly: "${e}"`);const n=Number.parseInt(r);return t==="{"||n===0?{linkPosition:"ntd"}:{linkPosition:n,aminoAcid:t}}function Ot(e,t){const r=dt(t);if(r.linkPosition==="ntd")return r;const n=ht(e,r.linkPosition);if(n.linkPosition==="ntd")throw new Error("Link positioned at NTD according to peptide, but not according to residue");if(r.aminoAcid!==n.aminoAcid)throw new Error(`Amino acid according to residue is different then expected from peptide (${JSON.stringify(e)}: ${JSON.stringify(r)}, ${JSON.stringify(n)})`);return n}function At(e,t){return e===0?{linkPosition:"ntd"}:{linkPosition:e,aminoAcid:t}}function vn(e,t){if(t){if(e.LinkPos1!==void 0&&e.LinkPos2!==void 0)return[ht(t[0],Number.parseInt(e.LinkPos1)),ht(t[1],Number.parseInt(e.LinkPos2))];if(e.ResidueInPep1!==void 0&&e.ResidueInPep2!==void 0)return[Ot(t[0],e.ResidueInPep1),Ot(t[1],e.ResidueInPep2)]}if(e.Residue1!==void 0&&e.Residue2!==void 0)return[dt(e.Residue1),dt(e.Residue2)];if(e.Position1!==void 0&&e.Position2!==void 0)return[At(Number.parseInt(e.Position1),e.AminoAcid1),At(Number.parseInt(e.Position2),e.AminoAcid2)];throw new Error("Failed to parse crosslink")}function mn(e,t){const r=dn(e),n=pn(e,t),o=vn(e,n).map((c,u)=>({proteinName:r[u],...c}));return[{peptide:n?.[0],link:o[0]},{peptide:n?.[1],link:o[1]}]}const oe=[];for(let e=0;e<256;++e)oe.push((e+256).toString(16).slice(1));function gn(e,t=0){return(oe[e[t+0]]+oe[e[t+1]]+oe[e[t+2]]+oe[e[t+3]]+"-"+oe[e[t+4]]+oe[e[t+5]]+"-"+oe[e[t+6]]+oe[e[t+7]]+"-"+oe[e[t+8]]+oe[e[t+9]]+"-"+oe[e[t+10]]+oe[e[t+11]]+oe[e[t+12]]+oe[e[t+13]]+oe[e[t+14]]+oe[e[t+15]]).toLowerCase()}let st;const yn=new Uint8Array(16);function wn(){if(!st){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");st=crypto.getRandomValues.bind(crypto)}return st(yn)}const _n=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Mt={randomUUID:_n};function Dt(e,t,r){if(Mt.randomUUID&&!e)return Mt.randomUUID();e=e||{};const n=e.random??e.rng?.()??wn();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,gn(n)}function*kn(e,t){const r=/\s*^>(?<id>[^>\s\r\n]+)([^\S\r\n]+(?<desc>[^>\r\n]*?))?(?<sequence>(?:\r?\n[^\S\r\n]*[A-Za-z-]+)+)$\s*/gmy;let n;for(;(n=r.exec(e))!==null;){n.index===r.lastIndex&&r.lastIndex++;const{id:o,desc:c,sequence:u}=n.groups??{};!o||!u||(yield{id:o.trim(),desc:c?.trim(),sequence:u.split(/\s+/).join("")})}}function Fn(e){const t=/\s*^>(?<id>[^>\s\r\n]+)([^\S\r\n]+(?<desc>[^>\r\n]*?))?(?<sequence>(?:\r?\n[^\S\r\n]*[A-Za-z-]+)+)$\s*/gmy;return t.test(e)&&e.replaceAll(t,"").trim().length===0}function Ln(e){return e.map(({id:t,desc:r,sequence:n})=>`>${t}${r?` ${r}`:""}
${n}`).join(`

`)}const Yt=async(e,t=null,r={M:"Mox",C:"Ccm"},n={},o)=>new Promise((c,u)=>{cn.parse(e,{header:t===null,skipEmptyLines:!0,complete:async p=>{try{const d={},a={},f=(v,g)=>{if(!(v in d))d[v]=Dt(),a[d[v]]={interProteinCrosslinks:[],intraProteinCrosslinks:[],homoMultimericCrosslinks:[],linkPositionToAminoAcid:new Map,...g?{havePeptides:!0,peptides:[],peptideHashToIndex:{},positionToPeptideIndices:new Map}:{havePeptides:!1}};else if(a[d[v]].havePeptides!==g)throw new Error("Some rows have peptides while others don't");return d[v]},h=(v,g)=>{const _=a[v];if(!_.havePeptides)throw new Error("Some rows have peptides while others don't");const{peptides:E,peptideHashToIndex:T,positionToPeptideIndices:M}=_,W=un(v,g);if(W in T)return T[W];const P=E.push(g)-1;T[W]=P;for(let s=g.position;s<g.position+g.sequence.length;s++)M.has(s)||M.set(s,[]),M.get(s).push(P);return P},w=({proteinName:v,...g},_)=>{const E=f(v,!!_),T=_?h(E,_):void 0;if(g.linkPosition==="ntd")return a[E].linkPositionToAminoAcid.set("ntd",void 0),{...g,proteinId:E,peptideIndex:T};const M=a[E].linkPositionToAminoAcid.get(g.linkPosition);if(M===void 0)a[E].linkPositionToAminoAcid.set(g.linkPosition,g.aminoAcid);else if(g.aminoAcid!==void 0&&M!==g.aminoAcid)throw new Error(`Amino acids clash: position ${g.linkPosition} in protein "${v}" is specified with both ${M} and ${g.aminoAcid}`);if(T===void 0){if("linkPositionInPeptide"in g)throw new Error;return{...g,proteinId:E}}if(!("linkPositionInPeptide"in g))throw new Error;return{...g,proteinId:E,peptideIndex:T}},F=v=>{const[g,_]=mn(v,r).toSorted(({link:E},{link:T})=>ln(E,T));return{from:w(g.link,g.peptide),to:w(_.link,_.peptide),homoMultimeric:g.link.proteinName===_.link.proteinName?g.peptide&&_.peptide?hn(g.peptide,_.peptide):g.link.linkPosition===_.link.linkPosition:!1,score:v.Score!==void 0?Number.parseFloat(v.Score):void 0}};let U;const z={};p.data.forEach((v,g)=>{if(t!==null){if(t.length!==v.length)throw new Error("The number of columns doesn't match the number of rows");v=Object.fromEntries(v.map((T,M)=>[t[M],T]))}else v.ID&&(v.id=v.ID);if(v.isDecoy!==void 0&&v.isDecoy.toLowerCase()==="true"||o&&(v.Protein1?.startsWith(o)||v.Protein2?.startsWith(o)))return;if(U===void 0)U=v.id!==void 0;else if(U!==(v.id!==void 0))throw new Error("The table contains rows both with and without id field. Either make sure that all the rows have id, or remove the id column to use line numbers instead.");const _={id:v.id??String(g+1),...F(v)};_.from.proteinId===_.to.proteinId?(a[_.from.proteinId].intraProteinCrosslinks.push(_.id),_.homoMultimeric&&a[_.from.proteinId].homoMultimericCrosslinks.push(_.id)):(a[_.from.proteinId].interProteinCrosslinks.push(_.id),a[_.to.proteinId].interProteinCrosslinks.push(_.id));const E=fn(_);E in z||(z[E]=[]),z[E].push(_)});for(const[v,g]of Object.entries(a))if(g.havePeptides)for(const[_,E]of g.positionToPeptideIndices.entries()){if(E.length===1)continue;const T=new Set(E.map(M=>g.peptides[M].sequence[_-g.peptides[M].position]));if(T.size>1)throw new Error(`Peptides clash: position ${_} in protein "${v}" is specified with multiple amino acids: ${Array.from(T)}`)}c({id:Dt(),name:e instanceof File?e.name.replace(/\.csv$/i,""):void 0,crosslinks:Object.values(z).flatMap(v=>v),proteins:Object.entries(d).map(([v,g])=>{const _=v.replace(/^>/,""),{linkPositionToAminoAcid:E,interProteinCrosslinks:T,intraProteinCrosslinks:M,homoMultimericCrosslinks:W,...P}=a[g];return{id:g,name:_,linkPositionToAminoAcid:Object.fromEntries(E.entries()),peptides:P.havePeptides?P.peptides:void 0,interProteinCrosslinks:T,intraProteinCrosslinks:M,homoMultimericCrosslinks:W,sequence:n[_]}})})}catch(d){u(d)}},error:p=>u(p)})}),Sn=["Score","m/z","Charge","M+H+","Calculated Mass","Deviation in ppm","PepSeq1","Protein1","PepPos1","PepEnd1","PepSeq2","Protein2","PepPos2","PepEnd2","Scan number","is Selected in Table","Candidate identifier","Folder Number","Retention time in sec","miscellaneous","ResidueInPep1","ResidueInPep2","All linkage positions","Spectrum UUID","local False discovery rate","shortest distance in pdb","Light/Heavy(1/2)","pepScore1","pepScore2","xLinkScore","resultId","MS1intensity","finalScoreComponent"],bn=(e,t)=>new Promise((r,n)=>{Dr(e,{filter:o=>["Result.csv","properties.mxf","db.fasta"].includes(o.name)},async(o,c)=>{if(o)return n(o);try{const u={};if(c["db.fasta"])for(const{id:h,sequence:w}of kn(new TextDecoder().decode(c["db.fasta"])))u[h]=w;let p="DEC_";const d={};let a;for(const h of new TextDecoder().decode(c["properties.mxf"]).split(`
`)){if(h.startsWith("VARMODIFICATION")||h.startsWith("STATMODIFICATION")){a="modification";continue}else if(h.startsWith("END")){a=void 0;continue}if(a==="modification"){const{from:w,to:F}=/(?<from>[A-Za-z]+);(?<to>[A-Za-z]+)/.exec(h)?.groups??{};if(!w||!F)continue;d[w]=F}else if(a===void 0){const{value:w}=/^DECOYIDENTIFIER=(?<value>\w+)/.exec(h)?.groups??{};w&&(p=w)}}const f=await Yt(new TextDecoder().decode(c["Result.csv"]),Sn,d,u,p);t&&(f.name=t),r(f)}catch(u){n(u)}})}),En=async e=>nn(JSON.parse(Kt(Tr(await Ft(e))))),Xt=async e=>{if(/\.csv$/i.test(e.name))return Yt(e);const t=/\.zhrm$/i;if(t.test(e.name))return bn(await Ft(e),e.name.replace(t,""));throw new Error("Invalid file format")},Pn=async e=>{const t=await Promise.all(e.map(Xt));return rn(t)},zn=Object.freeze(Object.defineProperty({__proto__:null,buildStoreFromExperimentFiles:Pn,readExperimentFile:Xt,readProjectFile:En},Symbol.toStringTag,{value:"Module"}));export{tn as _,Kr as a,ae as b,Dt as c,gt as d,Ln as e,Cn as f,Ze as g,Mn as h,Xt as i,en as j,Dn as k,In as l,Tn as m,An as n,zn as o,kn as p,Ur as r,Rn as s,On as u,Fn as v};
